/**
 * Auryc JavaScript Client-Side Library v2.4.0, 1600830008047
 * (c) Copyright 2020, Auryc Inc. https://www.auryc.com
 */

!function(){var win,win="undefined"==typeof window?{navigator:{},console:{},location:{},document:{}}:window,windowNavigator=win.navigator,windowConsole=win.console,windowLocation=win.location,windowDocument=win.document;function log(e,t){}function warn(e){}function error(e){}function critical(e){}function isLiveDebug(){return 0<window.location.href.indexOf("#ardebug")||window.localStorage&&"true"===window.localStorage.getItem("ardebug")}function liveDebug(e){isLiveDebug()&&console.log(e)}var logger={log:log,warn:warn,error:error,critical:critical,isLiveDebug:isLiveDebug,liveDebug:liveDebug},time={FULL_DAY:864e5,MAX_DOMLOAD_TIME:6e4,MIN_DOMLOAD_TIME:10},symbols={CANCELED:"ic",CANCELEDPERMANENT:"icp",SESSION:"SESS",DATA:"DATA",PERMANENT:"PERMANENT",EXPIRED:"expired",SESSIONID:"sessid",APITOKEN:"at",DEFINEDEVENTS:"DEFINEDEVENTS",FBTHANKYOU:"FBTHANKYOU",FEEDBACKCONTENT:"FEEDBACKCONTENT",FEEDBACKCONTENT_DESKTOP:"FEEDBACKCONTENT_DESKTOP",GLOBALSESSIONID:"gsid",UNDEFINED:"undefined",DEVICE:"auryc20160418",OVERRIDEFLAG:"aurycoverrideflag",SPLITFLAG:"_auryc_split_",FEEDBACKINVITE:"FEEDBACKINVITE",FEEDBACKINVITE_DESKTOP:"FEEDBACKINVITE_DESKTOP",IDENTITY_IN_SESSION:"identity_in_session",IDENTITY_INIT:"identity_init",INTEGRATION_FLAG:"auryc_integration"},css={PX:"px",H1:"h1",TOP:"top",LEFT:"left",AUTO:"auto",FB_QB_CHOOSE:"auryc-feedback-question-select-choose",FB_TEXTAREA:"auryc-feedback-fbtarea",SELECT:"select",DEFAULT_HEIGHT:35,TEXT_LIMIT:1e3,FB_TOPIC:"auryc-feedback-fbquestiongroup-shown",FB_QUESTION:"auryc-feedback-fbquestion",FBMODAL_CONTAINER:"auryc-fbmodal-container",FB_QID:"questionid",FB_QTYPE:"data-question-type",CHECKBOX:"CHECKBOX",RADIO:"RADIO",HIDDEN:"HIDDEN",REQUIRED:"REQUIRED",INVALID:"data-ar-invalid",HEADING_H1:"auryc-feedback-fbform-headtag auryc-feedback-fbform-headtag-h1",FB_SUBMIT:"post-fb-resp-button",FB_TOPIC_SEL:"auryc-feedback-fbquestion .auryc-fb-questiongroup-selector"},keyCodes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},record={mutatationConfig:{ignoreNodeContentsList:["hr","script","title","br","meta","svg"],ignoreAttrList:["script","meta","title","data-ae_domuel","data-ae_domsib","_au_pathid","data-content","data-original-title"]},tags:{SVG:"svg",SELECT:"select",IH:"innerHTML"},cache:{minLength:100,maxItems:500,maxSize:5e6},throttler:{RESIZE:700,ORIENTATION_CHANGE:200,CURSOR_INFO_INTERVAL:500,SERIALIZE_INPUT_DELAY:100,SCROLL_INTERVAL:150,WIN_EVENT_THROTTLE:200,MOUSE_MOVE_INTERVAL:150,DOM_MUT_DELAY:500,DOM_MUT_MAX_NUM:1e3,DOM_MUT_MAX_SIZE:1e7},timeOffset:{WIN_SIZE:-350},upload:{fragLength:1e5,delim:"__D__",defaultTransmitInterval:10,defaultMobileTransmitInterval:5,defaultMaxTransmitInterval:20,defaultMobileMaxTransmitInterval:10,initTimeOffset:15e3,wait:2e3,shortWait:200,pingWaitInterval:2e3},form:{inputTypes:"input, select, textarea"},attr:{FEC:"firstElementChild",virtualStyleId:"_arblb_"},dynamicCss:'style[data-styled-components],style[data-emotion],style[data-styled],style[id="react-native-stylesheet"],style[data-glamor]',inspect:JSON.parse('{"timingMeasure":["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],"navigationMeasure":["name","startTime","duration","initiatorType","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","unloadEventStart","unloadEventEnd","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","type","redirectCount","decodedBodySize","encodedBodySize","transferSize"],"resourceMeasure":["name","startTime","duration","initiatorType","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","decodedBodySize","encodedBodySize","transferSize"],"memoryMeasure":["jsHeapSizeLimit","totalJSHeapSize","usedJSHeapSize"],"userTimingMeasure":["name","startTime","duration"],"ajaxType":["xmlhttprequest","fetch"],"resHeaderAllowed":["accept-patch","accept-ranges","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-allow-origin","access-control-expose-headers","access-control-max-age","age","allow","alt-svc","cache-control","connection","content-disposition","content-encoding","content-language","content-length","content-location","content-md5","content-range","content-type","date","delta-base","etag","expires","im","last-modified","link","location","p3p","permanent","permanent","pragma","proxy-authenticate","public-key-pins","retry-after","server","status","strict-transport-security","tk","trailer","transfer-encoding","upgrade","vary","via","warning","www-authenticate","x-frame-options"],"reqHeaderAllowed":["accept","accept-charset","accept-datetime","accept-encoding","accept-language","access-control-request-headers","access-control-request-method","cache-control","connection","content-length","content-md5","content-type","date","expect","forwarded","from","host","if-match","if-modified-since","if-none-match","if-range","if-unmodified-since","max-forwards","origin","pragma","range","referrer","te","upgrade","user-agent","via","warning"]}')},events={PAGEVIEWTRIGGER:"pageViewTrigger",URLCHANGETRIGGER:"urlChangeTrigger",IDENTIFYTRIGGER:"identifyTrigger",PAGEVIEWTRACKER:"pageview",FEEDBACKTRIGGER:"feedbackTrigger",FEEDBACKTRACKER:"feedback",CLICKTRACKER:"click",CLICKTRIGGER:"clickTrigger",PINGTRACKER:"ping",IDENTIFYTRACKER:"identify",PINGTRIGGER:"pingTrigger",USERIDENTIFY:"userIdentify",USERPROP:"up",TRACKCUSTOMEVENT:"trackCustomEvent",SESSIONPROP:"_ar_sp_",INTERNALSESSIONPROP:"_isp_",SESSIONTIME:"st",SESSIONDURATION:"session_duration",USERID:"userId",UBTINIT:"ubt_init",IDENTITYVALUE:"iv",UBT_INDEPENDENT:"ubt_independent",PV_START_TS:"pst",TRANSMITTING:"ut",WRITABLE:"ut",TRANSMIT_ENABLED:"ut",CANCELED:"uc",NEW_SESSION:"new_session",VISIT_DURATION:18e5,SESSION_EXP:"se",WIN_SIZE:"ws",CUSTOM_EVENT:"CUSTOM",READY:"ready",IDGEN:{behavior:50,sessions:64,interactions:0}},uba_event_type={CUSTOM_EVENT:"CUSTOM"},storage={EVENT_CACHE_MAX_LENGTH:1e7,WINNAME_MAX_LENGTH:1e7,MAX_PROPERTIES:100,MAX_DEV_CONSOLE_EVENT:20,CONSOLE_MSG_LENGTH:1e3,CONSOLE_MSG_STACKTRACE_LENGTH:1e4,DEFAULT_LIMIT:8e5,MAX_PACKET_SIZE:2e6,AJAX_URL_LIMIT:256,AJAX_RESPONSE_LIMIT:32,MAX_LATENCY:3e4,LATENCY_BUCKET_WIDTH:3e3,RETRY_LIMIT:10,SESSIONID:"sid",VIEWID:"vid",LASTVIEWID:"last_vid",USERID:"uid",HOST:"host",ACTIVE_VIEWID:"active_viewid",SESSION_METADATA:"session_md",TRANSMIT_ENABLED:"te",SESSION_STATE:"ss",PV:"pv",PVCT:"pv_count",IS_NEW:"isNew",DEFAULT_DATALAYER_PREFIX:"auryc.s",DEFAULT_COOKIE_DURATION:730,SCOPE:{SESSION:{TAB:"TAB",BROWSER:"BROWSER"}},ID_LENGTH:32,IDENTITY_KEY:"au_identity",DOM_MUT_DELAY:500,DOM_MUT_MAX_NUM:1e3,DOM_MUT_MAX_SIZE:1e7,SESSION_INIT_SIZE:"session_init_size",SESSION_CORS_IFRMAE:"session_cros_iframe"},features={PACKET_SPLIT:!1,AJAX:!1},ajax_proxy={type:{xhr:"xhr",fetch:"fetch"},readOnlyAttr:["readyState","responseURL","status","statusText","response","responseText","responseURL","responseXML","upload","timeout"],domainFilters:"monitor.clickcease.com|sentry.io|api.amplitude.com|api.segment.io|cdn.uplift-platform.com|bttrack.com|auryc.com|stats.g.doubleclick.net|socket.io"},pii={maskingAttributes:["value","src","data","alt"],maskingClassName:"_ar_hide_",maskingProperty:"_ar_hide_p_",creditCardAtt:["creditcard","ccnum","ccname","ccnumber","ccexpiry","ccexp","ccexpmonth","ccexpyear","cccvc","cccvv","cctype","cvc","cvv","cccid","expiration","ssn","paymentnumberinput","securitycodeinput"],ignoreAttributes:["data-ae_domuel","data-content","data-original-title","data-settings"],geoContinent:"continent",geoCountry:"country",geoIP:"_ar_ip_address"},linkid={aurycMode:"_aurychash",editorHash:"_editorhash"},cookies={encoding:{BASE64:"base64",URI:"uri",NONE:"none"}},excluded={urls:[]},exit_popup={scrollPercent:.2,scrollInterval:200},constants={time:time,symbols:symbols,events:events,uba_event_type:uba_event_type,storage:storage,features:features,ajax_proxy:ajax_proxy,css:css,record:record,keyCodes:keyCodes,pii:pii,cookies:cookies,linkid:linkid,excluded:excluded,exit_popup:exit_popup};function identity(e){return e}var identity_1=identity;function apply(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var _apply=apply,nativeMax=Math.max;function overRest(a,o,s){return o=nativeMax(void 0===o?a.length-1:o,0),function(){for(var e=arguments,t=-1,i=nativeMax(e.length-o,0),n=Array(i);++t<i;)n[t]=e[o+t];t=-1;for(var r=Array(o+1);++t<o;)r[t]=e[t];return r[o]=s(n),_apply(a,this,r)}}var _overRest=overRest;function constant(e){return function(){return e}}var constant_1=constant,commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=_freeGlobal||freeSelf||Function("return this")(),_root=root,Symbol$1=_root.Symbol,_Symbol=Symbol$1,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol?_Symbol.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag),i=e[symToStringTag];try{var n=!(e[symToStringTag]=void 0)}catch(e){}var r=nativeObjectToString.call(e);return n&&(t?e[symToStringTag]=i:delete e[symToStringTag]),r}var _getRawTag=getRawTag,objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(e){return nativeObjectToString$1.call(e)}var _objectToString=objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=_Symbol?_Symbol.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(e)?_getRawTag:_objectToString)(e)}var _baseGetTag=baseGetTag;function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var isObject_1=isObject,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(e){if(!isObject_1(e))return!1;var t=_baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var isFunction_1=isFunction,coreJsData=_root["__core-js_shared__"],_coreJsData=coreJsData,maskSrcKey=($=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||""),$?"Symbol(src)_1."+$:""),$;function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked,funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _toSource=toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$2=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$1=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!isObject_1(e)||_isMasked(e))&&(isFunction_1(e)?reIsNative:reIsHostCtor).test(_toSource(e))}var _baseIsNative=baseIsNative;function getValue(e,t){return null==e?void 0:e[t]}var _getValue=getValue;function getNative(e,t){var i=_getValue(e,t);return _baseIsNative(i)?i:void 0}var _getNative=getNative,defineProperty=function(){try{var e=_getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_defineProperty=defineProperty,baseSetToString=_defineProperty?function(e,t){return _defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant_1(t),writable:!0})}:identity_1,_baseSetToString=baseSetToString,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(i){var n=0,r=0;return function(){var e=nativeNow(),t=HOT_SPAN-(e-r);if(r=e,0<t){if(++n>=HOT_COUNT)return arguments[0]}else n=0;return i.apply(void 0,arguments)}}var _shortOut=shortOut,setToString=_shortOut(_baseSetToString),_setToString=setToString;function baseRest(e,t){return _setToString(_overRest(e,t,identity_1),e+"")}var _baseRest=baseRest,WeakMap=_getNative(_root,"WeakMap"),_WeakMap=WeakMap,metaMap=_WeakMap&&new _WeakMap,_metaMap=metaMap,baseSetData=_metaMap?function(e,t){return _metaMap.set(e,t),e}:identity_1,_baseSetData=baseSetData,objectCreate=Object.create,baseCreate=function(e){if(!isObject_1(e))return{};if(objectCreate)return objectCreate(e);za.prototype=e;var t=new za;return za.prototype=void 0,t};function za(){}var _baseCreate=baseCreate;function createCtor(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=_baseCreate(n.prototype),i=n.apply(t,e);return isObject_1(i)?i:t}}var _createCtor=createCtor,WRAP_BIND_FLAG=1;function createBind(t,e,i){var n=e&WRAP_BIND_FLAG,r=_createCtor(t);return function e(){return(this&&this!==_root&&this instanceof e?r:t).apply(n?i:this,arguments)}}var _createBind=createBind,nativeMax$1=Math.max;function composeArgs(e,t,i,n){for(var r=-1,a=e.length,o=i.length,s=-1,c=t.length,l=nativeMax$1(a-o,0),u=Array(c+l),g=!n;++s<c;)u[s]=t[s];for(;++r<o;)(g||r<a)&&(u[i[r]]=e[r]);for(;l--;)u[s++]=e[r++];return u}var _composeArgs=composeArgs,nativeMax$2=Math.max;function composeArgsRight(e,t,i,n){for(var r=-1,a=e.length,o=-1,s=i.length,c=-1,l=t.length,u=nativeMax$2(a-s,0),g=Array(u+l),d=!n;++r<u;)g[r]=e[r];for(var h=r;++c<l;)g[h+c]=t[c];for(;++o<s;)(d||r<a)&&(g[h+i[o]]=e[r++]);return g}var _composeArgsRight=composeArgsRight;function countHolders(e,t){for(var i=e.length,n=0;i--;)e[i]===t&&++n;return n}var _countHolders=countHolders;function baseLodash(){}var _baseLodash=baseLodash,MAX_ARRAY_LENGTH=4294967295;function LazyWrapper(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=MAX_ARRAY_LENGTH,this.__views__=[]}LazyWrapper.prototype=_baseCreate(_baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper;var _LazyWrapper=LazyWrapper;function noop(){}var noop_1=noop,getData=_metaMap?function(e){return _metaMap.get(e)}:noop_1,_getData=getData,realNames={},_realNames=realNames,objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function getFuncName(e){for(var t=e.name+"",i=_realNames[t],n=hasOwnProperty$2.call(_realNames,t)?i.length:0;n--;){var r=i[n],a=r.func;if(null==a||a==e)return r.name}return t}var _getFuncName=getFuncName;function LodashWrapper(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}LodashWrapper.prototype=_baseCreate(_baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper;var _LodashWrapper=LodashWrapper,isArray=Array.isArray,isArray_1=isArray;function isObjectLike(e){return null!=e&&"object"==typeof e}var isObjectLike_1=isObjectLike;function copyArray(e,t){var i=-1,n=e.length;for(t=t||Array(n);++i<n;)t[i]=e[i];return t}var _copyArray=copyArray;function wrapperClone(e){if(e instanceof _LazyWrapper)return e.clone();var t=new _LodashWrapper(e.__wrapped__,e.__chain__);return t.__actions__=_copyArray(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var _wrapperClone=wrapperClone,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function lodash(e){if(isObjectLike_1(e)&&!isArray_1(e)&&!(e instanceof _LazyWrapper)){if(e instanceof _LodashWrapper)return e;if(hasOwnProperty$3.call(e,"__wrapped__"))return _wrapperClone(e)}return new _LodashWrapper(e)}lodash.prototype=_baseLodash.prototype,lodash.prototype.constructor=lodash;var wrapperLodash=lodash;function isLaziable(e){var t=_getFuncName(e),i=wrapperLodash[t];if("function"!=typeof i||!(t in _LazyWrapper.prototype))return!1;if(e===i)return!0;var n=_getData(i);return!!n&&e===n[0]}var _isLaziable=isLaziable,setData=_shortOut(_baseSetData),_setData=setData,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;function getWrapDetails(e){var t=e.match(reWrapDetails);return t?t[1].split(reSplitDetails):[]}var _getWrapDetails=getWrapDetails,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function insertWrapDetails(e,t){var i=t.length;if(!i)return e;var n=i-1;return t[n]=(1<i?"& ":"")+t[n],t=t.join(2<i?", ":" "),e.replace(reWrapComment,"{\n/* [wrapped with "+t+"] */\n")}var _insertWrapDetails=insertWrapDetails;function arrayEach(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}var _arrayEach=arrayEach;function baseFindIndex(e,t,i,n){for(var r=e.length,a=i+(n?1:-1);n?a--:++a<r;)if(t(e[a],a,e))return a;return-1}var _baseFindIndex=baseFindIndex;function baseIsNaN(e){return e!=e}var _baseIsNaN=baseIsNaN;function strictIndexOf(e,t,i){for(var n=i-1,r=e.length;++n<r;)if(e[n]===t)return n;return-1}var _strictIndexOf=strictIndexOf;function baseIndexOf(e,t,i){return t==t?_strictIndexOf(e,t,i):_baseFindIndex(e,_baseIsNaN,i)}var _baseIndexOf=baseIndexOf;function arrayIncludes(e,t){return!!(null==e?0:e.length)&&-1<_baseIndexOf(e,t,0)}var _arrayIncludes=arrayIncludes,WRAP_BIND_FLAG$1=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512,wrapFlags=[["ary",WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG$1],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]];function updateWrapDetails(i,n){return _arrayEach(wrapFlags,function(e){var t="_."+e[0];n&e[1]&&!_arrayIncludes(i,t)&&i.push(t)}),i.sort()}var _updateWrapDetails=updateWrapDetails;function setWrapToString(e,t,i){var n=t+"";return _setToString(e,_insertWrapDetails(n,_updateWrapDetails(_getWrapDetails(n),i)))}var _setWrapToString=setWrapToString,WRAP_BIND_FLAG$2=1,WRAP_BIND_KEY_FLAG$1=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG$1=8,WRAP_PARTIAL_FLAG$1=32,WRAP_PARTIAL_RIGHT_FLAG$1=64;function createRecurry(e,t,i,n,r,a,o,s,c,l){var u=t&WRAP_CURRY_FLAG$1;t|=u?WRAP_PARTIAL_FLAG$1:WRAP_PARTIAL_RIGHT_FLAG$1,(t&=~(u?WRAP_PARTIAL_RIGHT_FLAG$1:WRAP_PARTIAL_FLAG$1))&WRAP_CURRY_BOUND_FLAG||(t&=~(WRAP_BIND_FLAG$2|WRAP_BIND_KEY_FLAG$1));var g=[e,t,r,u?a:void 0,u?o:void 0,u?void 0:a,u?void 0:o,s,c,l],d=i.apply(void 0,g);return _isLaziable(e)&&_setData(d,g),d.placeholder=n,_setWrapToString(d,e,t)}var _createRecurry=createRecurry;function getHolder(e){return e.placeholder}var _getHolder=getHolder,MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var i=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==i||"symbol"!=i&&reIsUint.test(e))&&-1<e&&e%1==0&&e<t}var _isIndex=isIndex,nativeMin=Math.min;function reorder(e,t){for(var i=e.length,n=nativeMin(t.length,i),r=_copyArray(e);n--;){var a=t[n];e[n]=_isIndex(a,i)?r[a]:void 0}return e}var _reorder=reorder,PLACEHOLDER="__lodash_placeholder__";function replaceHolders(e,t){for(var i=-1,n=e.length,r=0,a=[];++i<n;){var o=e[i];o!==t&&o!==PLACEHOLDER||(e[i]=PLACEHOLDER,a[r++]=i)}return a}var _replaceHolders=replaceHolders,WRAP_BIND_FLAG$3=1,WRAP_BIND_KEY_FLAG$2=2,WRAP_CURRY_FLAG$2=8,WRAP_CURRY_RIGHT_FLAG$1=16,WRAP_ARY_FLAG$1=128,WRAP_FLIP_FLAG$1=512;function createHybrid(l,u,g,d,h,p,f,I,b,m){var y=u&WRAP_ARY_FLAG$1,C=u&WRAP_BIND_FLAG$3,A=u&WRAP_BIND_KEY_FLAG$2,v=u&(WRAP_CURRY_FLAG$2|WRAP_CURRY_RIGHT_FLAG$1),S=u&WRAP_FLIP_FLAG$1,w=A?void 0:_createCtor(l);return function e(){for(var t,i,n=arguments.length,r=Array(n),a=n;a--;)r[a]=arguments[a];if(v&&(t=_getHolder(e),i=_countHolders(r,t)),d&&(r=_composeArgs(r,d,h,v)),p&&(r=_composeArgsRight(r,p,f,v)),n-=i,v&&n<m){var o=_replaceHolders(r,t);return _createRecurry(l,u,createHybrid,e.placeholder,g,r,o,I,b,m-n)}var s=C?g:this,c=A?s[l]:l,n=r.length;return I?r=_reorder(r,I):S&&1<n&&r.reverse(),y&&b<n&&(r.length=b),this&&this!==_root&&this instanceof e&&(c=w||_createCtor(c)),c.apply(s,r)}}var _createHybrid=createHybrid;function createCurry(o,s,c){var l=_createCtor(o);return function e(){for(var t=arguments.length,i=Array(t),n=t,r=_getHolder(e);n--;)i[n]=arguments[n];var a=t<3&&i[0]!==r&&i[t-1]!==r?[]:_replaceHolders(i,r);return(t-=a.length)<c?_createRecurry(o,s,_createHybrid,e.placeholder,void 0,i,a,void 0,void 0,c-t):_apply(this&&this!==_root&&this instanceof e?l:o,this,i)}}var _createCurry=createCurry,WRAP_BIND_FLAG$4=1;function createPartial(s,e,c,l){var u=e&WRAP_BIND_FLAG$4,g=_createCtor(s);return function e(){for(var t=-1,i=arguments.length,n=-1,r=l.length,a=Array(r+i),o=this&&this!==_root&&this instanceof e?g:s;++n<r;)a[n]=l[n];for(;i--;)a[n++]=arguments[++t];return _apply(o,u?c:this,a)}}var _createPartial=createPartial,PLACEHOLDER$1="__lodash_placeholder__",WRAP_BIND_FLAG$5=1,WRAP_BIND_KEY_FLAG$3=2,WRAP_CURRY_BOUND_FLAG$1=4,WRAP_CURRY_FLAG$3=8,WRAP_ARY_FLAG$2=128,WRAP_REARG_FLAG$1=256,nativeMin$1=Math.min;function mergeData(e,t){var i=e[1],n=t[1],r=i|n,a=r<(WRAP_BIND_FLAG$5|WRAP_BIND_KEY_FLAG$3|WRAP_ARY_FLAG$2),o=n==WRAP_ARY_FLAG$2&&i==WRAP_CURRY_FLAG$3||n==WRAP_ARY_FLAG$2&&i==WRAP_REARG_FLAG$1&&e[7].length<=t[8]||n==(WRAP_ARY_FLAG$2|WRAP_REARG_FLAG$1)&&t[7].length<=t[8]&&i==WRAP_CURRY_FLAG$3;if(!a&&!o)return e;n&WRAP_BIND_FLAG$5&&(e[2]=t[2],r|=i&WRAP_BIND_FLAG$5?0:WRAP_CURRY_BOUND_FLAG$1);var s,c=t[3];return c&&(s=e[3],e[3]=s?_composeArgs(s,c,t[4]):c,e[4]=s?_replaceHolders(e[3],PLACEHOLDER$1):t[4]),(c=t[5])&&(s=e[5],e[5]=s?_composeArgsRight(s,c,t[6]):c,e[6]=s?_replaceHolders(e[5],PLACEHOLDER$1):t[6]),(c=t[7])&&(e[7]=c),n&WRAP_ARY_FLAG$2&&(e[8]=null==e[8]?t[8]:nativeMin$1(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var _mergeData=mergeData,symbolTag="[object Symbol]";function isSymbol(e){return"symbol"==typeof e||isObjectLike_1(e)&&_baseGetTag(e)==symbolTag}var isSymbol_1=isSymbol,NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(e){if("number"==typeof e)return e;if(isSymbol_1(e))return NAN;var t;if(isObject_1(e)&&(t="function"==typeof e.valueOf?e.valueOf():e,e=isObject_1(t)?t+"":t),"string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var i=reIsBinary.test(e);return i||reIsOctal.test(e)?freeParseInt(e.slice(2),i?2:8):reIsBadHex.test(e)?NAN:+e}var toNumber_1=toNumber,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(e){return e?(e=toNumber_1(e))!==INFINITY&&e!==-INFINITY?e==e?e:0:(e<0?-1:1)*MAX_INTEGER:0===e?e:0}var toFinite_1=toFinite;function toInteger(e){var t=toFinite_1(e),i=t%1;return t==t?i?t-i:t:0}var toInteger_1=toInteger,FUNC_ERROR_TEXT="Expected a function",WRAP_BIND_FLAG$6=1,WRAP_BIND_KEY_FLAG$4=2,WRAP_CURRY_FLAG$4=8,WRAP_CURRY_RIGHT_FLAG$2=16,WRAP_PARTIAL_FLAG$2=32,WRAP_PARTIAL_RIGHT_FLAG$2=64,nativeMax$3=Math.max;function createWrap(e,t,i,n,r,a,o,s){var c=t&WRAP_BIND_KEY_FLAG$4;if(!c&&"function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);var l,u,g=n?n.length:0;g||(t&=~(WRAP_PARTIAL_FLAG$2|WRAP_PARTIAL_RIGHT_FLAG$2),n=r=void 0),o=void 0===o?o:nativeMax$3(toInteger_1(o),0),s=void 0===s?s:toInteger_1(s),g-=r?r.length:0,t&WRAP_PARTIAL_RIGHT_FLAG$2&&(l=n,u=r,n=r=void 0);var d,h=c?void 0:_getData(e),p=[e,t,i,n,r,l,u,a,o,s];return h&&_mergeData(p,h),e=p[0],t=p[1],i=p[2],n=p[3],r=p[4],!(s=p[9]=void 0===p[9]?c?0:e.length:nativeMax$3(p[9]-g,0))&&t&(WRAP_CURRY_FLAG$4|WRAP_CURRY_RIGHT_FLAG$2)&&(t&=~(WRAP_CURRY_FLAG$4|WRAP_CURRY_RIGHT_FLAG$2)),d=t&&t!=WRAP_BIND_FLAG$6?t==WRAP_CURRY_FLAG$4||t==WRAP_CURRY_RIGHT_FLAG$2?_createCurry(e,t,s):t!=WRAP_PARTIAL_FLAG$2&&t!=(WRAP_BIND_FLAG$6|WRAP_PARTIAL_FLAG$2)||r.length?_createHybrid.apply(void 0,p):_createPartial(e,t,i,n):_createBind(e,t,i),_setWrapToString((h?_baseSetData:_setData)(d,p),e,t)}var _createWrap=createWrap,WRAP_BIND_FLAG$7=1,WRAP_PARTIAL_FLAG$3=32,bind=_baseRest(function(e,t,i){var n,r=WRAP_BIND_FLAG$7;return i.length&&(n=_replaceHolders(i,_getHolder(bind)),r|=WRAP_PARTIAL_FLAG$3),_createWrap(e,r,t,i,n)});bind.placeholder={};var bind_1=bind;function listCacheClear(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear;function eq(e,t){return e===t||e!=e&&t!=t}var eq_1=eq;function assocIndexOf(e,t){for(var i=e.length;i--;)if(eq_1(e[i][0],t))return i;return-1}var _assocIndexOf=assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,i=_assocIndexOf(t,e);return!(i<0)&&(i==t.length-1?t.pop():splice.call(t,i,1),--this.size,!0)}var _listCacheDelete=listCacheDelete;function listCacheGet(e){var t=this.__data__,i=_assocIndexOf(t,e);return i<0?void 0:t[i][1]}var _listCacheGet=listCacheGet;function listCacheHas(e){return-1<_assocIndexOf(this.__data__,e)}var _listCacheHas=listCacheHas;function listCacheSet(e,t){var i=this.__data__,n=_assocIndexOf(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this}var _listCacheSet=listCacheSet;function ListCache(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}ListCache.prototype.clear=_listCacheClear,ListCache.prototype.delete=_listCacheDelete,ListCache.prototype.get=_listCacheGet,ListCache.prototype.has=_listCacheHas,ListCache.prototype.set=_listCacheSet;var _ListCache=ListCache;function stackClear(){this.__data__=new _ListCache,this.size=0}var _stackClear=stackClear;function stackDelete(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}var _stackDelete=stackDelete;function stackGet(e){return this.__data__.get(e)}var _stackGet=stackGet;function stackHas(e){return this.__data__.has(e)}var _stackHas=stackHas,Map=_getNative(_root,"Map"),_Map=Map,nativeCreate=_getNative(Object,"create"),_nativeCreate=nativeCreate;function hashClear(){this.__data__=_nativeCreate?_nativeCreate(null):{},this.size=0}var _hashClear=hashClear;function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete,HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function hashGet(e){var t=this.__data__;if(_nativeCreate){var i=t[e];return i===HASH_UNDEFINED?void 0:i}return hasOwnProperty$4.call(t,e)?t[e]:void 0}var _hashGet=hashGet,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function hashHas(e){var t=this.__data__;return _nativeCreate?void 0!==t[e]:hasOwnProperty$5.call(t,e)}var _hashHas=hashHas,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=_nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}var _hashSet=hashSet;function Hash(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Hash.prototype.clear=_hashClear,Hash.prototype.delete=_hashDelete,Hash.prototype.get=_hashGet,Hash.prototype.has=_hashHas,Hash.prototype.set=_hashSet;var _Hash=Hash;function mapCacheClear(){this.size=0,this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}}var _mapCacheClear=mapCacheClear;function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var _isKeyable=isKeyable;function getMapData(e,t){var i=e.__data__;return _isKeyable(t)?i["string"==typeof t?"string":"hash"]:i.map}var _getMapData=getMapData;function mapCacheDelete(e){var t=_getMapData(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete;function mapCacheGet(e){return _getMapData(this,e).get(e)}var _mapCacheGet=mapCacheGet;function mapCacheHas(e){return _getMapData(this,e).has(e)}var _mapCacheHas=mapCacheHas;function mapCacheSet(e,t){var i=_getMapData(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this}var _mapCacheSet=mapCacheSet;function MapCache(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}MapCache.prototype.clear=_mapCacheClear,MapCache.prototype.delete=_mapCacheDelete,MapCache.prototype.get=_mapCacheGet,MapCache.prototype.has=_mapCacheHas,MapCache.prototype.set=_mapCacheSet;var _MapCache=MapCache,LARGE_ARRAY_SIZE=200;function stackSet(e,t){var i=this.__data__;if(i instanceof _ListCache){var n=i.__data__;if(!_Map||n.length<LARGE_ARRAY_SIZE-1)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new _MapCache(n)}return i.set(e,t),this.size=i.size,this}var _stackSet=stackSet;function Stack(e){var t=this.__data__=new _ListCache(e);this.size=t.size}Stack.prototype.clear=_stackClear,Stack.prototype.delete=_stackDelete,Stack.prototype.get=_stackGet,Stack.prototype.has=_stackHas,Stack.prototype.set=_stackSet;var _Stack=Stack;function baseAssignValue(e,t,i){"__proto__"==t&&_defineProperty?_defineProperty(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}var _baseAssignValue=baseAssignValue;function assignMergeValue(e,t,i){(void 0===i||eq_1(e[t],i))&&(void 0!==i||t in e)||_baseAssignValue(e,t,i)}var _assignMergeValue=assignMergeValue;function createBaseFor(c){return function(e,t,i){for(var n=-1,r=Object(e),a=i(e),o=a.length;o--;){var s=a[c?o:++n];if(!1===t(r[s],s,r))break}return e}}var _createBaseFor=createBaseFor,baseFor=_createBaseFor(),_baseFor=baseFor,_cloneBuffer=createCommonjsModule(function(e,t){var i=t&&!t.nodeType&&t,n=i&&e&&!e.nodeType&&e,r=n&&n.exports===i?_root.Buffer:void 0,a=r?r.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var i=e.length,n=a?a(i):new e.constructor(i);return e.copy(n),n}}),Uint8Array$1=_root.Uint8Array,_Uint8Array=Uint8Array$1;function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new _Uint8Array(t).set(new _Uint8Array(e)),t}var _cloneArrayBuffer=cloneArrayBuffer;function cloneTypedArray(e,t){var i=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var _cloneTypedArray=cloneTypedArray;function overArg(t,i){return function(e){return t(i(e))}}var _overArg=overArg,getPrototype=_overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype,objectProto$7=Object.prototype;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$7)}var _isPrototype=isPrototype;function initCloneObject(e){return"function"!=typeof e.constructor||_isPrototype(e)?{}:_baseCreate(_getPrototype(e))}var _initCloneObject=initCloneObject,argsTag="[object Arguments]";function baseIsArguments(e){return isObjectLike_1(e)&&_baseGetTag(e)==argsTag}var _baseIsArguments=baseIsArguments,objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty,propertyIsEnumerable=objectProto$8.propertyIsEnumerable,isArguments=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(e){return isObjectLike_1(e)&&hasOwnProperty$6.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArguments_1=isArguments,MAX_SAFE_INTEGER$1=9007199254740991;function isLength(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=MAX_SAFE_INTEGER$1}var isLength_1=isLength;function isArrayLike(e){return null!=e&&isLength_1(e.length)&&!isFunction_1(e)}var isArrayLike_1=isArrayLike;function isArrayLikeObject(e){return isObjectLike_1(e)&&isArrayLike_1(e)}var isArrayLikeObject_1=isArrayLikeObject;function stubFalse(){return!1}var stubFalse_1=stubFalse,isBuffer_1=createCommonjsModule(function(e,t){var i=t&&!t.nodeType&&t,n=i&&e&&!e.nodeType&&e,r=n&&n.exports===i?_root.Buffer:void 0,a=(r?r.isBuffer:void 0)||stubFalse_1;e.exports=a}),objectTag="[object Object]",funcProto$2=Function.prototype,objectProto$9=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject(e){if(!isObjectLike_1(e)||_baseGetTag(e)!=objectTag)return!1;var t=_getPrototype(e);if(null===t)return!0;var i=hasOwnProperty$7.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&funcToString$2.call(i)==objectCtorString}var isPlainObject_1=isPlainObject,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag$1="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(e){return isObjectLike_1(e)&&isLength_1(e.length)&&!!typedArrayTags[_baseGetTag(e)]}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag$1]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var _baseIsTypedArray=baseIsTypedArray;function baseUnary(t){return function(e){return t(e)}}var _baseUnary=baseUnary,_nodeUtil=createCommonjsModule(function(e,t){var i=t&&!t.nodeType&&t,n=i&&e&&!e.nodeType&&e,r=n&&n.exports===i&&_freeGlobal.process,a=function(){try{var e=n&&n.require&&n.require("util").types;return e?e:r&&r.binding&&r.binding("util")}catch(e){}}();e.exports=a}),nodeIsTypedArray=_nodeUtil&&_nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?_baseUnary(nodeIsTypedArray):_baseIsTypedArray,isTypedArray_1=isTypedArray;function safeGet(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _safeGet=safeGet,objectProto$10=Object.prototype,hasOwnProperty$8=objectProto$10.hasOwnProperty;function assignValue(e,t,i){var n=e[t];hasOwnProperty$8.call(e,t)&&eq_1(n,i)&&(void 0!==i||t in e)||_baseAssignValue(e,t,i)}var _assignValue=assignValue;function copyObject(e,t,i,n){var r=!i;i=i||{};for(var a=-1,o=t.length;++a<o;){var s=t[a],c=n?n(i[s],e[s],s,i,e):void 0;void 0===c&&(c=e[s]),(r?_baseAssignValue:_assignValue)(i,s,c)}return i}var _copyObject=copyObject;function baseTimes(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}var _baseTimes=baseTimes,objectProto$11=Object.prototype,hasOwnProperty$9=objectProto$11.hasOwnProperty;function arrayLikeKeys(e,t){var i,n=isArray_1(e),r=!n&&isArguments_1(e),a=!n&&!r&&isBuffer_1(e),o=!n&&!r&&!a&&isTypedArray_1(e),s=n||r||a||o,c=s?_baseTimes(e.length,String):[],l=c.length;for(i in e)!t&&!hasOwnProperty$9.call(e,i)||s&&("length"==i||a&&("offset"==i||"parent"==i)||o&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||_isIndex(i,l))||c.push(i);return c}var _arrayLikeKeys=arrayLikeKeys;function nativeKeysIn(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}var _nativeKeysIn=nativeKeysIn,objectProto$12=Object.prototype,hasOwnProperty$10=objectProto$12.hasOwnProperty;function baseKeysIn(e){if(!isObject_1(e))return _nativeKeysIn(e);var t,i=_isPrototype(e),n=[];for(t in e)("constructor"!=t||!i&&hasOwnProperty$10.call(e,t))&&n.push(t);return n}var _baseKeysIn=baseKeysIn;function keysIn(e){return isArrayLike_1(e)?_arrayLikeKeys(e,!0):_baseKeysIn(e)}var keysIn_1=keysIn;function toPlainObject(e){return _copyObject(e,keysIn_1(e))}var toPlainObject_1=toPlainObject;function baseMergeDeep(e,t,i,n,r,a,o){var s,c,l,u,g,d=_safeGet(e,i),h=_safeGet(t,i),p=o.get(h);p?_assignMergeValue(e,i,p):((s=void 0===(g=a?a(d,h,i+"",e,t,o):void 0))&&(l=!(c=isArray_1(h))&&isBuffer_1(h),u=!c&&!l&&isTypedArray_1(h),g=h,c||l||u?g=isArray_1(d)?d:isArrayLikeObject_1(d)?_copyArray(d):l?_cloneBuffer(h,!(s=!1)):u?_cloneTypedArray(h,!(s=!1)):[]:isPlainObject_1(h)||isArguments_1(h)?isArguments_1(g=d)?g=toPlainObject_1(d):isObject_1(d)&&!isFunction_1(d)||(g=_initCloneObject(h)):s=!1),s&&(o.set(h,g),r(g,h,n,a,o),o.delete(h)),_assignMergeValue(e,i,g))}var _baseMergeDeep=baseMergeDeep;function baseMerge(n,r,a,o,s){n!==r&&_baseFor(r,function(e,t){var i;s=s||new _Stack,isObject_1(e)?_baseMergeDeep(n,r,t,a,baseMerge,o,s):(void 0===(i=o?o(_safeGet(n,t),e,t+"",n,r,s):void 0)&&(i=e),_assignMergeValue(n,t,i))},keysIn_1)}var _baseMerge=baseMerge;function isIterateeCall(e,t,i){if(!isObject_1(i))return!1;var n=typeof t;return!!("number"==n?isArrayLike_1(i)&&_isIndex(t,i.length):"string"==n&&t in i)&&eq_1(i[t],e)}var _isIterateeCall=isIterateeCall;function createAssigner(s){return _baseRest(function(e,t){var i=-1,n=t.length,r=1<n?t[n-1]:void 0,a=2<n?t[2]:void 0,r=3<s.length&&"function"==typeof r?(n--,r):void 0;for(a&&_isIterateeCall(t[0],t[1],a)&&(r=n<3?void 0:r,n=1),e=Object(e);++i<n;){var o=t[i];o&&s(e,o,i,r)}return e})}var _createAssigner=createAssigner,merge=_createAssigner(function(e,t,i){_baseMerge(e,t,i)}),merge_1=merge;function baseExtremum(e,t,i){for(var n=-1,r=e.length;++n<r;){var a,o,s=e[n],c=t(s);null!=c&&(void 0===a?c==c&&!isSymbol_1(c):i(c,a))&&(a=c,o=s)}return o}var _baseExtremum=baseExtremum;function baseGt(e,t){return t<e}var _baseGt=baseGt;function max(e){return e&&e.length?_baseExtremum(e,identity_1,_baseGt):void 0}var max_1=max,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,t){if(isArray_1(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!isSymbol_1(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}var _isKey=isKey,FUNC_ERROR_TEXT$1="Expected a function";function memoize(r,a){if("function"!=typeof r||null!=a&&"function"!=typeof a)throw new TypeError(FUNC_ERROR_TEXT$1);var o=function(){var e=arguments,t=a?a.apply(this,e):e[0],i=o.cache;if(i.has(t))return i.get(t);var n=r.apply(this,e);return o.cache=i.set(t,n)||i,n};return o.cache=new(memoize.Cache||_MapCache),o}memoize.Cache=_MapCache;var memoize_1=memoize,MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize_1(e,function(e){return i.size===MAX_MEMOIZE_SIZE&&i.clear(),e}),i=t.cache;return t}var _memoizeCapped=memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=_memoizeCapped(function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(rePropName,function(e,t,i,n){r.push(i?n.replace(reEscapeChar,"$1"):t||e)}),r}),_stringToPath=stringToPath;function arrayMap(e,t){for(var i=-1,n=null==e?0:e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}var _arrayMap=arrayMap,INFINITY$1=1/0,symbolProto=_Symbol?_Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray_1(e))return _arrayMap(e,baseToString)+"";if(isSymbol_1(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}var _baseToString=baseToString;function toString(e){return null==e?"":_baseToString(e)}var toString_1=toString;function castPath(e,t){return isArray_1(e)?e:_isKey(e,t)?[e]:_stringToPath(toString_1(e))}var _castPath=castPath,INFINITY$2=1/0;function toKey(e){if("string"==typeof e||isSymbol_1(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$2?"-0":t}var _toKey=toKey;function baseGet(e,t){for(var i=0,n=(t=_castPath(t,e)).length;null!=e&&i<n;)e=e[_toKey(t[i++])];return i&&i==n?e:void 0}var _baseGet=baseGet;function get(e,t,i){var n=null==e?void 0:_baseGet(e,t);return void 0===n?i:n}var get_1=get,now=function(){return _root.Date.now()},now_1=now,FUNC_ERROR_TEXT$2="Expected a function",nativeMax$4=Math.max,nativeMin$2=Math.min;function debounce(n,r,e){var a,o,s,c,l,u,g=0,d=!1,h=!1,t=!0;if("function"!=typeof n)throw new TypeError(FUNC_ERROR_TEXT$2);function p(e){var t=a,i=o;return a=o=void 0,g=e,c=n.apply(i,t)}function f(e){var t=e-u;return void 0===u||r<=t||t<0||h&&s<=e-g}function I(){var e,t,i=now_1();if(f(i))return b(i);l=setTimeout(I,(t=r-((e=i)-u),h?nativeMin$2(t,s-(e-g)):t))}function b(e){return l=void 0,t&&a?p(e):(a=o=void 0,c)}function i(){var e,t=now_1(),i=f(t);if(a=arguments,o=this,u=t,i){if(void 0===l)return g=e=u,l=setTimeout(I,r),d?p(e):c;if(h)return clearTimeout(l),l=setTimeout(I,r),p(u)}return void 0===l&&(l=setTimeout(I,r)),c}return r=toNumber_1(r)||0,isObject_1(e)&&(d=!!e.leading,h="maxWait"in e,s=h?nativeMax$4(toNumber_1(e.maxWait)||0,r):s,t="trailing"in e?!!e.trailing:t),i.cancel=function(){void 0!==l&&clearTimeout(l),a=u=o=l=void(g=0)},i.flush=function(){return void 0===l?c:b(now_1())},i}var debounce_1=debounce,FUNC_ERROR_TEXT$3="Expected a function";function throttle(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$3);return isObject_1(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),debounce_1(e,t,{leading:n,maxWait:t,trailing:r})}var throttle_1=throttle;function baseSlice(e,t,i){var n=-1,r=e.length;t<0&&(t=r<-t?0:r+t),(i=r<i?r:i)<0&&(i+=r),r=i<t?0:i-t>>>0,t>>>=0;for(var a=Array(r);++n<r;)a[n]=e[n+t];return a}var _baseSlice=baseSlice;function castSlice(e,t,i){var n=e.length;return i=void 0===i?n:i,!t&&n<=i?e:_baseSlice(e,t,i)}var _castSlice=castSlice;function charsEndIndex(e,t){for(var i=e.length;i--&&-1<_baseIndexOf(t,e[i],0););return i}var _charsEndIndex=charsEndIndex;function charsStartIndex(e,t){for(var i=-1,n=e.length;++i<n&&-1<_baseIndexOf(t,e[i],0););return i}var _charsStartIndex=charsStartIndex;function asciiToArray(e){return e.split("")}var _asciiToArray=asciiToArray,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsZWJ="\\u200d",reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]");function hasUnicode(e){return reHasUnicode.test(e)}var _hasUnicode=hasUnicode,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo="["+rsComboRange$1+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange$1+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange$1+"]?",rsOptJoin="(?:"+rsZWJ$1+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray(e){return e.match(reUnicode)||[]}var _unicodeToArray=unicodeToArray;function stringToArray(e){return(_hasUnicode(e)?_unicodeToArray:_asciiToArray)(e)}var _stringToArray=stringToArray,reTrim$1=/^\s+|\s+$/g;function trim(e,t,i){if((e=toString_1(e))&&(i||void 0===t))return e.replace(reTrim$1,"");if(!e||!(t=_baseToString(t)))return e;var n=_stringToArray(e),r=_stringToArray(t),a=_charsStartIndex(n,r),o=_charsEndIndex(n,r)+1;return _castSlice(n,a,o).join("")}var trim_1=trim,nativeKeys=_overArg(Object.keys,Object),_nativeKeys=nativeKeys,objectProto$13=Object.prototype,hasOwnProperty$11=objectProto$13.hasOwnProperty;function baseKeys(e){if(!_isPrototype(e))return _nativeKeys(e);var t,i=[];for(t in Object(e))hasOwnProperty$11.call(e,t)&&"constructor"!=t&&i.push(t);return i}var _baseKeys=baseKeys;function keys(e){return(isArrayLike_1(e)?_arrayLikeKeys:_baseKeys)(e)}var keys_1=keys;function baseForOwn(e,t){return e&&_baseFor(e,t,keys_1)}var _baseForOwn=baseForOwn;function createBaseEach(a,o){return function(e,t){if(null==e)return e;if(!isArrayLike_1(e))return a(e,t);for(var i=e.length,n=o?i:-1,r=Object(e);(o?n--:++n<i)&&!1!==t(r[n],n,r););return e}}var _createBaseEach=createBaseEach,baseEach=_createBaseEach(_baseForOwn),_baseEach=baseEach;function castFunction(e){return"function"==typeof e?e:identity_1}var _castFunction=castFunction;function forEach(e,t){return(isArray_1(e)?_arrayEach:_baseEach)(e,_castFunction(t))}var forEach_1=forEach,assignIn=_createAssigner(function(e,t){_copyObject(t,keysIn_1(t),e)}),assignIn_1=assignIn,extend=assignIn_1,DataView$1=_getNative(_root,"DataView"),_DataView=DataView$1,Promise$1=_getNative(_root,"Promise"),_Promise=Promise$1,Set=_getNative(_root,"Set"),_Set=Set,mapTag$1="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=_toSource(_DataView),mapCtorString=_toSource(_Map),promiseCtorString=_toSource(_Promise),setCtorString=_toSource(_Set),weakMapCtorString=_toSource(_WeakMap),getTag=_baseGetTag;(_DataView&&getTag(new _DataView(new ArrayBuffer(1)))!=dataViewTag$1||_Map&&getTag(new _Map)!=mapTag$1||_Promise&&getTag(_Promise.resolve())!=promiseTag||_Set&&getTag(new _Set)!=setTag$1||_WeakMap&&getTag(new _WeakMap)!=weakMapTag$1)&&(getTag=function(e){var t=_baseGetTag(e),i=t==objectTag$2?e.constructor:void 0,n=i?_toSource(i):"";if(n)switch(n){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag$1}return t});var _getTag=getTag,stringTag$1="[object String]";function isString(e){return"string"==typeof e||!isArray_1(e)&&isObjectLike_1(e)&&_baseGetTag(e)==stringTag$1}var isString_1=isString;function iteratorToArray(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}var _iteratorToArray=iteratorToArray;function mapToArray(e){var i=-1,n=Array(e.size);return e.forEach(function(e,t){n[++i]=[t,e]}),n}var _mapToArray=mapToArray;function setToArray(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}var _setToArray=setToArray;function baseValues(t,e){return _arrayMap(e,function(e){return t[e]})}var _baseValues=baseValues;function values(e){return null==e?[]:_baseValues(e,keys_1(e))}var values_1=values,mapTag$2="[object Map]",setTag$2="[object Set]",symIterator=_Symbol?_Symbol.iterator:void 0;function toArray(e){if(!e)return[];if(isArrayLike_1(e))return(isString_1(e)?_stringToArray:_copyArray)(e);if(symIterator&&e[symIterator])return _iteratorToArray(e[symIterator]());var t=_getTag(e);return(t==mapTag$2?_mapToArray:t==setTag$2?_setToArray:values_1)(e)}var toArray_1=toArray,mapTag$3="[object Map]",setTag$3="[object Set]",objectProto$14=Object.prototype,hasOwnProperty$12=objectProto$14.hasOwnProperty;function isEmpty(e){if(null==e)return!0;if(isArrayLike_1(e)&&(isArray_1(e)||"string"==typeof e||"function"==typeof e.splice||isBuffer_1(e)||isTypedArray_1(e)||isArguments_1(e)))return!e.length;var t,i=_getTag(e);if(i==mapTag$3||i==setTag$3)return!e.size;if(_isPrototype(e))return!_baseKeys(e).length;for(t in e)if(hasOwnProperty$12.call(e,t))return!1;return!0}var isEmpty_1=isEmpty,dateTag$1="[object Date]";function baseIsDate(e){return isObjectLike_1(e)&&_baseGetTag(e)==dateTag$1}var _baseIsDate=baseIsDate,nodeIsDate=_nodeUtil&&_nodeUtil.isDate,isDate=nodeIsDate?_baseUnary(nodeIsDate):_baseIsDate,isDate_1=isDate,numberTag$1="[object Number]";function isNumber(e){return"number"==typeof e||isObjectLike_1(e)&&_baseGetTag(e)==numberTag$1}var isNumber_1=isNumber;function isNil(e){return null==e}var isNil_1=isNil;function isElement(e){return isObjectLike_1(e)&&1===e.nodeType&&!isPlainObject_1(e)}var isElement_1=isElement,objectProto$15=Object.prototype,hasOwnProperty$13=objectProto$15.hasOwnProperty;function baseHas(e,t){return null!=e&&hasOwnProperty$13.call(e,t)}var _baseHas=baseHas;function hasPath(e,t,i){for(var n=-1,r=(t=_castPath(t,e)).length,a=!1;++n<r;){var o=_toKey(t[n]);if(!(a=null!=e&&i(e,o)))break;e=e[o]}return a||++n!=r?a:!!(r=null==e?0:e.length)&&isLength_1(r)&&_isIndex(o,r)&&(isArray_1(e)||isArguments_1(e))}var _hasPath=hasPath;function has(e,t){return null!=e&&_hasPath(e,t,_baseHas)}var has_1=has;function baseClamp(e,t,i){return e==e&&(void 0!==i&&(e=e<=i?e:i),void 0!==t&&(e=t<=e?e:t)),e}var _baseClamp=baseClamp;function startsWith(e,t,i){return e=toString_1(e),i=null==i?0:_baseClamp(toInteger_1(i),0,e.length),t=_baseToString(t),e.slice(i,i+t.length)==t}var startsWith_1=startsWith,HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED$2),this}var _setCacheAdd=setCacheAdd;function setCacheHas(e){return this.__data__.has(e)}var _setCacheHas=setCacheHas;function SetCache(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new _MapCache;++t<i;)this.add(e[t])}SetCache.prototype.add=SetCache.prototype.push=_setCacheAdd,SetCache.prototype.has=_setCacheHas;var _SetCache=SetCache;function arrayIncludesWith(e,t,i){for(var n=-1,r=null==e?0:e.length;++n<r;)if(i(t,e[n]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith;function cacheHas(e,t){return e.has(t)}var _cacheHas=cacheHas,nativeMin$3=Math.min;function baseIntersection(e,t,i){for(var n=i?_arrayIncludesWith:_arrayIncludes,r=e[0].length,a=e.length,o=a,s=Array(a),c=1/0,l=[];o--;){var u=e[o];o&&t&&(u=_arrayMap(u,_baseUnary(t))),c=nativeMin$3(u.length,c),s[o]=!i&&(t||120<=r&&120<=u.length)?new _SetCache(o&&u):void 0}u=e[0];var g=-1,d=s[0];e:for(;++g<r&&l.length<c;){var h=u[g],p=t?t(h):h,h=i||0!==h?h:0;if(!(d?_cacheHas(d,p):n(l,p,i))){for(o=a;--o;){var f=s[o];if(!(f?_cacheHas(f,p):n(e[o],p,i)))continue e}d&&d.push(p),l.push(h)}}return l}var _baseIntersection=baseIntersection;function castArrayLikeObject(e){return isArrayLikeObject_1(e)?e:[]}var _castArrayLikeObject=castArrayLikeObject,intersection=_baseRest(function(e){var t=_arrayMap(e,_castArrayLikeObject);return t.length&&t[0]===e[0]?_baseIntersection(t):[]}),intersection_1=intersection,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(e,t,i){return t&&Hm(e.prototype,t),i&&Hm(e,i),e};function Hm(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var defineProperty$2=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},objectWithoutProperties=function(e,t){var i,n={};for(i in e)0<=t.indexOf(i)||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)},_={max:max_1,merge:merge_1,get:get_1,throttle:throttle_1,trim:trim_1,bind:bind_1,each:forEach_1,ext:merge_1,extend:extend,isArray:isArray_1,isFunction:isFunction_1,isObject:isObject_1,isArguments:isArguments_1,toArray:toArray_1,values:values_1,identity:identity_1,isEmpty:isEmpty_1,isEmptyObject:isEmpty_1,isString:isString_1,isDate:isDate_1,isNumber:isNumber_1,isElement:isElement_1,isNil:isNil_1,debounce:debounce_1,has:has_1,startsWith:startsWith_1,intersection:intersection_1},ArrayProto=Array.prototype,nativeIndexOf=ArrayProto.indexOf,breaker={};function tn(){for(var e=+new Date,t=0;e==+new Date;)t++;return e.toString(16)+t.toString(16)}_.bind_instance_methods=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=_.bind(e[t],e))},_.isDefined=function(e){return!_.isUndefined(e)},_.isUndefined=function(e){return null===e||(void 0===e?"undefined":_typeof(e))===constants.symbols.UNDEFINED},_.include=function(e,t){var i=!1;return null===e?i:nativeIndexOf&&e.indexOf===nativeIndexOf?-1!=e.indexOf(t):(_.each(e,function(e){if(i=i||e===t)return breaker}),i)},_.includes=function(e,t){return-1!==e.indexOf(t)},_.timestamp=function(){return Date.now&&Date.now.toString&&-1<Date.now.toString().indexOf("native code")?Date.now():+new Date},_.now=_.timestamp,_.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())},_.strip_empty_properties=function(e){var i={};return _.each(e,function(e,t){_.isString(e)&&0<e.length&&(i[t]=e)}),i},_.UUID=function(){var e=(screen.height*screen.width).toString(16);return tn()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var e,t,i=windowNavigator.userAgent,r=[],n=0;function a(e,t){for(var i=0,n=0;n<t.length;n++)i|=r[n]<<8*n;return e^i}for(e=0;e<i.length;e++)t=i.charCodeAt(e),r.unshift(255&t),4<=r.length&&(n=a(n,r),r=[]);return 0<r.length&&(n=a(n,r)),n.toString(16)}()+"-"+e+"-"+tn()},_.isBlockedUA=function(e){return!!/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(e)&&(logger.warn("Blocked UA Agent:"+e),!0)},_.isBlockedUAComplex=function(e,t){if(!(e=e||windowNavigator.userAgent))return!0;var i="(googlebot|Google favicon|Mediapartners-Google|AdsBot-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis|PhantomJS|HeadlessChrome|Uptimebot|AmazonProductDiscovery|Chrome-Lighthouse";return t&&_.isArray(t)&&0<t.length&&(i+="|"+t.join("|")),i+=")",!!new RegExp(i,"i").test(e)&&(logger.warn("Blocked UA Agent Complex:"+e),!0)},_.domReady=function(i){var e,n=[],t=windowDocument,r=t.documentElement,a=r.doScroll,o="DOMContentLoaded",s="addEventListener",c="onreadystatechange",l="readyState",u=(a?/^loaded|^c/:/^loaded|c/).test(t[l]);function g(e){for(u=1,e=n.shift();e;)e(),e=n.shift()}return t[s]&&t[s](o,e=function(){t.removeEventListener(o,e,!1),g()},!1),a&&t.attachEvent(c,e=function(){/^c/.test(t[l])&&(t.detachEvent(c,e),g())}),i=a?function(t){self!=top?u?t():n.push(t):function(){try{r.doScroll("left")}catch(e){return setTimeout(function(){i(t)},50)}t()}()}:function(e){u?e():n.push(e)}},_.aurycOverride=function(e){var t=(""+window.location.hash).toLowerCase();return t&&8<t.length&&-1<t.indexOf("aurycoverride")&&-1<t.indexOf(e)},_.disableEvent=function(e){return!1},_.Diff=function(e,t){for(var i=_.max([e.length,t.length]),n=0,r=0,a=0;15<i-n;)a=i-Math.round((i-n)/2),e.substr(0,a)!==t.substr(0,a)?i=a:n=a;for(var o=t.substr(n),i=o.length;15<i-r;)a=i-Math.round((i-r)/2),o.substr(o.length-a)!==e.substr(e.length-a)?i=a:r=a;return{s:n,e:r,v:t.substring(n,t.length-r)}},_.addEventListener=function(e,t,i,n){"propertychange"!==t&&e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i)},_.inArray=function(e,t){var i,n=-1;for(i in t)t[i]===e&&(n=i);return-1!=n},_.isValidColor=function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},_.isEmail=function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},_.isLongNumber=function(e){return!!/^([0-9]){10,}$/.test(e)},_.hasClass=function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},_.addCssCls=function(e,t){e.classList?e.classList.add(t):_.hasClass(e,t)||(e.className+=" "+t)},_.removeClass=function(e,t){var i;e.classList?e.classList.remove(t):_.hasClass(e,t)&&(i=new RegExp("(\\s|^)"+t+"(\\s|$)"),e.className=e.className.replace(i," "))};var b64c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",b64pad="=";function decodeBase64(e){var t,i="";return e?(5<e.length&&(t=e.length-5,i=e.substring(t)+e.substring(0,t)),base64_decode(i)):null}function encodeBase64(e){var t,i=base64url_encode(e);return 5<i.length&&(t=i.substring(0,5),i=i.substring(5)+t),i}function base64_encode_data(e,t,i){for(var n="",r=0;r<=t-3;r+=3)n+=i.charAt(e.charCodeAt(r)>>>2),n+=i.charAt((3&e.charCodeAt(r))<<4|e.charCodeAt(r+1)>>>4),n+=i.charAt((15&e.charCodeAt(r+1))<<2|e.charCodeAt(r+2)>>>6),n+=i.charAt(63&e.charCodeAt(r+2));return t%3==2?(n+=i.charAt(e.charCodeAt(r)>>>2),n+=i.charAt((3&e.charCodeAt(r))<<4|e.charCodeAt(r+1)>>>4),n+=i.charAt((15&e.charCodeAt(r+1))<<2),n+=b64pad):t%3==1&&(n+=i.charAt(e.charCodeAt(r)>>>2),n+=i.charAt((3&e.charCodeAt(r))<<4),n+=b64pad,n+=b64pad),n}function base64_encode(e){var t=unescape(encodeURIComponent(e));return base64_encode_data(t,t.length,b64c)}function base64url_encode(e){var t=unescape(encodeURIComponent(e));return base64_encode_data(t,t.length,b64u)}function base64_charIndex(e){return"+"==e?62:"/"==e?63:b64u.indexOf(e)}function base64_decode(e){for(var t,i,n,r,a="",o=e.length,s=0;s<=o-2;s+=4)t=base64_charIndex(e.charAt(s+0)),i=base64_charIndex(e.charAt(s+1)),n=base64_charIndex(e.charAt(s+2)),r=base64_charIndex(e.charAt(s+3)),a+=String.fromCharCode(t<<2|i>>>4),s+2<o&&e.charAt(s+2)!==b64pad&&(a+=String.fromCharCode(i<<4&240|n>>>2&15)),s+3<o&&e.charAt(s+3)!==b64pad&&(a+=String.fromCharCode(n<<6&192|r));return a=decodeURIComponent(escape(a))}function sha1(e){function t(e,t){return e<<t|e>>>32-t}function i(e){for(var t="",i=7;0<=i;i--)t+=(e>>>4*i&15).toString(16);return t}for(var n,r,a,o,s,c,l,u,g=[],d=1732584193,h=4023233417,p=2562383102,f=271733878,I=3285377520,b=[],m=(e=unescape(encodeURIComponent(e))).length,y=0;y<m-3;y+=4)r=e.charCodeAt(y)<<24|e.charCodeAt(y+1)<<16|e.charCodeAt(y+2)<<8|e.charCodeAt(y+3),b.push(r);switch(3&m){case 0:y=2147483648;break;case 1:y=e.charCodeAt(m-1)<<24|8388608;break;case 2:y=e.charCodeAt(m-2)<<24|e.charCodeAt(m-1)<<16|32768;break;case 3:y=e.charCodeAt(m-3)<<24|e.charCodeAt(m-2)<<16|e.charCodeAt(m-1)<<8|128}for(b.push(y);14!=(15&b.length);)b.push(0);for(b.push(m>>>29),b.push(m<<3&4294967295),n=0;n<b.length;n+=16){for(y=0;y<16;y++)g[y]=b[n+y];for(y=16;y<=79;y++)g[y]=t(g[y-3]^g[y-8]^g[y-14]^g[y-16],1);for(a=d,o=h,s=p,c=f,l=I,y=0;y<=19;y++)u=t(a,5)+(o&s|~o&c)+l+g[y]+1518500249&4294967295,l=c,c=s,s=t(o,30),o=a,a=u;for(y=20;y<=39;y++)u=t(a,5)+(o^s^c)+l+g[y]+1859775393&4294967295,l=c,c=s,s=t(o,30),o=a,a=u;for(y=40;y<=59;y++)u=t(a,5)+(o&s|o&c|s&c)+l+g[y]+2400959708&4294967295,l=c,c=s,s=t(o,30),o=a,a=u;for(y=60;y<=79;y++)u=t(a,5)+(o^s^c)+l+g[y]+3395469782&4294967295,l=c,c=s,s=t(o,30),o=a,a=u;d=d+a&4294967295,h=h+o&4294967295,p=p+s&4294967295,f=f+c&4294967295,I=I+l&4294967295}return(u=i(d)+i(h)+i(p)+i(f)+i(I)).toLowerCase()}function hashCode(e){var t=0,i=0;if(0===e.length)return t;for(i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return t}function isValidBase64Char(e){return e===b64pad||0<b64c.indexOf(e)}function shiftString(e){var t;return e&&5<e.length&&(t=e.substring(0,5),e=e.substring(e.length-5)+e.substring(5,e.length-5)+t),e}var encoder={decodeBase64:decodeBase64,encodeBase64:encodeBase64,base64_decode_original:base64_encode,sha1:sha1,hashCode:hashCode,isValidBase64Char:isValidBase64Char,shiftString:shiftString};function hasFeature(e){var t=getExternalConfig()||{};return _.has(t,e)}function getExternalConfig(){return window.aurycJSSDKFE||window.aurycJSSDKEFE&&(window.aurycJSSDKFE=JSON.parse(encoder.decodeBase64(window.aurycJSSDKEFE))),window.aurycJSSDKFE}function getFeature(e){var t=getExternalConfig()||{};return _.get(t,e)}function isFeatureEnabled(t,e){if(e&&_.aurycOverride(e))return!0;try{if(hasFeature(t))return getFeature(t+".flag");var i,n=null,r=t.split(".");for(i in r)if(0!==(i=Number(i))){var a=r.slice(0,-i);if(hasFeature(a)){a.push("flag");var o=getFeature(a);if(null===o)continue;n=o,a.pop(),r=a;break}}if(null===n)return n=!1;var s=r.join(".");return logger.warn("Feature Toggle ["+t+"] not defined, inherit ["+n+"] from parent ["+s+"]"),n}catch(e){return logger.warn("Exception occurred when fetching features for "+t),logger.warn(e),!1}}var featureToggle={hasFeature:hasFeature,getExternalConfig:getExternalConfig,getFeature:getFeature,isFeatureEnabled:isFeatureEnabled};function buildQuery(e,t,i){var r=[];return _.each(t,function(e,t){var i=encodeURIComponent(e.toString()),n=encodeURIComponent(t);r.push(n+"="+i)}),(e||"")+r.join(i||"&")}function asyncReq(e){var t=new window.XMLHttpRequest,i=e.type||e.method,n=e.url,r=e.data,a=e.contentType,o=e.referer,s=e.onSuccess,c=e.onFailure,l=e.timeout;t.onload=function(){200<=t.status&&t.status<300?s&&s(this.responseText):(logger.log("The request failed!"),c&&c(this.responseText))};try{t.open(i,n),a&&t.setRequestHeader("Content-Type",a),l&&(t.timeout=l),o&&t.setRequestHeader("X-Referer",o),r?t.send(r):t.send()}catch(e){c&&c("Exception in network")}}function asyncTimeoutReq(e){var t=new window.XMLHttpRequest,i=e.type||e.method,n=e.url,r=e.data,a=e.contentType,o=e.referer,s=e.onSuccess,c=e.onFailure,l=e.timeout,u=setTimeout(function(){t.abort(),c&&c("request timeout!",(new Date).getTime())},l);t.onreadystatechange=function(){4===t.readyState&&(clearTimeout(u),200<=t.status&&t.status<300?s&&s(this.responseText):(logger.log("The request failed!"),c&&c(this.responseText)))};try{t.open(i,n),a&&t.setRequestHeader("Content-Type",a),o&&t.setRequestHeader("X-Referer",o),r?t.send(r):t.send()}catch(e){c&&c("Exception in network")}}var uaParser=createCommonjsModule(function(A,v){!function(r,g){var d="function",e="model",t="name",i="type",n="vendor",a="version",o="architecture",s="console",c="mobile",l="tablet",u="smarttv",h="wearable",p={extend:function(e,t){var i,n={};for(i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:g},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},f={rgx:function(e,t){for(var i,n,r,a,o,s=0;s<t.length&&!a;){for(var c=t[s],l=t[s+1],u=i=0;u<c.length&&!a;)if(a=c[u++].exec(e))for(n=0;n<l.length;n++)o=a[++i],"object"==typeof(r=l[n])&&0<r.length?2==r.length?typeof r[1]==d?this[r[0]]=r[1].call(this,o):this[r[0]]=r[1]:3==r.length?typeof r[1]!=d||r[1].exec&&r[1].test?this[r[0]]=o?o.replace(r[1],r[2]):g:this[r[0]]=o?r[1].call(this,o,r[2]):g:4==r.length&&(this[r[0]]=o?r[3].call(this,o.replace(r[1],r[2])):g):this[r]=o||g;s+=2}},str:function(e,t){for(var i in t)if("object"==typeof t[i]&&0<t[i].length){for(var n=0;n<t[i].length;n++)if(p.has(t[i][n],e))return"?"===i?g:i}else if(p.has(t[i],e))return"?"===i?g:i;return e}},I={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},b={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[t,a],[/(opios)[\/\s]+([\w\.]+)/i],[[t,"Opera Mini"],a],[/\s(opr)\/([\w\.]+)/i],[[t,"Opera"],a],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[t,a],[/(konqueror)\/([\w\.]+)/i],[[t,"Konqueror"],a],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[t,"IE"],a],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[t,"Edge"],a],[/(yabrowser)\/([\w\.]+)/i],[[t,"Yandex"],a],[/(Avast)\/([\w\.]+)/i],[[t,"Avast Secure Browser"],a],[/(AVG)\/([\w\.]+)/i],[[t,"AVG Secure Browser"],a],[/(puffin)\/([\w\.]+)/i],[[t,"Puffin"],a],[/(focus)\/([\w\.]+)/i],[[t,"Firefox Focus"],a],[/(opt)\/([\w\.]+)/i],[[t,"Opera Touch"],a],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[t,"UCBrowser"],a],[/(comodo_dragon)\/([\w\.]+)/i],[[t,/_/g," "],a],[/(windowswechat qbcore)\/([\w\.]+)/i],[[t,"WeChat(Win) Desktop"],a],[/(micromessenger)\/([\w\.]+)/i],[[t,"WeChat"],a],[/(brave)\/([\w\.]+)/i],[[t,"Brave"],a],[/(qqbrowserlite)\/([\w\.]+)/i],[t,a],[/(QQ)\/([\d\.]+)/i],[t,a],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[t,a],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[t,a],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[t,a],[/(MetaSr)[\/\s]?([\w\.]+)/i],[t],[/(LBBROWSER)/i],[t],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[a,[t,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[a,[t,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[t,a],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[a,[t,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[t,/(.+)/,"$1 WebView"],a],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[t,/(.+(?:g|us))(.+)/,"$1 $2"],a],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[a,[t,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[t,"Sailfish Browser"],a],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[t,a],[/(dolfin)\/([\w\.]+)/i],[[t,"Dolphin"],a],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[t,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[t,"Chrome"],a],[/(coast)\/([\w\.]+)/i],[[t,"Opera Coast"],a],[/fxios\/([\w\.-]+)/i],[a,[t,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[a,[t,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[a,t],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[t,"GSA"],a],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[t,[a,f.str,I.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[t,a],[/(navigator|netscape)\/([\w\.-]+)/i],[[t,"Netscape"],a],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[t,a]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[o,"amd64"]],[/(ia32(?=;))/i],[[o,p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[o,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[o,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[o,/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[[o,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[o,p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[e,n,[i,l]],[/applecoremedia\/[\w\.]+ \((ipad)/],[e,[n,"Apple"],[i,l]],[/(apple\s{0,1}tv)/i],[[e,"Apple TV"],[n,"Apple"],[i,u]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[n,e,[i,l]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[e,[n,"Amazon"],[i,l]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[e,f.str,I.device.amazon.model],[n,"Amazon"],[i,c]],[/android.+aft([bms])\sbuild/i],[e,[n,"Amazon"],[i,u]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[e,n,[i,c]],[/\((ip[honed|\s\w*]+);/i],[e,[n,"Apple"],[i,c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[n,e,[i,c]],[/\(bb10;\s(\w+)/i],[e,[n,"BlackBerry"],[i,c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[e,[n,"Asus"],[i,l]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[n,"Sony"],[e,"Xperia Tablet"],[i,l]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[e,[n,"Sony"],[i,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[n,e,[i,s]],[/android.+;\s(shield)\sbuild/i],[e,[n,"Nvidia"],[i,s]],[/(playstation\s[34portablevi]+)/i],[e,[n,"Sony"],[i,s]],[/(sprint\s(\w+))/i],[[n,f.str,I.device.sprint.vendor],[e,f.str,I.device.sprint.model],[i,c]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[n,[e,/_/g," "],[i,c]],[/(nexus\s9)/i],[e,[n,"HTC"],[i,l]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29|ele-l29)/i],[e,[n,"Huawei"],[i,c]],[/android.+(bah2?-a?[lw]\d{2})/i],[e,[n,"Huawei"],[i,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[n,e,[i,c]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[e,[n,"Microsoft"],[i,s]],[/(kin\.[onetw]{3})/i],[[e,/\./g," "],[n,"Microsoft"],[i,c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[e,[n,"Motorola"],[i,c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[e,[n,"Motorola"],[i,l]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[n,p.trim],[e,p.trim],[i,u]],[/hbbtv.+maple;(\d+)/i],[[e,/^/,"SmartTV"],[n,"Samsung"],[i,u]],[/\(dtv[\);].+(aquos)/i],[e,[n,"Sharp"],[i,u]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[n,"Samsung"],e,[i,l]],[/smart-tv.+(samsung)/i],[n,[i,u],e],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[n,"Samsung"],e,[i,c]],[/sie-(\w*)/i],[e,[n,"Siemens"],[i,c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[n,"Nokia"],e,[i,c]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[e,[n,"Acer"],[i,l]],[/android.+([vl]k\-?\d{3})\s+build/i],[e,[n,"LG"],[i,l]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[n,"LG"],e,[i,l]],[/(lg) netcast\.tv/i],[n,e,[i,u]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[e,[n,"LG"],[i,c]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[n,e,[i,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[e,[n,"Lenovo"],[i,l]],[/(lenovo)[_\s-]?([\w-]+)/i],[n,e,[i,c]],[/linux;.+((jolla));/i],[n,e,[i,c]],[/((pebble))app\/[\d\.]+\s/i],[n,e,[i,h]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[n,e,[i,c]],[/crkey/i],[[e,"Chromecast"],[n,"Google"],[i,u]],[/android.+;\s(glass)\s\d/i],[e,[n,"Google"],[i,h]],[/android.+;\s(pixel c)[\s)]/i],[e,[n,"Google"],[i,l]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[e,[n,"Google"],[i,c]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]?[\w\s]+))\s+build/i],[[e,/_/g," "],[n,"Xiaomi"],[i,c]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]?[\w\s]+))\s+build/i],[[e,/_/g," "],[n,"Xiaomi"],[i,l]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[e,[n,"Meizu"],[i,c]],[/(mz)-([\w-]{2,})/i],[[n,"Meizu"],e,[i,c]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[e,[n,"OnePlus"],[i,c]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[e,[n,"RCA"],[i,l]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[e,[n,"Dell"],[i,l]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[e,[n,"Verizon"],[i,l]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[n,"Barnes & Noble"],e,[i,l]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[e,[n,"NuVision"],[i,l]],[/android.+;\s(k88)\sbuild/i],[e,[n,"ZTE"],[i,l]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[e,[n,"Swiss"],[i,c]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[e,[n,"Swiss"],[i,l]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[e,[n,"Zeki"],[i,l]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[n,"Dragon Touch"],e,[i,l]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[e,[n,"Insignia"],[i,l]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[e,[n,"NextBook"],[i,l]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[n,"Voice"],e,[i,c]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[n,"LvTel"],e,[i,c]],[/android.+;\s(PH-1)\s/i],[e,[n,"Essential"],[i,c]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[e,[n,"Envizen"],[i,l]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[n,e,[i,l]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[e,[n,"MachSpeed"],[i,l]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[n,e,[i,l]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[e,[n,"Rotor"],[i,l]],[/android.+(KS(.+))\s+build/i],[e,[n,"Amazon"],[i,l]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[n,e,[i,l]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[i,p.lowerize],n,e],[/[\s\/\(](smart-?tv)[;\)]/i],[[i,u]],[/(android[\w\.\s\-]{0,9});.+build/i],[e,[n,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[a,[t,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[a,[t,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[t,a],[/rv\:([\w\.]{1,9}).+(gecko)/i],[a,t]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[t,a],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[t,[a,f.str,I.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[t,"Windows"],[a,f.str,I.os.windows.version]],[/\((bb)(10);/i],[[t,"BlackBerry"],a],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[t,a],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[t,"Symbian"],a],[/\((series40);/i],[t],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[t,"Firefox OS"],a],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[t,a],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[t,"Chromium OS"],a],[/(sunos)\s?([\w\.\d]*)/i],[[t,"Solaris"],a],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[t,a],[/(haiku)\s(\w+)/i],[t,a],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[a,/_/g,"."],[t,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[t,"Mac OS"],[a,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[t,a]]},m=function(e,t){if("object"==typeof e&&(t=e,e=g),!(this instanceof m))return new m(e,t).getResult();var i=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),n=t?p.extend(b,t):b;return this.getBrowser=function(){var e={name:g,version:g};return f.rgx.call(e,i,n.browser),e.major=p.major(e.version),e},this.getCPU=function(){var e={architecture:g};return f.rgx.call(e,i,n.cpu),e},this.getDevice=function(){var e={vendor:g,model:g,type:g};return f.rgx.call(e,i,n.device),e},this.getEngine=function(){var e={name:g,version:g};return f.rgx.call(e,i,n.engine),e},this.getOS=function(){var e={name:g,version:g};return f.rgx.call(e,i,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this};m.VERSION="0.7.22",m.BROWSER={NAME:t,MAJOR:"major",VERSION:a},m.CPU={ARCHITECTURE:o},m.DEVICE={MODEL:e,VENDOR:n,TYPE:i,CONSOLE:s,MOBILE:c,SMARTTV:u,TABLET:l,WEARABLE:h,EMBEDDED:"embedded"},m.ENGINE={NAME:t,VERSION:a},m.OS={NAME:t,VERSION:a},A.exports&&(v=A.exports=m),v.UAParser=m;var y,C=r&&(r.jQuery||r.Zepto);C&&!C.ua&&(y=new m,C.ua=y.getResult(),C.ua.get=function(){return y.getUA()},C.ua.set=function(e){y.setUA(e);var t,i=y.getResult();for(t in i)C.ua[t]=i[t]})}("object"==typeof window?window:commonjsGlobal)}),uaParser_1=uaParser.UAParser,PubSubTopic=(createClass(es,[{key:"addListener",value:function(e){this.listeners.push(e)}},{key:"publishTopic",value:function(){for(var e=0;e<this.listeners.length;e++)this.listeners[e].apply(this,arguments)}}]),es);function es(){classCallCheck(this,es),this.listeners=[]}var PubSub=(createClass(js,[{key:"addListener",value:function(e,t){if("function"!=typeof t||"string"!=typeof e)return!1;this.topics.hasOwnProperty(e)||(this.topics[e]=new PubSubTopic(e)),this.topics[e].addListener(t)}},{key:"publish",value:function(e,t){if(!this.topics.hasOwnProperty(e))return!1;try{this.topics[e].publishTopic(t)}catch(e){return logger.log("publish event error: ",e),!0}return!0}},{key:"findTopic",value:function(e){return!!this.topics.hasOwnProperty(e)}}]),js);function js(){classCallCheck(this,js),this.topics={},this.topicId=-1}var AurycPubSub=new PubSub;function getQueryParam(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===i||i&&"string"!=typeof i[1]&&i[1].length?"":decodeURIComponent(i[1]).replace(/\+/g," ")}function getHashParam(e,t){var i=e.match(new RegExp(t+"=([^&]*)"));return i?decodeURIComponent(i[1]):null}function isPrivateIP(e){return!(!e||!(-1<e.indexOf("localhost")||/(^127\.)|(^192\.168\.)|(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)|(^::1$)|(^[fF][cCdD])/.test(e)))&&(logger.log("found private ip:"+e),!0)}function isSameDomain(e,t){var i=windowDocument.createElement("a");i.href=windowLocation.href;var n=i.hostname,r=i.protocol;i.href=e;var a=i.hostname||n,o=0===i.protocol.indexOf("http")?i.protocol:r;i.href=t;var s=i.hostname||n,c=0===i.protocol.indexOf("http")?i.protocol:r;return a.toLowerCase()===s.toLowerCase()&&o.toLowerCase()===c.toLowerCase()}function getRootDomain(e){var t=getTopDomain();return t?(logger.log("domain 1: "+t),t):isPrivateIP(e)?"localhost":e.toLowerCase().split(".").slice(-2).join(".")}function getTopDomain(){for(var e,t="weird_get_top_level_domain=cookie",i=document.location.hostname.split("."),n=i.length-1;0<=n;n--)if(e=i.slice(n).join("."),document.cookie=t+";domain=."+e+";",-1<document.cookie.indexOf(t))return document.cookie=t.split("=")[0]+"=;domain=."+e+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",e}function getPath(e){var t=locationInfo(e);return t&&t.path}function matchSingleUrl(t,e){t=t.toLowerCase();var i="is";if(0<(e=e.toLowerCase()).indexOf("*")?(i="starts",e=e.replace(/\*/g,"")):0===e.indexOf("*")&&(i="contains",e=e.replace(/\*/g,"")),"is"===i)return t===e;if("starts"!==i)return!e.split(",").find(function(e){return t.indexOf(e.trim())<0});if(!(t.length<e.length)){for(var n=0;n<e.length;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return;return 1}}function containsUrl(e,t){for(var i=0;i<t.length;i++)if(matchSingleUrl(e,t[i]))return!0;return!1}function campaignParams(){var t,e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),i={};return _.each(e,function(e){(t=_.trim(getQueryParam(document.URL,e))).length&&(i[e]=t)}),i}function getFbParams(){var t,e="fbId email siteId".split(" "),i={};return _.each(e,function(e){(t=_.trim(getQueryParam(document.URL,e))).length&&(i[e]=t)}),i}function getLinkidParams(){var e=config.getArLinkid(),t=[];t.push(e);var i,n={};return _.each(t,function(e){(i=_.trim(getQueryParam(document.URL,e))).length&&(n[e]=i)}),0===Object.keys(n).length&&window[e]&&(n[e]=window[e]),n}function searchEngine(e){return 0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":null}function browser(e,t,i){return t=t||window.navigator.vendor||"",i||_.includes(e," OPR/")?_.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":_.includes(e,"IEMobile")||_.includes(e,"WPDesktop")?"Internet Explorer Mobile":_.includes(e,"Edge")?"Microsoft Edge":_.includes(e,"FBIOS")?"Facebook Mobile":_.includes(e,"Chrome")?_.includes(e,"Android")?"Chrome Mobile":"Chrome":_.includes(e,"CriOS")?"Chrome iOS":_.includes(e,"FxiOS")?"Firefox iOS":/Version\/([0-9\.]*)[\w\W]*Safari/i.test(e)?_.includes(e,"Mobile")?"Mobile Safari":"Safari":_.includes(e,"Android")?"Android Mobile":_.includes(e,"Konqueror")?"Konqueror":_.includes(e,"Firefox")?"Firefox":_.includes(e,"MSIE")||_.includes(e,"Trident/")?"Internet Explorer":_.includes(e,"Gecko")?"Mozilla":""}function browserVersion(e,t,i){return browserAndVersion(e,t,i).version}function browserAndVersion(e,t,i){var n,r=browser(e=e||window.navigator.userAgent,t=t||window.navigator.vendor,i),a={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome Mobile":/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[r];return{name:r,version:void 0!==a&&(n=e.match(a))?parseFloat(n[n.length-2]):null}}function osVersion(e){return new uaParser(e||window.navigator.userAgent).getResult().os.version}function device(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)?"Android":""}function isMobile(e){return/IEMobile|android|blackberry|ipad|iphone|ipod|kindle|mini|nokia|silk|ucweb|windows ce|windows phone/i.test(e)}function isTablet(e){return/tablet|ipad|playbook|silk|(android(?!.*mobile))/i.test(e)}function isSmartphone(e){return isMobile(e)&&!isTablet(e)}function isIOS(e){return/ipad|iphone/i.test(e)}function isWindowsPhone(e){return/windows ce|IEMobile|windows phone/i.test(e)}function visibilityEventPrefix(){var e=null;if(void 0!==document.hidden)e="";else for(var t=["webkit","moz","ms","o"],i=0;i<t.length;i++)if(void 0!==document[t[i]+"Hidden"]){e=t[i];break}return e}function isSafari(){var e=browser(windowNavigator.userAgent,windowNavigator.vendor);return _.includes(e,"Safari")}function isMobileSafari(){var e=browser(windowNavigator.userAgent,windowNavigator.vendor);return _.includes(e,"Mobile Safari")}function isFireFox(){var e=browser(windowNavigator.userAgent,windowNavigator.vendor);return _.includes(e,"Firefox")}function isInternetExp(){var e=browser(windowNavigator.userAgent,windowNavigator.vendor);return _.includes(e,"Internet Explorer")}function canUseVisibilityChange(){var e=browser(windowNavigator.userAgent,windowNavigator.vendor);return!!e&&(-1<e.indexOf("Firefox")||-1<e.indexOf("Chrome")?null!==visibilityEventPrefix():-1<e.indexOf("Safari")&&isMobile(windowNavigator.userAgent))}function referringDomain(e){var t=e.split("/");return 3<=t.length?t[2]:""}function isTouchDevice(){return"ontouchstart"in document.documentElement}function properties(){return _.extend(_.strip_empty_properties({$os:config.os(),$browser:browser(windowNavigator.userAgent,windowNavigator.vendor,win.opera),$referrer:document.referrer,$referring_domain:referringDomain(document.referrer),$device:device(windowNavigator.userAgent)}),{$current_url:windowLocation.href,$browser_version:browserVersion(windowNavigator.userAgent,windowNavigator.vendor,win.opera),$screen_height:screen.height,$screen_width:screen.width,$lib_version:config.getConfig("code_version")})}function locationInfo(e,t){t=t||windowDocument;var i=(e=e||windowLocation).protocol,n=":"===i.slice(-1)?i.slice(0,-1):i;return _.strip_empty_properties({protocol:n,domain:e.hostname&&e.hostname.toLowerCase(),port:e.port,path:e.pathname&&e.pathname.toLowerCase(),query:e.search&&e.search.toLowerCase(),hash:e.hash&&e.hash.toLowerCase(),name:t.title})}function pageviewInfo(e){return _.strip_empty_properties({page:e,referrer:document.referrer,browser:browser(windowNavigator.userAgent,windowNavigator.vendor,win.opera),platform:config.os()})}function addDomEvent(e,t,i,n){e&&(e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i,n))}function removeDomEvent(e,t,i){e.detachEvent?e.detachEvent("on"+t,i):e.removeEventListener(t,i)}function getWinSize(e){return{w:e.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h:e.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function getWinScrlPos(e){return{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}}function getWinScrRes(e){return{w:(e=e||window).screen.width||0,h:e.screen.height||0}}function getWinScrResString(e){var t=getWinScrRes(e);return t.w+" x "+t.h}var Browser=(createClass(ru,[{key:"init",value:function(e){this.features={mobile:isMobile(e),smartphone:isSmartphone(e),tablet:isTablet(e),ios:isIOS(e),winphone:isWindowsPhone(e),deviceType:isMobile(e)?isTablet(e)?"Tablet":"Smartphone":"Desktop",isInternetExp:!1},this.browser={},this.os={},this.analyzeDetails(e)}},{key:"isInternetExp",value:function(){return this.features.isInternetExp}},{key:"initClientSide",value:function(e){var t=browserAndVersion();this.browser.name=t.name,this.browser.version=t.version,this.os.name=config.os(e),this.os.version=osVersion(e),this.features.isInternetExp="Internet Explorer"===this.browser.name,this.isAvail=!0,this.brAvailEvent.publishTopic()}},{key:"saveCurrBrData",value:function(e){var t=JSON.parse(e);this.browser.name=t.browser;var i=t.browserVersion.split(".")[0];this.browser.version=i,this.os={name:t.os,version:t.osVersion};var n=t.deviceType;this.features=_extends({},this.features,{mobile:"Tablet"===n||"Smartphone"===n||"Feature Phone"===n||"Other Mobile"===n,tablet:"Tablet"===n,deviceType:n}),this.isAvail=!0,this.brAvailEvent.publishTopic()}},{key:"clientSideDetectable",value:function(){return!0!==config.getConfig("ua_detect","behavior")||!this.features.mobile||this.features.ios||this.features.tablet||this.features.winphone}},{key:"getDT",value:function(){return this.features.deviceType}},{key:"analyzeDetails",value:function(e){var t,i,n,r=this,a="//"+(config.getConfig("device_uri")||"uba-detector.auryc.com/useragent/")+"?accessToken=";this.clientSideDetectable()?this.initClientSide(e):(t="_ar_br_",(i=localStorage?localStorage.getItem(t):null)?this.saveCurrBrData(i):((n={type:"GET"}).url=a+constants.symbols.DEVICE+"&ua="+e,n.contentType="application/x-www-form-urlencoded",n.onSuccess=function(e){localStorage&&localStorage.setItem(t,e),r.saveCurrBrData(e)},n.failure=function(){r.initClientSide(e)},asyncReq(n)))}},{key:"isPhone",value:function(){return this.features.winphone||this.features.mobile&&!this.features.tablet}},{key:"isPhoneOrTablet",value:function(){return this.features.mobile}}]),ru);function ru(e){classCallCheck(this,ru),this.brAvailEvent=new PubSubTopic,this.isAvail=!1,this.init(e||window.navigator.userAgent)}var browserObj=null;function getInstance(){return null===browserObj&&(browserObj=new Browser),browserObj}function addDomMethods(i){return i.sel=function(e){return i.querySelectorAll(e)},i.addCssCls=function(e){-1===i.className.indexOf(e)&&(i.className&&(i.className+=" "),i.className+=e)},i.replaceCssCls=function(e,t){i.removeCssCls(e),i.addCssCls(t)},i.removeCssCls=function(e){i.className=(i.className||"").replace(e,"")},i.getStyle=function(e){return window.getComputedStyle?window.getComputedStyle(i)[e]:i.currentStyle?i.currentStyle[e]:void 0},i.css=function(e){for(var t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t])},i.setAttr=function(e,t){i.setAttribute(e,t)},i.removeAttr=function(e){i.removeAttribute(e)},i}function toDomNode(e){if(!e)return null;var t,i=e;return _.isString(e)&&""!==e&&((t=document.createElement("div"))[constants.record.tags.IH]=e,i=t[constants.record.attr.FEC]),addDomMethods(i)}function getMaxWinHeight(){var e=document.documentElement,t=Math.max(e.clientHeight,e.scrollHeight,e.offsetHeight),i=document.body,n=Math.max(i.scrollHeight,i.offsetHeight);return Math.max(t,n)}var browser$1={getHashParam:getHashParam,isPrivateIP:isPrivateIP,isSameDomain:isSameDomain,getRootDomain:getRootDomain,getTopDomain:getTopDomain,containsUrl:containsUrl,campaignParams:campaignParams,getFbParams:getFbParams,searchEngine:searchEngine,browser:browser,browserVersion:browserVersion,browserAndVersion:browserAndVersion,device:device,isMobile:isMobile,visibilityEventPrefix:visibilityEventPrefix,isSafari:isSafari,isFireFox:isFireFox,isInternetExp:isInternetExp,canUseVisibilityChange:canUseVisibilityChange,referringDomain:referringDomain,isTouchDevice:isTouchDevice,properties:properties,locationInfo:locationInfo,pageviewInfo:pageviewInfo,addDomEvent:addDomEvent,removeDomEvent:removeDomEvent,getWinSize:getWinSize,getScroll:getWinScrlPos,getScreenResolution:getWinScrRes,getWinScrResString:getWinScrResString,Browser:Browser,getInstance:getInstance,toDomNode:toDomNode,getQueryParam:getQueryParam,getLinkidParams:getLinkidParams,isMobileSafari:isMobileSafari,getPath:getPath},Cookie=(createClass(iv,[{key:"isPrivateIP",value:function(e){return e&&(-1<e.indexOf("localhost")||/(^127\.)|(^192\.168\.)|(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)|(^::1$)|(^[fF][cCdD])/.test(e))}},{key:"setVal",value:function(e,t){var i,n=this.defaultConfigs;for(i in e=encodeURIComponent(e),t=iv.EncodeValue(n,t),n.duration&&(t+=";expires="+new Date(_.now()+n.duration*constants.time.FULL_DAY).toUTCString(),delete n.duration),n.domain&&this.isPrivateIP(n.domain)&&delete n.domain,n)n[i]&&(t+=";"+i+"="+n[i]);var r=e+"="+t;return document.cookie=r}},{key:"get",value:function(e){return iv.Get(e)}},{key:"parse",value:function(e){return iv.Parse(e)}},{key:"extendExp",value:function(e,t){var i=this.get(e);i&&(this.defaultConfigs=_extends({},this.defaultConfigs,{duration:t}),this.setVal(e,i))}}],[{key:"EncodeValue",value:function(e,t){return e.encode===constants.cookies.encoding.URI?t=encodeURIComponent(t):e.encode!==constants.cookies.encoding.BASE64&&!_.isDefined(e.encode)||(t="__"+encoder.encodeBase64(t)),t}},{key:"DecodeValue",value:function(e){if(!e||0===e.length)return e;var t=constants.cookies.encoding.BASE64;return"%"===e.charAt(0)?t=constants.cookies.encoding.URI:"_"===e.charAt(0)&&"_"===e.charAt(1)?(t=constants.cookies.encoding.BASE64,e=e.slice(2)):t=constants.cookies.encoding.NONE,t===constants.cookies.encoding.URI?decodeURIComponent(e):t===constants.cookies.encoding.BASE64?encoder.decodeBase64(e):e}},{key:"deleteCookie",value:function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},{key:"Replace",value:function(e,t,i,n){var r=iv.Get(e),a=iv.Get(t),o=new iv(i);return null!==r&&null===a&&(o.setVal(t,r),n&&o.deleteCookie(e)),o}},{key:"GetSize",value:function(){return windowDocument.cookie.length}},{key:"Get",value:function(e){for(var t=e+"=",i=windowDocument.cookie.split(";"),n=0;n<i.length;n++){for(var r=i[n];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return iv.DecodeValue(r.substring(t.length,r.length))}return null}},{key:"Parse",value:function(e){var t={};try{t=JSON.parse(iv.Get(e))||{}}catch(e){}return t}}]),iv);function iv(e){classCallCheck(this,iv),this.defaultConfigs=e||{}}var DataLayerImpl=(createClass(cw,[{key:"setSessionByKey",value:function(e,t,i){i===constants.storage.SCOPE.SESSION.TAB?sessionStorage.setItem(this.sessionStoragePrefix+e,JSON.stringify(t)):this.setByKey(e,t)}},{key:"setTabByKey",value:function(e,t){this.setSessionByKey(e,t,constants.storage.SCOPE.SESSION.TAB)}},{key:"setByKey",value:function(e,t){this.dlObject=this.dlBackend.parse(this.dlNS),this.dlObject[e]=t,this.commit()}},{key:"getByKeyFromMem",value:function(e){return this.dlObject[e]}},{key:"getByKey",value:function(e){var t=sessionStorage&&sessionStorage.getItem(this.sessionStoragePrefix+e);return _.isDefined(t)&&!_.isNil(t)?JSON.parse(t):this.getFromCookie(e)}},{key:"getUserId",value:function(){}},{key:"hasExpired",value:function(e){var t=this.expiration[e];if(!t)return!0;var i=_.now();return!(i<t)&&(this.expiration[e]=i+5e3,!0)}},{key:"getByKeyList",value:function(e){var i=this,n={},r=[];if(e.forEach(function(e){var t=sessionStorage&&sessionStorage.getItem(i.sessionStoragePrefix+e);_.isDefined(t)&&!_.isNil(t)?n[e]=t:r.push(e)}),0<r.length){var t=this.getFromCookieMulti(r);return _extends({},n,t)}return n}},{key:"getFromCookieMulti",value:function(e){var t=this;try{this.dlObject=this.dlBackend.parse(this.dlNS);var i={};return e.forEach(function(e){t.dlObject[e]&&(i[e]=t.dlObject[e])}),i}catch(e){return{}}}},{key:"getFromCookie",value:function(e){try{return this.dlObject=this.dlBackend.parse(this.dlNS),this.dlObject[e]}catch(e){return null}}},{key:"commit",value:function(){var e=JSON.stringify(this.dlObject);this.dlBackend.setVal(this.dlNS,e)}},{key:"replace",value:function(e){this.dlBackend.setVal(this.dlNS,e)}},{key:"setUserProp",value:function(e,t){this.cachedUserProp[e]=t,localStorage.setItem(this.userDataNS,JSON.stringify(this.cachedUserProp))}},{key:"getUserProp",value:function(e){return this.cachedUserProp[e]}},{key:"resetUserProp",value:function(){this.cachedUserProp={},window.localStorage&&window.localStorage.removeItem(this.userDataNS)}},{key:"removeByKey",value:function(e){this.dlObject=this.dlBackend.parse(this.dlNS);var t=0;this.dlObject[e]&&(delete this.dlObject[e],t=1),1===t&&this.dlBackend.setVal(this.dlNS,JSON.stringify(this.dlObject)),null!==sessionStorage.getItem(this.sessionStoragePrefix+e)&&sessionStorage.removeItem(this.sessionStoragePrefix+e)}},{key:"isEmpty",value:function(){return _.isEmptyObject(this.dlObject)}},{key:"getSize",value:function(){return Cookie.GetSize()}},{key:"getStorageSize",value:function(){var e,t=0;for(e in window.localStorage)window.localStorage.hasOwnProperty(e)&&(t+=2*(e.length+window.localStorage.getItem(e).length));return t}}]),cw);function cw(e){classCallCheck(this,cw);var t,i,n={};this.sessionStoragePrefix="_au_:",n.domain=browser$1.getRootDomain(window.location.hostname),n.path="/",n.encode=constants.cookies.encoding.BASE64,e.persistence!==constants.symbols.SESSION&&(t=e.duration||constants.storage.DEFAULT_COOKIE_DURATION,(i=new Date).setTime(i.getTime()+864e5*t),n.expires=i.toUTCString()),this.dlNS=e.namespace||constants.storage.DEFAULT_DATALAYER_PREFIX,this.userDataNS=this.dlNS+".u",this.dlBackend=null,e.replace?(this.dlBackend=Cookie.Replace(e.replace,this.dlNS,n,!!e.killOld),e.duration&&this.dlBackend.extendExp(this.dlNS,e.duration)):(this.dlBackend=new Cookie(n),e.duration&&this.dlBackend.extendExp(this.dlNs,e.duration),window.localStorage.removeItem(this.userDataNS)),this.dlObject=this.dlBackend.parse(this.dlNS),this.cachedUserProp={},window.localStorage.getItem(this.userDataNS)&&(this.cachedUserProp=JSON.parse(window.localStorage.getItem(this.userDataNS))),this.expiration={ic:1,ready:1}}var winNameSingleton=null,WinNameDataLayer=(createClass(ix,[{key:"initObj",value:function(e){this.objSize=0,this.objStart=e+"_OS_",this.objFinish=e+"_OF_",this.obj={}}},{key:"initString",value:function(e){this.strSize=0,this.strStart=e+"_SS_",this.strFinish=e+"_SF_",this.str=""}},{key:"clear",value:function(){this.initObj("_auryc_"+this.prefix),this.initString("_auryc_"+this.prefix)}},{key:"reload",value:function(){var e,t,i=_.isDefined(window.name)?window.name:"",n="",r=i.indexOf(this.objStart);-1<r&&(e=r+this.objStart.length,t=i.indexOf(this.objFinish)-e,n=i.substr(e,t));try{0<n.length&&(this.obj=JSON.parse(n),this.objSize=n.length)}catch(e){}var a,o,s="",c=i.indexOf(this.strStart);-1<c&&(a=c+this.strStart.length,o=i.indexOf(this.strFinish)-a,s=i.substr(a,o));try{0<s.length&&(this.str=s,this.strSize=s.length)}catch(e){}}},{key:"removeByKey",value:function(e){delete this.obj[e],this.objSize=JSON.stringify(this.obj).length}},{key:"getSize",value:function(){return this.objSize+this.strSize}},{key:"getByKey",value:function(e){return this.obj[e]}},{key:"getStr",value:function(){return this.str}},{key:"setStr",value:function(e){_.isUndefined(e)||(this.str=e,this.strSize=e.length)}},{key:"setStrAndCommit",value:function(e){_.isUndefined(e)||(e.length<=this.storageLimit?(this.setStr(e),this.commit()):logger.warn("exceeding limit. skip"))}},{key:"setByKey",value:function(e,t){_.isDefined(e)&&_.isDefined(t)&&(this.obj[e]=t,this.objSize=JSON.stringify(this.obj).length)}},{key:"commit",value:function(){try{var e=_.isDefined(window.name)?window.name:"",t=e.indexOf(this.objStart),i=JSON.stringify(this.obj),n=this.objStart+i+this.objFinish;-1<t?e=e.substring(0,t)+n+e.substr(e.indexOf(this.objFinish)+this.objFinish.length):e+=n;var r=e.indexOf(this.strStart),a=this.strStart+this.str+this.strFinish;-1<r?e=e.substring(0,r)+a+e.substr(e.indexOf(this.strFinish)+this.strFinish.length):e+=a,window.name=e}catch(e){}}},{key:"purge",value:function(){this.initObj("_auryc_"+this.prefix),this.initString("_auryc_"+this.prefix),this.commit()}}],[{key:"getInstance",value:function(e){return winNameSingleton=winNameSingleton||new ix(e)}}]),ix);function ix(e){classCallCheck(this,ix),this.prefix=e||"",this.initObj("_auryc_"+this.prefix),this.initString("_auryc_"+this.prefix),this.reload(),this.storageLimit=config.getConfig("winname_max_length","record")||constants.storage.WINNAME_MAX_LENGTH}var globalSessStg=null,globalPersistStg=null,DataLayer=(createClass(_x,null,[{key:"getInstance",value:function(e,t){return _x._getInstance()(e,t)}},{key:"_getInstance",value:function(){return function(e,t){var i,n,r=e===constants.symbols.SESSION?"s":"p",a={namespace:"userty."+(t=t||"core")+"."+(r+"."+encoder.sha1(config.getSiteid()).slice(0,6)),replace:"userty."+t+"."+r};return e===constants.symbols.SESSION?(null===globalSessStg&&(i=a,n={namespace:_.get(i,"namespace","userty.s"),persistence:constants.symbols.SESSION},i.replace&&(n.replace=i.replace,n.killOld=!0),globalSessStg=new DataLayerImpl(n)),globalSessStg):(a.duration=constants.storage.DEFAULT_COOKIE_DURATION,null===globalPersistStg&&(globalPersistStg=function(e){e=e||{};var t={namespace:_.get(e,"namespace","userty.p"),persistence:constants.symbols.PERMANENT,duration:_.get(e,"duration",constants.storage.DEFAULT_COOKIE_DURATION)};return e.replace&&(t.replace=e.replace),new DataLayerImpl(t)}(a)),globalPersistStg)}}}]),_x);function _x(){classCallCheck(this,_x)}var StorageDataLayer=(createClass(ry,[{key:"clearHistoryStorage",value:function(){window.sessionStorage.removeItem(this.stgPrefix+"_BLOB"),window.sessionStorage.removeItem(this.stgPrefix+"_OBJ")}},{key:"removeByKey",value:function(e){this.objData[e]&&(delete this.objData[e],this.storageBytesObj=JSON.stringify(this.objData).length)}},{key:"clear",value:function(){this.storageBytesObj=0,this.storageBytesBlob=0,this.objData={},this.blobData=""}},{key:"getByKey",value:function(e){return this.objData[e]}},{key:"getStr",value:function(){return this.blobData}},{key:"setByKey",value:function(e,t){_.isDefined(e)&&_.isDefined(t)&&(this.objData[e]=t,this.storageBytesObj=JSON.stringify(this.objData).length)}},{key:"setStr",value:function(e){this.blobData=e,this.storageBytesBlob=this.blobData.length}},{key:"isSupported",value:function(){return!!sessionStorage}},{key:"reload",value:function(){var e;try{(e=sessionStorage.getItem(this.stgPrefix+"_OBJ"))&&0<e.length&&(this.objData=JSON.parse(e),this.storageBytesObj=e.length)}catch(e){}try{(e=sessionStorage.getItem(this.stgPrefix+"_BLOB"))&&0<e.length&&(this.blobData=e,this.storageBytesBlob=e.length)}catch(e){}}},{key:"commit",value:function(){try{sessionStorage.setItem(this.stgPrefix+"_OBJ",JSON.stringify(this.objData)),sessionStorage.setItem(this.stgPrefix+"_BLOB",this.blobData)}catch(e){}}},{key:"setStrAndCommit",value:function(e){_.isUndefined(e)||e.length<this.storageLimit&&(this.setStr(e),this.commit())}},{key:"purge",value:function(){this.clear(),this.commit()}}],[{key:"getInstance",value:function(e){return ry.instance||(ry.instance=new ry(e)),ry.instance}}]),ry);function ry(e){classCallCheck(this,ry),this.stgPrefix="aurycStg_"+(e||""),this.storageLimit=4e6,this.clear(),this.reload(),this.clearHistoryStorage()}var StorageManager=(createClass(Ry,null,[{key:"getInstance",value:function(e){return config.getConfig("disableWinName","behavior")?StorageDataLayer.getInstance(e):WinNameDataLayer.getInstance(e)}}]),Ry);function Ry(){classCallCheck(this,Ry)}var ip_addr_detector_url_gcp="https://uba-detector.auryc.io/whatismyip?accessToken=auryc20160418",replay_samplelist="2redbeans.com:1,thredup.com:0.1,arenasolutions.com:1,lovewithfood.com:1",record_uri="https://uba-tracking.auryc.com/rec/",ip_detector_url="https://uba-detector.auryc.com/whereismyip?accessToken=auryc20160418",doublefbsubmit="true",editor_url="//visualeditor.auryc.com",uba_api_url="uba-api.auryc.com",services_url="https://services.auryc.com",ip_addr_detector_url="https://uba-detector.auryc.com/whatismyip?accessToken=auryc20160418",domain_name="userty",editor_url_gcp="//visualeditor-mir.auryc.com",portal_replay_url_gcp="http://portal.auryc.com/auth/replay/playback?q=",auto_tracking_url="uba-tracking.auryc.com",tracking_url_gcp="mt-mir.auryc.com",tracking_url_proxy="https://mt-mir.auryc.com",fb_view_uri_gcp="https://feedback-api.auryc.io/view/feedback-json",tracking_url="mt-mir.auryc.com",portal_replay_url="https://portal.auryc.com/auth/replay/playback?q=",uba_api_url_gcp="uba-api.auryc.io",ip_detector_url_gcp="https://uba-detector.auryc.io/whereismyip?accessToken=auryc20160418",fb_view_uri="https://feedback-api.auryc.com/view/feedback-json",inspectlet_wid="1309714722",inspectlet_blacklist="auryc.com,localhost",token_url="services.auryc.com/cc-services/sites",fb_submit_uri="https://feedback-api.auryc.com/submit-feedback",device_detector_domain="uba-detector.auryc.com/useragent",fb_submit_uri_gcp="https://feedback-api.auryc.io/submit-feedback",configServerJson={ip_addr_detector_url_gcp:ip_addr_detector_url_gcp,replay_samplelist:replay_samplelist,record_uri:record_uri,ip_detector_url:ip_detector_url,doublefbsubmit:doublefbsubmit,editor_url:editor_url,uba_api_url:uba_api_url,services_url:services_url,ip_addr_detector_url:ip_addr_detector_url,domain_name:domain_name,editor_url_gcp:editor_url_gcp,portal_replay_url_gcp:portal_replay_url_gcp,auto_tracking_url:auto_tracking_url,tracking_url_gcp:tracking_url_gcp,tracking_url_proxy:tracking_url_proxy,fb_view_uri_gcp:fb_view_uri_gcp,tracking_url:tracking_url,portal_replay_url:portal_replay_url,uba_api_url_gcp:uba_api_url_gcp,ip_detector_url_gcp:ip_detector_url_gcp,fb_view_uri:fb_view_uri,inspectlet_wid:inspectlet_wid,inspectlet_blacklist:inspectlet_blacklist,token_url:token_url,fb_submit_uri:fb_submit_uri,device_detector_domain:device_detector_domain,fb_submit_uri_gcp:fb_submit_uri_gcp};function testSameDomain(e,t){if(!e||!t)return!1;var i=getLocation(e),n=getLocation(t);if(!i||!n)return!1;var r=i.protocol||window.location.protocol,a=n.protocol||window.location.protocol,o=i.port||("http"===r?"80":"443"),s=n.port||("http"===a?"80":"443");return r===a&&o===s&&i.hostname===n.hostname}function isPrivateIP$1(e){return!(!e||!(-1<e.indexOf("localhost")||/(^127\.)|(^192\.168\.)|(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)|(^::1$)|(^[fF][cCdD])/.test(e)))&&(logger.log("found private ip:"+e),!0)}function getRootDomain$1(e){var t=getTopDomain$1();return t?(logger.log("domain 1: "+t),t):isPrivateIP$1(e)?"localhost":e.toLowerCase().split(".").slice(-2).join(".")}function getTopDomain$1(){for(var e,t="weird_get_top_level_domain=cookie",i=document.location.hostname.split("."),n=i.length-1;0<=n;n--)if(e=i.slice(n).join("."),document.cookie=t+";domain=."+e+";",-1<document.cookie.indexOf(t))return document.cookie=t.split("=")[0]+"=;domain=."+e+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",e}function isSubDomain(){if(config.getConfig("crossDomain","behavior"))for(var e=config.getConfig("rootDomain","behavior"),t=window.location.host,i=e.split("|"),n=0;n<i.length;n++){var r=(r=i[n]).replace(/\*./g,".*");if(new RegExp(r,"i").test(t))return!0}return!1}function isAjaxProxyEnabled(e){var t=constants.ajax_proxy.domainFilters;if(new RegExp(t,"i").test(e)){var i=config.getConfig("ajax_whitelist","behavior");if(i)for(var n=i.split(","),r=0;r<n.length;r++){var a=n[r];if(new RegExp(a,"i").test(e))return!0}return!1}return!0}function getLocation(e){var t=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&{href:e,protocol:t[1],domain:t[2],hostname:t[3],port:t[4],path:t[5],query:t[6],hash:t[7]}}function isCrossFrame(){if(top!==window)try{logger.info(top.location.href)}catch(e){return!0}return!1}var urls={testSameDomain:testSameDomain,isPrivateIP:isPrivateIP$1,getRootDomain:getRootDomain$1,getTopDomain:getTopDomain$1,isSubDomain:isSubDomain,isAjaxProxyEnabled:isAjaxProxyEnabled,getLocation:getLocation,isCrossFrame:isCrossFrame},runtimeConfigObj={excludedUrls:[]};function getCfg(e,t,i,n){i=i||"base";var r=_.get(e,i+"["+t+"]",null);if(n||"base"===i)return r;var a=_.get(e,"base["+t+"]",null),o=_.get(e,t,null);return null!==r||null!==a?r:o}function getCurrentIdentity(){var e=DataLayer.getInstance(constants.symbols.PERMANENT),t=e&&e.getByKey(constants.events.IDENTITYVALUE);return!t&&window.localStorage&&(t=window.localStorage.getItem(constants.storage.IDENTITY_KEY)),t}function isCookieSupported$1(){var e=windowNavigator.cookieEnabled;return e||(window.cookie="testcookie",e=-1!==window.cookie.indexOf("testcookie")),e}function getOverrideParams(e,t){return t=t||"behavior",_.get(window,"__AURYC_PARAMS_OVERRIDE__["+t+"]["+e+"]",null)}function getConfig(e,t,i){var n=getCfg(window.aurycJsLibConfig||{},e,t,i),r=getOverrideParams(e,t);return null==r?n:r}function getProductConfig(e,t){var i=window.aurycJsLibConfig||{};return i[e]?i[e]:t?i.base||i:{}}function isVisualEditorMode(){var e=window.location.hash;if(e&&getHashParam$1(e,"mode")&&"editor"===getHashParam$1(e,"mode"))return!0;return"editor"===DataLayer.getInstance(constants.symbols.SESSION).getByKey("_aurychash")}function getHashParam$1(e,t){var i=e.match(new RegExp(t+"=([^&]*)"));return i?i[1]:null}function basicMode(){var e=getConfig("basicMode","behavior");if(!0===e)return!0;var t=document.location.href;if(_.isArray(e))for(var i=0;i<e.length;i++){var n=e[i],r=new RegExp(n);if(t.match(r))return!0}return!1}function os(e){var t=e;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":""}function isSPAEnabled(){var e=getConfig("spaUnsupported","behavior");if(!0===e)return!1;var t=os(windowNavigator.userAgent);if(e&&e.os&&t)for(var i=0;i<e.os.length;i++)if(t===e.os[i])return!1;return!0}function isAppcueBuilderEnabled(){return document.getElementsByTagName("appcues-crx")&&0<document.getElementsByTagName("appcues-crx").length}function hasConflicting3PJS(){return isAppcueBuilderEnabled()}function isAjaxBlacklist(){return-1<document.location.host.indexOf("demandware.net")}function getWorkerJSPath(){var e=getOverrideParams("jslibPath","container")||window.__AURYC_JSLIB_PATH__;switch("production".toLowerCase()){case"local":return e||"http://localhost:8887/";case"development":return e||window.location.protocol+"//cdn-dev.auryc.com/libs/latest/";case"production":return e||window.location.protocol+"//cdn.auryc.com/libs/latest/";default:return""}}function isFeedbackEnabled(){return!1!==getConfig("feedbackEnabled","behavior")}function checkFeedbackScheduled(e){var t=e.scheduled;if(t&&t.enabled){var i=_.now(),n=t.startTime||i-1,r=t.endTime||i+1;return n<=i&&i<=r}return!0}function isFeedbackInviteEnabled(e){var t=e.invite;return!(!t||!t.enabled)}function getWorkerJS(){return getWorkerJSPath()+"auryc.worker.js"}function getDynamicCSS(){var e=constants.record.dynamicCss,t=getConfig("dynamicCss","record");return t&&(e+=","+t),e}function isStyleLink(e){return e&&e.type&&"text/css"===e.type&&e.rel&&"stylesheet"===e.rel}function isBlobStyle(e){return isStyleLink(e)&&e.href&&0===e.href.indexOf("blob:")}function enableProduct(e){DataLayer.getInstance(constants.symbols.SESSION).setSessionByKey("p",e?"t":"f")}function matchUrl(e,t){var i=window.location.href,n=e.filter(function(e){return-1<i.indexOf(e.trim())});return n&&0<n.length?t:!t}function isProductEnabled(e,t){if(!window.JSON)return!1;var i=getConfig("trackAll","behavior"),n=(getConfig("excluded","behavior")||{}).ua;if(_.isBlockedUAComplex(windowNavigator.userAgent,n)&&!0!==i)return logger.warn(e+" disabled. UA not supported: "+windowNavigator.userAgent),!1;if(hasConflicting3PJS())return logger.warn(e+" disabled. Found conflicting 3rd part JS"),!1;if(!isCookieSupported$1())return logger.warn(e+" disabled. cookie is not supported"),!1;if(_.aurycOverride(e))return logger.warn(e+" enabled as per aurycOverride"),!0;if(!1===getConfig("enabled",e,!0))return logger.warn(e+" disabled as per client config"),!1;if(t&&!featureToggle.isFeatureEnabled(t))return logger.warn(e+" disabled as per feature flag"),!1;if(-1<document.location.href.indexOf("ar_id="))return enableProduct(!0),!0;if(getConfig("crossdomain","behavior")&&urls.isCrossFrame())return enableProduct(!0),!0;var r,a,o,s=!0,c=getConfig("sampling","behavior");if(logger.log("sampling rate: "+c+", typeof: "+(void 0===c?"undefined":_typeof(c))),void 0===c||"number"!=typeof c||null===c)return logger.log("sampling undefined. enabled: "+s),s;if(0===c?s=!1:(a=(r=DataLayer.getInstance(constants.symbols.SESSION)).getByKey("p"),logger.log("url:"+location.href+", check sampling, session data: "+a),a?(s="t"===a,logger.log("url:"+location.href+", check sampling enabled: "+s)):(s=(o=100*Math.random())<c,logger.log("url:"+location.href+", random: "+o+", sampling:"+c+", enabled: "+s),r.setSessionByKey("p",s?"t":"f"))),isIpRequired()){var l=getIpBlockedEls(),u=l.wl,g=l.bl,d=DataLayer.getInstance(constants.symbols.SESSION).getByKey(constants.pii.geoIP);if("unknown"===d&&g&&0<g.length)return!1;d&&(_.inArray(d,g)||matchIPSegment(d,g)?s=!1:(_.inArray(d,u)||matchIPSegment(d,u))&&(s=!0))}return s}function matchIPSegment(e,t){for(var i=!1,n=0;n<t.length;n++)if(0<t[n].indexOf("*")){var r=t[n].split("*");if(_.startsWith(e,r[0])){i=!0;break}}return i}function getSiteid(){var e=getConfig("siteid","base")||getConfig("siteid","behavior")||getConfig("siteid","feedback");return!1===e&&(e=getConfig("site_id","base")||getConfig("site_id","behavior")||getConfig("site_id","feedback")),!1===e&&logger.critical("Unable to find a siteid"),e}function isSnapshotEnabled(){var e=getConfig("spEnabled","behavior");if(!e)return!1;for(var t=(window.location.href||"about:blank").toLowerCase(),i=0;i<e.length;i++){if(new RegExp(e[i],"i").test(t))return!0}return!1}function getBaseBlockedEls(){var e=getConfig("doNotTrack","behavior");return e&&e.blocked?e.blocked:null}function getGeoSpecificBlockedEls(){var e=getGeoBlocks();return _.get(e||{},"cssSelectors","")}function getGeoBlocks(){var e=getConfig("doNotTrack","behavior");return e&&e.geoBlocked?e.geoBlocked:null}function getGeoDefault(){return(getGeoBlocks()||{}).default||"allow"}function getGeoBlockContinents(){return((getGeoBlocks()||{}).continents||[]).map(function(e){return e.toLowerCase()})}function getGeoBlockCountries(){return((getGeoBlocks()||{}).countries||[]).map(function(e){return e.toLowerCase()})}function isGeoDetectionRequired(){var e=getGeoBlocks()||{};return 0<_.get(e,"continents",[]).length}function getInputWhiteList(){return getConfig("keepInputsWhiteList","record")||""}function getEventSamplingRate(e){var t=getConfig("eventSampling","behavior"),i=100;return t&&(0===(i=t[e])||i||(i=100)),i}function isPerfTimingAPIAvailable(e){return"performance"in(e=e||window)&&"PerformanceObserver"in e}function isPaintTimingSupported(e){return!!e.PerformancePaintTiming}function isAjaxProxyEnabled$1(){return!isInternetExp()&&(!0===constants.features.AJAX||!0===getConfig("ajax","behavior"))}function compress(i){if(!i.comp)return i;delete i.comp;var n={};return Object.keys(i).forEach(function(e){var t=e.split(":").map(function(e){switch(e){case"z":return"a";case"Z":return"A";default:return String.fromCharCode(1+e.charCodeAt(0))}}).join("");n[t]=i[e]}),n}function isUsingGCP(e){e=e||configServerJson;var t=getConfig("backend","behavior");return"gcp"===e.backend||"gcp"===t}function init(){var e=configServerJson;if(_.isUndefined(win.aurycJsLibConfig))return logger.critical("Unable to initialize. Missing aurycConfig"),void(win.aurycJsLibConfig={base:{enabled:!1},behavior:{enabled:!1},feedback:{enabled:!0}});var baseConfig={enabled:!0,code_version:"2.4.0",device_uri:e.device_detector_domain,ip_url:e.ip_detector_url,ip_address_url:e.ip_addr_detector_url,services_url:e.services_url,tracking_uri:e.tracking_url,tracking_uri_proxy:e.tracking_url_proxy,uba_api_uri:e.uba_api_url,token_uri:e.token_url,auto_tracking_uri:e.auto_tracking_url,record_uri:e.record_uri,editor_uri:e.editor_url,replay_url:e.portal_replay_url,fb_view_url:e.fb_view_uri,fb_submit_url:e.fb_submit_uri,fb_view_url_gcp:e.fb_view_uri_gcp,fb_submit_url_gcp:e.fb_submit_uri_gcp};isUsingGCP(e)&&(baseConfig.tracking_uri=e.tracking_url_gcp,baseConfig.ip_url=e.ip_detector_url_gcp,baseConfig.ip_address_url=e.ip_addr_detector_url_gcp,baseConfig.editor_uri=e.editor_url_gcp,baseConfig.replay_url=e.portal_replay_url_gcp),win.aurycJsLibConfig.base=_.extend(win.aurycJsLibConfig.base,baseConfig);var t=getConfig("excluded","behavior")||{},i=getConfig("included","behavior")||{},n=t.urls||[],r=i.urls||[],a=(constants.excluded||{}).urls||[],o=(constants.included||{}).urls||[];runtimeConfigObj.excludedUrls=n.concat(a),runtimeConfigObj.includedUrls=r.concat(o)}function isDoubleFBSubmit(){return"true"===configServerJson.doublefbsubmit}function getFBViewUrl(e,t){var i=isUsingGCP(e)?"fb_view_url_gcp":"fb_view_url";return(t=t||win).aurycJsLibConfig.base[i]}function getFBSubmitUrl(e,t){var i=isUsingGCP(e)?"fb_submit_url_gcp":"fb_submit_url";return(t=t||win).aurycJsLibConfig.base[i]}function getSecondaryFBSubmitUrl(e,t){var i=isUsingGCP(e)?"fb_submit_url":"fb_submit_url_gcp";return(t=t||win).aurycJsLibConfig.base[i]}function getExcludedUrls(){return runtimeConfigObj.excludedUrls}function getIncludedUrls(){return runtimeConfigObj.includedUrls}function isDomDiffEnabled(){var e=getConfig("diffEnabled","record");return!!_.isUndefined(e)||e}function isBatchProcessingMutationEnabled(){var e=getConfig("batchMutationEnabled","record");return!!_.isUndefined(e)||e}function isTrackConsoleEnabled(){var e=getConfig("trackConsole","behavior");return _.isObject(e)?!0===e.enabled:!0===e}function isInJsErrorSamplingPool(){return samplingEvent(getEventSamplingRate("jsError"),"jsError")}function isInAjaxSamplingPool(){return!!isAjaxProxyEnabled$1()&&samplingEvent(getEventSamplingRate("ajax"),"ajax")}function isTrackNetworkEnabled(){var e=getConfig("trackNetwork","behavior");return _.isObject(e)?!0===e.enabled:!0===e}function addShimAPIs(){window.auryc=window.auryc||{},["track","identify","addFBCustomData","addUserProperties","addSessionProperties","getReplayUrl","setFeedbackEnabled","clearUserCookie","addFBSubmitHandler","addFBCancelHandler","pause","resume"].forEach(function(e){window.auryc[e]=function(){}})}function isTrackResourceEnabled(){return!0===getConfig("trackResource","behavior")}function isStackTraceEnabledForConsole(){var e=getConfig("trackConsole","record");return _.isObject(e)&&!0===e.st}function getRequestHeaderWhiteList(){var e=getConfig("requestHeaderWhiteList","behavior");return _.isUndefined(e)?[]:e.split(",").map(function(e){return e.trim()})}function getResponseHeaderWhiteList(){var e=getConfig("responseHeaderWhiteList","behavior");return _.isUndefined(e)?[]:e.split(",").map(function(e){return e.trim()})}function getAjaxBodyWhitelist(i){var e=getConfig("ajaxRequestWhitelist","behavior");if(_.isUndefined(e))return{isRecorded:!1};var n={};return e.forEach(function(e){var t=e.reg;new RegExp(t,"i").test(i)&&((n=e).isRecorded=!0)}),n.isRecorded?n:{isRecorded:!1}}function samplingEvent(e,t){return checkSampling(DataLayer.getInstance(constants.symbols.SESSION),t,e,t)}function checkSampling(e,t,i,n){if(void 0===i||!_.isNumber(i)||100===i)return!0;if((n=n||t)&&"true"===window.localStorage[n])return!0;if(0===i)return!1;if(e&&t){var r="smpl."+t,a=e.getByKey(r);if(a)return"t"===a;var o=100*Math.random()<i;return e.setByKey(r,o?"t":"f"),o}return 100*Math.random()<i}function setErrorRule(e){DataLayer.getInstance(constants.symbols.SESSION).setSessionByKey("auryc.onerror.key",JSON.stringify(e),constants.storage.SCOPE.SESSION.TAB)}function getErrorRule(){return{properties:[{name:"js_error",dataType:"customEvent",attribute:[{name:"relative_error_loc",value:"fileRelativeLocation"},{name:"error_message",value:"message"},{name:"error_lineNo",value:"lineNo"},{name:"error_columnNo",value:"columnNo"}],handler:"aurycJSErrorHanlder"}],triggers:[{event:"error",object:"window"}]}}function getParameterCaseInsensitive(e,t){if(e)return e[Object.keys(e).filter(function(e){return e.toLowerCase()===t.toLowerCase()})[0]]}function getIpBlockedEls(){var e=getConfig("doNotTrack","behavior");return e&&e.ip?(e.ip.wl=e.ip.wl||[],e.ip.bl=e.ip.bl||[],e.ip):null}function isIpRequired(){var e=getIpBlockedEls();if(e){var t=e.wl,i=e.bl;return 0<t.length||0<i.length?!0:!1}return!1}function checkDomOnloadSampling(){var e=1;if(localStorage.getItem("domOnloadSampling"))return!0;var t=getConfig("domOnloadSampling","record");return _.isDefined(t)&&(e=t),100*Math.random()<e}function isWebVitalsEnabled(){return!1!==getConfig("webvitals","behavior")}function getArLinkid(){return getConfig("arLinkid","behavior")||"_ar_id_"}var config={getConfig:getConfig,isSPAEnabled:isSPAEnabled,hasConflicting3PJS:hasConflicting3PJS,isProductEnabled:isProductEnabled,getSiteid:getSiteid,isVisualEditorMode:isVisualEditorMode,getProductConfig:getProductConfig,isSnapshotEnabled:isSnapshotEnabled,init:init,getBaseBlockedEls:getBaseBlockedEls,isCookieSupported:isCookieSupported$1,os:os,isAjaxProxyEnabled:isAjaxProxyEnabled$1,compress:compress,getEventSamplingRate:getEventSamplingRate,basicMode:basicMode,getWorkerJS:getWorkerJS,getInputWhiteList:getInputWhiteList,isBlobStyle:isBlobStyle,isDomDiffEnabled:isDomDiffEnabled,isBatchProcessingMutationEnabled:isBatchProcessingMutationEnabled,getDynamicCSS:getDynamicCSS,enableProduct:enableProduct,isFeedbackEnabled:isFeedbackEnabled,getExcludedUrls:getExcludedUrls,getIncludedUrls:getIncludedUrls,matchUrl:matchUrl,getGeoBlockContinents:getGeoBlockContinents,getGeoBlockCountries:getGeoBlockCountries,getGeoDefault:getGeoDefault,isGeoDetectionRequired:isGeoDetectionRequired,getGeoSpecificBlockedEls:getGeoSpecificBlockedEls,isAjaxBlacklist:isAjaxBlacklist,getRequestHeaderWhiteList:getRequestHeaderWhiteList,getResponseHeaderWhiteList:getResponseHeaderWhiteList,isTrackConsoleEnabled:isTrackConsoleEnabled,isTrackNetworkEnabled:isTrackNetworkEnabled,getAjaxBodyWhitelist:getAjaxBodyWhitelist,isStackTraceEnabledForConsole:isStackTraceEnabledForConsole,isInJsErrorSamplingPool:isInJsErrorSamplingPool,isInAjaxSamplingPool:isInAjaxSamplingPool,setErrorRule:setErrorRule,getErrorRule:getErrorRule,isPerfTimingAPIAvailable:isPerfTimingAPIAvailable,isPaintTimingSupported:isPaintTimingSupported,getParameterCaseInsensitive:getParameterCaseInsensitive,isTrackResourceEnabled:isTrackResourceEnabled,addShimAPIs:addShimAPIs,getIpBlockedEls:getIpBlockedEls,isIpRequired:isIpRequired,checkDomOnloadSampling:checkDomOnloadSampling,checkFeedbackScheduled:checkFeedbackScheduled,isFeedbackInviteEnabled:isFeedbackInviteEnabled,getCurrentIdentity:getCurrentIdentity,isWebVitalsEnabled:isWebVitalsEnabled,getArLinkid:getArLinkid,isUsingGCP:isUsingGCP,getFBSubmitUrl:getFBSubmitUrl,getFBViewUrl:getFBViewUrl,getSecondaryFBSubmitUrl:getSecondaryFBSubmitUrl,isDoubleFBSubmit:isDoubleFBSubmit},AurycPublicApi=(createClass(HC,[{key:"mergeAPI",value:function(t,e){var i=this,n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);e&&(n=t,r=Object.keys(t)),r.forEach(function(e){"function"==typeof n[e]&&"constructor"!==e&&0!==e.indexOf("_")&&i.safeWrap(t,e)})}},{key:"safeWrap",value:function(e,t){var i=e[t];this[t]=function(){try{return i.apply(e,arguments)}catch(e){}}}}]),HC);function HC(e,t,i,n,r){classCallCheck(this,HC),this.mergeAPI(e,!0),this.mergeAPI(e),this.mergeAPI(t),this.mergeAPI(n),this.mergeAPI(r),this.mergeAPI(i)}var sha256=createCommonjsModule(function(module){!function(){var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&module.exports,AMD=!1,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t,i){return function(e){return new Sha256(i,!0).update(e)[t]()}},createMethod=function(e){var t=createOutputMethod("hex",e);NODE_JS&&(t=nodeWrap(t,e)),t.create=function(){return new Sha256(e)},t.update=function(e){return t.create().update(e)};for(var i=0;i<OUTPUT_TYPES.length;++i){var n=OUTPUT_TYPES[i];t[n]=createOutputMethod(n,e)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if("string"==typeof e)return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(null==e)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},createHmacOutputMethod=function(i,n){return function(e,t){return new HmacSha256(e,n,!0).update(t)[i]()}},createHmacMethod=function(t){var i=createHmacOutputMethod("hex",t);i.create=function(e){return new HmacSha256(e,t)},i.update=function(e,t){return i.create(e).update(t)};for(var e=0;e<OUTPUT_TYPES.length;++e){var n=OUTPUT_TYPES[e];i[n]=createHmacOutputMethod(n,t)}return i};function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function HmacSha256(e,t,i){var n=typeof e;if("string"==n){for(var r,a=[],o=e.length,s=0,c=0;c<o;++c)(r=e.charCodeAt(c))<128?a[s++]=r:(r<2048?a[s++]=192|r>>6:(r<55296||57344<=r?a[s++]=224|r>>12:(r=65536+((1023&r)<<10|1023&e.charCodeAt(++c)),a[s++]=240|r>>18,a[s++]=128|r>>12&63),a[s++]=128|r>>6&63),a[s++]=128|63&r);e=a}else{if("object"!=n)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR)}64<e.length&&(e=new Sha256(t,!0).update(e).array());var l=[],u=[];for(c=0;c<64;++c){var g=e[c]||0;l[c]=92^g,u[c]=54^g}Sha256.call(this,t,i),this.update(u),this.oKeyPad=l,this.inner=!0,this.sharedMemory=i}Sha256.prototype.update=function(e){if(!this.finalized){var t,i=typeof e;if("string"!=i){if("object"!=i)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var n,r,a=0,o=e.length,s=this.blocks;a<o;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)for(r=this.start;a<o&&r<64;++a)s[r>>2]|=e[a]<<SHIFT[3&r++];else for(r=this.start;a<o&&r<64;++a)(n=e.charCodeAt(a))<128?s[r>>2]|=n<<SHIFT[3&r++]:(n<2048?s[r>>2]|=(192|n>>6)<<SHIFT[3&r++]:(n<55296||57344<=n?s[r>>2]|=(224|n>>12)<<SHIFT[3&r++]:(n=65536+((1023&n)<<10|1023&e.charCodeAt(++a)),s[r>>2]|=(240|n>>18)<<SHIFT[3&r++],s[r>>2]|=(128|n>>12&63)<<SHIFT[3&r++]),s[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++]),s[r>>2]|=(128|63&n)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,64<=r?(this.block=s[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){var e,t;this.finalized||(this.finalized=!0,e=this.blocks,t=this.lastByteIndex,e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],56<=t&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash())},Sha256.prototype.hash=function(){for(var e,t,i,n,r,a,o,s,c=this.h0,l=this.h1,u=this.h2,g=this.h3,d=this.h4,h=this.h5,p=this.h6,f=this.h7,I=this.blocks,b=16;b<64;++b)e=((n=I[b-15])>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,t=((n=I[b-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,I[b]=I[b-16]+e+I[b-7]+t<<0;for(s=l&u,b=0;b<64;b+=4)this.first?(g=this.is224?(r=300032,f=(n=I[0]-1413257819)-150054599<<0,n+24177077<<0):(r=704751109,f=(n=I[0]-210244248)-1521486534<<0,n+143694565<<0),this.first=!1):(e=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),i=(r=c&l)^c&u^s,f=g+(n=f+(t=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&h^~d&p)+K[b]+I[b])<<0,g=n+(e+i)<<0),e=(g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10),i=(a=g&c)^g&l^r,p=u+(n=p+(t=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&d^~f&h)+K[b+1]+I[b+1])<<0,e=((u=n+(e+i)<<0)>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),i=(o=u&g)^u&c^a,h=l+(n=h+(t=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&f^~p&d)+K[b+2]+I[b+2])<<0,e=((l=n+(e+i)<<0)>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),i=(s=l&u)^l&g^o,d=c+(n=d+(t=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&p^~h&f)+K[b+3]+I[b+3])<<0,c=n+(e+i)<<0;this.h0=this.h0+c<<0,this.h1=this.h1+l<<0,this.h2=this.h2+u<<0,this.h3=this.h3+g<<0,this.h4=this.h4+d<<0,this.h5=this.h5+h<<0,this.h6=this.h6+p<<0,this.h7=this.h7+f<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,i=this.h2,n=this.h3,r=this.h4,a=this.h5,o=this.h6,s=this.h7,c=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o];return this.is224||(c+=HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]),c},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,i=this.h2,n=this.h3,r=this.h4,a=this.h5,o=this.h6,s=this.h7,c=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24&255,i>>16&255,i>>8&255,255&i,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,a>>24&255,a>>16&255,a>>8&255,255&a,o>>24&255,o>>16&255,o>>8&255,255&o];return this.is224||c.push(s>>24&255,s>>16&255,s>>8&255,255&s),c},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){var e;Sha256.prototype.finalize.call(this),this.inner&&(this.inner=!1,e=this.array(),Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this))};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(void 0)(function(){return exports}))}()});function idGen(e){e=sha256.sha256(e);for(var t="",i=0;i<e.length;){for(var n=0,r=i;r<i+16&&r<e.length;r++){n=(n<<5)-n+e.charCodeAt(r);n&=n}t+=(n=0<n?n:-n).toString(16),i+=16}return t.length<constants.storage.ID_LENGTH?t+=t.substr(0,constants.storage.ID_LENGTH-t.length):t=t.substr(0,constants.storage.ID_LENGTH),t}function generateSessionId(e,t){var i=config.getSiteid();return!1===i?(logger.log("siteid is false. using old global session id"),idGen(_.UUID())):e&&t?idGen(i+e+t):(logger.log("userId or lastvisitTS is false. using old global session id"),idGen(_.UUID()))}function generateViewId(){return idGen(_.UUID())}function generateUserId(){return idGen(config.getSiteid()+"-"+_.UUID())}function generateGUID(){return _.UUID()}var idGen$1={generateSessionId:generateSessionId,generateViewId:generateViewId,generateUserId:generateUserId,generateGUID:generateGUID};function initGeoInfo(t){if(config.isGeoDetectionRequired()){var e=DataLayer.getInstance(constants.symbols.SESSION).getByKey(constants.pii.geoContinent);if(e&&"unknown"!==e)t();else try{loadGeoInfo(t)}catch(e){t()}}else t()}function initGeoIP(t){if(config.isIpRequired()){var e=DataLayer.getInstance(constants.symbols.SESSION).getByKey(constants.pii.geoIP);if(e&&"unknown"!==e)t();else try{loadGeoIP(t)}catch(e){t()}}else t()}function syncGeoInfo(e){var t={continent:"unknown",country:"unknown",ip:"unknown"};if(e)try{t=JSON.parse(e)}catch(e){}var i=DataLayer.getInstance(constants.symbols.SESSION);i.setSessionByKey(constants.pii.geoContinent,(t.continent||"").toLowerCase()),i.setSessionByKey(constants.pii.geoCountry,(t.country||"").toLowerCase()),i.setSessionByKey(constants.pii.geoIP,t.ip)}function syncGeoIP(e){e&&DataLayer.getInstance(constants.symbols.SESSION).setSessionByKey(constants.pii.geoIP,e)}function isGeoBlocked(){if(!config.isGeoDetectionRequired())return!1;var e=DataLayer.getInstance(constants.symbols.SESSION),t=config.getGeoBlockContinents(),i=e.getByKey(constants.pii.geoContinent);return i&&"unknown"!==i?_.inArray(i,t):"allow"!==config.getGeoDefault()}function loadGeoInfo(t){var e={type:"GET"};e.url=config.getConfig("ip_url"),e.contentType="application/json",e.onSuccess=function(e){syncGeoInfo(e),t()};var i=JSON.stringify({continent:"unknown",country:"unknown"});e.onFailure=function(e){syncGeoInfo(i),t()},e.timeout=3e3,asyncTimeoutReq(e)}function loadGeoIP(t){var e={type:"GET"};e.url=config.getConfig("ip_address_url"),e.contentType="text/html",e.onSuccess=function(e){syncGeoIP(e),t()},e.onFailure=function(e){syncGeoIP("unknown"),t()},e.timeout=3e3,asyncTimeoutReq(e)}var location$1={initGeoInfo:initGeoInfo,isGeoBlocked:isGeoBlocked,loadGeoInfo:loadGeoInfo,initGeoIP:initGeoIP},PIIHandler=(createClass(lF,[{key:"parseConfig",value:function(){this.rules=config.getBaseBlockedEls(),this.rules||(this.rules={}),this.rules[".*"]?this.rules[".*"]+=","+this.defaultMaskCSSSelectors:this.rules[".*"]=this.defaultMaskCSSSelectors;var e=location$1.isGeoBlocked(),t=config.getGeoSpecificBlockedEls();e&&t&&(this.rules[".*"]+=","+t),!1===config.getConfig("keepInputs","record")||e?(this.inputRule="input:not([type]), input[type=text], input[type=email], input[type=password],input[type=tel],textarea,input[type=date],input[type=datetime-local],input[type=week],input[type=email],input[type=number],input[type=search], select,input[name*=password],input[id*=password]",e||(this.whiteList=config.getInputWhiteList())):this.rules[".*"]+=", input[id=cc], input[name=cc], input[type=password],input[name*=password],input[id*=password]"}},{key:"isIgnoreInputsOverride",value:function(){return!1===config.getConfig("keepInputs","record")&&!0===config.getConfig("ignoreInputsOverride","record")}},{key:"processKeepInputs",value:function(e){var t,i=this;this.tagCreditCardInput(e),0<this.inputRule.length&&(t=e.querySelectorAll(this.inputRule),_.each(t,function(e,t){_.addCssCls(e,i.maskClassName),e[constants.pii.maskingProperty]=!0,i.addMaskAttribute(e)}),this.processWhiteList(e))}},{key:"processWhiteList",value:function(e){if(0<this.whiteList.length)for(var t=e.querySelectorAll(this.whiteList),i=0;i<t.length;i++){var n=t[i];"select"!==n.tagName.toLowerCase()&&"input"!==n.tagName.toLowerCase()&&"textarea"!==n.tagName.toLowerCase()||(n.removeAttribute(this.maskClassName),_.removeClass(n,this.maskClassName),n[constants.pii.maskingProperty]=!1)}}},{key:"getPIISelectors",value:function(){var e=[];if(0===Object.keys(this.rules).length)return e;var t,i=window.location.href||"";for(t in this.rules){new RegExp(t,"i").test(i)&&e.push(this.rules[t])}return e}},{key:"isTagged",value:function(e){var t=e.parentNode;if(!t)return!1;for(var i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];if(0<i&&n===t.childNodes[i]){var r=t.childNodes[i-1];if(r.data&&-1<r.data.indexOf(this.piiMarkerPrefix))return!0}}return!1}},{key:"isTaggedDynamic",value:function(e){return!(!e.nextSibling||8!==e.nextSibling.nodeType)&&(e.nextSibling.data&&-1<e.nextSibling.data.indexOf(this.piiMarkerEnd))}},{key:"maskAttribute",value:function(t){if(t&&(this.maskedAttributes.forEach(function(e){t.getAttribute(e)&&t.setAttribute(e,"")}),t.attributes))for(var e=0;e<t.attributes.length;e++){var i=t.attributes[e].name;i&&/data-*/.test(i)&&t.setAttribute(i,"")}}},{key:"updateBoundingRect",value:function(e){var t=this.getPIISelectors();if(0===t.length)return!1;for(var i=e.querySelectorAll(t.join(",")),n=0;n<i.length;n++){var r=i[n];this.addMaskAttribute(r)}}},{key:"tagCreditCardInput",value:function(e){for(var t=e.querySelectorAll("input, select"),i=t.length-1;0<=i;i--){var n=t[i],r=n.getAttribute("id"),a=n.getAttribute("name"),o=n.getAttribute("class");(this.matchingCard(r)||this.matchingCard(a)||this.matchingCard(o))&&(_.addCssCls(n,this.maskClassName),n[constants.pii.maskingProperty]=!0)}}},{key:"matchingCard",value:function(e){if(e){var t=constants.pii.creditCardAtt;e=e.replace(/_/g,"").replace(/-/g,"").toLowerCase();for(var i=0;i<t.length;i++)if(-1!==e.indexOf(t[i]))return!0}return!1}},{key:"tagDynamic",value:function(e,t){this.processKeepInputs(e);var i=this.getPIISelectors();if(0===i.length)return"false";for(var n=t.querySelectorAll(i.join(",")),r=0;r<n.length;r++){var a=n[r];if(PIIUtils.containedBy(e,a)||a===e)return e[constants.pii.maskingProperty]=!0,"skip";if(PIIUtils.containedBy(a,e))return a[constants.pii.maskingProperty]=!0,"true"}return"false"}},{key:"processPII",value:function(e,t){var i=e,n=null;return t?n=new RegExp(".+","mig"):0<=e.indexOf(this.piiMarkerStart)&&(n=new RegExp("\x3c!--(\\W)*"+this.piiMarkerStart+"[\\w\\W]*?"+this.piiMarkerEnd+"(\\W)*--\x3e","mig")),n&&(i=PIIUtils.replaceWithMask(e,n)),i}},{key:"removeComments",value:function(e){var t=this;if(/<!--/gim.test(e)){var i=new RegExp("(\x3c!--)[\\w\\W]*?(--\x3e)","mig");return PIIUtils.replaceWithMask(e,i,function(e){return e[0].indexOf("arHiddenBlock")<0&&e[0].indexOf(t.piiMarkerPrefix)<0?"":e[0]})}return e}},{key:"replaceMediaSrc",value:function(e){return e?e.indexOf("au_image_src")<0?e:e=e.replace(/au_image_src=/g,"src="):""}},{key:"removeJS",value:function(e){if(!e)return"";if(e.indexOf("script")<0)return e;for(var t=RegExp("(<script[^>]*?>)[\\s\\S]*?(<\/script>)","gim"),i="",n=e.length,r=0,a=t.exec(e);_.isDefined(a);)var o=a.index,s=a[0],c=a[1].replace("src=","au_src="),l=a[2],i=(i+=e.substring(r,o))+c+l,r=o+s.length,a=t.exec(e);return i+=e.substring(r,n)}},{key:"removeBlobLink",value:function(e){if(!e)return"";if(e.indexOf("blob:")<0)return e;var t=RegExp("(<link.*?>)","gim");return PIIUtils.replaceWithMask(e,t,function(e){var t=e instanceof Array?e[0]:e||"";return-1<t.indexOf("blob:")?"":t})}},{key:"addMaskAttribute",value:function(e){var t=this.getBoundingRect(e);e.setAttribute(this.maskClassName,t)}},{key:"cloneAttributes",value:function(e,t){for(var i,n=Array.prototype.slice.call(t.attributes);i=n.pop();)if(!_.inArray(i.nodeName,this.maskedAttributes)&&!/data-*/.test(i.nodeName))try{e.setAttribute(i.nodeName,i.nodeValue)}catch(e){}}},{key:"processHiddenElement",value:function(e){for(var t=e.querySelectorAll('input[type="hidden"]'),i=0;i<t.length;i++){var n=t[i],r=n.tagName,a=document.createElement(r);this.cloneAttributes(a,n),n.parentNode.insertBefore(a,n),n.parentNode.removeChild(n)}}},{key:"processMaskElement",value:function(e,t){var i=this.getPIISelectors();if(0!==i.length){for(var n=t.querySelectorAll(i.join(",")),r=0;r<n.length;r++){var a=n[r];this.addMaskAttribute(a),_.addCssCls(a,this.maskClassName)}for(var o=e.querySelectorAll(i.join(",")),s=0;s<o.length;s++){var c=o[s],l=c.tagName,u=document.createElement(l);n[s]&&n[s].getAttribute(this.maskClassName)&&u.setAttribute(this.maskClassName,n[s].getAttribute(this.maskClassName)),this.cloneAttributes(u,c),_.addCssCls(u,this.maskClassName),c.parentNode.insertBefore(u,c),c.parentNode.removeChild(c)}}}},{key:"processAttribute",value:function(e){var t,i;constants.pii.ignoreAttributes&&0!==constants.pii.ignoreAttributes.length&&(t=constants.pii.ignoreAttributes.map(function(e){return"["+e+"]"}).join(","),i=e.querySelectorAll(t),_.each(i,function(t){try{constants.pii.ignoreAttributes.forEach(function(e){return t.removeAttribute(e)})}catch(e){}}))}},{key:"isAttributeProcessRequired",value:function(e){if(!constants.pii.ignoreAttributes||0===constants.pii.ignoreAttributes.length)return!1;var t=constants.pii.ignoreAttributes.map(function(e){return"["+e+"]"}).join(","),i=e.querySelectorAll(t);return i&&0<i.length}},{key:"getBoundingRect",value:function(e){var t,i=getComputedStyle(e,!1);return i?"width:"+i.width+";height:"+i.height+";margin:"+i.margin+";position:"+i.position+";display:"+i.display+";":(t=e.getBoundingClientRect(),"width:"+Math.floor(t.width)+"px;height:"+Math.floor(t.height)+"px;")}}]),lF);function lF(){classCallCheck(this,lF),this.piiMarkerStart="arMaskedContentStart",this.piiMarkerEnd="arMaskedContentEnd",this.piiMarkerPrefix="arMaskedContent",this.maskClassName=constants.pii.maskingClassName,this.defaultMaskCSSSelectors="."+constants.pii.maskingClassName,this.maskedAttributes=constants.pii.maskingAttributes,this.maskElementWithStyle=["input","textarea"],this.rules={},this.whiteList="",this.inputRule="",this.parseConfig()}var PIIUtils=(createClass(XH,null,[{key:"replaceWithMask",value:function(e,t,i){var n=t.exec(e),r="",a=0;for(i=i||XH.maskStr;_.isDefined(n);){r+=e.substring(a,n.index),r+=i(n),a=n.index+n[0].length,n=t.exec(e)}return r+=e.substring(a,e.length)}},{key:"maskStr",value:function(e){var t=e instanceof Array?e[0]:e||"";if(0<t.length){return t.replace(/(>)|(&[^\s;]*;)|(<[^<>]*?>)|(<)|\w/g,function(e,t,i,n){return i||n||"*"}).replace(/&((?!nbsp| |amp).)*?;/g,"*")}return""}},{key:"containedBy",value:function(e,t){return t.contains?e!==t&&t.contains(e):!!(16&t.compareDocumentPosition(e))}}]),XH);function XH(){classCallCheck(this,XH)}var globalPIIHandler=null;function getPIIHandler(){return globalPIIHandler=globalPIIHandler||new PIIHandler}function isPIINodeRec(e){if(!e)return!1;e.nodeType===Node.TEXT_NODE&&(e=e.parentNode);try{if(!0===e[constants.pii.maskingProperty])return!0;if(e.getAttribute(constants.pii.maskingClassName))return!0;var t=e.type||e.getAttribute("type");if("reset"===t||"submit"===t||"button"===t)return!1;if("input"===e.nodeName.toLowerCase()&&getPIIHandler().isIgnoreInputsOverride())return!0;var i=e.className||e.getAttribute("class"),n=i&&0<=i.indexOf(constants.pii.maskingClassName);return n?(e[constants.pii.maskingProperty]=!0,n):(isCreditcardInput(e.value)&&(n=!0,e[constants.pii.maskingProperty]=!0),n)}catch(e){return!1}}function cloneDomNode(e){var t=e.cloneNode(!0),i=t.querySelectorAll("video, audio, img");return[].forEach.call(i,function(e){var t;(t=e).tagName&&"img"===t.tagName.toLowerCase()?(t.setAttribute("au_image_src",t.getAttribute("src")),t.removeAttribute("src")):(t.setAttribute("au_media_src",t.getAttribute("src")),t.src=""),t.muted=!0,"function"==typeof t.pause&&t.pause()}),t}function isPIINode(e){if(!e)return!1;if(!e.nodeName)return!1;if(e.nodeType===Node.TEXT_NODE)return isPIINode(e=e.parentNode);if("body"===e.nodeName.toLowerCase())return isPIINodeRec(e);var t=isPIINodeRec(e);return!t&&e.parentNode?isPIINode(e.parentNode):t}function isCreditcardInput(e){return e&&10<e.length&&_.isLongNumber(e)}function getTopLevelWin(e){if(!e)return null;if(e.ownerDocument&&e.ownerDocument.defaultView)return e.ownerDocument.defaultView;for(;e.parentNode||e.document;){if(e.document)return e;e=e.parentNode}}function getNodeCoord(e,t){for(var i=0,n=0;e;){var r=(r=parseFloat(getElCssProp(e,t,"border-top-width")))||0,a=(a=parseFloat(getElCssProp(e,t,"border-left-width")))||0,o=0,s=0;if(t.getComputedStyle){var c=t.getComputedStyle(e).getPropertyValue("transform");if(c&&0<c.indexOf(")"))try{c=matrixToArray(c),s=parseFloat(c[4]),o=parseFloat(c[5])}catch(e){}}i=r+i+e.offsetTop+o,n=a+n+e.offsetLeft+s,e=e.offsetParent}return{x:i,y:n}}function matrixToArray(e){return e.split("(")[1].split(")")[0].split(",")}function getPosInTopFrame(e,t,i){var n={x:0,y:0};if(!t)return n;var r=getNodeCoord(e,t);return r&&0<r.y&&(n.x=r.y,n.y=r.x),i&&(n.x+=i.x,n.y+=i.y),n}function getElCssProp(e,t,i){return e&&t&&i?t.getComputedStyle(e,null).getPropertyValue(i):""}function getWinSz(e){return{w:(e=e||window).innerWidth||0,h:e.innerHeight||0}}function isFeedbackShown(e){return e&&0<e.querySelectorAll("."+constants.css.FBMODAL_CONTAINER).length}function getDocumentWH(e){var t=(e=e||window.document).body,i=e.documentElement,n="hidden"!==window.getComputedStyle(t).overflowX||isFeedbackShown(t)?Math.max(t.scrollWidth,i.scrollWidth):0;0===n&&(n=Math.max(i.clientWidth,t.offsetWidth,i.offsetWidth));var r="hidden"!==window.getComputedStyle(t).overflowY||isFeedbackShown(t)?r=Math.max(t.scrollHeight,i.scrollHeight):0;return 0===r&&(r=Math.max(i.clientHeight,t.offsetHeight,i.offsetHeight)),{width:n,height:r}}function nodeBelongsTo(e,t){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));for(;e.parentNode;){if(e===t||e===t.body)return!0;e=e.parentNode}return!1}function findCommonPrefix(e){for(var t=e.concat().sort(),i=t[0],n=t[t.length-1],r=i.length,a=0;a<r&&i.charAt(a)===n.charAt(a);)a++;if(0===a)return null;if(a===i.length)return{prefix:i,shortest:i};for(var o=a;0<o&&"."!==i.charAt(o-1);)o--;return 0===o?null:{prefix:i.substring(0,o-1),shortest:i}}var dom={isPIINode:isPIINode,getTopLevelWin:getTopLevelWin,getPosInTopFrame:getPosInTopFrame,getSize:getWinSz,getDocSize:getDocumentWH,nodeBelongsTo:nodeBelongsTo,getPosition:getNodeCoord,getStyle:getElCssProp,findCommonPrefix:findCommonPrefix,isCreditcardInput:isCreditcardInput,cloneDomNode:cloneDomNode},$zlib={};(function(){var re=void 0,ae=!0,a=this;function e(e,t){var i,n=e.split("."),r=a;n[0]in r||!r.execScript||r.execScript("var "+n[0]);for(;n.length&&(i=n.shift());)n.length||t===re?r=r[i]?r[i]:r[i]={}:r[i]=t}var oe="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function se(e,t){if(this.index="number"==typeof t?t:0,this.d=0,this.buffer=e instanceof(oe?Uint8Array:Array)?e:new(oe?Uint8Array:Array)(32768),2*this.buffer.length<=this.index)throw Error("invalid index");this.buffer.length<=this.index&&c(this)}function c(e){var t,i=e.buffer,n=i.length,r=new(oe?Uint8Array:Array)(n<<1);if(oe)r.set(i);else for(t=0;t<n;++t)r[t]=i[t];return e.buffer=r}se.prototype.a=function(e,t,i){var n,r=this.buffer,a=this.index,o=this.d,s=r[a];if(i&&1<t&&(e=8<t?(l[255&e]<<24|l[e>>>8&255]<<16|l[e>>>16&255]<<8|l[e>>>24&255])>>32-t:l[e]>>8-t),t+o<8)s=s<<t|e,o+=t;else for(n=0;n<t;++n)s=s<<1|e>>t-n-1&1,8==++o&&(o=0,r[a++]=l[s],s=0,a===r.length&&(r=c(this)));r[a]=s,this.buffer=r,this.d=o,this.index=a},se.prototype.finish=function(){var e=this.buffer,t=this.index;return 0<this.d&&(e[t]<<=8-this.d,e[t]=l[e[t]],t++),oe?e.subarray(0,t):(e.length=t,e)};for(var t=new(oe?Uint8Array:Array)(256),i=0;i<256;++i){for(var n=o=i,r=7,o=o>>>1;o;o>>>=1)n<<=1,n|=1&o,--r;t[i]=(n<<r&255)>>>0}var l=t;function u(e){this.buffer=new(oe?Uint16Array:Array)(2*e),this.length=0}function s(e,t){this.e=ce,this.f=0,this.input=oe&&e instanceof Array?new Uint8Array(e):e,this.c=0,t&&(t.lazy&&(this.f=t.lazy),"number"==typeof t.compressionType&&(this.e=t.compressionType),t.outputBuffer&&(this.b=oe&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.c=t.outputIndex)),this.b||(this.b=new(oe?Uint8Array:Array)(32768))}u.prototype.getParent=function(e){return 2*((e-2)/4|0)},u.prototype.push=function(e,t){var i,n,r=this.buffer,a=this.length;for(r[this.length++]=t,r[this.length++]=e;0<a&&(i=this.getParent(a),r[a]>r[i]);)n=r[a],r[a]=r[i],r[i]=n,n=r[a+1],r[a+1]=r[i+1],r[i+1]=n,a=i;return this.length},u.prototype.pop=function(){var e,t,i,n=this.buffer,r=n[0],a=n[1];for(this.length-=2,n[0]=n[this.length],n[1]=n[this.length+1],i=0;!((t=2*i+2)>=this.length)&&(t+2<this.length&&n[t+2]>n[t]&&(t+=2),n[t]>n[i]);)e=n[i],n[i]=n[t],n[t]=e,e=n[i+1],n[i+1]=n[t+1],n[t+1]=e,i=t;return{index:a,value:r,length:this.length}};for(var ce=2,le=[],g=0;g<288;g++)switch(ae){case g<=143:le.push([g+48,8]);break;case g<=255:le.push([g-144+400,9]);break;case g<=279:le.push([g-256,7]);break;case g<=287:le.push([g-280+192,8]);break;default:throw"invalid literal: "+g}function y(e,t){this.length=e,this.g=t}s.prototype.h=function(){var e,t,i,n,r=this.input;switch(this.e){case 0:for(i=0,n=r.length;i<n;){var a,o,s,c,l=t=oe?r.subarray(i,i+65535):r.slice(i,i+65535),u=(i+=t.length)===n,g=re,d=this.b,h=this.c;if(oe){for(d=new Uint8Array(this.b.buffer);d.length<=h+l.length+5;)d=new Uint8Array(d.length<<1);d.set(this.b)}if(a=u?1:0,d[h++]=0|a,s=65536+~(o=l.length)&65535,d[h++]=255&o,d[h++]=o>>>8&255,d[h++]=255&s,d[h++]=s>>>8&255,oe)d.set(l,h),h+=l.length,d=d.subarray(0,h);else{for(g=0,c=l.length;g<c;++g)d[h++]=l[g];d.length=h}this.c=h,this.b=d}break;case 1:var p=new se(oe?new Uint8Array(this.b.buffer):this.b,this.c);p.a(1,1,ae),p.a(1,2,ae);for(var f,I=ue(this,r),b=0,m=I.length;b<m;b++)if(f=I[b],se.prototype.a.apply(p,le[f]),256<f)p.a(I[++b],I[++b],ae),p.a(I[++b],5),p.a(I[++b],I[++b],ae);else if(256===f)break;this.b=p.finish(),this.c=this.b.length;break;case ce:var y,C,A,v,S,w,x,E,k,T,P,R,_,F,N=new se(oe?new Uint8Array(this.b.buffer):this.b,this.c),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=Array(19),U=ce;for(N.a(1,1,ae),N.a(U,2,ae),y=ue(this,r),w=de(S=ge(this.j,15)),E=de(x=ge(this.i,7)),C=286;257<C&&0===S[C-1];C--);for(A=30;1<A&&0===x[A-1];A--);for(var J,W,O,j,H,V=C,L=A,M=new(oe?Uint32Array:Array)(V+L),G=new(oe?Uint32Array:Array)(316),Z=new(oe?Uint8Array:Array)(19),K=J=0;K<V;K++)M[J++]=S[K];for(K=0;K<L;K++)M[J++]=x[K];if(!oe)for(K=0,O=Z.length;K<O;++K)Z[K]=0;for(K=j=0,O=M.length;K<O;K+=J){for(J=1;K+J<O&&M[K+J]===M[K];++J);if(W=J,0===M[K])if(W<3)for(;0<W--;)Z[G[j++]=0]++;else for(;0<W;)W-3<(H=W<138?W:138)&&H<W&&(H=W-3),H<=10?(G[j++]=17,G[j++]=H-3,Z[17]++):(G[j++]=18,G[j++]=H-11,Z[18]++),W-=H;else if(G[j++]=M[K],Z[M[K]]++,--W<3)for(;0<W--;)G[j++]=M[K],Z[M[K]]++;else for(;0<W;)W-3<(H=W<6?W:6)&&H<W&&(H=W-3),G[j++]=16,G[j++]=H-3,Z[16]++,W-=H}for(e=oe?G.subarray(0,j):G.slice(0,j),k=ge(Z,7),_=0;_<19;_++)D[_]=k[B[_]];for(v=19;4<v&&0===D[v-1];v--);for(T=de(k),N.a(C-257,5,ae),N.a(A-1,5,ae),N.a(v-4,4,ae),_=0;_<v;_++)N.a(D[_],3,ae);for(_=0,F=e.length;_<F;_++)if(P=e[_],N.a(T[P],k[P],ae),16<=P){switch(_++,P){case 16:R=2;break;case 17:R=3;break;case 18:R=7;break;default:throw"invalid code: "+P}N.a(e[_],R,ae)}for(var Y,X,z=[w,S],q=[E,x],$=z[0],Q=z[1],ee=q[0],te=q[1],ie=0,ne=y.length;ie<ne;++ie)if(Y=y[ie],N.a($[Y],Q[Y],ae),256<Y)N.a(y[++ie],y[++ie],ae),X=y[++ie],N.a(ee[X],te[X],ae),N.a(y[++ie],y[++ie],ae);else if(256===Y)break;this.b=N.finish(),this.c=this.b.length;break;default:throw"invalid compression type"}return this.b};var d=function(){for(var e,t=[],i=3;i<=258;i++)e=function(e){switch(ae){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case e<=12:return[265,e-11,1];case e<=14:return[266,e-13,1];case e<=16:return[267,e-15,1];case e<=18:return[268,e-17,1];case e<=22:return[269,e-19,2];case e<=26:return[270,e-23,2];case e<=30:return[271,e-27,2];case e<=34:return[272,e-31,2];case e<=42:return[273,e-35,3];case e<=50:return[274,e-43,3];case e<=58:return[275,e-51,3];case e<=66:return[276,e-59,3];case e<=82:return[277,e-67,4];case e<=98:return[278,e-83,4];case e<=114:return[279,e-99,4];case e<=130:return[280,e-115,4];case e<=162:return[281,e-131,5];case e<=194:return[282,e-163,5];case e<=226:return[283,e-195,5];case e<=257:return[284,e-227,5];case 258===e:return[285,e-258,0];default:throw"invalid length: "+e}}(i),t[i]=e[2]<<24|e[1]<<16|e[0];return t}(),C=oe?new Uint32Array(d):d;function ue(e,t){function i(e,t){var i,n,r,a=e.g,o=[],s=0,c=C[e.length];switch(o[s++]=65535&c,o[s++]=c>>16&255,o[s++]=c>>24,ae){case 1===a:i=[0,a-1,0];break;case 2===a:i=[1,a-2,0];break;case 3===a:i=[2,a-3,0];break;case 4===a:i=[3,a-4,0];break;case a<=6:i=[4,a-5,1];break;case a<=8:i=[5,a-7,1];break;case a<=12:i=[6,a-9,2];break;case a<=16:i=[7,a-13,2];break;case a<=24:i=[8,a-17,3];break;case a<=32:i=[9,a-25,3];break;case a<=48:i=[10,a-33,4];break;case a<=64:i=[11,a-49,4];break;case a<=96:i=[12,a-65,5];break;case a<=128:i=[13,a-97,5];break;case a<=192:i=[14,a-129,6];break;case a<=256:i=[15,a-193,6];break;case a<=384:i=[16,a-257,7];break;case a<=512:i=[17,a-385,7];break;case a<=768:i=[18,a-513,8];break;case a<=1024:i=[19,a-769,8];break;case a<=1536:i=[20,a-1025,9];break;case a<=2048:i=[21,a-1537,9];break;case a<=3072:i=[22,a-2049,10];break;case a<=4096:i=[23,a-3073,10];break;case a<=6144:i=[24,a-4097,11];break;case a<=8192:i=[25,a-6145,11];break;case a<=12288:i=[26,a-8193,12];break;case a<=16384:i=[27,a-12289,12];break;case a<=24576:i=[28,a-16385,13];break;case a<=32768:i=[29,a-24577,13];break;default:throw"invalid distance"}for(c=i,o[s++]=c[0],o[s++]=c[1],o[5]=c[2],n=0,r=o.length;n<r;++n)h[p++]=o[n];I[o[0]]++,b[o[3]]++,f=e.length+t-1,u=null}var n,r,a,o,s,c,l,u,g,d={},h=oe?new Uint16Array(2*t.length):[],p=0,f=0,I=new(oe?Uint32Array:Array)(286),b=new(oe?Uint32Array:Array)(30),m=e.f;if(!oe){for(a=0;a<=285;)I[a++]=0;for(a=0;a<=29;)b[a++]=0}for(I[256]=1,n=0,r=t.length;n<r;++n){for(a=s=0,o=3;a<o&&n+a!==r;++a)s=s<<8|t[n+a];if(d[s]===re&&(d[s]=[]),c=d[s],!(0<f--)){for(;0<c.length&&32768<n-c[0];)c.shift();if(r<=n+3){for(u&&i(u,-1),a=0,o=r-n;a<o;++a)g=t[n+a],h[p++]=g,++I[g];break}0<c.length?(l=function(e,t,i){var n,r,a,o,s,c,l=0,u=e.length;o=0,c=i.length;e:for(;o<c;o++){if(n=i[c-o-1],(a=3)<l){for(s=l;3<s;s--)if(e[n+s-1]!==e[t+s-1])continue e;a=l}for(;a<258&&t+a<u&&e[n+a]===e[t+a];)++a;if(l<a&&(r=n,l=a),258===a)break}return new y(l,t-r)}(t,n,c),u?u.length<l.length?(g=t[n-1],h[p++]=g,++I[g],i(l,0)):i(u,-1):l.length<m?u=l:i(l,0)):u?i(u,-1):(g=t[n],h[p++]=g,++I[g])}c.push(n)}return h[p++]=256,I[256]++,e.j=I,e.i=b,oe?h.subarray(0,p):h}function ge(e,t){var i,n,r,a,o,s=e.length,c=new u(572),l=new(oe?Uint8Array:Array)(s);if(!oe)for(a=0;a<s;a++)l[a]=0;for(a=0;a<s;++a)0<e[a]&&c.push(a,e[a]);if(i=Array(c.length/2),n=new(oe?Uint32Array:Array)(c.length/2),1===i.length)return l[c.pop().index]=1,l;for(a=0,o=c.length/2;a<o;++a)i[a]=c.pop(),n[a]=i[a].value;for(r=function(e,n,t){var i,r,a,o,s,c=new(oe?Uint16Array:Array)(t),l=new(oe?Uint8Array:Array)(t),u=new(oe?Uint8Array:Array)(n),g=Array(t),d=Array(t),h=Array(t),p=(1<<t)-n,f=1<<t-1;for(c[t-1]=n,r=0;r<t;++r)p<f?l[r]=0:(l[r]=1,p-=f),p<<=1,c[t-2-r]=(c[t-1-r]/2|0)+n;for(c[0]=l[0],g[0]=Array(c[0]),d[0]=Array(c[0]),r=1;r<t;++r)c[r]>2*c[r-1]+l[r]&&(c[r]=2*c[r-1]+l[r]),g[r]=Array(c[r]),d[r]=Array(c[r]);for(i=0;i<n;++i)u[i]=t;for(a=0;a<c[t-1];++a)g[t-1][a]=e[a],d[t-1][a]=a;for(i=0;i<t;++i)h[i]=0;for(1===l[t-1]&&(--u[0],++h[t-1]),r=t-2;0<=r;--r){for(o=i=0,s=h[r+1],a=0;a<c[r];a++)(o=g[r+1][s]+g[r+1][s+1])>e[i]?(g[r][a]=o,d[r][a]=n,s+=2):(g[r][a]=e[i],d[r][a]=i,++i);h[r]=0,1===l[r]&&function e(t){var i=d[t][h[t]];i===n?(e(t+1),e(t+1)):--u[i],++h[t]}(r)}return u}(n,n.length,t),a=0,o=i.length;a<o;++a)l[i[a].index]=r[a];return l}function de(e){for(var t,i,n=new(oe?Uint16Array:Array)(e.length),r=[],a=[],o=0,s=0,c=e.length;s<c;s++)r[e[s]]=1+(0|r[e[s]]);for(s=1,c=16;s<=c;s++)a[s]=o,o+=0|r[s],o<<=1;for(s=0,c=e.length;s<c;s++)for(o=a[e[s]],a[e[s]]+=1,t=n[s]=0,i=e[s];t<i;t++)n[s]=n[s]<<1|1&o,o>>>=1;return n}e("Zlib.RawDeflate",s),e("Zlib.RawDeflate.prototype.compress",s.prototype.h);var h,p,f,I,b={NONE:0,FIXED:1,DYNAMIC:ce};if(Object.keys)h=Object.keys(b);else for(p in h=[],f=0,b)h[f++]=p;for(f=0,I=h.length;f<I;++f)e("Zlib.RawDeflate.CompressionType."+(p=h[f]),b[p])}).call($zlib);var Zlib=(createClass(iN,null,[{key:"stringToByteArray",value:function(e){for(var t=e.split(""),i=0,n=t.length;i<n;i++)t[i]=(255&t[i].charCodeAt(0))>>>0;return t}},{key:"byteArrayToString",value:function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}},{key:"emojiToHtmlEntity",value:function(e){return e.replace(/(?:\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDE51\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFF]|\uD83E[\uDD00-\uDDFF])/g,function(e){return"&#"+e.codePointAt(0)+";"})}},{key:"utf8Encode",value:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t}},{key:"timerSplitAndProcess",value:function(e,t,i,n,r,a,o,s,c,l){logger.log("timerSplitAndProcess: processing "+t+" - "+i);for(var u,g=t;g<i;g++){var d=e.substring(g*r,(g+1)*r),h=iN.utf8Encode(d),p=iN.stringToByteArray(h),f=new $zlib.Zlib.RawDeflate(p).compress(),I=btoa(iN.byteArrayToString(f));o.push(I)}logger.log("timerSplitAndProcess: finished processing "+t+" - "+i),i<n?(u=Math.min(n,i+a),logger.log("set timeout to process: "+i+" - "+u),setTimeout(function(){iN.timerSplitAndProcess(e,i,u,n,r,a,o,s,c,l)},s)):(logger.log("finished compressinbg all: "+o.length),l(o,c))}},{key:"splitAndProcess",value:function(e,r,t,i,n,a){var o=5,s=25;i&&i.browser&&"Firefox"===i.browser.name?(o=2,s=i.browser.version<51?75:50):i&&i.isInternetExp()&&(o=2,s=75);var c=parseInt(e.length/t)+1;logger.log("initiating timer. length: "+e.length+", fragment count:"+c);var l=Math.min(o,c);iN.timerSplitAndProcess(e,0,l,c,t,o,[],s,n,function(e,t){var i="";logger.log("finalizing array after compression: "+e.length);for(var n=0;n<e.length;n++)i+=constants.record.upload.delim+e[n];a(i,r,t,1)})}}]),iN);function iN(){classCallCheck(this,iN)}var CacheObj=(createClass(iO,[{key:"addMappingNode",value:function(e,t){this.nodeId++;var i=e.parentNode||t;if(_.isDefined(this.mappingNodes[i._arid])&&_.isDefined(this.mappingNodes[i._arid].path)&&_.isDefined(this.mappingNodes[i._arid].deweyId)){var n={id:this.nodeId,node:e,path:this.mappingNodes[i._arid].path+","+e.tagName.toLowerCase(),deweyId:this.mappingNodes[i._arid].deweyId+"."+this.nodeId};return this.mappingNodes[this.nodeId]=n,e._arid=this.nodeId,n}return null}},{key:"getMappingNode",value:function(e){return this.mappingNodes[e]}},{key:"removeMappingNode",value:function(e){var t=this.mappingNodes[e._arid];if(t&&"SCRIPT"!==t.node.tagName){for(var i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1),n=i.nextNode();null!==n;)delete this.mappingNodes[n._arid],delete n._arid,n=i.nextNode();delete this.mappingNodes[e._arid],delete e._arid}}},{key:"setUp",value:function(e,t){this.mappingNode(e,null,!0,t)}},{key:"mappingNode",value:function(e,t,i,n){if(1===e.nodeType){if(void 0===e._arid){this.nodeId++,e._arid=this.nodeId;var r=void 0,a=void 0;if(t&&void 0!==t._arid){if(!this.mappingNodes[t._arid]||!this.mappingNodes[t._arid].path)return;r=this.mappingNodes[t._arid].path+","+e.tagName,a=this.mappingNodes[t._arid].deweyId+"."+e._arid}else r=e.tagName,a=e._arid.toString();this.mappingNodes[this.nodeId]={id:this.nodeId,node:e,path:r.toLowerCase(),deweyId:a},i&&(n.headPath||"html,head"!==this.mappingNodes[this.nodeId].path||(n.headPath=this.mappingNodes[this.nodeId].deweyId),n.bodyPath||"html,body"!==this.mappingNodes[this.nodeId].path||(n.bodyPath=this.mappingNodes[this.nodeId].deweyId))}for(var o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1),s=o.nextNode();null!==s;){1===s.nodeType&&void 0===s._arid&&this.addMappingNode(s);var c=this.mappingNodes[s._arid];i&&c&&c.path&&(n.headPath||"html,head"!==c.path||(n.headPath=c.deweyId),n.bodyPath||"html,body"!==c.path||(n.bodyPath=c.deweyId)),s=o.nextNode()}}}},{key:"getPositionOfNode",value:function(e){var t=!1,i=1,n=e.nodeName,r=e;if(e.previousSibling)for(r=e.previousSibling;r;)r.nodeType===Node.ELEMENT_NODE&&r.tagName===n&&(t=t||!0,i+=1),r=r.previousSibling;if(!t){for(r=e.nextSibling;!t&&r;)r.nodeType===Node.ELEMENT_NODE&&r.tagName===n&&(t=!0),r=r.nextSibling;t&&(i=1)}return t||(i=0),i}},{key:"clearCache",value:function(e){if(e)if((e=e.parentNode)&&"body"!==e.nodeName.toLowerCase())for(var t in this.domPathCache){var i=this.domPathCache[t];i.n!==e&&!dom.nodeBelongsTo(i.n,e)||delete this.domPathCache[t]}else this.domPathCache={};else this.domPathCache={}}},{key:"_getNodeXPath",value:function(e,t){if(e.nodeType!==Node.ELEMENT_NODE)return"";if(e._au_pathid||(e._au_pathid="_"+this.pathid++),this.domPathCache[e._au_pathid]){var i=this.domPathCache[e._au_pathid].p.split(",");return console.log("return cached path:"+i,e),i}var n=this._getNodeXPath(e,t);return this.domPathCache[e._au_pathid]={p:n.join(","),n:e},console.log("return non-cached path:"+n,e),n}},{key:"getNodeXPath",value:function(e,t){var i=e.parentNode?this.getNodeXPath(e.parentNode):[];if(e.nodeType!==Node.ELEMENT_NODE)return i;var n=this.getPositionOfNode(e),r=e.tagName.toLowerCase(),a="",o=e.getAttribute("id"),a=t&&"id"!==t&&o?(0===n&&(n=1),r+"[@id='"+o+"']["+n+"]"):r+(0<n?"["+n+"]":"");return i.push(a),i}}]),iO);function iO(){classCallCheck(this,iO),this.domPathCache={},this.pathid=0,this.nodeId=0,this.mappingNodes={},this.count=0}var globalCacheObj=new CacheObj,DataCache=(createClass(dP,[{key:"getMaxItem",value:function(){var e=config.getConfig("cacheItems","record");return e||0===e?e:constants.record.cache.maxItems}},{key:"getMaxSize",value:function(){var e=config.getConfig("cacheSize","record");return e||0===e?e:constants.record.cache.maxSize}},{key:"clearCache",value:function(){this.caches=[],this.totalSize=0}},{key:"sizeLimit",value:function(e){var t=0<arguments.length&&void 0!==e?e:"";return this.totalSize+t.length>this.getMaxSize()}},{key:"updateSize",value:function(e){this.totalSize+=e.length}},{key:"getObject",value:function(e,t,i){t=t.join(",");for(var n,r={},a=this.caches,o=this.caches.length-1;0<=o;o--)if(a[o].v===e){r=a[o];break}if(e=Zlib.emojiToHtmlEntity(e),!_.isDefined(r.id)){if(r.id=_.UUID(),(r.kl=t)&&e.length>constants.record.cache.minLength&&config.isDomDiffEnabled())for(var s=this.caches.length-1;0<=s;s--)if(a[s].kl===t){var c=_.Diff(a[s].v,e);r.diff={id:a[s].id,df:c};break}_.isDefined(r.diff)?this.caches.length<this.getMaxItem()&&!this.sizeLimit(e)&&((n={}).v=e,n.id=r.id,n.kl=r.kl,this.updateSize(e),this.caches.push(n)):(r.v=e,this.caches.length<this.getMaxItem()&&!this.sizeLimit(e)&&(this.updateSize(e),this.caches.push(r)))}var l=Object.assign({},r);return i&&delete l[i],l}}]),dP);function dP(){classCallCheck(this,dP),this.caches=[],this.totalSize=0}var globalDataCache=new DataCache,RcFrame=(createClass(yP,[{key:"loadFrame",value:function(e,t,i){var n,r=e.target||e.srcElement||e.originalTarget;t&&r&&this.checkSrc(r)&&this.checkSameOrigin(r)&&(n=this.getWinObject(r),this.getDocObject(n)&&(_.isDefined(n.processor)?(n.processor.setProcXPath(globalCacheObj.getNodeXPath(i).join(",")),n.processor.sendFramePage(!0)):(n.processor=new ReplayProcessor(n,globalCacheObj.getNodeXPath(r),t),n.processor.sendFramePage(!0),t.addChildProc(n.processor))))}},{key:"getIframeSrc",value:function(e,t){var i=t.getAttribute("src")||"";return i&&i.startsWith("//")&&(i=e.getWinObj().location.protocol+i),i}},{key:"checkDocReady",value:function(e){var t=!1,i=this.getDocObject(e,!1);try{"complete"===i.readyState&&(t=!0)}catch(e){}return t}},{key:"handleIframeEndSession",value:function(e){for(var t=e.getDocObj().querySelectorAll("iframe"),i=0;i<t.length;i++){var n=t[i],r=this.getWinObject(n);if(!r)return;if(this.checkSrc(n)&&!1===this.checkSameOrigin(n)){var a={source:"_ar_",content:{isOver:!0}};if(n._arOnload)try{r.postMessage(a,"*")}catch(e){}else try{r.postMessage(a,"*")}catch(e){}}}}},{key:"handleIframePauseResume",value:function(e,t){for(var i=e.getDocObj().querySelectorAll("iframe"),n=0;n<i.length;n++){var r=i[n],a=this.getWinObject(r);if(!a)return;if(this.checkSrc(r)&&!1===this.checkSameOrigin(r)){var o={source:"_ar_",content:{cmd:{command:t}}};try{a.postMessage(o,"*")}catch(e){}}}}},{key:"handleIframe",value:function(h,e){for(var p=this,f=(e||h.getDocObj()).querySelectorAll("iframe"),t=0;t<f.length;t++){var i=function(e){var i=f[e],t=!i._arB||!p.childrenIframes[globalCacheObj.getNodeXPath(i)],n=p.getWinObject(i);if(!n)return{v:void 0};if(t||globalSessionTracker.isSpaSendPV()){p.childrenIframes[globalCacheObj.getNodeXPath(i)]=!0,i._arB=!0;var r=globalSessionTracker.getSessionMetadata(),a=globalCacheObj.getNodeXPath(i).join(","),o=globalSessionTracker.getPVFromSessStorage(),s={source:"_ar_",content:_extends({fpath:a,pv:o},r)},c=dom.getPosInTopFrame(i,dom.getTopLevelWin(i)),l=globalSessionTracker.isSpaSendPV(),u=browser$1.getScroll(h.getWinObj());if(s.content.myCoordinates=c,s.content.frameIdx=e+1,s.content.spaSendPV=l,p.checkSrc(i)&&p.checkSameOrigin(i)){var g=p.getDocObject(n,!1),d=!1;if(g){p.resetIframeBindings(g);try{"complete"!==g.readyState&&"loaded"!==g.readyState||(d=!0)}catch(e){}d&&(_.isDefined(n.processor)?(n.processor.setProcXPath(globalCacheObj.getNodeXPath(i).join(",")),i._arPV!==o&&globalSessionTracker.syncPVInFrame(o),n.processor.sendFramePage(!0),i._arPV=o):(n.processor=new ReplayProcessor(n,globalCacheObj.getNodeXPath(i),h),n.processor.sendFramePage(!0),h.addChildProc(n.processor)))}_.addEventListener(i,"load",function(e){p.loadFrame(e,h,i)})}if(p.checkSrc(i)&&!1===p.checkSameOrigin(i))if(i._arOnload)try{n.postMessage(s,"*")}catch(e){}else{try{n.postMessage(s,"*")}catch(e){}_.addEventListener(i,"load",function(){setTimeout(function(){i._arOnload=!0;var e=dom.getPosInTopFrame(i,dom.getTopLevelWin(i),u);s.content.myCoordinates=e,s.content.fpath=globalCacheObj.getNodeXPath(i).join(",");var t=p.getWinObject(i);t&&t.postMessage(s,"*")},2e3)})}}}(t);if("object"===(void 0===i?"undefined":_typeof(i)))return i.v}}},{key:"checkSrc",value:function(e){return!e.src||!(-1<e.src.indexOf("javascript:")||-1<e.src.indexOf("about:blank"))}},{key:"getSrcByForm",value:function(e){if(e.name){var t=document.querySelectorAll("form[target='"+e.name+"']")[0];if(t)return t.action}}},{key:"checkSameOrigin",value:function(e,t){var i=1<arguments.length&&void 0!==t?t:window.location.href;if(e.src&&0!==e.src.indexOf(" "))return urls.testSameDomain(i,e.src);if(this.getSrcByForm(e))return urls.testSameDomain(i,e.src);var n=null;try{n=e.contentDocument}catch(e){}return null!==n}},{key:"resetIframeBindings",value:function(e){for(var t=e.querySelectorAll("iframe[_arB='true']"),i=0;i<t.length;i++)t[i]._arB=!1}},{key:"getWinObject",value:function(e){var t=void 0;return e&&e.contentWindow?t=e.contentWindow:e&&e.contentDocument&&e.contentDocument.defaultView&&(t=e.contentDocument.defaultView),t&&t!==t.top?t:null}},{key:"getDocObject",value:function(e){try{return e.document}catch(e){return!1}}}],[{key:"getInstance",value:function(){return yP.instance||(yP.instance=new yP),yP.instance}}]),yP);function yP(){classCallCheck(this,yP),this.childrenIframes={}}var hammer=createCommonjsModule(function(Ge){!function(a,s,g){var o,c=["","webkit","Moz","MS","ms","o"],e=s.createElement("div"),i="function",l=Math.round,d=Math.abs,h=Date.now;function u(e,t,i){return setTimeout(b(e,i),t)}function n(e,t,i){return Array.isArray(e)&&(p(e,i[t],i),1)}function p(e,t,i){if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==g)for(n=0;n<e.length;)t.call(i,e[n],n,e),n++;else for(var n in e)e.hasOwnProperty(n)&&t.call(i,e[n],n,e)}function t(n,e,t){var r="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=a.console&&(a.console.warn||a.console.log);return i&&i.call(a.console,r,t),n.apply(this,arguments)}}o="function"!=typeof Object.assign?function(e){if(e===g||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==g&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}:Object.assign;var r=t(function(e,t,i){for(var n=Object.keys(t),r=0;r<n.length;)(!i||i&&e[n[r]]===g)&&(e[n[r]]=t[n[r]]),r++;return e},"extend","Use `assign`."),f=t(function(e,t){return r(e,t,!0)},"merge","Use `assign`.");function I(e,t,i){var n=t.prototype,r=e.prototype=Object.create(n);r.constructor=e,r._super=n,i&&o(r,i)}function b(e,t){return function(){return e.apply(t,arguments)}}function m(e,t){return typeof e==i?e.apply(t&&t[0]||g,t):e}function y(e,t){return e===g?t:e}function C(t,e,i){p(w(e),function(e){t.addEventListener(e,i,!1)})}function A(t,e,i){p(w(e),function(e){t.removeEventListener(e,i,!1)})}function v(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function S(e,t){return-1<e.indexOf(t)}function w(e){return e.trim().split(/\s+/g)}function x(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var n=0;n<e.length;){if(i&&e[n][i]==t||!i&&e[n]===t)return n;n++}return-1}function E(e){return Array.prototype.slice.call(e,0)}function k(e,i,t){for(var n=[],r=[],a=0;a<e.length;){var o=i?e[a][i]:e[a];x(r,o)<0&&n.push(e[a]),r[a]=o,a++}return t&&(n=i?n.sort(function(e,t){return e[i]>t[i]}):n.sort()),n}function T(e,t){for(var i,n,r=t[0].toUpperCase()+t.slice(1),a=0;a<c.length;){if((n=(i=c[a])?i+r:t)in e)return n;a++}return g}var P=1;function R(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||a}var _="ontouchstart"in a,F=T(a,"PointerEvent")!==g,N=_&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B="touch",D="mouse",U=25,J=1,W=4,O=8,j=1,H=2,V=4,L=8,M=16,G=H|V,Z=L|M,K=G|Z,Y=["x","y"],X=["clientX","clientY"];function z(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){m(t.options.enable,[t])&&i.handler(e)},this.init()}function q(e,t,i){var n=i.pointers.length,r=i.changedPointers.length,a=t&J&&n-r==0,o=t&(W|O)&&n-r==0;i.isFirst=!!a,i.isFinal=!!o,a&&(e.session={}),i.eventType=t,function(e,t){var i=e.session,n=t.pointers,r=n.length;i.firstInput||(i.firstInput=$(t));1<r&&!i.firstMultiple?i.firstMultiple=$(t):1===r&&(i.firstMultiple=!1);var a=i.firstInput,o=i.firstMultiple,s=o?o.center:a.center,c=t.center=Q(n);t.timeStamp=h(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=ne(s,c),t.distance=ie(s,c),function(e,t){var i=t.center,n=e.offsetDelta||{},r=e.prevDelta||{},a=e.prevInput||{};t.eventType!==J&&a.eventType!==W||(r=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},n=e.offsetDelta={x:i.x,y:i.y});t.deltaX=r.x+(i.x-n.x),t.deltaY=r.y+(i.y-n.y)}(i,t),t.offsetDirection=te(t.deltaX,t.deltaY);var l=ee(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=d(l.x)>d(l.y)?l.x:l.y,t.scale=o?function(e,t){return ie(t[0],t[1],X)/ie(e[0],e[1],X)}(o.pointers,n):1,t.rotation=o?function(e,t){return ne(t[1],t[0],X)+ne(e[1],e[0],X)}(o.pointers,n):0,t.maxPointers=!i.prevInput||t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers,function(e,t){var i,n,r,a,o=e.lastInterval||t,s=t.timeStamp-o.timeStamp;{var c,l,u;t.eventType!=O&&(U<s||o.velocity===g)?(c=t.deltaX-o.deltaX,l=t.deltaY-o.deltaY,u=ee(s,c,l),n=u.x,r=u.y,i=d(u.x)>d(u.y)?u.x:u.y,a=te(c,l),e.lastInterval=t):(i=o.velocity,n=o.velocityX,r=o.velocityY,a=o.direction)}t.velocity=i,t.velocityX=n,t.velocityY=r,t.direction=a}(i,t);var u=e.element;v(t.srcEvent.target,u)&&(u=t.srcEvent.target);t.target=u}(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function $(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:l(e.pointers[i].clientX),clientY:l(e.pointers[i].clientY)},i++;return{timeStamp:h(),pointers:t,center:Q(t),deltaX:e.deltaX,deltaY:e.deltaY}}function Q(e){var t=e.length;if(1===t)return{x:l(e[0].clientX),y:l(e[0].clientY)};for(var i=0,n=0,r=0;r<t;)i+=e[r].clientX,n+=e[r].clientY,r++;return{x:l(i/t),y:l(n/t)}}function ee(e,t,i){return{x:t/e||0,y:i/e||0}}function te(e,t){return e===t?j:d(e)>=d(t)?e<0?H:V:t<0?L:M}function ie(e,t,i){var n=t[(i=i||Y)[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return Math.sqrt(n*n+r*r)}function ne(e,t,i){var n=t[(i=i||Y)[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return 180*Math.atan2(r,n)/Math.PI}z.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(R(this.element),this.evWin,this.domHandler)}};var re={mousedown:J,mousemove:2,mouseup:W},ae="mousedown",oe="mousemove mouseup";function se(){this.evEl=ae,this.evWin=oe,this.pressed=!1,z.apply(this,arguments)}I(se,z,{handler:function(e){var t=re[e.type];t&J&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=W),this.pressed&&(t&W&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:D,srcEvent:e}))}});var ce={pointerdown:J,pointermove:2,pointerup:W,pointercancel:O,pointerout:O},le={2:B,3:"pen",4:D,5:"kinect"},ue="pointerdown",ge="pointermove pointerup pointercancel";function de(){this.evEl=ue,this.evWin=ge,z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}a.MSPointerEvent&&!a.PointerEvent&&(ue="MSPointerDown",ge="MSPointerMove MSPointerUp MSPointerCancel"),I(de,z,{handler:function(e){var t=this.store,i=!1,n=e.type.toLowerCase().replace("ms",""),r=ce[n],a=le[e.pointerType]||e.pointerType,o=a==B,s=x(t,e.pointerId,"pointerId");r&J&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):r&(W|O)&&(i=!0),s<0||(t[s]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),i&&t.splice(s,1))}});var he={touchstart:J,touchmove:2,touchend:W,touchcancel:O};function pe(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,z.apply(this,arguments)}I(pe,z,{handler:function(e){var t,i=he[e.type];i===J&&(this.started=!0),this.started&&(t=function(e,t){var i=E(e.touches),n=E(e.changedTouches);t&(W|O)&&(i=k(i.concat(n),"identifier",!0));return[i,n]}.call(this,e,i),i&(W|O)&&t[0].length-t[1].length==0&&(this.started=!1),this.callback(this.manager,i,{pointers:t[0],changedPointers:t[1],pointerType:B,srcEvent:e}))}});var fe={touchstart:J,touchmove:2,touchend:W,touchcancel:O},Ie="touchstart touchmove touchend touchcancel";function be(){this.evTarget=Ie,this.targetIds={},z.apply(this,arguments)}I(be,z,{handler:function(e){var t=fe[e.type],i=function(e,t){var i=E(e.touches),n=this.targetIds;if(t&(2|J)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,a,o=E(e.changedTouches),s=[],c=this.target;if(a=i.filter(function(e){return v(e.target,c)}),t===J)for(r=0;r<a.length;)n[a[r].identifier]=!0,r++;r=0;for(;r<o.length;)n[o[r].identifier]&&s.push(o[r]),t&(W|O)&&delete n[o[r].identifier],r++;return s.length?[k(a.concat(s),"identifier",!0),s]:void 0}.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:B,srcEvent:e})}});var me=2500;function ye(){z.apply(this,arguments);var e=b(this.handler,this);this.touch=new be(this.manager,e),this.mouse=new se(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Ce(e){var t,i,n=e.changedPointers[0];n.identifier===this.primaryTouch&&(t={x:n.clientX,y:n.clientY},this.lastTouches.push(t),i=this.lastTouches,setTimeout(function(){var e=i.indexOf(t);-1<e&&i.splice(e,1)},me))}I(ye,z,{handler:function(e,t,i){var n=i.pointerType==B,r=i.pointerType==D;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(e,t){e&J?(this.primaryTouch=t.changedPointers[0].identifier,Ce.call(this,t)):e&(W|O)&&Ce.call(this,t)}).call(this,t,i);else if(r&&function(e){for(var t=e.srcEvent.clientX,i=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],a=Math.abs(t-r.x),o=Math.abs(i-r.y);if(a<=25&&o<=25)return!0}return!1}.call(this,i))return;this.callback(e,t,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ae=T(e.style,"touchAction"),ve=Ae!==g,Se="compute",we="manipulation",xe="none",Ee="pan-x",ke="pan-y",Te=function(){if(!ve)return!1;var t={},i=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!i||a.CSS.supports("touch-action",e)}),t}();function Pe(e,t){this.manager=e,this.set(t)}Pe.prototype={set:function(e){e==Se&&(e=this.compute()),ve&&this.manager.element.style&&Te[e]&&(this.manager.element.style[Ae]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return p(this.manager.recognizers,function(e){m(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(S(e,xe))return xe;var t=S(e,Ee),i=S(e,ke);if(t&&i)return xe;if(t||i)return t?Ee:ke;if(S(e,we))return we;return"auto"}(t.join(" "))},preventDefaults:function(e){var t=e.srcEvent,i=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,r=S(n,xe)&&!Te[xe],a=S(n,ke)&&!Te[ke],o=S(n,Ee)&&!Te[Ee];if(r){var s=1===e.pointers.length,c=e.distance<2,l=e.deltaTime<250;if(s&&c&&l)return}if(!o||!a)return r||a&&i&G||o&&i&Z?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Re=1;function _e(e){this.options=o({},this.defaults,e||{}),this.id=P++,this.manager=null,this.options.enable=y(this.options.enable,!0),this.state=Re,this.simultaneous={},this.requireFail=[]}function Fe(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Ne(e){return e==M?"down":e==L?"up":e==H?"left":e==V?"right":""}function Be(e,t){var i=t.manager;return i?i.get(e):e}function De(){_e.apply(this,arguments)}function Ue(){De.apply(this,arguments),this.pX=null,this.pY=null}function Je(){De.apply(this,arguments)}function We(){_e.apply(this,arguments),this._timer=null,this._input=null}function Oe(){De.apply(this,arguments)}function je(){De.apply(this,arguments)}function He(){_e.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ve(e,t){return(t=t||{}).recognizers=y(t.recognizers,Ve.defaults.preset),new Le(e,t)}_e.prototype={defaults:{},set:function(e){return o(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(n(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Be(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return n(e,"dropRecognizeWith",this)||(e=Be(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(n(e,"requireFailure",this))return this;var t=this.requireFail;return-1===x(t,e=Be(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(n(e,"dropRequireFailure",this))return this;e=Be(e,this);var t=x(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){var i=this,e=this.state;function n(e){i.manager.emit(e,t)}e<8&&n(i.options.event+Fe(e)),n(i.options.event),t.additionalEvent&&n(t.additionalEvent),8<=e&&n(i.options.event+Fe(e))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Re)))return!1;e++}return!0},recognize:function(e){var t=o({},e);if(!m(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=Re),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},I(De,_e,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,n=6&t,r=this.attrTest(e);return n&&(i&O||!r)?16|t:n||r?i&W?8|t:2&t?4|t:2:32}}),I(Ue,De,{defaults:{event:"pan",threshold:10,pointers:1,direction:K},getTouchAction:function(){var e=this.options.direction,t=[];return e&G&&t.push(ke),e&Z&&t.push(Ee),t},directionTest:function(e){var t=this.options,i=!0,n=e.distance,r=e.direction,a=e.deltaX,o=e.deltaY;return r&t.direction||(n=t.direction&G?(r=0===a?j:a<0?H:V,i=a!=this.pX,Math.abs(e.deltaX)):(r=0===o?j:o<0?L:M,i=o!=this.pY,Math.abs(e.deltaY))),e.direction=r,i&&n>t.threshold&&r&t.direction},attrTest:function(e){return De.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ne(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),I(Je,De,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xe]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){var t;1!==e.scale&&(t=e.scale<1?"in":"out",e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),I(We,_e,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!n||!i||e.eventType&(W|O)&&!r)this.reset();else if(e.eventType&J)this.reset(),this._timer=u(function(){this.state=8,this.tryEmit()},t.time,this);else if(e.eventType&W)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&W?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),I(Oe,De,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xe]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),I(je,De,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:G|Z,pointers:1},getTouchAction:function(){return Ue.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(G|Z)?t=e.overallVelocity:i&G?t=e.overallVelocityX:i&Z&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&d(t)>this.options.velocity&&e.eventType&W},emit:function(e){var t=Ne(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),I(He,_e,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[we]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&J&&0===this.count)return this.failTimeout();if(n&&r&&i){if(e.eventType!=W)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||ie(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&a?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=u(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=u(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ve.VERSION="2.0.7",Ve.defaults={domEvents:!1,touchAction:Se,enable:!0,inputTarget:null,inputClass:null,preset:[[Oe,{enable:!1}],[Je,{enable:!1},["rotate"]],[je,{direction:G}],[Ue,{direction:G},["swipe"]],[He],[He,{event:"doubletap",taps:2},["tap"]],[We]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Le(e,t){var i,n;this.options=o({},Ve.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=(n=(i=this).options.inputClass,new(n||(F?de:N?be:_?ye:se))(i,q)),this.touchAction=new Pe(this,this.options.touchAction),Me(this,!0),p(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Me(i,n){var r,a=i.element;a.style&&(p(i.options.cssProps,function(e,t){r=T(a.style,t),n?(i.oldCssProps[r]=a.style[r],a.style[r]=e):a.style[r]=i.oldCssProps[r]||""}),n||(i.oldCssProps={}))}Le.prototype={set:function(e){return o(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t,i=this.session;if(!i.stopped){this.touchAction.preventDefaults(e);var n=this.recognizers,r=i.curRecognizer;(!r||r&&8&r.state)&&(r=i.curRecognizer=null);for(var a=0;a<n.length;)t=n[a],2===i.stopped||r&&t!=r&&!t.canRecognizeWith(r)?t.reset():t.recognize(e),!r&&14&t.state&&(r=i.curRecognizer=t),a++}},get:function(e){if(e instanceof _e)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(n(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){return n(e,"remove",this)||!(e=this.get(e))||-1!==(i=x(t=this.recognizers,e))&&(t.splice(i,1),this.touchAction.update()),this;var t,i},on:function(e,t){if(e!==g&&t!==g){var i=this.handlers;return p(w(e),function(e){i[e]=i[e]||[],i[e].push(t)}),this}},off:function(e,t){if(e!==g){var i=this.handlers;return p(w(e),function(e){t?i[e]&&i[e].splice(x(i[e],t),1):delete i[e]}),this}},emit:function(e,t){var i,n,r;this.options.domEvents&&(i=e,n=t,(r=s.createEvent("Event")).initEvent(i,!0,!0),(r.gesture=n).target.dispatchEvent(r));var a=this.handlers[e]&&this.handlers[e].slice();if(a&&a.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](t),o++}},destroy:function(){this.element&&Me(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(Ve,{INPUT_START:J,INPUT_MOVE:2,INPUT_END:W,INPUT_CANCEL:O,STATE_POSSIBLE:Re,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:j,DIRECTION_LEFT:H,DIRECTION_RIGHT:V,DIRECTION_UP:L,DIRECTION_DOWN:M,DIRECTION_HORIZONTAL:G,DIRECTION_VERTICAL:Z,DIRECTION_ALL:K,Manager:Le,Input:z,TouchAction:Pe,TouchInput:be,MouseInput:se,PointerEventInput:de,TouchMouseInput:ye,SingleTouchInput:pe,Recognizer:_e,AttrRecognizer:De,Tap:He,Pan:Ue,Swipe:je,Pinch:Je,Rotate:Oe,Press:We,on:C,off:A,each:p,merge:f,extend:r,assign:o,inherit:I,bindFn:b,prefixed:T}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=Ve,"function"==typeof g&&g.amd?g(function(){return Ve}):Ge.exports?Ge.exports=Ve:a.Hammer=Ve}(window,document)}),eventTypes={},EventType=(createClass(QZ,null,[{key:"init",value:function(){var t=constants.events.IDGEN.behavior;["HeartbeatT","UserProfileT","SessionPropT","IdentifyUserT","SessionStartT","SessionEndT","ViewStartT","ViewEndT","DeviceInfoT"].forEach(function(e){eventTypes[e]=t++}),t=constants.events.IDGEN.sessions,["ViewChangeT","InternalSessionPropT","MergeSessionT"].forEach(function(e){eventTypes[e]=t++}),t=constants.events.IDGEN.interactions,["ResEvt1T","HTMLTextT","NodeDictionaryT","WindowDimT","SclWindowT","MouseMoveT","MouseLeaveEntryT","FormInputT","DblClickT","KeyStrokeDownT","InputPosT","InputValChangedT","MutNodeTextT","PropChangeT","JSExceptionT","MouseClickT","ResEvt4T","ResEvt5T","PVT","HTMLDimT","SclInNodeT","DownloadedT","FormSubmitT","ResEvt7T","ResEvt8T","ResizeT","MutInsertT","MutRemoveT","TouchStartT","TouchEndT","CustomEventT","ErrorT","TapT","PressT","SwipeT","PinchT","ConsoleT","NetworkT"].forEach(function(e){eventTypes[e]=t++})}},{key:"CustomEventT",value:function(){return eventTypes.CustomEventT}},{key:"DblClickT",value:function(){return eventTypes.DblClickT}},{key:"DeviceInfoT",value:function(){return eventTypes.DeviceInfoT}},{key:"HTMLDimT",value:function(){return eventTypes.HTMLDimT}},{key:"NodeDictionaryT",value:function(){return eventTypes.NodeDictionaryT}},{key:"DownloadedT",value:function(){return eventTypes.DownloadedT}},{key:"ErrorT",value:function(){return eventTypes.ErrorT}},{key:"FormSubmitT",value:function(){return eventTypes.FormSubmitT}},{key:"HTMLTextT",value:function(){return eventTypes.HTMLTextT}},{key:"PropChangeT",value:function(){return eventTypes.PropChangeT}},{key:"InputPosT",value:function(){return eventTypes.InputPosT}},{key:"HeartbeatT",value:function(){return eventTypes.HeartbeatT}},{key:"IdentifyUserT",value:function(){return eventTypes.IdentifyUserT}},{key:"FormInputT",value:function(){return eventTypes.FormInputT}},{key:"InternalSessionPropT",value:function(){return eventTypes.InternalSessionPropT}},{key:"JSExceptionT",value:function(){return eventTypes.JSExceptionT}},{key:"KeyStrokeDownT",value:function(){return eventTypes.KeyStrokeDownT}},{key:"MergeSessionT",value:function(){return eventTypes.MergeSessionT}},{key:"MouseClickT",value:function(){return eventTypes.MouseClickT}},{key:"MouseMoveT",value:function(){return eventTypes.MouseMoveT}},{key:"MouseLeaveEntryT",value:function(){return eventTypes.MouseLeaveEntryT}},{key:"SclInNodeT",value:function(){return eventTypes.SclInNodeT}},{key:"PVT",value:function(){return eventTypes.PVT}},{key:"PinchT",value:function(){return eventTypes.PinchT}},{key:"PressT",value:function(){return eventTypes.PressT}},{key:"SessionEndT",value:function(){return eventTypes.SessionEndT}},{key:"SessionStartT",value:function(){return eventTypes.SessionStartT}},{key:"SwipeT",value:function(){return eventTypes.SwipeT}},{key:"TapT",value:function(){return eventTypes.TapT}},{key:"TouchEndT",value:function(){return eventTypes.TouchEndT}},{key:"TouchStartT",value:function(){return eventTypes.TouchStartT}},{key:"UserProfileT",value:function(){return eventTypes.UserProfileT}},{key:"InputValChangedT",value:function(){return eventTypes.InputValChangedT}},{key:"ViewChangeT",value:function(){return eventTypes.ViewChangeT}},{key:"ViewEndT",value:function(){return eventTypes.ViewEndT}},{key:"ViewStartT",value:function(){return eventTypes.ViewStartT}},{key:"MutNodeTextT",value:function(){return eventTypes.MutNodeTextT}},{key:"MutInsertT",value:function(){return eventTypes.MutInsertT}},{key:"MutRemoveT",value:function(){return eventTypes.MutRemoveT}},{key:"SessionPropT",value:function(){return eventTypes.SessionPropT}},{key:"SclWindowT",value:function(){return eventTypes.SclWindowT}},{key:"WindowDimT",value:function(){return eventTypes.WindowDimT}},{key:"ResizeT",value:function(){return eventTypes.ResizeT}},{key:"ConsoleT",value:function(){return 67}},{key:"NetworkT",value:function(){return 68}},{key:"isInteractionEvent",value:function(e){return _.inArray(e,[QZ.MouseClickT(),QZ.TapT(),QZ.PressT(),QZ.KeyStrokeDownT(),QZ.ResizeT(),QZ.SclWindowT(),QZ.SclInNodeT(),QZ.MouseLeaveEntryT()])}}]),QZ);function QZ(){classCallCheck(this,QZ)}var aspromise=asPromise;function asPromise(e,t){for(var i=new Array(arguments.length-1),a=0,n=2,o=!0;n<arguments.length;)i[a++]=arguments[n++];return new Promise(function(n,r){i[a]=function(e){if(o)if(o=!1,e)r(e);else{for(var t=new Array(arguments.length-1),i=0;i<t.length;)t[i++]=arguments[i];n.apply(null,t)}};try{e.apply(t||null,i)}catch(e){o&&(o=!1,r(e))}})}var base64_1=createCommonjsModule(function(e,t){var i=t;i.length=function(e){var t=e.length;if(!t)return 0;for(var i=0;1<--t%4&&"="===e.charAt(t);)++i;return Math.ceil(3*e.length)/4-i};for(var l=new Array(64),c=new Array(123),n=0;n<64;)c[l[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;i.encode=function(e,t,i){for(var n,r=null,a=[],o=0,s=0;t<i;){var c=e[t++];switch(s){case 0:a[o++]=l[c>>2],n=(3&c)<<4,s=1;break;case 1:a[o++]=l[n|c>>4],n=(15&c)<<2,s=2;break;case 2:a[o++]=l[n|c>>6],a[o++]=l[63&c],s=0}8191<o&&((r=r||[]).push(String.fromCharCode.apply(String,a)),o=0)}return s&&(a[o++]=l[n],a[o++]=61,1===s&&(a[o++]=61)),r?(o&&r.push(String.fromCharCode.apply(String,a.slice(0,o))),r.join("")):String.fromCharCode.apply(String,a.slice(0,o))};var u="invalid encoding";i.decode=function(e,t,i){for(var n,r=i,a=0,o=0;o<e.length;){var s=e.charCodeAt(o++);if(61===s&&1<a)break;if(void 0===(s=c[s]))throw Error(u);switch(a){case 0:n=s,a=1;break;case 1:t[i++]=n<<2|(48&s)>>4,n=s,a=2;break;case 2:t[i++]=(15&n)<<4|(60&s)>>2,n=s,a=3;break;case 3:t[i++]=(3&n)<<6|s,a=0}}if(1===a)throw Error(u);return i-r},i.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:i||this}),this},EventEmitter.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===t?i.splice(n,1):++n;return this},EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,i)}return this};var float_1=factory(factory);function factory(e){function t(e,t,i,n){var r,a=t<0?1:0;a&&(t=-t),0===t?e(0<1/t?0:2147483648,i,n):isNaN(t)?e(2143289344,i,n):e(34028234663852886e22<t?(a<<31|2139095040)>>>0:t<11754943508222875e-54?(a<<31|Math.round(t/1401298464324817e-60))>>>0:(a<<31|(r=Math.floor(Math.log(t)/Math.LN2))+127<<23|8388607&Math.round(t*Math.pow(2,-r)*8388608))>>>0,i,n)}function i(e,t,i){var n=e(t,i),r=2*(n>>31)+1,a=n>>>23&255,o=8388607&n;return 255==a?o?NaN:1/0*r:0==a?1401298464324817e-60*r*o:r*Math.pow(2,a-150)*(8388608+o)}function n(e,t,i){s[0]=e,t[i]=c[0],t[i+1]=c[1],t[i+2]=c[2],t[i+3]=c[3]}function r(e,t,i){s[0]=e,t[i]=c[3],t[i+1]=c[2],t[i+2]=c[1],t[i+3]=c[0]}function a(e,t){return c[0]=e[t],c[1]=e[t+1],c[2]=e[t+2],c[3]=e[t+3],s[0]}function o(e,t){return c[3]=e[t],c[2]=e[t+1],c[1]=e[t+2],c[0]=e[t+3],s[0]}var s,c,l,u,g,d;function h(e,t,i,n,r,a){var o,s,c=n<0?1:0;c&&(n=-n),0===n?(e(0,r,a+t),e(0<1/n?0:2147483648,r,a+i)):isNaN(n)?(e(0,r,a+t),e(2146959360,r,a+i)):17976931348623157e292<n?(e(0,r,a+t),e((c<<31|2146435072)>>>0,r,a+i)):n<22250738585072014e-324?(e((o=n/5e-324)>>>0,r,a+t),e((c<<31|o/4294967296)>>>0,r,a+i)):(1024===(s=Math.floor(Math.log(n)/Math.LN2))&&(s=1023),e(4503599627370496*(o=n*Math.pow(2,-s))>>>0,r,a+t),e((c<<31|s+1023<<20|1048576*o&1048575)>>>0,r,a+i))}function p(e,t,i,n,r){var a=e(n,r+t),o=e(n,r+i),s=2*(o>>31)+1,c=o>>>20&2047,l=4294967296*(1048575&o)+a;return 2047==c?l?NaN:1/0*s:0==c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}function f(e,t,i){u[0]=e,t[i]=g[0],t[i+1]=g[1],t[i+2]=g[2],t[i+3]=g[3],t[i+4]=g[4],t[i+5]=g[5],t[i+6]=g[6],t[i+7]=g[7]}function I(e,t,i){u[0]=e,t[i]=g[7],t[i+1]=g[6],t[i+2]=g[5],t[i+3]=g[4],t[i+4]=g[3],t[i+5]=g[2],t[i+6]=g[1],t[i+7]=g[0]}function b(e,t){return g[0]=e[t],g[1]=e[t+1],g[2]=e[t+2],g[3]=e[t+3],g[4]=e[t+4],g[5]=e[t+5],g[6]=e[t+6],g[7]=e[t+7],u[0]}function m(e,t){return g[7]=e[t],g[6]=e[t+1],g[5]=e[t+2],g[4]=e[t+3],g[3]=e[t+4],g[2]=e[t+5],g[1]=e[t+6],g[0]=e[t+7],u[0]}return"undefined"!=typeof Float32Array?(s=new Float32Array([-0]),c=new Uint8Array(s.buffer),l=128===c[3],e.writeFloatLE=l?n:r,e.writeFloatBE=l?r:n,e.readFloatLE=l?a:o,e.readFloatBE=l?o:a):(e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=i.bind(null,readUintLE),e.readFloatBE=i.bind(null,readUintBE)),"undefined"!=typeof Float64Array?(u=new Float64Array([-0]),g=new Uint8Array(u.buffer),d=128===g[7],e.writeDoubleLE=d?f:I,e.writeDoubleBE=d?I:f,e.readDoubleLE=d?b:m,e.readDoubleBE=d?m:b):(e.writeDoubleLE=h.bind(null,writeUintLE,0,4),e.writeDoubleBE=h.bind(null,writeUintBE,4,0),e.readDoubleLE=p.bind(null,readUintLE,0,4),e.readDoubleBE=p.bind(null,readUintBE,4,0)),e}function writeUintLE(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}function writeUintBE(e,t,i){t[i]=e>>>24,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8_1=createCommonjsModule(function(e,t){var i=t;i.length=function(e){for(var t,i=0,n=0;n<e.length;++n)(t=e.charCodeAt(n))<128?i+=1:t<2048?i+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(n+1))?(++n,i+=4):i+=3;return i},i.read=function(e,t,i){if(i-t<1)return"";for(var n,r=null,a=[],o=0;t<i;)(n=e[t++])<128?a[o++]=n:191<n&&n<224?a[o++]=(31&n)<<6|63&e[t++]:239<n&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[o++]=55296+(n>>10),a[o++]=56320+(1023&n)):a[o++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],8191<o&&((r=r||[]).push(String.fromCharCode.apply(String,a)),o=0);return r?(o&&r.push(String.fromCharCode.apply(String,a.slice(0,o))),r.join("")):String.fromCharCode.apply(String,a.slice(0,o))},i.write=function(e,t,i){for(var n,r,a=i,o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(55296==(64512&n)&&56320==(64512&(r=e.charCodeAt(o+1)))?(n=65536+((1023&n)<<10)+(1023&r),++o,t[i++]=n>>18|240,t[i++]=n>>12&63|128):t[i++]=n>>12|224,t[i++]=n>>6&63|128),t[i++]=63&n|128);return i-a}}),pool_1=pool;function pool(i,n,e){var r=e||8192,a=r>>>1,o=null,s=r;return function(e){if(e<1||a<e)return i(e);r<s+e&&(o=i(r),s=0);var t=n.call(o,s,s+=e);return 7&s&&(s=1+(7|s)),t}}var longbits=LongBits;function LongBits(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return t&&(n=~n>>>0,i=~i>>>0,4294967295<++i&&(i=0,4294967295<++n&&(n=0))),new LongBits(i,n)},LongBits.from=function(e){if("number"==typeof e)return LongBits.fromNumber(e);if(minimal.isString(e)){if(!minimal.Long)return LongBits.fromNumber(parseInt(e,10));e=minimal.Long.fromString(e)}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):zero},LongBits.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+4294967296*i)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(e){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(e){return e===zeroHash?zero:new LongBits((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0==i?0==t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10};var minimal=createCommonjsModule(function(e,t){var n=t;function r(e,t,i){for(var n=Object.keys(t),r=0;r<n.length;++r)void 0!==e[n[r]]&&i||(e[n[r]]=t[n[r]]);return e}function i(e){function i(e,t){if(!(this instanceof i))return new i(e,t);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),t&&r(this,t)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return e}}),i.prototype.toString=function(){return this.name+": "+this.message},i}n.asPromise=aspromise,n.base64=base64_1,n.EventEmitter=eventemitter,n.float=float_1,n.inquire=inquire_1,n.utf8=utf8_1,n.pool=pool_1,n.LongBits=longbits,n.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),n.global=n.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||0<(Array.isArray(i)?i.length:Object.keys(i).length))},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var i=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(i.lo,i.hi,t):i.toNumber(Boolean(t))},n.merge=r,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var i={},t=0;t<e.length;++t)i[e[t]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;-1<t;--t)if(1===i[e[t]]&&void 0!==this[e[t]]&&null!==this[e[t]])return e[t]}},n.oneOfSetter=function(i){return function(e){for(var t=0;t<i.length;++t)i[t]!==e&&delete this[i[t]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var i=n.Buffer;i?(n._Buffer_from=i.from!==Uint8Array.from&&i.from||function(e,t){return new i(e,t)},n._Buffer_allocUnsafe=i.allocUnsafe||function(e){return new i(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(e,t,i){this.fn=e,this.len=t,this.next=void 0,this.val=i}function noop$2(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}var create=function(){return minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer}};function writeByte(e,t,i){t[i]=255&e}function writeVarint32(e,t,i){for(;127<e;)t[i++]=127&e|128,e>>>=7;t[i]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function writeFixed32(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}Writer.create=create(),Writer.alloc=function(e){return new minimal.Array(e)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(e,t,i){return this.tail=this.tail.next=new Op(e,t,i),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(e){return this._push(minimal.float.writeFloatLE,4,e)},Writer.prototype.double=function(e){return this._push(minimal.float.writeDoubleLE,8,e)};var writeBytes=minimal.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var n=0;n<e.length;++n)t[i+n]=e[n]};Writer.prototype.bytes=function(e){var t,i=e.length>>>0;return i?(minimal.isString(e)&&(t=Writer.alloc(i=base64.length(e)),base64.decode(e,t,0),e=t),this.uint32(i)._push(writeBytes,i,e)):this._push(writeByte,1,0)},Writer.prototype.string=function(e){var t=utf8.length(e);return t?this.uint32(t)._push(utf8.write,t,e):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},Writer.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},Writer._configure=function(e){BufferWriter=e,Writer.create=create(),BufferWriter._configure()};var writer_buffer=BufferWriter$1;function BufferWriter$1(){writer.call(this)}function writeStringBuffer(e,t,i){e.length<40?minimal.utf8.write(e,t,i):t.utf8Write?t.utf8Write(e,i):t.write(e,i)}(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1,BufferWriter$1._configure=function(){BufferWriter$1.alloc=minimal._Buffer_allocUnsafe,BufferWriter$1.writeBytesBuffer=minimal.Buffer&&minimal.Buffer.prototype instanceof Uint8Array&&"set"===minimal.Buffer.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var n=0;n<e.length;)t[i++]=e[n++]}},BufferWriter$1.prototype.bytes=function(e){minimal.isString(e)&&(e=minimal._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter$1.writeBytesBuffer,t,e),this},BufferWriter$1.prototype.string=function(e){var t=minimal.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this},BufferWriter$1._configure();var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")},create$1=function(){return minimal.Buffer?function(e){return(Reader.create=function(e){return minimal.Buffer.isBuffer(e)?new BufferReader(e):create_array(e)})(e)}:create_array},D5;function readLongVarint(){var e=new LongBits$2(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=create$1(),Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=(D5=4294967295,function(){if(D5=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return D5;if(D5=(D5|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return D5;if(D5=(D5|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return D5;if(D5=(D5|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return D5;if(D5=(D5|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return D5;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return D5}),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this._slice.call(this.buf,t,i)},Reader.prototype.string=function(){var e=this.bytes();return utf8$1.read(e,0,e.length)},Reader.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader._configure=function(e){BufferReader=e,Reader.create=create$1(),BufferReader._configure();var t=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(e){reader.call(this,e)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,BufferReader$1._configure=function(){minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice)},BufferReader$1.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader$1._configure();var service=Service;function Service(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(i,t,n,r,a){if(!r)throw TypeError("request must be specified");var o=this;if(!a)return minimal.asPromise(e,o,i,t,n,r);if(o.rpcImpl)try{return o.rpcImpl(i,t[o.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(e,t){if(e)return o.emit("error",e,i),a(e);if(null!==t){if(!(t instanceof n))try{t=n[o.responseDelimited?"decodeDelimited":"decode"](t)}catch(e){return o.emit("error",e,i),a(e)}return o.emit("data",t,i),a(null,t)}o.end(!0)})}catch(e){return o.emit("error",e,i),void setTimeout(function(){a(e)},0)}else setTimeout(function(){a(Error("already ended"))},0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule(function(e,t){t.Service=service}),roots={},indexMinimal=createCommonjsModule(function(e,t){var i=t;function n(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}i.build="minimal",i.Writer=writer,i.BufferWriter=writer_buffer,i.Reader=reader,i.BufferReader=reader_buffer,i.util=minimal,i.rpc=rpc_1,i.roots=roots,i.configure=n,n()}),minimal$2=indexMinimal,minimal_1=minimal$2.util,minimal_2=minimal$2.Writer,minimal_3=minimal$2.Reader,$Reader=minimal_3,$Writer=minimal_2,$util=minimal_1,$root={},com=$root.com=(H6={},H6.auryc=((I6={}).ubi=((J6={}).core=((K6={}).model=((L6={}).Message=(M6.prototype.cid="",M6.prototype.uid="",M6.prototype.sid="",M6.prototype.domain="",M6.prototype.context=null,M6.prototype.packet=$util.emptyArray,M6.create=function(e){return new M6(e)},M6.encode=function(e,t){if(t=t||$Writer.create(),null!=e.cid&&e.hasOwnProperty("cid")&&t.uint32(10).string(e.cid),null!=e.uid&&e.hasOwnProperty("uid")&&t.uint32(18).string(e.uid),null!=e.sid&&e.hasOwnProperty("sid")&&t.uint32(26).string(e.sid),null!=e.domain&&e.hasOwnProperty("domain")&&t.uint32(34).string(e.domain),null!=e.context&&e.hasOwnProperty("context")&&$root.com.auryc.ubi.core.model.Message.MessageContext.encode(e.context,t.uint32(42).fork()).ldelim(),null!=e.packet&&e.packet.length)for(var i=0;i<e.packet.length;++i)$root.com.auryc.ubi.core.model.Message.MessagePacket.encode(e.packet[i],t.uint32(50).fork()).ldelim();return t},M6.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},M6.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new $root.com.auryc.ubi.core.model.Message;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.cid=e.string();break;case 2:n.uid=e.string();break;case 3:n.sid=e.string();break;case 4:n.domain=e.string();break;case 5:n.context=$root.com.auryc.ubi.core.model.Message.MessageContext.decode(e,e.uint32());break;case 6:n.packet&&n.packet.length||(n.packet=[]),n.packet.push($root.com.auryc.ubi.core.model.Message.MessagePacket.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},M6.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},M6.verify=function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)return"object expected";if(null!=e.cid&&e.hasOwnProperty("cid")&&!$util.isString(e.cid))return"cid: string expected";if(null!=e.uid&&e.hasOwnProperty("uid")&&!$util.isString(e.uid))return"uid: string expected";if(null!=e.sid&&e.hasOwnProperty("sid")&&!$util.isString(e.sid))return"sid: string expected";if(null!=e.domain&&e.hasOwnProperty("domain")&&!$util.isString(e.domain))return"domain: string expected";if(null!=e.context&&e.hasOwnProperty("context")){var t=$root.com.auryc.ubi.core.model.Message.MessageContext.verify(e.context);if(t)return"context."+t}if(null!=e.packet&&e.hasOwnProperty("packet")){if(!Array.isArray(e.packet))return"packet: array expected";for(var i=0;i<e.packet.length;++i){var n=$root.com.auryc.ubi.core.model.Message.MessagePacket.verify(e.packet[i]);if(n)return"packet."+n}}return null},M6.fromObject=function(e){if(e instanceof $root.com.auryc.ubi.core.model.Message)return e;var t=new $root.com.auryc.ubi.core.model.Message;if(null!=e.cid&&(t.cid=String(e.cid)),null!=e.uid&&(t.uid=String(e.uid)),null!=e.sid&&(t.sid=String(e.sid)),null!=e.domain&&(t.domain=String(e.domain)),null!=e.context){if("object"!==_typeof(e.context))throw TypeError(".com.auryc.ubi.core.model.Message.context: object expected");t.context=$root.com.auryc.ubi.core.model.Message.MessageContext.fromObject(e.context)}if(e.packet){if(!Array.isArray(e.packet))throw TypeError(".com.auryc.ubi.core.model.Message.packet: array expected");t.packet=[];for(var i=0;i<e.packet.length;++i){if("object"!==_typeof(e.packet[i]))throw TypeError(".com.auryc.ubi.core.model.Message.packet: object expected");t.packet[i]=$root.com.auryc.ubi.core.model.Message.MessagePacket.fromObject(e.packet[i])}}return t},M6.toObject=function(e,t){var i={};if(((t=t||{}).arrays||t.defaults)&&(i.packet=[]),t.defaults&&(i.cid="",i.uid="",i.sid="",i.domain="",i.context=null),null!=e.cid&&e.hasOwnProperty("cid")&&(i.cid=e.cid),null!=e.uid&&e.hasOwnProperty("uid")&&(i.uid=e.uid),null!=e.sid&&e.hasOwnProperty("sid")&&(i.sid=e.sid),null!=e.domain&&e.hasOwnProperty("domain")&&(i.domain=e.domain),null!=e.context&&e.hasOwnProperty("context")&&(i.context=$root.com.auryc.ubi.core.model.Message.MessageContext.toObject(e.context,t)),e.packet&&e.packet.length){i.packet=[];for(var n=0;n<e.packet.length;++n)i.packet[n]=$root.com.auryc.ubi.core.model.Message.MessagePacket.toObject(e.packet[n],t)}return i},M6.prototype.toJSON=function(){return this.constructor.toObject(this,minimal_1.toJSONOptions)},M6.MessageContext=(u7.prototype.ln="",u7.prototype.lv="",u7.prototype.ip="",u7.prototype.ref="",u7.prototype.ua="",u7.create=function(e){return new u7(e)},u7.encode=function(e,t){return t=t||$Writer.create(),null!=e.ln&&e.hasOwnProperty("ln")&&t.uint32(10).string(e.ln),null!=e.lv&&e.hasOwnProperty("lv")&&t.uint32(18).string(e.lv),null!=e.ip&&e.hasOwnProperty("ip")&&t.uint32(26).string(e.ip),null!=e.ref&&e.hasOwnProperty("ref")&&t.uint32(34).string(e.ref),null!=e.ua&&e.hasOwnProperty("ua")&&t.uint32(42).string(e.ua),t},u7.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},u7.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new $root.com.auryc.ubi.core.model.Message.MessageContext;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.ln=e.string();break;case 2:n.lv=e.string();break;case 3:n.ip=e.string();break;case 4:n.ref=e.string();break;case 5:n.ua=e.string();break;default:e.skipType(7&r)}}return n},u7.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},u7.verify=function(e){return"object"!==(void 0===e?"undefined":_typeof(e))||null===e?"object expected":null!=e.ln&&e.hasOwnProperty("ln")&&!$util.isString(e.ln)?"ln: string expected":null!=e.lv&&e.hasOwnProperty("lv")&&!$util.isString(e.lv)?"lv: string expected":null!=e.ip&&e.hasOwnProperty("ip")&&!$util.isString(e.ip)?"ip: string expected":null!=e.ref&&e.hasOwnProperty("ref")&&!$util.isString(e.ref)?"ref: string expected":null!=e.ua&&e.hasOwnProperty("ua")&&!$util.isString(e.ua)?"ua: string expected":null},u7.fromObject=function(e){if(e instanceof $root.com.auryc.ubi.core.model.Message.MessageContext)return e;var t=new $root.com.auryc.ubi.core.model.Message.MessageContext;return null!=e.ln&&(t.ln=String(e.ln)),null!=e.lv&&(t.lv=String(e.lv)),null!=e.ip&&(t.ip=String(e.ip)),null!=e.ref&&(t.ref=String(e.ref)),null!=e.ua&&(t.ua=String(e.ua)),t},u7.toObject=function(e,t){var i={};return(t=t||{}).defaults&&(i.ln="",i.lv="",i.ip="",i.ref="",i.ua=""),null!=e.ln&&e.hasOwnProperty("ln")&&(i.ln=e.ln),null!=e.lv&&e.hasOwnProperty("lv")&&(i.lv=e.lv),null!=e.ip&&e.hasOwnProperty("ip")&&(i.ip=e.ip),null!=e.ref&&e.hasOwnProperty("ref")&&(i.ref=e.ref),null!=e.ua&&e.hasOwnProperty("ua")&&(i.ua=e.ua),i},u7.prototype.toJSON=function(){return this.constructor.toObject(this,minimal_1.toJSONOptions)},u7),M6.MessagePacket=(Y7.prototype.vid="",Y7.prototype.ts=$util.Long?$util.Long.fromBits(0,0,!1):0,Y7.prototype.status=0,Y7.prototype.size=0,Y7.prototype.data=$util.newBuffer([]),Y7.prototype.payload=$util.emptyObject,Y7.create=function(e){return new Y7(e)},Y7.encode=function(e,t){if(t=t||$Writer.create(),null!=e.vid&&e.hasOwnProperty("vid")&&t.uint32(10).string(e.vid),null!=e.ts&&e.hasOwnProperty("ts")&&t.uint32(16).int64(e.ts),null!=e.status&&e.hasOwnProperty("status")&&t.uint32(24).int32(e.status),null!=e.size&&e.hasOwnProperty("size")&&t.uint32(32).int32(e.size),null!=e.data&&e.hasOwnProperty("data")&&t.uint32(42).bytes(e.data),null!=e.payload&&e.hasOwnProperty("payload"))for(var i=Object.keys(e.payload),n=0;n<i.length;++n)t.uint32(50).fork().uint32(10).string(i[n]).uint32(18).bytes(e.payload[i[n]]).ldelim();return t},Y7.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},Y7.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var i,n=void 0===t?e.len:e.pos+t,r=new $root.com.auryc.ubi.core.model.Message.MessagePacket;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.vid=e.string();break;case 2:r.ts=e.int64();break;case 3:r.status=e.int32();break;case 4:r.size=e.int32();break;case 5:r.data=e.bytes();break;case 6:e.skip().pos++,r.payload===$util.emptyObject&&(r.payload={}),i=e.string(),e.pos++,r.payload[i]=e.bytes();break;default:e.skipType(7&a)}}return r},Y7.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},Y7.verify=function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)return"object expected";if(null!=e.vid&&e.hasOwnProperty("vid")&&!$util.isString(e.vid))return"vid: string expected";if(null!=e.ts&&e.hasOwnProperty("ts")&&!($util.isInteger(e.ts)||e.ts&&$util.isInteger(e.ts.low)&&$util.isInteger(e.ts.high)))return"ts: integer|Long expected";if(null!=e.status&&e.hasOwnProperty("status")&&!$util.isInteger(e.status))return"status: integer expected";if(null!=e.size&&e.hasOwnProperty("size")&&!$util.isInteger(e.size))return"size: integer expected";if(null!=e.data&&e.hasOwnProperty("data")&&!(e.data&&"number"==typeof e.data.length||$util.isString(e.data)))return"data: buffer expected";if(null!=e.payload&&e.hasOwnProperty("payload")){if(!$util.isObject(e.payload))return"payload: object expected";for(var t=Object.keys(e.payload),i=0;i<t.length;++i)if(!(e.payload[t[i]]&&"number"==typeof e.payload[t[i]].length||$util.isString(e.payload[t[i]])))return"payload: buffer{k:string} expected"}return null},Y7.fromObject=function(e){if(e instanceof $root.com.auryc.ubi.core.model.Message.MessagePacket)return e;var t=new $root.com.auryc.ubi.core.model.Message.MessagePacket;if(null!=e.vid&&(t.vid=String(e.vid)),null!=e.ts&&($util.Long?(t.ts=$util.Long.fromValue(e.ts)).unsigned=!1:"string"==typeof e.ts?t.ts=parseInt(e.ts,10):"number"==typeof e.ts?t.ts=e.ts:"object"===_typeof(e.ts)&&(t.ts=new $util.LongBits(e.ts.low>>>0,e.ts.high>>>0).toNumber())),null!=e.status&&(t.status=0|e.status),null!=e.size&&(t.size=0|e.size),null!=e.data&&("string"==typeof e.data?$util.base64.decode(e.data,t.data=$util.newBuffer($util.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),e.payload){if("object"!==_typeof(e.payload))throw TypeError(".com.auryc.ubi.core.model.Message.MessagePacket.payload: object expected");t.payload={};for(var i=Object.keys(e.payload),n=0;n<i.length;++n)"string"==typeof e.payload[i[n]]?$util.base64.decode(e.payload[i[n]],t.payload[i[n]]=$util.newBuffer($util.base64.length(e.payload[i[n]])),0):e.payload[i[n]].length&&(t.payload[i[n]]=e.payload[i[n]])}return t},Y7.toObject=function(e,t){var i,n={};((t=t||{}).objects||t.defaults)&&(n.payload={}),t.defaults&&(n.vid="",$util.Long?(i=new $util.Long(0,0,!1),n.ts=t.longs===String?i.toString():t.longs===Number?i.toNumber():i):n.ts=t.longs===String?"0":0,n.status=0,n.size=0,n.data=t.bytes===String?"":[]),null!=e.vid&&e.hasOwnProperty("vid")&&(n.vid=e.vid),null!=e.ts&&e.hasOwnProperty("ts")&&("number"==typeof e.ts?n.ts=t.longs===String?String(e.ts):e.ts:n.ts=t.longs===String?$util.Long.prototype.toString.call(e.ts):t.longs===Number?new $util.LongBits(e.ts.low>>>0,e.ts.high>>>0).toNumber():e.ts),null!=e.status&&e.hasOwnProperty("status")&&(n.status=e.status),null!=e.size&&e.hasOwnProperty("size")&&(n.size=e.size),null!=e.data&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?$util.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data);var r=void 0;if(e.payload&&(r=Object.keys(e.payload)).length){n.payload={};for(var a=0;a<r.length;++a)n.payload[r[a]]=t.bytes===String?$util.base64.encode(e.payload[r[a]],0,e.payload[r[a]].length):t.bytes===Array?Array.prototype.slice.call(e.payload[r[a]]):e.payload[r[a]]}return n},Y7.prototype.toJSON=function(){return this.constructor.toObject(this,minimal_1.toJSONOptions)},Y7),M6),L6),K6),J6),I6),H6),L6,K6,J6,I6,H6;function M6(e){if(this.packet=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function u7(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}function Y7(e){if(this.payload={},e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}for(var byteLength_1=byteLength,toByteArray_1=toByteArray,fromByteArray_1=fromByteArray,lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function byteLength(e){var t=getLens(e),i=t[0],n=t[1];return 3*(i+n)/4-n}function _byteLength(e,t,i){return 3*(t+i)/4-i}function toByteArray(e){for(var t,i=getLens(e),n=i[0],r=i[1],a=new Arr(_byteLength(e,n,r)),o=0,s=0<r?n-4:n,c=0;c<s;c+=4)t=revLookup[e.charCodeAt(c)]<<18|revLookup[e.charCodeAt(c+1)]<<12|revLookup[e.charCodeAt(c+2)]<<6|revLookup[e.charCodeAt(c+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=255&t;return 2===r&&(t=revLookup[e.charCodeAt(c)]<<2|revLookup[e.charCodeAt(c+1)]>>4,a[o++]=255&t),1===r&&(t=revLookup[e.charCodeAt(c)]<<10|revLookup[e.charCodeAt(c+1)]<<4|revLookup[e.charCodeAt(c+2)]>>2,a[o++]=t>>8&255,a[o++]=255&t),a}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,t,i){for(var n,r=[],a=t;a<i;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),r.push(tripletToBase64(n));return r.join("")}function fromByteArray(e){for(var t,i=e.length,n=i%3,r=[],a=0,o=i-n;a<o;a+=16383)r.push(encodeChunk(e,a,o<a+16383?o:a+16383));return 1==n?(t=e[i-1],r.push(lookup[t>>2]+lookup[t<<4&63]+"==")):2==n&&(t=(e[i-2]<<8)+e[i-1],r.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),r.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var base64Js={byteLength:byteLength_1,toByteArray:toByteArray_1,fromByteArray:fromByteArray_1},read=function(e,t,i,n,r){var a,o,s=8*r-n-1,c=(1<<s)-1,l=c>>1,u=-7,g=i?r-1:0,d=i?-1:1,h=e[t+g];for(g+=d,a=h&(1<<-u)-1,h>>=-u,u+=s;0<u;a=256*a+e[t+g],g+=d,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=n;0<u;o=256*o+e[t+g],g+=d,u-=8);if(0===a)a=1-l;else{if(a===c)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),a-=l}return(h?-1:1)*o*Math.pow(2,a-n)},write=function(e,t,i,n,r,a){var o,s,c,l=8*a-r-1,u=(1<<l)-1,g=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:a-1,p=n?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),2<=(t+=1<=o+g?d/c:d*Math.pow(2,1-g))*c&&(o++,c/=2),u<=o+g?(s=0,o=u):1<=o+g?(s=(t*c-1)*Math.pow(2,r),o+=g):(s=t*Math.pow(2,g-1)*Math.pow(2,r),o=0));8<=r;e[i+h]=255&s,h+=p,s/=256,r-=8);for(o=o<<r|s,l+=r;0<l;e[i+h]=255&o,h+=p,o/=256,l-=8);e[i+h-p]|=128*f},ieee754={read:read,write:write},buffer=createCommonjsModule(function(e,i){var t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=g,i.SlowBuffer=function(e){+e!=e&&(e=0);return g.alloc(+e)},i.INSPECT_MAX_BYTES=50;var n=2147483647;function o(e){if(n<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,g.prototype),t}function g(e,t,i){if("number"!=typeof e)return r(e,t,i);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}function r(e,t,i){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!g.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var i=0|d(e,t),n=o(i),r=n.write(e,t);r!==i&&(n=n.slice(0,r));return n}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(R(e,ArrayBuffer)||e&&R(e.buffer,ArrayBuffer))return l(e,t,i);if("undefined"!=typeof SharedArrayBuffer&&(R(e,SharedArrayBuffer)||e&&R(e.buffer,SharedArrayBuffer)))return l(e,t,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return g.from(n,t,i);var r=function(e){if(g.isBuffer(e)){var t=0|u(e.length),i=o(t);return 0===i.length?i:(e.copy(i,0,0,t),i)}if(void 0!==e.length)return"number"!=typeof e.length||_(e.length)?o(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return g.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return s(e),o(e<0?0:0|u(e))}function c(e){for(var t=e.length<0?0:0|u(e.length),i=o(t),n=0;n<t;n+=1)i[n]=255&e[n];return i}function l(e,t,i){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');var n=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i);return Object.setPrototypeOf(n,g.prototype),n}function u(e){if(n<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function d(e,t){if(g.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||R(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===i)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return k(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return T(e).length;default:if(r)return n?-1:k(e).length;t=(""+t).toLowerCase(),r=!0}}function h(e,t,i){var n,r,a,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,i){var n=e.length;(!t||t<0)&&(t=0);(!i||i<0||n<i)&&(i=n);for(var r="",a=t;a<i;++a)r+=F[e[a]];return r}(this,t,i);case"utf8":case"utf-8":return y(this,t,i);case"ascii":return function(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(127&e[r]);return n}(this,t,i);case"latin1":case"binary":return function(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}(this,t,i);case"base64":return n=this,a=i,0===(r=t)&&a===n.length?base64Js.fromByteArray(n):base64Js.fromByteArray(n.slice(r,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,i){for(var n=e.slice(t,i),r="",a=0;a<n.length;a+=2)r+=String.fromCharCode(n[a]+256*n[a+1]);return r}(this,t,i);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function p(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function f(e,t,i,n,r){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),_(i=+i)&&(i=r?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(r)return-1;i=e.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof t&&(t=g.from(t,n)),g.isBuffer(t))return 0===t.length?-1:I(e,t,i,n,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):I(e,[t],i,n,r);throw new TypeError("val must be string, number or Buffer")}function I(e,t,i,n,r){var a=1,o=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o/=a=2,s/=2,i/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r)for(var l=-1,u=i;u<o;u++)if(c(e,u)===c(t,-1===l?0:u-l)){if(-1===l&&(l=u),u-l+1===s)return l*a}else-1!==l&&(u-=u-l),l=-1;else for(o<i+s&&(i=o-s),u=i;0<=u;u--){for(var g=!0,d=0;d<s;d++)if(c(e,u+d)!==c(t,d)){g=!1;break}if(g)return u}return-1}function b(e,t,i,n){return P(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,n)}function m(e,t,i,n){return P(function(e,t){for(var i,n,r,a=[],o=0;o<e.length&&!((t-=2)<0);++o)i=e.charCodeAt(o),n=i>>8,r=i%256,a.push(r),a.push(n);return a}(t,e.length-i),e,i,n)}function y(e,t,i){i=Math.min(e.length,i);for(var n=[],r=t;r<i;){var a,o,s,c,l=e[r],u=null,g=239<l?4:223<l?3:191<l?2:1;if(r+g<=i)switch(g){case 1:l<128&&(u=l);break;case 2:128==(192&(a=e[r+1]))&&127<(c=(31&l)<<6|63&a)&&(u=c);break;case 3:a=e[r+1],o=e[r+2],128==(192&a)&&128==(192&o)&&2047<(c=(15&l)<<12|(63&a)<<6|63&o)&&(c<55296||57343<c)&&(u=c);break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(c=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)&&c<1114112&&(u=c)}null===u?(u=65533,g=1):65535<u&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),r+=g}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var i="",n=0;for(;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=C));return i}(n)}i.kMaxLength=n,(g.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}}),g.poolSize=8192,g.from=r,Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array),g.alloc=function(e,t,i){return r=t,a=i,s(n=e),!(n<=0)&&void 0!==r?"string"==typeof a?o(n).fill(r,a):o(n).fill(r):o(n);var n,r,a},g.allocUnsafe=a,g.allocUnsafeSlow=a,g.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==g.prototype},g.compare=function(e,t){if(R(e,Uint8Array)&&(e=g.from(e,e.offset,e.byteLength)),R(t,Uint8Array)&&(t=g.from(t,t.offset,t.byteLength)),!g.isBuffer(e)||!g.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,n=t.length,r=0,a=Math.min(i,n);r<a;++r)if(e[r]!==t[r]){i=e[r],n=t[r];break}return i<n?-1:n<i?1:0},g.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return g.alloc(0);if(void 0===t)for(r=t=0;r<e.length;++r)t+=e[r].length;for(var i=g.allocUnsafe(t),n=0,r=0;r<e.length;++r){var a=e[r];if(R(a,Uint8Array)&&(a=g.from(a)),!g.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,n),n+=a.length}return i},g.byteLength=d,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},g.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},g.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},g.prototype.toLocaleString=g.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?y(this,0,e):h.apply(this,arguments)},g.prototype.equals=function(e){if(!g.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===g.compare(this,e)},g.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},t&&(g.prototype[t]=g.prototype.inspect),g.prototype.compare=function(e,t,i,n,r){if(R(e,Uint8Array)&&(e=g.from(e,e.offset,e.byteLength)),!g.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),t<0||i>e.length||n<0||r>this.length)throw new RangeError("out of range index");if(r<=n&&i<=t)return 0;if(r<=n)return-1;if(i<=t)return 1;if(this===e)return 0;for(var a=(r>>>=0)-(n>>>=0),o=(i>>>=0)-(t>>>=0),s=Math.min(a,o),c=this.slice(n,r),l=e.slice(t,i),u=0;u<s;++u)if(c[u]!==l[u]){a=c[u],o=l[u];break}return a<o?-1:o<a?1:0},g.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},g.prototype.indexOf=function(e,t,i){return f(this,e,t,i,!0)},g.prototype.lastIndexOf=function(e,t,i){return f(this,e,t,i,!1)},g.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-t;if((void 0===i||r<i)&&(i=r),0<e.length&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var a,o,s,c,l,u,g=!1;;)switch(n){case"hex":return function(e,t,i,n){i=Number(i)||0;var r=e.length-i;(!n||r<(n=Number(n)))&&(n=r);var a=t.length;a/2<n&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(_(s))return o;e[i+o]=s}return o}(this,e,t,i);case"utf8":case"utf-8":return l=t,u=i,P(k(e,(c=this).length-l),c,l,u);case"ascii":return b(this,e,t,i);case"latin1":case"binary":return b(this,e,t,i);case"base64":return a=this,o=t,s=i,P(T(e),a,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,e,t,i);default:if(g)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),g=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function A(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(i<e+t)throw new RangeError("Trying to access beyond buffer length")}function v(e,t,i,n,r,a){if(!g.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r<t||t<a)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function S(e,t,i,n){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function w(e,t,i,n,r){return t=+t,i>>>=0,r||S(e,0,i,4),ieee754.write(e,t,i,n,23,4),i+4}function x(e,t,i,n,r){return t=+t,i>>>=0,r||S(e,0,i,8),ieee754.write(e,t,i,n,52,8),i+8}g.prototype.slice=function(e,t){var i=this.length;(e=~~e)<0?(e+=i)<0&&(e=0):i<e&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,g.prototype),n},g.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||A(e,t,this.length);for(var n=this[e],r=1,a=0;++a<t&&(r*=256);)n+=this[e+a]*r;return n},g.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||A(e,t,this.length);for(var n=this[e+--t],r=1;0<t&&(r*=256);)n+=this[e+--t]*r;return n},g.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},g.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},g.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},g.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},g.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},g.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||A(e,t,this.length);for(var n=this[e],r=1,a=0;++a<t&&(r*=256);)n+=this[e+a]*r;return(r*=128)<=n&&(n-=Math.pow(2,8*t)),n},g.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||A(e,t,this.length);for(var n=t,r=1,a=this[e+--n];0<n&&(r*=256);)a+=this[e+--n]*r;return(r*=128)<=a&&(a-=Math.pow(2,8*t)),a},g.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},g.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},g.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},g.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},g.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},g.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),ieee754.read(this,e,!0,23,4)},g.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),ieee754.read(this,e,!1,23,4)},g.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),ieee754.read(this,e,!0,52,8)},g.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),ieee754.read(this,e,!1,52,8)},g.prototype.writeUIntLE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||v(this,e,t,i,Math.pow(2,8*i)-1,0);var r=1,a=0;for(this[t]=255&e;++a<i&&(r*=256);)this[t+a]=e/r&255;return t+i},g.prototype.writeUIntBE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||v(this,e,t,i,Math.pow(2,8*i)-1,0);var r=i-1,a=1;for(this[t+r]=255&e;0<=--r&&(a*=256);)this[t+r]=e/a&255;return t+i},g.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||v(this,e,t,1,255,0),this[t]=255&e,t+1},g.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||v(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},g.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||v(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},g.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||v(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},g.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||v(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},g.prototype.writeIntLE=function(e,t,i,n){var r;e=+e,t>>>=0,n||v(this,e,t,i,(r=Math.pow(2,8*i-1))-1,-r);var a=0,o=1,s=0;for(this[t]=255&e;++a<i&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+i},g.prototype.writeIntBE=function(e,t,i,n){var r;e=+e,t>>>=0,n||v(this,e,t,i,(r=Math.pow(2,8*i-1))-1,-r);var a=i-1,o=1,s=0;for(this[t+a]=255&e;0<=--a&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+i},g.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||v(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},g.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||v(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},g.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||v(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},g.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||v(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},g.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||v(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},g.prototype.writeFloatLE=function(e,t,i){return w(this,e,t,!0,i)},g.prototype.writeFloatBE=function(e,t,i){return w(this,e,t,!1,i)},g.prototype.writeDoubleLE=function(e,t,i){return x(this,e,t,!0,i)},g.prototype.writeDoubleBE=function(e,t,i){return x(this,e,t,!1,i)},g.prototype.copy=function(e,t,i,n){if(!g.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i=i||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),t=t||0,0<n&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var r=n-i;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,i,n);else if(this===e&&i<t&&t<n)for(var a=r-1;0<=a;--a)e[a+t]=this[a+i];else Uint8Array.prototype.set.call(e,this.subarray(i,n),t);return r},g.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!g.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var r;1===e.length&&(r=e.charCodeAt(0),("utf8"===n&&r<128||"latin1"===n)&&(e=r))}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var a;if(t>>>=0,i=void 0===i?this.length:i>>>0,"number"==typeof(e=e||0))for(a=t;a<i;++a)this[a]=e;else{var o=g.isBuffer(e)?e:g.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<i-t;++a)this[a+t]=o[a%s]}return this};var E=/[^+/0-9A-Za-z-_]/g;function k(e,t){var i;t=t||1/0;for(var n=e.length,r=null,a=[],o=0;o<n;++o){if(55295<(i=e.charCodeAt(o))&&i<57344){if(!r){if(56319<i){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===n){-1<(t-=3)&&a.push(239,191,189);continue}r=i;continue}if(i<56320){-1<(t-=3)&&a.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&-1<(t-=3)&&a.push(239,191,189);if(r=null,i<128){if(--t<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function T(e){return base64Js.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function P(e,t,i,n){for(var r=0;r<n&&!(r+i>=t.length||r>=e.length);++r)t[r+i]=e[r];return r}function R(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function _(e){return e!=e}var F=function(){for(var e="0123456789abcdef",t=new Array(256),i=0;i<16;++i)for(var n=16*i,r=0;r<16;++r)t[n+r]=e[i]+e[r];return t}()}),buffer_1=buffer.Buffer,buffer_2=buffer.SlowBuffer,buffer_3=buffer.INSPECT_MAX_BYTES,buffer_4=buffer.kMaxLength,navigator$1={userAgent:!1},window$1={},YAHOO;void 0===YAHOO&&(YAHOO={}),YAHOO.lang={extend:function(e,t,i){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");function n(){}if(n.prototype=t.prototype,e.prototype=new n,(e.prototype.constructor=e).superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),i){for(var r in i)e.prototype[r]=i[r];var a=function(){},o=["toString","valueOf"];try{/MSIE/.test(navigator$1.userAgent)&&(a=function(e,t){for(r=0;r<o.length;r+=1){var i=o[r],n=t[i];"function"==typeof n&&n!=Object.prototype[i]&&(e[i]=n)}})}catch(e){}a(e.prototype,i)}}};var CryptoJS=CryptoJS||(vja=Math,xja={},yja=xja.lib={},zja=yja.Base={extend:function(e){Ija.prototype=this;var t=new Ija;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},Aja=yja.WordArray=zja.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||Cja).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes,r=e.sigBytes;if(this.clamp(),n%4)for(var a=0;a<r;a++){var o=i[a>>>2]>>>24-a%4*8&255;t[n+a>>>2]|=o<<24-(n+a)%4*8}else for(a=0;a<r;a+=4)t[n+a>>>2]=i[a>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=vja.ceil(t/4)},clone:function(){var e=zja.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],i=0;i<e;i+=4)t.push(4294967296*vja.random()|0);return new Aja.init(t,e)}}),Bja=xja.enc={},Cja=Bja.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new Aja.init(i,t/2)}},Dja=Bja.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],r=0;r<i;r++){var a=t[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new Aja.init(i,t)}},Eja=Bja.Utf8={stringify:function(e){try{return decodeURIComponent(escape(Dja.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return Dja.parse(unescape(encodeURIComponent(e)))}},Fja=yja.BufferedBlockAlgorithm=zja.extend({reset:function(){this._data=new Aja.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=Eja.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,i=t.words,n=t.sigBytes,r=this.blockSize,a=n/(4*r),o=(a=e?vja.ceil(a):vja.max((0|a)-this._minBufferSize,0))*r,s=vja.min(4*o,n);if(o){for(var c=0;c<o;c+=r)this._doProcessBlock(i,c);var l=i.splice(0,o);t.sigBytes-=s}return new Aja.init(l,s)},clone:function(){var e=zja.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),yja.Hasher=Fja.extend({cfg:zja.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){Fja.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(e,t){return new i.init(t).finalize(e)}},_createHmacHelper:function(i){return function(e,t){return new Hja.HMAC.init(i,t).finalize(e)}}}),Hja=xja.algo={},xja),vja,xja,yja,zja,Aja,Bja,Cja,Dja,Eja,Fja,Hja,Xka,Yka,Zka,$ka,_na,boa,aoa,coa,doa,eoa,foa,goa,hoa,ioa,Ooa,qqa,sqa,tqa,uqa,rqa,qra,rra,tra,sra,Ksa,Msa,Nsa,Osa,Lsa,Qsa,Ssa,Tsa,Rsa,Usa,Vsa,Wsa,Xsa,Ysa,Zsa,zta,Nta,Ota,Pta,Qta,Rta,Sta;function Ija(){}function Zna(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function $na(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}Xka=CryptoJS,Yka=Xka.lib,Zka=Yka.Base,$ka=Yka.WordArray,(Xka=Xka.x64={}).Word=Zka.extend({init:function(e,t){this.high=e,this.low=t}}),Xka.WordArray=Zka.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],n=0;n<t;n++){var r=e[n];i.push(r.high),i.push(r.low)}return $ka.create(i,this.sigBytes)},clone:function(){for(var e=Zka.clone.call(this),t=e.words=this.words.slice(0),i=t.length,n=0;n<i;n++)t[n]=t[n].clone();return e}}),CryptoJS.lib.Cipher||function(){var e=(d=CryptoJS).lib,t=e.Base,o=e.WordArray,i=e.BufferedBlockAlgorithm,n=d.enc.Base64,r=d.algo.EvpKDF,a=e.Cipher=i.extend({cfg:t.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(e,t,i){return("string"==typeof t?h:g).encrypt(n,e,t,i)},decrypt:function(e,t,i){return("string"==typeof t?h:g).decrypt(n,e,t,i)}}}});e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});function s(e,t,i){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var r=0;r<i;r++)e[t+r]^=n[r]}var c=d.mode={},l=(e.BlockCipherMode=t.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;s.call(this,e,t,n),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),l.Decryptor=l.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,r=e.slice(t,t+n);i.decryptBlock(e,t),s.call(this,e,t,n),this._prevBlock=r}}),c=c.CBC=l,l=(d.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,n=(i=i-e.sigBytes%i)<<24|i<<16|i<<8|i,r=[],a=0;a<i;a+=4)r.push(n);i=o.create(r,i),e.concat(i)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:c,padding:l}),reset:function(){a.reset.call(this);var e,t=(i=this.cfg).iv,i=i.mode;this._xformMode==this._ENC_XFORM_MODE?e=i.createEncryptor:(e=i.createDecryptor,this._minBufferSize=1),this._mode=e.call(i,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var u=e.CipherParams=t.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),c=(d.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(n)},parse:function(e){var t,i=(e=n.parse(e)).words;return 1398893684==i[0]&&1701076831==i[1]&&(t=o.create(i.slice(2,4)),i.splice(0,4),e.sigBytes-=16),u.create({ciphertext:e,salt:t})}},g=e.SerializableCipher=t.extend({cfg:t.extend({format:c}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var r=e.createEncryptor(i,n);return t=r.finalize(t),r=r.cfg,u.create({ciphertext:t,key:i,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),d=(d.kdf={}).OpenSSL={execute:function(e,t,i,n){return n=n||o.random(8),e=r.create({keySize:t+i}).compute(e,n),i=o.create(e.words.slice(t),4*i),e.sigBytes=4*t,u.create({key:e,iv:i,salt:n})}},h=e.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:d}),encrypt:function(e,t,i,n){return i=(n=this.cfg.extend(n)).kdf.execute(i,e.keySize,e.ivSize),n.iv=i.iv,(e=g.encrypt.call(this,e,t,i.key,n)).mixIn(i),e},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),i=n.kdf.execute(i,e.keySize,e.ivSize,t.salt),n.iv=i.iv,g.decrypt.call(this,e,t,i.key,n)}})}(),function(){for(var e=CryptoJS,t=e.lib.BlockCipher,i=e.algo,o=[],n=[],r=[],a=[],s=[],c=[],l=[],u=[],g=[],d=[],h=[],p=0;p<256;p++)h[p]=p<128?p<<1:p<<1^283;for(var f=0,I=0,p=0;p<256;p++){var b=(b=I^I<<1^I<<2^I<<3^I<<4)>>>8^255&b^99;o[f]=b;var m=h[n[b]=f],y=h[m],C=h[y],A=257*h[b]^16843008*b;r[f]=A<<24|A>>>8,a[f]=A<<16|A>>>16,s[f]=A<<8|A>>>24,c[f]=A,A=16843009*C^65537*y^257*m^16843008*f,l[b]=A<<24|A>>>8,u[b]=A<<16|A>>>16,g[b]=A<<8|A>>>24,d[b]=A,f?(f=m^h[h[h[C^m]]],I^=h[h[I]]):f=I=1}var v=[0,1,2,4,8,16,32,64,128,27,54],i=i.AES=t.extend({_doReset:function(){for(var e,t=(n=this._key).words,i=n.sigBytes/4,n=4*((this._nRounds=i+6)+1),r=this._keySchedule=[],a=0;a<n;a++){a<i?r[a]=t[a]:(e=r[a-1],a%i?6<i&&4==a%i&&(e=o[e>>>24]<<24|o[e>>>16&255]<<16|o[e>>>8&255]<<8|o[255&e]):(e=o[(e=e<<8|e>>>24)>>>24]<<24|o[e>>>16&255]<<16|o[e>>>8&255]<<8|o[255&e],e^=v[a/i|0]<<24),r[a]=r[a-i]^e)}for(t=this._invKeySchedule=[],i=0;i<n;i++)a=n-i,e=i%4?r[a]:r[a-4],t[i]=i<4||a<=4?e:l[o[e>>>24]]^u[o[e>>>16&255]]^g[o[e>>>8&255]]^d[o[255&e]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,a,s,c,o)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,l,u,g,d,n),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,r,a,o,s){for(var c=this._nRounds,l=e[t]^i[0],u=e[t+1]^i[1],g=e[t+2]^i[2],d=e[t+3]^i[3],h=4,p=1;p<c;p++)var f=n[l>>>24]^r[u>>>16&255]^a[g>>>8&255]^o[255&d]^i[h++],I=n[u>>>24]^r[g>>>16&255]^a[d>>>8&255]^o[255&l]^i[h++],b=n[g>>>24]^r[d>>>16&255]^a[l>>>8&255]^o[255&u]^i[h++],d=n[d>>>24]^r[l>>>16&255]^a[u>>>8&255]^o[255&g]^i[h++],l=f,u=I,g=b;f=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[g>>>8&255]<<8|s[255&d])^i[h++],I=(s[u>>>24]<<24|s[g>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^i[h++],b=(s[g>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^i[h++],d=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&g])^i[h++],e[t]=f,e[t+1]=I,e[t+2]=b,e[t+3]=d},keySize:8});e.AES=t._createHelper(i)}(),_na=CryptoJS,boa=(aoa=_na.lib).WordArray,aoa=aoa.BlockCipher,coa=_na.algo,doa=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],eoa=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],foa=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],goa=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],hoa=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],ioa=coa.DES=aoa.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;i<56;i++){var n=doa[i]-1;t[i]=e[n>>>5]>>>31-n%32&1}for(e=this._subKeys=[],n=0;n<16;n++){for(var r=e[n]=[],a=foa[n],i=0;i<24;i++)r[i/6|0]|=t[(eoa[i]-1+a)%28]<<31-i%6,r[4+(i/6|0)]|=t[28+(eoa[i+24]-1+a)%28]<<31-i%6;for(r[0]=r[0]<<1|r[0]>>>31,i=1;i<7;i++)r[i]>>>=4*(i-1)+3;r[7]=r[7]<<5|r[7]>>>27}for(t=this._invSubKeys=[],i=0;i<16;i++)t[i]=e[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,i){this._lBlock=e[t],this._rBlock=e[t+1],Zna.call(this,4,252645135),Zna.call(this,16,65535),$na.call(this,2,858993459),$na.call(this,8,16711935),Zna.call(this,1,1431655765);for(var n=0;n<16;n++){for(var r=i[n],a=this._lBlock,o=this._rBlock,s=0,c=0;c<8;c++)s|=goa[c][((o^r[c])&hoa[c])>>>0];this._lBlock=o,this._rBlock=a^s}i=this._lBlock,this._lBlock=this._rBlock,this._rBlock=i,Zna.call(this,1,1431655765),$na.call(this,8,16711935),$na.call(this,2,858993459),Zna.call(this,16,65535),Zna.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2}),_na.DES=aoa._createHelper(ioa),coa=coa.TripleDES=aoa.extend({_doReset:function(){var e=this._key.words;this._des1=ioa.createEncryptor(boa.create(e.slice(0,2))),this._des2=ioa.createEncryptor(boa.create(e.slice(2,4))),this._des3=ioa.createEncryptor(boa.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),_na.TripleDES=aoa._createHelper(coa),Ooa=CryptoJS.lib.WordArray,CryptoJS.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp(),e=[];for(var r=0;r<i;r+=3)for(var a=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;o<4&&r+.75*o<i;o++)e.push(n.charAt(a>>>6*(3-o)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,i=this._map;!(a=i.charAt(64))||-1!=(a=e.indexOf(a))&&(t=a);for(var n,r,a=[],o=0,s=0;s<t;s++){s%4&&(n=i.indexOf(e.charAt(s-1))<<s%4*2,r=i.indexOf(e.charAt(s))>>>6-s%4*2,a[o>>>2]|=(n|r)<<24-o%4*8,o++)}return Ooa.create(a,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(a){function S(e,t,i,n,r,a,o){return((e=e+(t&i|~t&n)+r+o)<<a|e>>>32-a)+t}function w(e,t,i,n,r,a,o){return((e=e+(t&n|i&~n)+r+o)<<a|e>>>32-a)+t}function x(e,t,i,n,r,a,o){return((e=e+(t^i^n)+r+o)<<a|e>>>32-a)+t}function E(e,t,i,n,r,a,o){return((e=e+(i^(t|~n))+r+o)<<a|e>>>32-a)+t}for(var e=CryptoJS,t=(n=e.lib).WordArray,i=n.Hasher,n=e.algo,k=[],r=0;r<64;r++)k[r]=4294967296*a.abs(a.sin(r+1))|0;n=n.MD5=i.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var n=e[r=t+i];e[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var i=this._hash.words,r=e[t+0],n=e[t+1],a=e[t+2],o=e[t+3],s=e[t+4],c=e[t+5],l=e[t+6],u=e[t+7],g=e[t+8],d=e[t+9],h=e[t+10],p=e[t+11],f=e[t+12],I=e[t+13],b=e[t+14],m=e[t+15],y=S(y=i[0],v=i[1],A=i[2],C=i[3],r,7,k[0]),C=S(C,y,v,A,n,12,k[1]),A=S(A,C,y,v,a,17,k[2]),v=S(v,A,C,y,o,22,k[3]),y=S(y,v,A,C,s,7,k[4]),C=S(C,y,v,A,c,12,k[5]),A=S(A,C,y,v,l,17,k[6]),v=S(v,A,C,y,u,22,k[7]),y=S(y,v,A,C,g,7,k[8]),C=S(C,y,v,A,d,12,k[9]),A=S(A,C,y,v,h,17,k[10]),v=S(v,A,C,y,p,22,k[11]),y=S(y,v,A,C,f,7,k[12]),C=S(C,y,v,A,I,12,k[13]),A=S(A,C,y,v,b,17,k[14]),y=w(y,v=S(v,A,C,y,m,22,k[15]),A,C,n,5,k[16]),C=w(C,y,v,A,l,9,k[17]),A=w(A,C,y,v,p,14,k[18]),v=w(v,A,C,y,r,20,k[19]),y=w(y,v,A,C,c,5,k[20]),C=w(C,y,v,A,h,9,k[21]),A=w(A,C,y,v,m,14,k[22]),v=w(v,A,C,y,s,20,k[23]),y=w(y,v,A,C,d,5,k[24]),C=w(C,y,v,A,b,9,k[25]),A=w(A,C,y,v,o,14,k[26]),v=w(v,A,C,y,g,20,k[27]),y=w(y,v,A,C,I,5,k[28]),C=w(C,y,v,A,a,9,k[29]),A=w(A,C,y,v,u,14,k[30]),y=x(y,v=w(v,A,C,y,f,20,k[31]),A,C,c,4,k[32]),C=x(C,y,v,A,g,11,k[33]),A=x(A,C,y,v,p,16,k[34]),v=x(v,A,C,y,b,23,k[35]),y=x(y,v,A,C,n,4,k[36]),C=x(C,y,v,A,s,11,k[37]),A=x(A,C,y,v,u,16,k[38]),v=x(v,A,C,y,h,23,k[39]),y=x(y,v,A,C,I,4,k[40]),C=x(C,y,v,A,r,11,k[41]),A=x(A,C,y,v,o,16,k[42]),v=x(v,A,C,y,l,23,k[43]),y=x(y,v,A,C,d,4,k[44]),C=x(C,y,v,A,f,11,k[45]),A=x(A,C,y,v,m,16,k[46]),y=E(y,v=x(v,A,C,y,a,23,k[47]),A,C,r,6,k[48]),C=E(C,y,v,A,u,10,k[49]),A=E(A,C,y,v,b,15,k[50]),v=E(v,A,C,y,c,21,k[51]),y=E(y,v,A,C,f,6,k[52]),C=E(C,y,v,A,o,10,k[53]),A=E(A,C,y,v,h,15,k[54]),v=E(v,A,C,y,n,21,k[55]),y=E(y,v,A,C,g,6,k[56]),C=E(C,y,v,A,m,10,k[57]),A=E(A,C,y,v,l,15,k[58]),v=E(v,A,C,y,I,21,k[59]),y=E(y,v,A,C,s,6,k[60]),C=E(C,y,v,A,p,10,k[61]),A=E(A,C,y,v,a,15,k[62]),v=E(v,A,C,y,d,21,k[63]);i[0]=i[0]+y|0,i[1]=i[1]+v|0,i[2]=i[2]+A|0,i[3]=i[3]+C|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;var r=a.floor(i/4294967296);for(t[15+(64+n>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t[14+(64+n>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,i=0;i<4;i++)n=t[i],t[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return e},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),e.MD5=i._createHelper(n),e.HmacMD5=i._createHmacHelper(n)}(Math),qqa=CryptoJS,sqa=(rqa=qqa.lib).WordArray,tqa=rqa.Hasher,uqa=[],rqa=qqa.algo.SHA1=tqa.extend({_doReset:function(){this._hash=new sqa.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i,n=this._hash.words,r=n[0],a=n[1],o=n[2],s=n[3],c=n[4],l=0;l<80;l++){l<16?uqa[l]=0|e[t+l]:(i=uqa[l-3]^uqa[l-8]^uqa[l-14]^uqa[l-16],uqa[l]=i<<1|i>>>31),i=(r<<5|r>>>27)+c+uqa[l],i=l<20?i+(1518500249+(a&o|~a&s)):l<40?i+(1859775393+(a^o^s)):l<60?i+((a&o|a&s|o&s)-1894007588):i+((a^o^s)-899497514),c=s,s=o,o=a<<30|a>>>2,a=r,r=i}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(64+n>>>9<<4)]=Math.floor(i/4294967296),t[15+(64+n>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=tqa.clone.call(this);return e._hash=this._hash.clone(),e}}),qqa.SHA1=tqa._createHelper(rqa),qqa.HmacSHA1=tqa._createHmacHelper(rqa),function(r){function e(e){return 4294967296*(e-(0|e))|0}for(var t,i=CryptoJS,n=(o=i.lib).WordArray,a=o.Hasher,o=i.algo,s=[],p=[],c=2,l=0;l<64;){e:{t=c;for(var u=r.sqrt(t),g=2;g<=u;g++)if(!(t%g)){t=!1;break e}t=!0}t&&(l<8&&(s[l]=e(r.pow(c,.5))),p[l]=e(r.pow(c,1/3)),l++),c++}var f=[],o=o.SHA256=a.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var i,n,r=this._hash.words,a=r[0],o=r[1],s=r[2],c=r[3],l=r[4],u=r[5],g=r[6],d=r[7],h=0;h<64;h++){h<16?f[h]=0|e[t+h]:(i=f[h-15],n=f[h-2],f[h]=((i<<25|i>>>7)^(i<<14|i>>>18)^i>>>3)+f[h-7]+((n<<15|n>>>17)^(n<<13|n>>>19)^n>>>10)+f[h-16]),i=d+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&u^~l&g)+p[h]+f[h],n=((a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22))+(a&o^a&s^o&s),d=g,g=u,u=l,l=c+i|0,c=s,s=o,o=a,a=i+n|0}r[0]=r[0]+a|0,r[1]=r[1]+o|0,r[2]=r[2]+s|0,r[3]=r[3]+c|0,r[4]=r[4]+l|0,r[5]=r[5]+u|0,r[6]=r[6]+g|0,r[7]=r[7]+d|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(64+n>>>9<<4)]=r.floor(i/4294967296),t[15+(64+n>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});i.SHA256=a._createHelper(o),i.HmacSHA256=a._createHmacHelper(o)}(Math),qra=CryptoJS,rra=qra.lib.WordArray,tra=(sra=qra.algo).SHA256,sra=sra.SHA224=tra.extend({_doReset:function(){this._hash=new rra.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=tra._doFinalize.call(this);return e.sigBytes-=4,e}}),qra.SHA224=tra._createHelper(sra),qra.HmacSHA224=tra._createHmacHelper(sra),function(){function e(){return n.create.apply(n,arguments)}for(var t=CryptoJS,i=t.lib.Hasher,n=(a=t.x64).Word,r=a.WordArray,a=t.algo,te=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],ie=[],o=0;o<80;o++)ie[o]=e();a=a.SHA512=i.extend({_doReset:function(){this._hash=new r.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=(l=this._hash.words)[0],n=l[1],r=l[2],a=l[3],o=l[4],s=l[5],c=l[6],l=l[7],u=i.high,g=i.low,d=n.high,h=n.low,p=r.high,f=r.low,I=a.high,b=a.low,m=o.high,y=o.low,C=s.high,A=s.low,v=c.high,S=c.low,w=l.high,x=l.low,E=u,k=g,T=d,P=h,R=p,_=f,F=I,N=b,B=m,D=y,U=C,J=A,W=v,O=S,j=w,H=x,V=0;V<80;V++){var L,M=ie[V];V<16?(L=M.high=0|e[t+2*V],Z=M.low=0|e[t+2*V+1]):(L=((Z=(L=ie[V-15]).high)>>>1|(z=L.low)<<31)^(Z>>>8|z<<24)^Z>>>7,z=(z>>>1|Z<<31)^(z>>>8|Z<<24)^(z>>>7|Z<<25),q=((Z=(q=ie[V-2]).high)>>>19|(G=q.low)<<13)^(Z<<3|G>>>29)^Z>>>6,G=(G>>>19|Z<<13)^(G<<3|Z>>>29)^(G>>>6|Z<<26),K=(Z=ie[V-7]).high,ee=(Y=ie[V-16]).high,Y=Y.low,L=(L=(L=L+K+((Z=z+Z.low)>>>0<z>>>0?1:0))+q+((Z=Z+G)>>>0<G>>>0?1:0))+ee+((Z=Z+Y)>>>0<Y>>>0?1:0),M.high=L,M.low=Z);var G,Z,K=B&U^~B&W,Y=D&J^~D&O,M=E&T^E&R^T&R,X=k&P^k&_^P&_,z=(E>>>28|k<<4)^(E<<30|k>>>2)^(E<<25|k>>>7),q=(k>>>28|E<<4)^(k<<30|E>>>2)^(k<<25|E>>>7),$=(G=te[V]).high,Q=G.low,ee=j+((B>>>14|D<<18)^(B>>>18|D<<14)^(B<<23|D>>>9))+((G=H+((D>>>14|B<<18)^(D>>>18|B<<14)^(D<<23|B>>>9)))>>>0<H>>>0?1:0),j=W,H=O,W=U,O=J,U=B,J=D,B=F+(ee=(ee=(ee=ee+K+((G=G+Y)>>>0<Y>>>0?1:0))+$+((G=G+Q)>>>0<Q>>>0?1:0))+L+((G=G+Z)>>>0<Z>>>0?1:0))+((D=N+G|0)>>>0<N>>>0?1:0)|0,F=R,N=_,R=T,_=P,T=E,P=k,E=ee+(M=z+M+((Z=q+X)>>>0<q>>>0?1:0))+((k=G+Z|0)>>>0<G>>>0?1:0)|0}g=i.low=g+k,i.high=u+E+(g>>>0<k>>>0?1:0),h=n.low=h+P,n.high=d+T+(h>>>0<P>>>0?1:0),f=r.low=f+_,r.high=p+R+(f>>>0<_>>>0?1:0),b=a.low=b+N,a.high=I+F+(b>>>0<N>>>0?1:0),y=o.low=y+D,o.high=m+B+(y>>>0<D>>>0?1:0),A=s.low=A+J,s.high=C+U+(A>>>0<J>>>0?1:0),S=c.low=S+O,c.high=v+W+(S>>>0<O>>>0?1:0),x=l.low=x+H,l.high=w+j+(x>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(128+n>>>10<<5)]=Math.floor(i/4294967296),t[31+(128+n>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=i._createHelper(a),t.HmacSHA512=i._createHmacHelper(a)}(),Ksa=CryptoJS,Msa=(Lsa=Ksa.x64).Word,Nsa=Lsa.WordArray,Osa=(Lsa=Ksa.algo).SHA512,Lsa=Lsa.SHA384=Osa.extend({_doReset:function(){this._hash=new Nsa.init([new Msa.init(3418070365,3238371032),new Msa.init(1654270250,914150663),new Msa.init(2438529370,812702999),new Msa.init(355462360,4144912697),new Msa.init(1731405415,4290775857),new Msa.init(2394180231,1750603025),new Msa.init(3675008525,1694076839),new Msa.init(1203062813,3204075428)])},_doFinalize:function(){var e=Osa._doFinalize.call(this);return e.sigBytes-=16,e}}),Ksa.SHA384=Osa._createHelper(Lsa),Ksa.HmacSHA384=Osa._createHmacHelper(Lsa),Math,Qsa=CryptoJS,Ssa=(Rsa=Qsa.lib).WordArray,Tsa=Rsa.Hasher,Rsa=Qsa.algo,Usa=Ssa.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),Vsa=Ssa.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),Wsa=Ssa.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),Xsa=Ssa.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),Ysa=Ssa.create([0,1518500249,1859775393,2400959708,2840853838]),Zsa=Ssa.create([1352829926,1548603684,1836072691,2053994217,0]),Rsa=Rsa.RIPEMD160=Tsa.extend({_doReset:function(){this._hash=Ssa.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var n=e[u=t+i];e[u]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}for(var r,a,o,s,c,l,u=this._hash.words,n=Ysa.words,g=Zsa.words,d=Usa.words,h=Vsa.words,p=Wsa.words,f=Xsa.words,I=r=u[0],b=a=u[1],m=o=u[2],y=s=u[3],C=c=u[4],i=0;i<80;i+=1)l=r+e[t+d[i]]|0,l=i<16?l+((a^o^s)+n[0]):i<32?l+((a&o|~a&s)+n[1]):i<48?l+(((a|~o)^s)+n[2]):i<64?l+((a&s|o&~s)+n[3]):l+((a^(o|~s))+n[4]),l=(l=(l|=0)<<p[i]|l>>>32-p[i])+c|0,r=c,c=s,s=o<<10|o>>>22,o=a,a=l,l=I+e[t+h[i]]|0,l=i<16?l+((b^(m|~y))+g[0]):i<32?l+((b&y|m&~y)+g[1]):i<48?l+(((b|~m)^y)+g[2]):i<64?l+((b&m|~b&y)+g[3]):l+((b^m^y)+g[4]),l=(l=(l|=0)<<f[i]|l>>>32-f[i])+C|0,I=C,C=y,y=m<<10|m>>>22,m=b,b=l;l=u[1]+o+y|0,u[1]=u[2]+s+C|0,u[2]=u[3]+c+I|0,u[3]=u[4]+r+b|0,u[4]=u[0]+a+m|0,u[0]=l},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;for(t[n>>>5]|=128<<24-n%32,t[14+(64+n>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,i=0;i<5;i++)n=t[i],t[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return e},clone:function(){var e=Tsa.clone.call(this);return e._hash=this._hash.clone(),e}}),Qsa.RIPEMD160=Tsa._createHelper(Rsa),Qsa.HmacRIPEMD160=Tsa._createHmacHelper(Rsa),zta=CryptoJS.enc.Utf8,CryptoJS.algo.HMAC=CryptoJS.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=zta.parse(t));var i=e.blockSize,n=4*i;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),a=this._iKey=t.clone(),o=r.words,s=a.words,c=0;c<i;c++)o[c]^=1549556828,s[c]^=909522486;r.sigBytes=a.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),Nta=CryptoJS,Ota=Nta.lib,Pta=Ota.Base,Qta=Ota.WordArray,Rta=(Ota=Nta.algo).HMAC,Sta=Ota.PBKDF2=Pta.extend({cfg:Pta.extend({keySize:4,hasher:Ota.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,n=Rta.create(i.hasher,e),r=Qta.create(),a=Qta.create([1]),o=r.words,s=a.words,c=i.keySize,i=i.iterations;o.length<c;){var l=n.update(t).finalize(a);n.reset();for(var u=l.words,g=u.length,d=l,h=1;h<i;h++){d=n.finalize(d),n.reset();for(var p=d.words,f=0;f<g;f++)u[f]^=p[f]}r.concat(l),s[0]++}return r.sigBytes=4*c,r}}),Nta.PBKDF2=function(e,t,i){return Sta.create(i).compute(e,t)};var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64pad$1="=",dbits;function hex2b64(e){for(var t,i="",n=0;n+3<=e.length;n+=3)t=parseInt(e.substring(n,n+3),16),i+=b64map.charAt(t>>6)+b64map.charAt(63&t);if(n+1==e.length?(t=parseInt(e.substring(n,n+1),16),i+=b64map.charAt(t<<2)):n+2==e.length&&(t=parseInt(e.substring(n,n+2),16),i+=b64map.charAt(t>>2)+b64map.charAt((3&t)<<4)),b64pad$1)for(;0<(3&i.length);)i+=b64pad$1;return i}function b64tohex(e){for(var t,i,n="",r=0,a=0;a<e.length&&e.charAt(a)!=b64pad$1;++a)(i=b64map.indexOf(e.charAt(a)))<0||(r=0==r?(n+=int2char(i>>2),t=3&i,1):1==r?(n+=int2char(t<<2|i>>4),t=15&i,2):2==r?(n+=int2char(t),n+=int2char(i>>2),t=3&i,3):(n+=int2char(t<<2|i>>4),n+=int2char(15&i),0));return 1==r&&(n+=int2char(t<<2)),n}function b64toBA(e){for(var t=b64tohex(e),i=new Array,n=0;2*n<t.length;++n)i[n]=parseInt(t.substring(2*n,2*n+2),16);return i}var canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);function BigInteger(e,t,i){null!=e&&("number"==typeof e?this.fromNumber(e,t,i):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function nbi(){return new BigInteger(null)}function am1(e,t,i,n,r,a){for(;0<=--a;){var o=t*this[e++]+i[n]+r;r=Math.floor(o/67108864),i[n++]=67108863&o}return r}function am2(e,t,i,n,r,a){for(var o=32767&t,s=t>>15;0<=--a;){var c=32767&this[e],l=this[e++]>>15,u=s*c+l*o;r=((c=o*c+((32767&u)<<15)+i[n]+(1073741823&r))>>>30)+(u>>>15)+s*l+(r>>>30),i[n++]=1073741823&c}return r}function am3(e,t,i,n,r,a){for(var o=16383&t,s=t>>14;0<=--a;){var c=16383&this[e],l=this[e++]>>14,u=s*c+l*o;r=((c=o*c+((16383&u)<<14)+i[n]+r)>>28)+(u>>14)+s*l,i[n++]=268435455&c}return r}dbits=j_lm&&"Microsoft Internet Explorer"==navigator$1.appName?(BigInteger.prototype.am=am2,30):j_lm&&"Netscape"!=navigator$1.appName?(BigInteger.prototype.am=am1,26):(BigInteger.prototype.am=am3,28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;for(var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv,rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(e){return BI_RM.charAt(e)}function intAt(e,t){var i=BI_RC[e.charCodeAt(t)];return null==i?-1:i}function bnpCopyTo(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function nbv(e){var t=nbi();return t.fromInt(e),t}function bnpFromString(e,t){var i;if(16==t)i=4;else if(8==t)i=3;else if(256==t)i=8;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return void this.fromRadix(e,t);i=2}this.t=0,this.s=0;for(var n=e.length,r=!1,a=0;0<=--n;){var o=8==i?255&e[n]:intAt(e,n);o<0?"-"==e.charAt(n)&&(r=!0):(r=!1,0==a?this[this.t++]=o:a+i>this.DB?(this[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this[this.t++]=o>>this.DB-a):this[this.t-1]|=o<<a,(a+=i)>=this.DB&&(a-=this.DB))}8==i&&0!=(128&e[0])&&(this.s=-1,0<a&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),r&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t}function bnToString(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var i,n=(1<<t)-1,r=!1,a="",o=this.t,s=this.DB-o*this.DB%t;if(0<o--)for(s<this.DB&&0<(i=this[o]>>s)&&(r=!0,a=int2char(i));0<=o;)s<t?(i=(this[o]&(1<<s)-1)<<t-s,i|=this[--o]>>(s+=this.DB-t)):(i=this[o]>>(s-=t)&n,s<=0&&(s+=this.DB,--o)),0<i&&(r=!0),r&&(a+=int2char(i));return r?a:"0"}function bnNegate(){var e=nbi();return BigInteger.ZERO.subTo(this,e),e}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(e){var t=this.s-e.s;if(0!=t)return t;var i=this.t;if(0!=(t=i-e.t))return this.s<0?-t:t;for(;0<=--i;)if(0!=(t=this[i]-e[i]))return t;return 0}function nbits(e){var t,i=1;return 0!=(t=e>>>16)&&(e=t,i+=16),0!=(t=e>>8)&&(e=t,i+=8),0!=(t=e>>4)&&(e=t,i+=4),0!=(t=e>>2)&&(e=t,i+=2),0!=(t=e>>1)&&(e=t,i+=1),i}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(e,t){for(var i=this.t-1;0<=i;--i)t[i+e]=this[i];for(i=e-1;0<=i;--i)t[i]=0;t.t=this.t+e,t.s=this.s}function bnpDRShiftTo(e,t){for(var i=e;i<this.t;++i)t[i-e]=this[i];t.t=Math.max(this.t-e,0),t.s=this.s}function bnpLShiftTo(e,t){for(var i=e%this.DB,n=this.DB-i,r=(1<<n)-1,a=Math.floor(e/this.DB),o=this.s<<i&this.DM,s=this.t-1;0<=s;--s)t[s+a+1]=this[s]>>n|o,o=(this[s]&r)<<i;for(s=a-1;0<=s;--s)t[s]=0;t[a]=o,t.t=this.t+a+1,t.s=this.s,t.clamp()}function bnpRShiftTo(e,t){t.s=this.s;var i=Math.floor(e/this.DB);if(i>=this.t)t.t=0;else{var n=e%this.DB,r=this.DB-n,a=(1<<n)-1;t[0]=this[i]>>n;for(var o=i+1;o<this.t;++o)t[o-i-1]|=(this[o]&a)<<r,t[o-i]=this[o]>>n;0<n&&(t[this.t-i-1]|=(this.s&a)<<r),t.t=this.t-i,t.clamp()}}function bnpSubTo(e,t){for(var i=0,n=0,r=Math.min(e.t,this.t);i<r;)n+=this[i]-e[i],t[i++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;i<this.t;)n+=this[i],t[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<e.t;)n-=e[i],t[i++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[i++]=this.DV+n:0<n&&(t[i++]=n),t.t=i,t.clamp()}function bnpMultiplyTo(e,t){var i=this.abs(),n=e.abs(),r=i.t;for(t.t=r+n.t;0<=--r;)t[r]=0;for(r=0;r<n.t;++r)t[r+i.t]=i.am(0,n[r],t,r,0,i.t);t.s=0,t.clamp(),this.s!=e.s&&BigInteger.ZERO.subTo(t,t)}function bnpSquareTo(e){for(var t=this.abs(),i=e.t=2*t.t;0<=--i;)e[i]=0;for(i=0;i<t.t-1;++i){var n=t.am(i,t[i],e,2*i,0,1);(e[i+t.t]+=t.am(i+1,2*t[i],e,2*i+1,n,t.t-i-1))>=t.DV&&(e[i+t.t]-=t.DV,e[i+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(i,t[i],e,2*i,0,1)),e.s=0,e.clamp()}function bnpDivRemTo(e,t,i){var n=e.abs();if(!(n.t<=0)){var r=this.abs();if(r.t<n.t)return null!=t&&t.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=nbi());var a=nbi(),o=this.s,s=e.s,c=this.DB-nbits(n[n.t-1]);0<c?(n.lShiftTo(c,a),r.lShiftTo(c,i)):(n.copyTo(a),r.copyTo(i));var l=a.t,u=a[l-1];if(0!=u){var g=u*(1<<this.F1)+(1<l?a[l-2]>>this.F2:0),d=this.FV/g,h=(1<<this.F1)/g,p=1<<this.F2,f=i.t,I=f-l,b=null==t?nbi():t;for(a.dlShiftTo(I,b),0<=i.compareTo(b)&&(i[i.t++]=1,i.subTo(b,i)),BigInteger.ONE.dlShiftTo(l,b),b.subTo(a,a);a.t<l;)a[a.t++]=0;for(;0<=--I;){var m=i[--f]==u?this.DM:Math.floor(i[f]*d+(i[f-1]+p)*h);if((i[f]+=a.am(0,m,i,I,0,l))<m)for(a.dlShiftTo(I,b),i.subTo(b,i);i[f]<--m;)i.subTo(b,i)}null!=t&&(i.drShiftTo(l,t),o!=s&&BigInteger.ZERO.subTo(t,t)),i.t=l,i.clamp(),0<c&&i.rShiftTo(c,i),o<0&&BigInteger.ZERO.subTo(i,i)}}}function bnMod(e){var t=nbi();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(BigInteger.ZERO)&&e.subTo(t,t),t}function Classic(e){this.m=e}function cConvert(e){return e.s<0||0<=e.compareTo(this.m)?e.mod(this.m):e}function cRevert(e){return e}function cReduce(e){e.divRemTo(this.m,null,e)}function cMulTo(e,t,i){e.multiplyTo(t,i),this.reduce(i)}function cSqrTo(e,t){e.squareTo(t),this.reduce(t)}function bnpInvDigit(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t}function Montgomery(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function montConvert(e){var t=nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(BigInteger.ZERO)&&this.m.subTo(t,t),t}function montRevert(e){var t=nbi();return e.copyTo(t),this.reduce(t),t}function montReduce(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var i=32767&e[t],n=i*this.mpl+((i*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[i=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[i]>=e.DV;)e[i]-=e.DV,e[++i]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)}function montSqrTo(e,t){e.squareTo(t),this.reduce(t)}function montMulTo(e,t,i){e.multiplyTo(t,i),this.reduce(i)}function bnpIsEven(){return 0==(0<this.t?1&this[0]:this.s)}function bnpExp(e,t){if(4294967295<e||e<1)return BigInteger.ONE;var i,n=nbi(),r=nbi(),a=t.convert(this),o=nbits(e)-1;for(a.copyTo(n);0<=--o;){t.sqrTo(n,r),0<(e&1<<o)?t.mulTo(r,a,n):(i=n,n=r,r=i)}return t.revert(n)}function bnModPowInt(e,t){var i=new(e<256||t.isEven()?Classic:Montgomery)(t);return this.exp(e,i)}function bnClone(){var e=nbi();return this.copyTo(e),e}function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16}function bnpChunkSize(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function bnpToRadix(e){if(null==e&&(e=10),0==this.signum()||e<2||36<e)return"0";var t=this.chunkSize(e),i=Math.pow(e,t),n=nbv(i),r=nbi(),a=nbi(),o="";for(this.divRemTo(n,r,a);0<r.signum();)o=(i+a.intValue()).toString(e).substr(1)+o,r.divRemTo(n,r,a);return a.intValue().toString(e)+o}function bnpFromRadix(e,t){this.fromInt(0),null==t&&(t=10);for(var i=this.chunkSize(t),n=Math.pow(t,i),r=!1,a=0,o=0,s=0;s<e.length;++s){var c=intAt(e,s);c<0?"-"==e.charAt(s)&&0==this.signum()&&(r=!0):(o=t*o+c,++a>=i&&(this.dMultiply(n),this.dAddOffset(o,0),o=a=0))}0<a&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(o,0)),r&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(e,t,i){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,i),this.testBit(e-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(e-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(BigInteger.ONE.shiftLeft(e-1),this);else{var n=new Array,r=7&e;n.length=1+(e>>3),t.nextBytes(n),0<r?n[0]&=(1<<r)-1:n[0]=0,this.fromString(n,256)}}function bnToByteArray(){var e=this.t,t=new Array;t[0]=this.s;var i,n=this.DB-e*this.DB%8,r=0;if(0<e--)for(n<this.DB&&(i=this[e]>>n)!=(this.s&this.DM)>>n&&(t[r++]=i|this.s<<this.DB-n);0<=e;)n<8?(i=(this[e]&(1<<n)-1)<<8-n,i|=this[--e]>>(n+=this.DB-8)):(i=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&i)&&(i|=-256),0==r&&(128&this.s)!=(128&i)&&++r,(0<r||i!=this.s)&&(t[r++]=i);return t}function bnEquals(e){return 0==this.compareTo(e)}function bnMin(e){return this.compareTo(e)<0?this:e}function bnMax(e){return 0<this.compareTo(e)?this:e}function bnpBitwiseTo(e,t,i){for(var n,r=Math.min(e.t,this.t),a=0;a<r;++a)i[a]=t(this[a],e[a]);if(e.t<this.t){for(n=e.s&this.DM,a=r;a<this.t;++a)i[a]=t(this[a],n);i.t=this.t}else{for(n=this.s&this.DM,a=r;a<e.t;++a)i[a]=t(n,e[a]);i.t=e.t}i.s=t(this.s,e.s),i.clamp()}function op_and(e,t){return e&t}function bnAnd(e){var t=nbi();return this.bitwiseTo(e,op_and,t),t}function op_or(e,t){return e|t}function bnOr(e){var t=nbi();return this.bitwiseTo(e,op_or,t),t}function op_xor(e,t){return e^t}function bnXor(e){var t=nbi();return this.bitwiseTo(e,op_xor,t),t}function op_andnot(e,t){return e&~t}function bnAndNot(e){var t=nbi();return this.bitwiseTo(e,op_andnot,t),t}function bnNot(){for(var e=nbi(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function bnShiftLeft(e){var t=nbi();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function bnShiftRight(e){var t=nbi();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function lbit(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function bnGetLowestSetBit(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+lbit(this[e]);return this.s<0?this.t*this.DB:-1}function cbit(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function bnBitCount(){for(var e=0,t=this.s&this.DM,i=0;i<this.t;++i)e+=cbit(this[i]^t);return e}function bnTestBit(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function bnpChangeBit(e,t){var i=BigInteger.ONE.shiftLeft(e);return this.bitwiseTo(i,t,i),i}function bnSetBit(e){return this.changeBit(e,op_or)}function bnClearBit(e){return this.changeBit(e,op_andnot)}function bnFlipBit(e){return this.changeBit(e,op_xor)}function bnpAddTo(e,t){for(var i=0,n=0,r=Math.min(e.t,this.t);i<r;)n+=this[i]+e[i],t[i++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;i<this.t;)n+=this[i],t[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<e.t;)n+=e[i],t[i++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,0<n?t[i++]=n:n<-1&&(t[i++]=this.DV+n),t.t=i,t.clamp()}function bnAdd(e){var t=nbi();return this.addTo(e,t),t}function bnSubtract(e){var t=nbi();return this.subTo(e,t),t}function bnMultiply(e){var t=nbi();return this.multiplyTo(e,t),t}function bnSquare(){var e=nbi();return this.squareTo(e),e}function bnDivide(e){var t=nbi();return this.divRemTo(e,t,null),t}function bnRemainder(e){var t=nbi();return this.divRemTo(e,null,t),t}function bnDivideAndRemainder(e){var t=nbi(),i=nbi();return this.divRemTo(e,t,i),new Array(t,i)}function bnpDMultiply(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function NullExp(){}function nNop(e){return e}function nMulTo(e,t,i){e.multiplyTo(t,i)}function nSqrTo(e,t){e.squareTo(t)}function bnPow(e){return this.exp(e,new NullExp)}function bnpMultiplyLowerTo(e,t,i){var n,r=Math.min(this.t+e.t,t);for(i.s=0,i.t=r;0<r;)i[--r]=0;for(n=i.t-this.t;r<n;++r)i[r+this.t]=this.am(0,e[r],i,r,0,this.t);for(n=Math.min(e.t,t);r<n;++r)this.am(0,e[r],i,r,0,t-r);i.clamp()}function bnpMultiplyUpperTo(e,t,i){--t;var n=i.t=this.t+e.t-t;for(i.s=0;0<=--n;)i[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)i[this.t+n-t]=this.am(t-n,e[n],i,0,0,this.t+n-t);i.clamp(),i.drShiftTo(1,i)}function Barrett(e){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function barrettConvert(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=nbi();return e.copyTo(t),this.reduce(t),t}function barrettRevert(e){return e}function barrettReduce(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compareTo(this.m);)e.subTo(this.m,e)}function barrettSqrTo(e,t){e.squareTo(t),this.reduce(t)}function barrettMulTo(e,t,i){e.multiplyTo(t,i),this.reduce(i)}function bnModPow(e,t){var i,n,r=e.bitLength(),a=nbv(1);if(r<=0)return a;i=r<18?1:r<48?3:r<144?4:r<768?5:6,n=new(r<8?Classic:t.isEven()?Barrett:Montgomery)(t);var o=new Array,s=3,c=i-1,l=(1<<i)-1;if(o[1]=n.convert(this),1<i){var u=nbi();for(n.sqrTo(o[1],u);s<=l;)o[s]=nbi(),n.mulTo(u,o[s-2],o[s]),s+=2}for(var g,d,h=e.t-1,p=!0,f=nbi(),r=nbits(e[h])-1;0<=h;){for(c<=r?g=e[h]>>r-c&l:(g=(e[h]&(1<<r+1)-1)<<c-r,0<h&&(g|=e[h-1]>>this.DB+r-c)),s=i;0==(1&g);)g>>=1,--s;if((r-=s)<0&&(r+=this.DB,--h),p)o[g].copyTo(a),p=!1;else{for(;1<s;)n.sqrTo(a,f),n.sqrTo(f,a),s-=2;0<s?n.sqrTo(a,f):(d=a,a=f,f=d),n.mulTo(f,o[g],a)}for(;0<=h&&0==(e[h]&1<<r);)n.sqrTo(a,f),d=a,a=f,f=d,--r<0&&(r=this.DB-1,--h)}return n.revert(a)}function bnGCD(e){var t,i=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();i.compareTo(n)<0&&(t=i,i=n,n=t);var r=i.getLowestSetBit(),a=n.getLowestSetBit();if(a<0)return i;for(r<a&&(a=r),0<a&&(i.rShiftTo(a,i),n.rShiftTo(a,n));0<i.signum();)0<(r=i.getLowestSetBit())&&i.rShiftTo(r,i),0<(r=n.getLowestSetBit())&&n.rShiftTo(r,n),0<=i.compareTo(n)?(i.subTo(n,i),i.rShiftTo(1,i)):(n.subTo(i,n),n.rShiftTo(1,n));return 0<a&&n.lShiftTo(a,n),n}function bnpModInt(e){if(e<=0)return 0;var t=this.DV%e,i=this.s<0?e-1:0;if(0<this.t)if(0==t)i=this[0]%e;else for(var n=this.t-1;0<=n;--n)i=(t*i+this[n])%e;return i}function bnModInverse(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return BigInteger.ZERO;for(var i=e.clone(),n=this.clone(),r=nbv(1),a=nbv(0),o=nbv(0),s=nbv(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),t?(r.isEven()&&a.isEven()||(r.addTo(this,r),a.subTo(e,a)),r.rShiftTo(1,r)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);0<=i.compareTo(n)?(i.subTo(n,i),t&&r.subTo(o,r),a.subTo(s,a)):(n.subTo(i,n),t&&o.subTo(r,o),s.subTo(a,s))}return 0!=n.compareTo(BigInteger.ONE)?BigInteger.ZERO:0<=s.compareTo(e)?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s}Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(e){var t,i=this.abs();if(1==i.t&&i[0]<=lowprimes[lowprimes.length-1]){for(t=0;t<lowprimes.length;++t)if(i[0]==lowprimes[t])return!0;return!1}if(i.isEven())return!1;for(t=1;t<lowprimes.length;){for(var n=lowprimes[t],r=t+1;r<lowprimes.length&&n<lplim;)n*=lowprimes[r++];for(n=i.modInt(n);t<r;)if(n%lowprimes[t++]==0)return!1}return i.millerRabin(e)}function bnpMillerRabin(e){var t=this.subtract(BigInteger.ONE),i=t.getLowestSetBit();if(i<=0)return!1;var n=t.shiftRight(i);(e=e+1>>1)>lowprimes.length&&(e=lowprimes.length);for(var r=nbi(),a=0;a<e;++a){r.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var o=r.modPow(n,this);if(0!=o.compareTo(BigInteger.ONE)&&0!=o.compareTo(t)){for(var s=1;s++<i&&0!=o.compareTo(t);)if(0==(o=o.modPowInt(2,this)).compareTo(BigInteger.ONE))return!1;if(0!=o.compareTo(t))return!1}}return!0}function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(e){for(var t,i,n=0;n<256;++n)this.S[n]=n;for(n=t=0;n<256;++n)t=t+this.S[n]+e[n%e.length]&255,i=this.S[n],this.S[n]=this.S[t],this.S[t]=i;this.i=0,this.j=0}function ARC4next(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime,BigInteger.prototype.square=bnSquare,Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var rng_psize=256,rng_state,rng_pool,rng_pptr;function rng_seed_int(e){rng_pool[rng_pptr++]^=255&e,rng_pool[rng_pptr++]^=e>>8&255,rng_pool[rng_pptr++]^=e>>16&255,rng_pool[rng_pptr++]^=e>>24&255,rng_psize<=rng_pptr&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}if(null==rng_pool){var t,rng_pool=new Array,rng_pptr=0;if(void 0!==window$1&&(void 0!==window$1.crypto||void 0!==window$1.msCrypto)){var crypto=window$1.crypto||window$1.msCrypto;if(crypto.getRandomValues){var ua=new Uint8Array(32);for(crypto.getRandomValues(ua),t=0;t<32;++t)rng_pool[rng_pptr++]=ua[t]}else if("Netscape"==navigator$1.appName&&navigator$1.appVersion<"5")for(var z=window$1.crypto.random(32),t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z.charCodeAt(t)}for(;rng_pptr<rng_psize;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=255&t;rng_pptr=0,rng_seed_time()}function rng_get_byte(){if(null==rng_state){for(rng_seed_time(),(rng_state=prng_newstate()).init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(e){for(var t=0;t<e.length;++t)e[t]=rng_get_byte()}function SecureRandom(){}function parseBigInt(e,t){return new BigInteger(e,t)}function pkcs1pad2(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var i=new Array,n=e.length-1;0<=n&&0<t;){var r=e.charCodeAt(n--);r<128?i[--t]=r:127<r&&r<2048?(i[--t]=63&r|128,i[--t]=r>>6|192):(i[--t]=63&r|128,i[--t]=r>>6&63|128,i[--t]=r>>12|224)}i[--t]=0;for(var a=new SecureRandom,o=new Array;2<t;){for(o[0]=0;0==o[0];)a.nextBytes(o);i[--t]=o[0]}return i[--t]=2,i[--t]=0,new BigInteger(i)}function oaep_mgf1_arr(e,t,i){for(var n="",r=0;n.length<t;)n+=i(String.fromCharCode.apply(String,e.concat([(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r]))),r+=1;return n}function oaep_pad(e,t,i,n){var r,a=KJUR.crypto.MessageDigest,o=KJUR.crypto.Util;if("string"==typeof(i=i||"sha1")&&(r=a.getCanonicalAlgName(i),n=a.getHashLength(r),i=function(e){return hextorstr(o.hashHex(rstrtohex(e),r))}),e.length+2*n+2>t)throw"Message too long for RSA";for(var s="",c=0;c<t-e.length-2*n-2;c+=1)s+="\0";var l=i("")+s+""+e,u=new Array(n);(new SecureRandom).nextBytes(u);var g=oaep_mgf1_arr(u,l.length,i),d=[];for(c=0;c<l.length;c+=1)d[c]=l.charCodeAt(c)^g.charCodeAt(c);var h=oaep_mgf1_arr(d,u.length,i),p=[0];for(c=0;c<u.length;c+=1)p[c+1]=u[c]^h.charCodeAt(c);return new BigInteger(p.concat(d))}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function RSASetPublic(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&0<e.length&&0<t.length))throw"Invalid RSA public key";this.n=parseBigInt(e,16),this.e=parseInt(t,16)}}function RSADoPublic(e){return e.modPowInt(this.e,this.n)}function RSAEncrypt(e){var t=pkcs1pad2(e,this.n.bitLength()+7>>3);if(null==t)return null;var i=this.doPublic(t);if(null==i)return null;var n=i.toString(16);return 0==(1&n.length)?n:"0"+n}function RSAEncryptOAEP(e,t,i){var n=oaep_pad(e,this.n.bitLength()+7>>3,t,i);if(null==n)return null;var r=this.doPublic(n);if(null==r)return null;var a=r.toString(16);return 0==(1&a.length)?a:"0"+a}function pkcs1unpad2(e,t){for(var i=e.toByteArray(),n=0;n<i.length&&0==i[n];)++n;if(i.length-n!=t-1||2!=i[n])return null;for(++n;0!=i[n];)if(++n>=i.length)return null;for(var r="";++n<i.length;){var a=255&i[n];a<128?r+=String.fromCharCode(a):191<a&&a<224?(r+=String.fromCharCode((31&a)<<6|63&i[n+1]),++n):(r+=String.fromCharCode((15&a)<<12|(63&i[n+1])<<6|63&i[n+2]),n+=2)}return r}function oaep_mgf1_str(e,t,i){for(var n="",r=0;n.length<t;)n+=i(e+String.fromCharCode.apply(String,[(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r])),r+=1;return n}function oaep_unpad(e,t,i,n){var r,a=KJUR.crypto.MessageDigest,o=KJUR.crypto.Util;for("string"==typeof(i=i||"sha1")&&(r=a.getCanonicalAlgName(i),n=a.getHashLength(r),i=function(e){return hextorstr(o.hashHex(rstrtohex(e),r))}),e=e.toByteArray(),s=0;s<e.length;s+=1)e[s]&=255;for(;e.length<t;)e.unshift(0);if((e=String.fromCharCode.apply(String,e)).length<2*n+2)throw"Cipher too short";var s,c=e.substr(1,n),l=e.substr(n+1),u=oaep_mgf1_str(l,n,i),g=[];for(s=0;s<c.length;s+=1)g[s]=c.charCodeAt(s)^u.charCodeAt(s);var d=oaep_mgf1_str(String.fromCharCode.apply(String,g),e.length-n,i),h=[];for(s=0;s<l.length;s+=1)h[s]=l.charCodeAt(s)^d.charCodeAt(s);if((h=String.fromCharCode.apply(String,h)).substr(0,n)!==i(""))throw"Hash mismatch";var p=(h=h.substr(n)).indexOf("");if((-1!=p?h.substr(0,p).lastIndexOf("\0"):-1)+1!=p)throw"Malformed data";return h.substr(p+1)}function RSASetPrivate(e,t,i){if(this.isPrivate=!0,"string"!=typeof e)this.n=e,this.e=t,this.d=i;else{if(!(null!=e&&null!=t&&0<e.length&&0<t.length))throw"Invalid RSA private key";this.n=parseBigInt(e,16),this.e=parseInt(t,16),this.d=parseBigInt(i,16)}}function RSASetPrivateEx(e,t,i,n,r,a,o,s){if(this.isPrivate=!0,this.isPublic=!1,null==e)throw"RSASetPrivateEx N == null";if(null==t)throw"RSASetPrivateEx E == null";if(0==e.length)throw"RSASetPrivateEx N.length == 0";if(0==t.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=e&&null!=t&&0<e.length&&0<t.length))throw"Invalid RSA private key in RSASetPrivateEx";this.n=parseBigInt(e,16),this.e=parseInt(t,16),this.d=parseBigInt(i,16),this.p=parseBigInt(n,16),this.q=parseBigInt(r,16),this.dmp1=parseBigInt(a,16),this.dmq1=parseBigInt(o,16),this.coeff=parseBigInt(s,16)}function RSAGenerate(e,t){var i=new SecureRandom,n=e>>1;this.e=parseInt(t,16);for(var r,a=new BigInteger(t,16);;){for(;this.p=new BigInteger(e-n,1,i),0!=this.p.subtract(BigInteger.ONE).gcd(a).compareTo(BigInteger.ONE)||!this.p.isProbablePrime(10););for(;this.q=new BigInteger(n,1,i),0!=this.q.subtract(BigInteger.ONE).gcd(a).compareTo(BigInteger.ONE)||!this.q.isProbablePrime(10););this.p.compareTo(this.q)<=0&&(r=this.p,this.p=this.q,this.q=r);var o=this.p.subtract(BigInteger.ONE),s=this.q.subtract(BigInteger.ONE),c=o.multiply(s);if(0==c.gcd(a).compareTo(BigInteger.ONE)&&(this.n=this.p.multiply(this.q),this.n.bitLength()==e)){this.d=a.modInverse(c),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(s),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0}function RSADoPrivate(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),i=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(i)<0;)t=t.add(this.p);return t.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)}function RSADecrypt(e){if(e.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var t=parseBigInt(e,16),i=this.doPrivate(t);return null==i?null:pkcs1unpad2(i,this.n.bitLength()+7>>3)}function RSADecryptOAEP(e,t,i){if(e.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var n=parseBigInt(e,16),r=this.doPrivate(n);return null==r?null:oaep_unpad(r,this.n.bitLength()+7>>3,t,i)}function ECFieldElementFp(e,t){this.x=t,this.q=e}function feFpEquals(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)}function feFpToBigInteger(){return this.x}function feFpNegate(){return new ECFieldElementFp(this.q,this.x.negate().mod(this.q))}function feFpAdd(e){return new ECFieldElementFp(this.q,this.x.add(e.toBigInteger()).mod(this.q))}function feFpSubtract(e){return new ECFieldElementFp(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))}function feFpMultiply(e){return new ECFieldElementFp(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))}function feFpSquare(){return new ECFieldElementFp(this.q,this.x.square().mod(this.q))}function feFpDivide(e){return new ECFieldElementFp(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))}function ECPointFp(e,t,i,n){this.curve=e,this.x=t,this.y=i,this.z=null==n?BigInteger.ONE:n,this.zinv=null}function pointFpGetX(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pointFpGetY(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pointFpEquals(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(BigInteger.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(BigInteger.ZERO))}function pointFpIsInfinity(){return null==this.x&&null==this.y||this.z.equals(BigInteger.ZERO)&&!this.y.toBigInteger().equals(BigInteger.ZERO)}function pointFpNegate(){return new ECPointFp(this.curve,this.x,this.y.negate(),this.z)}function pointFpAdd(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),i=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(BigInteger.ZERO.equals(i))return BigInteger.ZERO.equals(t)?this.twice():this.curve.getInfinity();var n=new BigInteger("3"),r=this.x.toBigInteger(),a=this.y.toBigInteger(),o=(e.x.toBigInteger(),e.y.toBigInteger(),i.square()),s=o.multiply(i),c=r.multiply(o),l=t.square().multiply(this.z),u=l.subtract(c.shiftLeft(1)).multiply(e.z).subtract(s).multiply(i).mod(this.curve.q),g=c.multiply(n).multiply(t).subtract(a.multiply(s)).subtract(l.multiply(t)).multiply(e.z).add(t.multiply(s)).mod(this.curve.q),d=s.multiply(this.z).multiply(e.z).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(u),this.curve.fromBigInteger(g),d)}function pointFpTwice(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new BigInteger("3"),t=this.x.toBigInteger(),i=this.y.toBigInteger(),n=i.multiply(this.z),r=n.multiply(i).mod(this.curve.q),a=this.curve.a.toBigInteger(),o=t.square().multiply(e);BigInteger.ZERO.equals(a)||(o=o.add(this.z.square().multiply(a)));var s=(o=o.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(r)).shiftLeft(1).multiply(n).mod(this.curve.q),c=o.multiply(e).multiply(t).subtract(r.shiftLeft(1)).shiftLeft(2).multiply(r).subtract(o.square().multiply(o)).mod(this.curve.q),l=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(s),this.curve.fromBigInteger(c),l)}function pointFpMultiply(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();for(var t=e,i=t.multiply(new BigInteger("3")),n=this.negate(),r=this,a=this.curve.q.subtract(e),o=a.multiply(new BigInteger("3")),s=new ECPointFp(this.curve,this.x,this.y),c=s.negate(),l=i.bitLength()-2;0<l;--l){r=r.twice();var u=i.testBit(l);u!=t.testBit(l)&&(r=r.add(u?this:n))}for(l=o.bitLength()-2;0<l;--l){s=s.twice();var g=o.testBit(l);g!=a.testBit(l)&&(s=s.add(g?s:c))}return r}function pointFpMultiplyTwo(e,t,i){for(var n=e.bitLength()>i.bitLength()?e.bitLength()-1:i.bitLength()-1,r=this.curve.getInfinity(),a=this.add(t);0<=n;)r=r.twice(),e.testBit(n)?r=i.testBit(n)?r.add(a):r.add(this):i.testBit(n)&&(r=r.add(t)),--n;return r}function ECCurveFp(e,t,i){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(i),this.infinity=new ECPointFp(this,null,null)}function curveFpGetQ(){return this.q}function curveFpGetA(){return this.a}function curveFpGetB(){return this.b}function curveFpEquals(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)}function curveFpGetInfinity(){return this.infinity}function curveFpFromBigInteger(e){return new ECFieldElementFp(this.q,e)}function curveFpDecodePointHex(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,i=e.substr(2,t),n=e.substr(2+t,t);return new ECPointFp(this,this.fromBigInteger(new BigInteger(i,16)),this.fromBigInteger(new BigInteger(n,16)));default:return null}}SecureRandom.prototype.nextBytes=rng_get_bytes,RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt,RSAKey.prototype.encryptOAEP=RSAEncryptOAEP,RSAKey.prototype.type="RSA",RSAKey.prototype.doPrivate=RSADoPrivate,RSAKey.prototype.setPrivate=RSASetPrivate,RSAKey.prototype.setPrivateEx=RSASetPrivateEx,RSAKey.prototype.generate=RSAGenerate,RSAKey.prototype.decrypt=RSADecrypt,RSAKey.prototype.decryptOAEP=RSADecryptOAEP,ECFieldElementFp.prototype.equals=feFpEquals,ECFieldElementFp.prototype.toBigInteger=feFpToBigInteger,ECFieldElementFp.prototype.negate=feFpNegate,ECFieldElementFp.prototype.add=feFpAdd,ECFieldElementFp.prototype.subtract=feFpSubtract,ECFieldElementFp.prototype.multiply=feFpMultiply,ECFieldElementFp.prototype.square=feFpSquare,ECFieldElementFp.prototype.divide=feFpDivide,ECPointFp.prototype.getX=pointFpGetX,ECPointFp.prototype.getY=pointFpGetY,ECPointFp.prototype.equals=pointFpEquals,ECPointFp.prototype.isInfinity=pointFpIsInfinity,ECPointFp.prototype.negate=pointFpNegate,ECPointFp.prototype.add=pointFpAdd,ECPointFp.prototype.twice=pointFpTwice,ECPointFp.prototype.multiply=pointFpMultiply,ECPointFp.prototype.multiplyTwo=pointFpMultiplyTwo,ECCurveFp.prototype.getQ=curveFpGetQ,ECCurveFp.prototype.getA=curveFpGetA,ECCurveFp.prototype.getB=curveFpGetB,ECCurveFp.prototype.equals=curveFpEquals,ECCurveFp.prototype.getInfinity=curveFpGetInfinity,ECCurveFp.prototype.fromBigInteger=curveFpFromBigInteger,ECCurveFp.prototype.decodePointHex=curveFpDecodePointHex,ECFieldElementFp.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},ECPointFp.prototype.getEncoded=function(e){function t(e,t){var i=e.toByteArrayUnsigned();if(t<i.length)i=i.slice(i.length-t);else for(;t>i.length;)i.unshift(0);return i}var i=this.getX().toBigInteger(),n=this.getY().toBigInteger(),r=t(i,32);return e?n.isEven()?r.unshift(2):r.unshift(3):(r.unshift(4),r=r.concat(t(n,32))),r},ECPointFp.decodeFrom=function(e,t){t[0];var i=t.length-1,n=t.slice(1,1+i/2),r=t.slice(1+i/2,1+i);n.unshift(0),r.unshift(0);var a=new BigInteger(n),o=new BigInteger(r);return new ECPointFp(e,e.fromBigInteger(a),e.fromBigInteger(o))},ECPointFp.decodeFromHex=function(e,t){t.substr(0,2);var i=t.length-2,n=t.substr(2,i/2),r=t.substr(2+i/2,i/2),a=new BigInteger(n,16),o=new BigInteger(r,16);return new ECPointFp(e,e.fromBigInteger(a),e.fromBigInteger(o))},ECPointFp.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),i=e.y.subtract(this.y).divide(t),n=i.square().subtract(this.x).subtract(e.x),r=i.multiply(this.x.subtract(n)).subtract(this.y);return new ECPointFp(this.curve,n,r)},ECPointFp.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(BigInteger.valueOf(2)),t=this.curve.fromBigInteger(BigInteger.valueOf(3)),i=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),n=i.square().subtract(this.x.multiply(e)),r=i.multiply(this.x.subtract(n)).subtract(this.y);return new ECPointFp(this.curve,n,r)},ECPointFp.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();for(var t=e,i=t.multiply(new BigInteger("3")),n=this.negate(),r=this,a=i.bitLength()-2;0<a;--a){r=r.twice();var o=i.testBit(a);o!=t.testBit(a)&&(r=r.add2D(o?this:n))}return r},ECPointFp.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),i=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),r=this.curve.getQ(),a=t.multiply(t).mod(r),o=e.multiply(e).multiply(e).add(i.multiply(e)).add(n).mod(r);return a.equals(o)},ECPointFp.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},ECPointFp.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),i=this.getY().toBigInteger();if(t.compareTo(BigInteger.ONE)<0||0<t.compareTo(e.subtract(BigInteger.ONE)))throw new Error("x coordinate out of bounds");if(i.compareTo(BigInteger.ONE)<0||0<i.compareTo(e.subtract(BigInteger.ONE)))throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var jsonParse=(SEa=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),TEa=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),UEa={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},WEa=new String(""),YEa=Object.hasOwnProperty,function(e,s){var t,i=e.match(SEa),n=i[0],r=!1;"{"===n?o={}:"["===n?o=[]:(o=[],r=!0);for(var a,c,o,l=[o],u=1-r,g=i.length;u<g;++u){switch((n=i[u]).charCodeAt(0)){default:(a=l[0])[t||a.length]=+n,t=void 0;break;case 34:if(-1!==(n=n.substring(1,n.length-1)).indexOf("\\")&&(n=n.replace(TEa,VEa)),a=l[0],!t){if(!(a instanceof Array)){t=n||WEa;break}t=a.length}a[t]=n,t=void 0;break;case 91:a=l[0],l.unshift(a[t||a.length]=[]),t=void 0;break;case 93:l.shift();break;case 102:(a=l[0])[t||a.length]=!1,t=void 0;break;case 110:(a=l[0])[t||a.length]=null,t=void 0;break;case 116:(a=l[0])[t||a.length]=!0,t=void 0;break;case 123:a=l[0],l.unshift(a[t||a.length]={}),t=void 0;break;case 125:l.shift()}}if(r){if(1!==l.length)throw new Error;o=o[0]}else if(l.length)throw new Error;return s&&(o=(c=function(e,t){var i=e[t];if(i&&"object"==typeof i){var n,r,a=null;for(n in i){YEa.call(i,n)&&i!==e&&(void 0!==(r=c(i,n))?i[n]=r:(a=a||[]).push(n))}if(a)for(var o=a.length;0<=--o;)delete i[a[o]]}return s.call(e,t,i)})({"":o},"")),o}),SEa,TEa,UEa,WEa,YEa;function VEa(e,t,i){return t?UEa[t]:String.fromCharCode(parseInt(i,16))}void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){if("-"!=(r=e.toString(16)).substr(0,1))r.length%2==1?r="0"+r:r.match(/^[0-7]/)||(r="00"+r);else{var t=r.substr(1).length;t%2==1?t+=1:r.match(/^[0-7]/)||(t+=2);for(var i="",n=0;n<t;n++)i+="f";var r=new BigInteger(i,16).xor(e).add(BigInteger.ONE).toString(16).replace(/^-/,"")}return r},this.getPEMStringFromHex=function(e,t){return hextopem(e,t)},this.newObject=function(e){var t=KJUR.asn1,i=t.DERBoolean,n=t.DERInteger,r=t.DERBitString,a=t.DEROctetString,o=t.DERNull,s=t.DERObjectIdentifier,c=t.DEREnumerated,l=t.DERUTF8String,u=t.DERNumericString,g=t.DERPrintableString,d=t.DERTeletexString,h=t.DERIA5String,p=t.DERUTCTime,f=t.DERGeneralizedTime,I=t.DERVisibleString,b=t.DERBMPString,m=t.DERSequence,y=t.DERSet,C=t.DERTaggedObject,A=t.ASN1Util.newObject,v=Object.keys(e);if(1!=v.length)throw"key of param shall be only one.";var S=v[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+S+":"))throw new Error("undefined key: "+S);if("bool"==S)return new i(e[S]);if("int"==S)return new n(e[S]);if("bitstr"==S)return new r(e[S]);if("octstr"==S)return new a(e[S]);if("null"==S)return new o(e[S]);if("oid"==S)return new s(e[S]);if("enum"==S)return new c(e[S]);if("utf8str"==S)return new l(e[S]);if("numstr"==S)return new u(e[S]);if("prnstr"==S)return new g(e[S]);if("telstr"==S)return new d(e[S]);if("ia5str"==S)return new h(e[S]);if("utctime"==S)return new p(e[S]);if("gentime"==S)return new f(e[S]);if("visstr"==S)return new I(e[S]);if("bmpstr"==S)return new b(e[S]);if("seq"==S){for(var w=e[S],x=[],E=0;E<w.length;E++){var k=A(w[E]);x.push(k)}return new m({array:x})}if("set"==S){for(w=e[S],x=[],E=0;E<w.length;E++){k=A(w[E]);x.push(k)}return new y({array:x})}if("tag"==S){var T=e[S];if("[object Array]"===Object.prototype.toString.call(T)&&3==T.length){var P=A(T[2]);return new C({tag:T[0],explicit:T[1],obj:P})}var R={};if(void 0!==T.explicit&&(R.explicit=T.explicit),void 0!==T.tag&&(R.tag=T.tag),void 0===T.obj)throw"obj shall be specified for 'tag'.";return R.obj=A(T.obj),new C(R)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},KJUR.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",i=parseInt(e.substr(0,2),16),t=Math.floor(i/40)+"."+i%40,n="",r=2;r<e.length;r+=2){var a=("00000000"+parseInt(e.substr(r,2),16).toString(2)).slice(-8);n+=a.substr(1,7),"0"==a.substr(0,1)&&(t=t+"."+new BigInteger(n,2).toString(10),n="")}return t},KJUR.asn1.ASN1Util.oidIntToHex=function(e){function s(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t}if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var t="",i=e.split("."),n=40*parseInt(i[0])+parseInt(i[1]);t+=s(n),i.splice(0,2);for(var r=0;r<i.length;r++)t+=function(e){var t="",i=new BigInteger(e,10).toString(2),n=7-i.length%7;7==n&&(n=0);for(var r="",a=0;a<n;a++)r+="0";i=r+i;for(a=0;a<i.length-1;a+=7){var o=i.substr(a,7);a!=i.length-7&&(o="1"+o),t+=s(parseInt(o,2))}return t}(i[r]);return t},KJUR.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var i=t.length/2;if(15<i)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+i).toString(16)+t},this.getEncodedHex=function(){return null!=this.hTLV&&!this.isModified||(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},KJUR.asn1.DERAbstractString=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=utf8tohex(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(e){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){var t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t)},this.formatDate=function(e,t,i){var n=this.zeroPadding,r=this.localDateToUTC(e),a=String(r.getFullYear());"utc"==t&&(a=a.substr(2,2));var o,s=a+n(String(r.getMonth()+1),2)+n(String(r.getDate()),2)+n(String(r.getHours()),2)+n(String(r.getMinutes()),2)+n(String(r.getSeconds()),2);return!0!==i||0!=(o=r.getMilliseconds())&&(s=s+"."+n(String(o),3).replace(/[0]+$/,"")),s+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(e)},this.setByDateValue=function(e,t,i,n,r,a){var o=new Date(Date.UTC(e,t-1,i,n,r,a,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},YAHOO.lang.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},YAHOO.lang.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},YAHOO.lang.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(e){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new BigInteger(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(e){var t;void 0!==e&&void 0!==e.obj&&(t=KJUR.asn1.ASN1Util.newObject(e.obj),e.hex="00"+t.getEncodedHex()),KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var i="0"+e;this.hTLV=null,this.isModified=!0,this.hV=i+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var i=0;i<=t;i++)e+="0";for(var n="",i=0;i<e.length-1;i+=8){var r=e.substr(i,8),a=parseInt(r,2).toString(16);1==a.length&&(a="0"+a),n+=a}this.hTLV=null,this.isModified=!0,this.hV="0"+t+n},this.setByBooleanArray=function(e){for(var t="",i=0;i<e.length;i++)1==e[i]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},YAHOO.lang.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(e){var t;void 0!==e&&void 0!==e.obj&&(t=KJUR.asn1.ASN1Util.newObject(e.obj),e.hex=t.getEncodedHex()),KJUR.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},YAHOO.lang.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},YAHOO.lang.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(e){function s(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t}KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var t="",i=e.split("."),n=40*parseInt(i[0])+parseInt(i[1]);t+=s(n),i.splice(0,2);for(var r=0;r<i.length;r++)t+=function(e){var t="",i=new BigInteger(e,10).toString(2),n=7-i.length%7;7==n&&(n=0);for(var r="",a=0;a<n;a++)r+="0";i=r+i;for(a=0;a<i.length-1;a+=7){var o=i.substr(a,7);a!=i.length-7&&(o="1"+o),t+=s(parseInt(o,2))}return t}(i[r]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(e){var t=KJUR.asn1.x509.OID.name2oid(e);if(""===t)throw"DERObjectIdentifier oidName undefined: "+e;this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):void 0!==e.oid?this.setValueOidString(e.oid):void 0!==e.hex?this.setValueHex(e.hex):void 0!==e.name&&this.setValueName(e.name))},YAHOO.lang.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DEREnumerated=function(e){KJUR.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new BigInteger(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DEREnumerated,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(e){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},YAHOO.lang.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(e){KJUR.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},YAHOO.lang.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(e){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},YAHOO.lang.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(e){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},YAHOO.lang.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(e){KJUR.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},YAHOO.lang.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERVisibleString=function(e){KJUR.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},YAHOO.lang.extend(KJUR.asn1.DERVisibleString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERBMPString=function(e){KJUR.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},YAHOO.lang.extend(KJUR.asn1.DERBMPString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(e){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},YAHOO.lang.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(e){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},YAHOO.lang.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(e){KJUR.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++){e+=this.asn1Array[t].getEncodedHex()}return this.hV=e,this.hV}},YAHOO.lang.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(e){KJUR.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var i=this.asn1Array[t];e.push(i.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},YAHOO.lang.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(e){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,i){this.hT=t,this.isExplicit=e,this.asn1Object=i,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=i.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.tag&&(this.hT=e.tag),void 0!==e.explicit&&(this.isExplicit=e.explicit),void 0!==e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},YAHOO.lang.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object);var ASN1HEX=new function(){},KJUR,utf8tob64u,b64utoutf8;function stoBA(e){for(var t=new Array,i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}function BAtos(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}function BAtohex(e){for(var t="",i=0;i<e.length;i++){var n=e[i].toString(16);1==n.length&&(n="0"+n),t+=n}return t}function stohex(e){return BAtohex(stoBA(e))}function stob64(e){return hex2b64(stohex(e))}function stob64u(e){return b64tob64u(hex2b64(stohex(e)))}function b64utos(e){return BAtos(b64toBA(b64utob64(e)))}function b64tob64u(e){return e=(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function b64utob64(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),e=(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function hextob64u(e){return e.length%2==1&&(e="0"+e),b64tob64u(hex2b64(e))}function b64utohex(e){return b64tohex(b64utob64(e))}function utf8tob64(e){return hex2b64(uricmptohex(encodeURIComponentAll(e)))}function b64toutf8(e){return decodeURIComponent(hextouricmp(b64tohex(e)))}function utf8tohex(e){return uricmptohex(encodeURIComponentAll(e))}function hextoutf8(e){return decodeURIComponent(hextouricmp(e))}function hextorstr(e){for(var t="",i=0;i<e.length-1;i+=2)t+=String.fromCharCode(parseInt(e.substr(i,2),16));return t}function rstrtohex(e){for(var t="",i=0;i<e.length;i++)t+=("0"+e.charCodeAt(i).toString(16)).slice(-2);return t}function hextob64(e){return hex2b64(e)}function hextob64nl(e){return hextob64(e).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function b64nltohex(e){return b64tohex(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function hextopem(e,t){return"-----BEGIN "+t+"-----\r\n"+hextob64nl(e)+"\r\n-----END "+t+"-----\r\n"}function pemtohex(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return b64nltohex(e=void 0!==t?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),"")).replace(new RegExp("-----END "+t+"-----[^]*$"),""):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function hextoArrayBuffer(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),i=new DataView(t),n=0;n<e.length/2;n++)i.setUint8(n,parseInt(e.substr(2*n,2),16));return t}function ArrayBuffertohex(e){for(var t="",i=new DataView(e),n=0;n<e.byteLength;n++)t+=("00"+i.getUint8(n).toString(16)).slice(-2);return t}function zulutomsec(e){var t,i,n,r,a,o,s,c,l,u,g=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/);if(g)return c=g[1],t=parseInt(c),2===c.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),i=parseInt(g[2])-1,n=parseInt(g[3]),r=parseInt(g[4]),a=parseInt(g[5]),o=parseInt(g[6]),s=0,""!==(l=g[7])&&(u=(l.substr(1)+"00").substr(0,3),s=parseInt(u)),Date.UTC(t,i,n,r,a,o,s);throw"unsupported zulu format: "+e}function zulutosec(e){return~~(zulutomsec(e)/1e3)}function zulutodate(e){return new Date(zulutomsec(e))}function datetozulu(e,t,i){var n,r,a=e.getUTCFullYear();if(t){if(a<1950||2049<a)throw"not proper year for UTCTime: "+a;n=(""+a).slice(-2)}else n=("000"+a).slice(-4);return n+=("0"+(e.getUTCMonth()+1)).slice(-2),n+=("0"+e.getUTCDate()).slice(-2),n+=("0"+e.getUTCHours()).slice(-2),n+=("0"+e.getUTCMinutes()).slice(-2),n+=("0"+e.getUTCSeconds()).slice(-2),!i||0!==(r=e.getUTCMilliseconds())&&(n+="."+(r=(r=("00"+r).slice(-3)).replace(/0+$/g,""))),n+="Z"}function uricmptohex(e){return e.replace(/%/g,"")}function hextouricmp(e){return e.replace(/(..)/g,"%$1")}function ipv6tohex(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var i=(e=e.toLowerCase()).split(":").length-1;if(i<2)throw t;var n=":".repeat(7-i+2),r=(e=e.replace("::",n)).split(":");if(8!=r.length)throw t;for(var a=0;a<8;a++)r[a]=("0000"+r[a]).slice(-4);return r.join("")}function hextoipv6(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var t=(e=e.toLowerCase()).match(/.{1,4}/g),i=0;i<8;i++)t[i]=t[i].replace(/^0+/,""),""==t[i]&&(t[i]="0");var n=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null===n)return e.slice(1,-1);for(var r="",i=0;i<n.length;i++)n[i].length>r.length&&(r=n[i]);return(e=e.replace(r,"::")).slice(1,-1)}function hextoip(e){var t="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8!=e.length)return 32==e.length?hextoipv6(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(e){throw t}}function iptohex(e){var t="malformed IP address";if(!(e=e.toLowerCase(e)).match(/^[0-9.]+$/)){if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return ipv6tohex(e);throw t}var i=e.split(".");if(4!==i.length)throw t;var n="";try{for(var r=0;r<4;r++){n+=("0"+parseInt(i[r]).toString(16)).slice(-2)}return n}catch(e){throw t}}function encodeURIComponentAll(e){for(var t=encodeURIComponent(e),i="",n=0;n<t.length;n++)"%"==t[n]?(i+=t.substr(n,3),n+=2):i=i+"%"+stohex(t[n]);return i}function newline_toUnix(e){return e=e.replace(/\r\n/gm,"\n")}function newline_toDos(e){return e=(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")}function hextoposhex(e){return e.length%2==1?"0"+e:"7"<e.substr(0,1)?"00"+e:e}function intarystrtohex(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map(function(e,t,i){var n=parseInt(e);if(n<0||255<n)throw"integer not in range 0-255";return("00"+n.toString(16)).slice(-2)}).join("")}catch(e){throw"malformed integer array string: "+e}}ASN1HEX.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var i=parseInt(e.substr(t+3,1));return 0==i?-1:0<i&&i<10?i+1:-2},ASN1HEX.getL=function(e,t){var i=ASN1HEX.getLblen(e,t);return i<1?"":e.substr(t+2,2*i)},ASN1HEX.getVblen=function(e,t){var i=ASN1HEX.getL(e,t);return""==i?-1:("8"===i.substr(0,1)?new BigInteger(i.substr(2),16):new BigInteger(i,16)).intValue()},ASN1HEX.getVidx=function(e,t){var i=ASN1HEX.getLblen(e,t);return i<0?i:t+2*(i+1)},ASN1HEX.getV=function(e,t){var i=ASN1HEX.getVidx(e,t),n=ASN1HEX.getVblen(e,t);return e.substr(i,2*n)},ASN1HEX.getTLV=function(e,t){return e.substr(t,2)+ASN1HEX.getL(e,t)+ASN1HEX.getV(e,t)},ASN1HEX.getNextSiblingIdx=function(e,t){return ASN1HEX.getVidx(e,t)+2*ASN1HEX.getVblen(e,t)},ASN1HEX.getChildIdx=function(e,t){var i=ASN1HEX,n=new Array,r=i.getVidx(e,t);"03"==e.substr(t,2)?n.push(r+2):n.push(r);for(var a=i.getVblen(e,t),o=r,s=0;;){var c=i.getNextSiblingIdx(e,o);if(null==c||2*a<=c-r)break;if(200<=s)break;n.push(c),o=c,s++}return n},ASN1HEX.getNthChildIdx=function(e,t,i){return ASN1HEX.getChildIdx(e,t)[i]},ASN1HEX.getIdxbyList=function(e,t,i,n){var r,a,o=ASN1HEX;if(0!=i.length)return r=i.shift(),a=o.getChildIdx(e,t),o.getIdxbyList(e,a[r],i,n);if(void 0!==n&&e.substr(t,2)!==n)throw Error("checking tag doesn't match: "+e.substr(t,2)+"!="+n);return t},ASN1HEX.getIdxbyListEx=function(e,t,i,n){var r,a,o=ASN1HEX;if(0==i.length)return void 0!==n&&e.substr(t,2)!==n?-1:t;r=i.shift(),a=o.getChildIdx(e,t);for(var s=0,c=0;c<a.length;c++){var l=e.substr(a[c],2);if("number"==typeof r&&!o.isContextTag(l)&&s==r||"string"==typeof r&&o.isContextTag(l,r))return o.getIdxbyListEx(e,a[c],i,n);o.isContextTag(l)||s++}return-1},ASN1HEX.getTLVbyList=function(e,t,i,n){var r=ASN1HEX,a=r.getIdxbyList(e,t,i);if(void 0===a)throw new Error("can't find nthList object");if(void 0!==n&&e.substr(a,2)!=n)throw new Error("checking tag doesn't match: "+e.substr(a,2)+"!="+n);return r.getTLV(e,a)},ASN1HEX.getTLVbyListEx=function(e,t,i,n){var r=ASN1HEX,a=r.getIdxbyListEx(e,t,i,n);return-1==a?null:r.getTLV(e,a)},ASN1HEX.getVbyList=function(e,t,i,n,r){var a,o=ASN1HEX,s=o.getIdxbyList(e,t,i,n);if(void 0===s)throw"can't find nthList object";return a=o.getV(e,s),!0===r&&(a=a.substr(2)),a},ASN1HEX.getVbyListEx=function(e,t,i,n,r){var a,o=ASN1HEX,s=o.getIdxbyListEx(e,t,i,n);return-1==s?null:(a=o.getV(e,s),"03"==e.substr(s,2)&&!1!==r&&(a=a.substr(2)),a)},ASN1HEX.hextooidstr=function(e){function t(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e}var i=[],n=e.substr(0,2),r=parseInt(n,16);i[0]=new String(Math.floor(r/40)),i[1]=new String(r%40);for(var a=e.substr(2),o=[],s=0;s<a.length/2;s++)o.push(parseInt(a.substr(2*s,2),16));for(var c=[],l="",s=0;s<o.length;s++)128&o[s]?l+=t((127&o[s]).toString(2),7):(l+=t((127&o[s]).toString(2),7),c.push(new String(parseInt(l,2))),l="");var u=i.join(".");return 0<c.length&&(u=u+"."+c.join(".")),u},ASN1HEX.dump=function(e,t,i,n){var r=ASN1HEX,a=r.getV,o=r.dump,s=r.getChildIdx,c=e;e instanceof KJUR.asn1.ASN1Object&&(c=e.getEncodedHex());function l(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)}void 0===t&&(t={ommit_long_octet:32}),void 0===i&&(i=0),void 0===n&&(n="");var u=t.ommit_long_octet,g=c.substr(i,2);if("01"==g)return"00"==(d=a(c,i))?n+"BOOLEAN FALSE\n":n+"BOOLEAN TRUE\n";if("02"==g)return n+"INTEGER "+l(d=a(c,i),u)+"\n";if("03"==g){var d=a(c,i);if(r.isASN1HEX(d.substr(2))){var h=n+"BITSTRING, encapsulates\n";return h+=o(d.substr(2),t,0,n+"  ")}return n+"BITSTRING "+l(d,u)+"\n"}if("04"==g){d=a(c,i);if(r.isASN1HEX(d)){h=n+"OCTETSTRING, encapsulates\n";return h+=o(d,t,0,n+"  ")}return n+"OCTETSTRING "+l(d,u)+"\n"}if("05"==g)return n+"NULL\n";if("06"==g){var p=a(c,i),f=KJUR.asn1.ASN1Util.oidHexToInt(p),I=KJUR.asn1.x509.OID.oid2name(f),b=f.replace(/\./g," ");return""!=I?n+"ObjectIdentifier "+I+" ("+b+")\n":n+"ObjectIdentifier ("+b+")\n"}if("0c"==g)return n+"UTF8String '"+hextoutf8(a(c,i))+"'\n";if("13"==g)return n+"PrintableString '"+hextoutf8(a(c,i))+"'\n";if("14"==g)return n+"TeletexString '"+hextoutf8(a(c,i))+"'\n";if("16"==g)return n+"IA5String '"+hextoutf8(a(c,i))+"'\n";if("17"==g)return n+"UTCTime "+hextoutf8(a(c,i))+"\n";if("18"==g)return n+"GeneralizedTime "+hextoutf8(a(c,i))+"\n";if("1a"==g)return n+"VisualString '"+hextoutf8(a(c,i))+"'\n";if("1e"==g)return n+"BMPString '"+hextoutf8(a(c,i))+"'\n";if("30"==g){if("3000"==c.substr(i,4))return n+"SEQUENCE {}\n";var m,h=n+"SEQUENCE\n",y=t;2!=(A=s(c,i)).length&&3!=A.length||"06"!=c.substr(A[0],2)||"04"!=c.substr(A[A.length-1],2)||(I=r.oidname(a(c,A[0])),(m=JSON.parse(JSON.stringify(t))).x509ExtName=I,y=m);for(var C=0;C<A.length;C++)h+=o(c,y,A[C],n+"  ");return h}if("31"==g){for(var h=n+"SET\n",A=s(c,i),C=0;C<A.length;C++)h+=o(c,t,A[C],n+"  ");return h}if(0==(128&(g=parseInt(g,16))))return n+"UNKNOWN("+g+") "+a(c,i)+"\n";var v=31&g;if(0==(32&g))return"68747470"==(d=a(c,i)).substr(0,8)&&(d=hextoutf8(d)),"subjectAltName"===t.x509ExtName&&2==v&&(d=hextoutf8(d)),h=n+"["+v+"] "+d+"\n";for(h=n+"["+v+"]\n",A=s(c,i),C=0;C<A.length;C++)h+=o(c,t,A[C],n+"  ");return h},ASN1HEX.isContextTag=function(e,t){var i,n;e=e.toLowerCase();try{i=parseInt(e,16)}catch(e){return-1}if(void 0===t)return 128==(192&i);try{return null==t.match(/^\[[0-9]+\]$/)?!1:!(31<(n=parseInt(t.substr(1,t.length-1),10)))&&(128==(192&i)&&(31&i)==n)}catch(e){return!1}},ASN1HEX.isASN1HEX=function(e){var t=ASN1HEX;if(e.length%2==1)return!1;var i=t.getVblen(e,0),n=e.substr(0,2),r=t.getL(e,0);return e.length-n.length-r.length==2*i},ASN1HEX.checkStrictDER=function(e,t,i,n,r){var a=ASN1HEX;if(void 0===i){if("string"!=typeof e)throw new Error("not hex string");if(e=e.toLowerCase(),!KJUR.lang.String.isHex(e))throw new Error("not hex string");i=e.length,r=(n=e.length/2)<128?1:Math.ceil(n.toString(16))+1}if(a.getL(e,t).length>2*r)throw new Error("L of TLV too long: idx="+t);var o=a.getVblen(e,t);if(n<o)throw new Error("value of L too long than hex: idx="+t);var s=a.getTLV(e,t),c=s.length-2-a.getL(e,t).length;if(c!=2*o)throw new Error("V string length and L's value not the same:"+c+"/"+2*o);if(0===t&&e.length!=s.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+s.length);var l=e.substr(t,2);if("02"===l){var u=a.getVidx(e,t);if("00"==e.substr(u,2)&&e.charCodeAt(u+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(l,16)){for(var g=a.getVblen(e,t),d=0,h=a.getChildIdx(e,t),p=0;p<h.length;p++){d+=a.getTLV(e,h[p]).length,a.checkStrictDER(e,h[p],i,n,r)}if(2*g!=d)throw new Error("sum of children's TLV length and L unmatch: "+2*g+"!="+d)}},ASN1HEX.oidname=function(e){var t=KJUR.asn1;KJUR.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var i=t.x509.OID.oid2name(e);return""===i&&(i=e),i},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),void 0!==KJUR.asn1.x509&&KJUR.asn1.x509||(KJUR.asn1.x509={}),KJUR.asn1.x509.Certificate=function(e){KJUR.asn1.x509.Certificate.superclass.constructor.call(this);KJUR.crypto;var t=KJUR.asn1,i=t.DERSequence,n=t.DERBitString;this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;var e=new KJUR.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg});e.init(this.prvKey),e.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=e.sign(),this.asn1Sig=new n({hex:"00"+this.hexSig});var t=new i({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(e){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=e,this.asn1Sig=new n({hex:"00"+this.hexSig});var t=new i({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN CERTIFICATE-----\r\n"+hextob64nl(this.getEncodedHex())+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==e&&(void 0!==e.tbscertobj&&(this.asn1TBSCert=e.tbscertobj),void 0!==e.prvkeyobj&&(this.prvKey=e.prvkeyobj))},YAHOO.lang.extend(KJUR.asn1.x509.Certificate,KJUR.asn1.ASN1Object),KJUR.asn1.x509.TBSCertificate=function(e){KJUR.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=KJUR.asn1,r=t.DERSequence,i=t.DERInteger,a=t.DERTaggedObject,n=t.x509,o=n.Time,s=n.X500Name,c=n.SubjectPublicKeyInfo;this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new a({obj:new i({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(e){this.asn1SerialNumber=new i(e)},this.setSignatureAlgByParam=function(e){this.asn1SignatureAlg=new n.AlgorithmIdentifier(e)},this.setIssuerByParam=function(e){this.asn1Issuer=new s(e)},this.setNotBeforeByParam=function(e){this.asn1NotBefore=new o(e)},this.setNotAfterByParam=function(e){this.asn1NotAfter=new o(e)},this.setSubjectByParam=function(e){this.asn1Subject=new s(e)},this.setSubjectPublicKey=function(e){this.asn1SubjPKey=new c(e)},this.setSubjectPublicKeyByGetKey=function(e){var t=KEYUTIL.getKey(e);this.asn1SubjPKey=new c(t)},this.appendExtension=function(e){this.extensionsArray.push(e)},this.appendExtensionByName=function(e,t){KJUR.asn1.x509.Extension.appendByNameToArray(e,t,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var e,t,i=new r({array:[this.asn1NotBefore,this.asn1NotAfter]});this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(i),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),0<this.extensionsArray.length&&(e=new r({array:this.extensionsArray}),t=new a({explicit:!0,tag:"a3",obj:e}),this.asn1Array.push(t));var n=new r({array:this.asn1Array});return this.hTLV=n.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},YAHOO.lang.extend(KJUR.asn1.x509.TBSCertificate,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Extension=function(e){KJUR.asn1.x509.Extension.superclass.constructor.call(this);var t=KJUR.asn1,n=t.DERObjectIdentifier,r=t.DEROctetString,a=(t.DERBitString,t.DERBoolean),o=t.DERSequence;this.getEncodedHex=function(){var e=new n({oid:this.oid}),t=new r({hex:this.getExtnValueHex()}),i=new Array;return i.push(e),this.critical&&i.push(new a),i.push(t),new o({array:i}).getEncodedHex()},this.critical=!1,void 0!==e&&void 0!==e.critical&&(this.critical=e.critical)},YAHOO.lang.extend(KJUR.asn1.x509.Extension,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Extension.appendByNameToArray=function(e,t,i){var n=e.toLowerCase(),r=KJUR.asn1.x509;if("basicconstraints"==n){var a=new r.BasicConstraints(t);i.push(a)}else if("keyusage"==n){a=new r.KeyUsage(t);i.push(a)}else if("crldistributionpoints"==n){a=new r.CRLDistributionPoints(t);i.push(a)}else if("extkeyusage"==n){a=new r.ExtKeyUsage(t);i.push(a)}else if("authoritykeyidentifier"==n){a=new r.AuthorityKeyIdentifier(t);i.push(a)}else if("subjectkeyidentifier"==n){a=new r.SubjectKeyIdentifier(t);i.push(a)}else if("authorityinfoaccess"==n){a=new r.AuthorityInfoAccess(t);i.push(a)}else if("subjectaltname"==n){a=new r.SubjectAltName(t);i.push(a)}else if("issueraltname"==n){a=new r.IssuerAltName(t);i.push(a)}else{if("certificatepolicies"!=n)throw new Error("unsupported extension name: "+e);a=new r.CertificatePolicies(t);i.push(a)}},KJUR.asn1.x509.KeyUsage=function(e){KJUR.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=X509.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==e&&(void 0!==e.bin&&(this.asn1ExtnValue=new KJUR.asn1.DERBitString(e)),void 0!==e.names&&void 0!==e.names.length)){for(var i=e.names,n="000000000",r=0;r<i.length;r++)for(var a=0;a<t.length;a++)i[r]===t[a]&&(n=n.substring(0,a)+"1"+n.substring(a+1,n.length));this.asn1ExtnValue=new KJUR.asn1.DERBitString({bin:n})}},YAHOO.lang.extend(KJUR.asn1.x509.KeyUsage,KJUR.asn1.x509.Extension),KJUR.asn1.x509.BasicConstraints=function(e){KJUR.asn1.x509.BasicConstraints.superclass.constructor.call(this,e),this.getExtnValueHex=function(){var e=new Array;this.cA&&e.push(new KJUR.asn1.DERBoolean),-1<this.pathLen&&e.push(new KJUR.asn1.DERInteger({int:this.pathLen}));var t=new KJUR.asn1.DERSequence({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==e&&(void 0!==e.cA&&(this.cA=e.cA),void 0!==e.pathLen&&(this.pathLen=e.pathLen))},YAHOO.lang.extend(KJUR.asn1.x509.BasicConstraints,KJUR.asn1.x509.Extension),KJUR.asn1.x509.CRLDistributionPoints=function(e){KJUR.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=KJUR.asn1,r=t.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(e){this.asn1ExtnValue=new t.DERSequence({array:e})},this.setByOneURI=function(e){var t=new r.GeneralNames([{uri:e}]),i=new r.DistributionPointName(t),n=new r.DistributionPoint({dpobj:i});this.setByDPArray([n])},this.oid="2.5.29.31",void 0!==e&&(void 0!==e.array?this.setByDPArray(e.array):void 0!==e.uri&&this.setByOneURI(e.uri))},YAHOO.lang.extend(KJUR.asn1.x509.CRLDistributionPoints,KJUR.asn1.x509.Extension),KJUR.asn1.x509.CertificatePolicies=function(e){KJUR.asn1.x509.CertificatePolicies.superclass.constructor.call(this,e);var t=KJUR.asn1,i=t.x509,n=t.DERSequence,r=i.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var e=[],t=0;t<this.params.array.length;t++)e.push(new r(this.params.array[t]));var i=new n({array:e});return this.asn1ExtnValue=i,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.32",void 0!==e&&(this.params=e)},YAHOO.lang.extend(KJUR.asn1.x509.CertificatePolicies,KJUR.asn1.x509.Extension),KJUR.asn1.x509.PolicyInformation=function(e){KJUR.asn1.x509.PolicyInformation.superclass.constructor.call(this,e);var t=KJUR.asn1,n=t.DERSequence,r=t.DERObjectIdentifier,a=t.x509.PolicyQualifierInfo;this.params=null,this.getEncodedHex=function(){if(void 0===this.params.policyoid&&void 0===this.params.array)throw new Error("parameter oid and array missing");var e=[new r({oid:this.params.policyoid})];if(void 0!==this.params.array){for(var t=[],i=0;i<this.params.array.length;i++)t.push(new a(this.params.array[i]));0<t.length&&e.push(new n({array:t}))}return new n({array:e}).getEncodedHex()},void 0!==e&&(this.params=e)},YAHOO.lang.extend(KJUR.asn1.x509.PolicyInformation,KJUR.asn1.ASN1Object),KJUR.asn1.x509.PolicyQualifierInfo=function(e){KJUR.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,e);var t=KJUR.asn1,i=t.DERSequence,n=t.DERIA5String,r=t.DERObjectIdentifier,a=t.x509.UserNotice;this.params=null,this.getEncodedHex=function(){return void 0!==this.params.cps?new i({array:[new r({oid:"1.3.6.1.5.5.7.2.1"}),new n({str:this.params.cps})]}).getEncodedHex():null!=this.params.unotice?new i({array:[new r({oid:"1.3.6.1.5.5.7.2.2"}),new a(this.params.unotice)]}).getEncodedHex():void 0},void 0!==e&&(this.params=e)},YAHOO.lang.extend(KJUR.asn1.x509.PolicyQualifierInfo,KJUR.asn1.ASN1Object),KJUR.asn1.x509.UserNotice=function(e){KJUR.asn1.x509.UserNotice.superclass.constructor.call(this,e);var t=KJUR.asn1.DERSequence,i=(KJUR.asn1.DERInteger,KJUR.asn1.x509.DisplayText),n=KJUR.asn1.x509.NoticeReference;this.params=null,this.getEncodedHex=function(){var e=[];return void 0!==this.params.noticeref&&e.push(new n(this.params.noticeref)),void 0!==this.params.exptext&&e.push(new i(this.params.exptext)),new t({array:e}).getEncodedHex()},void 0!==e&&(this.params=e)},YAHOO.lang.extend(KJUR.asn1.x509.UserNotice,KJUR.asn1.ASN1Object),KJUR.asn1.x509.NoticeReference=function(e){KJUR.asn1.x509.NoticeReference.superclass.constructor.call(this,e);var r=KJUR.asn1.DERSequence,a=KJUR.asn1.DERInteger,o=KJUR.asn1.x509.DisplayText;this.params=null,this.getEncodedHex=function(){var e=[];if(void 0!==this.params.org&&e.push(new o(this.params.org)),void 0!==this.params.noticenum){for(var t=[],i=this.params.noticenum,n=0;n<i.length;n++)t.push(new a(i[n]));e.push(new r({array:t}))}if(0==e.length)throw new Error("parameter is empty");return new r({array:e}).getEncodedHex()},void 0!==e&&(this.params=e)},YAHOO.lang.extend(KJUR.asn1.x509.NoticeReference,KJUR.asn1.ASN1Object),KJUR.asn1.x509.DisplayText=function(e){KJUR.asn1.x509.DisplayText.superclass.constructor.call(this,e),this.hT="0c",void 0!==e&&("ia5"===e.type?this.hT="16":"vis"===e.type?this.hT="1a":"bmp"===e.type&&(this.hT="1e"))},YAHOO.lang.extend(KJUR.asn1.x509.DisplayText,KJUR.asn1.DERAbstractString),KJUR.asn1.x509.ExtKeyUsage=function(e){KJUR.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var n=KJUR.asn1;this.setPurposeArray=function(e){this.asn1ExtnValue=new n.DERSequence;for(var t=0;t<e.length;t++){var i=new n.DERObjectIdentifier(e[t]);this.asn1ExtnValue.appendASN1Object(i)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==e&&void 0!==e.array&&this.setPurposeArray(e.array)},YAHOO.lang.extend(KJUR.asn1.x509.ExtKeyUsage,KJUR.asn1.x509.Extension),KJUR.asn1.x509.AuthorityKeyIdentifier=function(e){KJUR.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var i=KJUR.asn1,n=i.DERTaggedObject,r=i.x509.GeneralNames;KJUR.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var e=new Array;this.asn1KID&&e.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&e.push(new n({explicit:!1,tag:"a1",obj:new r([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&e.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var t=new i.DERSequence({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(e){var t,i;void 0!==e.str||void 0!==e.hex?this.asn1KID=new KJUR.asn1.DEROctetString(e):("object"==typeof e&&KJUR.crypto.Util.isKey(e)||"string"==typeof e&&-1!=e.indexOf("BEGIN "))&&("string"==typeof(t=e)&&(t=KEYUTIL.getKey(e)),i=KEYUTIL.getKeyID(t),this.asn1KID=new KJUR.asn1.DEROctetString({hex:i}))},this.setCertIssuerByParam=function(e){void 0!==e.str||void 0!==e.ldapstr||void 0!==e.hex||void 0!==e.certsubject||void 0!==e.certissuer?this.asn1CertIssuer=new KJUR.asn1.x509.X500Name(e):"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&-1!=e.indexOf("CERTIFICATE")&&(this.asn1CertIssuer=new KJUR.asn1.x509.X500Name({certissuer:e}))},this.setCertSNByParam=function(e){var t,i;void 0!==e.str||void 0!==e.bigint||void 0!==e.hex?this.asn1CertSN=new KJUR.asn1.DERInteger(e):"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&e.indexOf("CERTIFICATE")&&((t=new X509).readCertPEM(e),i=t.getSerialNumberHex(),this.asn1CertSN=new KJUR.asn1.DERInteger({hex:i}))},this.oid="2.5.29.35",void 0!==e&&(void 0!==e.kid&&this.setKIDByParam(e.kid),void 0!==e.issuer&&this.setCertIssuerByParam(e.issuer),void 0!==e.sn&&this.setCertSNByParam(e.sn),void 0!==e.issuersn&&"string"==typeof e.issuersn&&-1!=e.issuersn.indexOf("BEGIN ")&&e.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(e.issuersn),this.setCertIssuerByParam(e.issuersn)))},YAHOO.lang.extend(KJUR.asn1.x509.AuthorityKeyIdentifier,KJUR.asn1.x509.Extension),KJUR.asn1.x509.SubjectKeyIdentifier=function(e){KJUR.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,e);var n=KJUR.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(e){var t,i;void 0!==e.str||void 0!==e.hex?this.asn1KID=new n(e):("object"==typeof e&&KJUR.crypto.Util.isKey(e)||"string"==typeof e&&-1!=e.indexOf("BEGIN"))&&("string"==typeof(t=e)&&(t=KEYUTIL.getKey(e)),i=KEYUTIL.getKeyID(t),this.asn1KID=new KJUR.asn1.DEROctetString({hex:i}))},this.oid="2.5.29.14",void 0!==e&&void 0!==e.kid&&this.setKIDByParam(e.kid)},YAHOO.lang.extend(KJUR.asn1.x509.SubjectKeyIdentifier,KJUR.asn1.x509.Extension),KJUR.asn1.x509.AuthorityInfoAccess=function(e){KJUR.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(e){for(var t=new Array,i=KJUR.asn1,n=i.DERSequence,r=0;r<e.length;r++){var a=new n({array:[new i.DERObjectIdentifier(e[r].accessMethod),new i.x509.GeneralName(e[r].accessLocation)]});t.push(a)}this.asn1ExtnValue=new n({array:t})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==e&&void 0!==e.array&&this.setAccessDescriptionArray(e.array)},YAHOO.lang.extend(KJUR.asn1.x509.AuthorityInfoAccess,KJUR.asn1.x509.Extension),KJUR.asn1.x509.SubjectAltName=function(e){KJUR.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new KJUR.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},YAHOO.lang.extend(KJUR.asn1.x509.SubjectAltName,KJUR.asn1.x509.Extension),KJUR.asn1.x509.IssuerAltName=function(e){KJUR.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new KJUR.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},YAHOO.lang.extend(KJUR.asn1.x509.IssuerAltName,KJUR.asn1.x509.Extension),KJUR.asn1.x509.CRL=function(e){KJUR.asn1.x509.CRL.superclass.constructor.call(this),this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new KJUR.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg,prov:"cryptojs/jsrsa"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new KJUR.asn1.DERBitString({hex:"00"+this.hexSig});var e=new KJUR.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN X509 CRL-----\r\n"+hextob64nl(this.getEncodedHex())+"\r\n-----END X509 CRL-----\r\n"},void 0!==e&&(void 0!==e.tbsobj&&(this.asn1TBSCertList=e.tbsobj),void 0!==e.prvkeyobj&&(this.prvKey=e.prvkeyobj))},YAHOO.lang.extend(KJUR.asn1.x509.CRL,KJUR.asn1.ASN1Object),KJUR.asn1.x509.TBSCertList=function(e){KJUR.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=KJUR.asn1,i=t.DERSequence,r=t.x509,n=r.Time;this.setSignatureAlgByParam=function(e){this.asn1SignatureAlg=new r.AlgorithmIdentifier(e)},this.setIssuerByParam=function(e){this.asn1Issuer=new r.X500Name(e)},this.setThisUpdateByParam=function(e){this.asn1ThisUpdate=new n(e)},this.setNextUpdateByParam=function(e){this.asn1NextUpdate=new n(e)},this.addRevokedCert=function(e,t){var i={};null!=e&&null!=e&&(i.sn=e),null!=t&&null!=t&&(i.time=t);var n=new r.CRLEntry(i);this.aRevokedCert.push(n)},this.getEncodedHex=function(){var e;this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),0<this.aRevokedCert.length&&(e=new i({array:this.aRevokedCert}),this.asn1Array.push(e));var t=new i({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},YAHOO.lang.extend(KJUR.asn1.x509.TBSCertList,KJUR.asn1.ASN1Object),KJUR.asn1.x509.CRLEntry=function(e){KJUR.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=KJUR.asn1;this.setCertSerial=function(e){this.sn=new t.DERInteger(e)},this.setRevocationDate=function(e){this.time=new t.x509.Time(e)},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.sn,this.time]});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&(void 0!==e.time&&this.setRevocationDate(e.time),void 0!==e.sn&&this.setCertSerial(e.sn))},YAHOO.lang.extend(KJUR.asn1.x509.CRLEntry,KJUR.asn1.ASN1Object),KJUR.asn1.x509.X500Name=function(e){KJUR.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array;var t,i=KJUR.asn1,a=i.x509;this.setByString=function(e){var t=e.split("/");t.shift();for(var i,n=[],r=0;r<t.length;r++){t[r].match(/^[^=]+=.+$/)?n.push(t[r]):n[i=n.length-1]=n[i]+"/"+t[r]}for(r=0;r<n.length;r++)this.asn1Array.push(new a.RDN({str:n[r]}))},this.setByLdapString=function(e){var t=a.X500Name.ldapToCompat(e);this.setByString(t)},this.setByObject=function(e){for(var t in e){var i;e.hasOwnProperty(t)&&(i=new KJUR.asn1.x509.RDN({str:t+"="+e[t]}),this.asn1Array?this.asn1Array.push(i):this.asn1Array=[i])}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new i.DERSequence({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.str?this.setByString(e.str):void 0!==e.ldapstr?this.setByLdapString(e.ldapstr):void 0!==e.hex?this.hTLV=e.hex:void 0!==e.certissuer?((t=new X509).readCertPEM(e.certissuer),this.hTLV=t.getIssuerHex()):void 0!==e.certsubject?((t=new X509).readCertPEM(e.certsubject),this.hTLV=t.getSubjectHex()):"object"==typeof e&&void 0===e.certsubject&&void 0===e.certissuer&&this.setByObject(e))},YAHOO.lang.extend(KJUR.asn1.x509.X500Name,KJUR.asn1.ASN1Object),KJUR.asn1.x509.X500Name.compatToLDAP=function(e){if("/"!==e.substr(0,1))throw"malformed input";var t=(e=e.substr(1)).split("/");return t.reverse(),(t=t.map(function(e){return e.replace(/,/,"\\,")})).join(",")},KJUR.asn1.x509.X500Name.onelineToLDAP=function(e){return KJUR.asn1.x509.X500Name.compatToLDAP(e)},KJUR.asn1.x509.X500Name.ldapToCompat=function(e){for(var t=e.split(","),i=!1,n=[];0<t.length;0){var r,a=t.shift();!0===i?(r=(n.pop()+","+a).replace(/\\,/g,","),n.push(r),i=!1):n.push(a),"\\"===a.substr(-1,1)&&(i=!0)}return(n=n.map(function(e){return e.replace("/","\\/")})).reverse(),"/"+n.join("/")},KJUR.asn1.x509.X500Name.ldapToOneline=function(e){return KJUR.asn1.x509.X500Name.ldapToCompat(e)},KJUR.asn1.x509.RDN=function(e){KJUR.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(e){this.asn1Array.push(new KJUR.asn1.x509.AttributeTypeAndValue({str:e}))},this.addByMultiValuedString=function(e){for(var t=KJUR.asn1.x509.RDN.parseString(e),i=0;i<t.length;i++)this.addByString(t[i])},this.getEncodedHex=function(){var e=new KJUR.asn1.DERSet({array:this.asn1Array});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&void 0!==e.str&&this.addByMultiValuedString(e.str)},YAHOO.lang.extend(KJUR.asn1.x509.RDN,KJUR.asn1.ASN1Object),KJUR.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),i=!1,n=[];0<t.length;0){var r=t.shift();!0===i?(c=(n.pop()+"+"+r).replace(/\\\+/g,"+"),n.push(c),i=!1):n.push(r),"\\"===r.substr(-1,1)&&(i=!0)}for(var a=!1,o=[];0<n.length;0){var s,c,r=n.shift();!0===a?(s=o.pop(),r.match(/"$/)?(c=(s+"+"+r).replace(/^([^=]+)="(.*)"$/,"$1=$2"),o.push(c),a=!1):o.push(s+"+"+r)):o.push(r),r.match(/^[^=]+="/)&&(a=!0)}return o},KJUR.asn1.x509.AttributeTypeAndValue=function(e){KJUR.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var i=KJUR.asn1;this.setByString=function(e){var t=e.match(/^([^=]+)=(.+)$/);if(!t)throw"malformed attrTypeAndValueStr: "+e;this.setByAttrTypeAndValueStr(t[1],t[2])},this.setByAttrTypeAndValueStr=function(e,t){this.typeObj=KJUR.asn1.x509.OID.atype2obj(e);var i="C"==e?"prn":"utf8";this.valueObj=this.getValueObj(i,t)},this.getValueObj=function(e,t){if("utf8"==e)return new i.DERUTF8String({str:t});if("prn"==e)return new i.DERPrintableString({str:t});if("tel"==e)return new i.DERTeletexString({str:t});if("ia5"==e)return new i.DERIA5String({str:t});throw"unsupported directory string type: type="+e+" value="+t},this.getEncodedHex=function(){var e=new i.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&void 0!==e.str&&this.setByString(e.str)},YAHOO.lang.extend(KJUR.asn1.x509.AttributeTypeAndValue,KJUR.asn1.ASN1Object),KJUR.asn1.x509.SubjectPublicKeyInfo=function(e){KJUR.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=KJUR.asn1,r=t.DERInteger,a=t.DERBitString,o=t.DERObjectIdentifier,i=t.DERSequence,s=t.ASN1Util.newObject,c=t.x509.AlgorithmIdentifier,n=KJUR.crypto;n.ECDSA,n.DSA;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new i({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var e=this.getASN1Object();return this.hTLV=e.getEncodedHex(),this.hTLV},this.setPubKey=function(e){try{var t;e instanceof RSAKey&&(t=s({seq:[{int:{bigint:e.n}},{int:{int:e.e}}]}).getEncodedHex(),this.asn1AlgId=new c({name:"rsaEncryption"}),this.asn1SubjPKey=new a({hex:"00"+t}))}catch(e){}try{e instanceof KJUR.crypto.ECDSA&&(i=new o({name:e.curveName}),this.asn1AlgId=new c({name:"ecPublicKey",asn1params:i}),this.asn1SubjPKey=new a({hex:"00"+e.pubKeyHex}))}catch(e){}try{var i,n;e instanceof KJUR.crypto.DSA&&(i=new s({seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}),this.asn1AlgId=new c({name:"dsa",asn1params:i}),n=new r({bigint:e.y}),this.asn1SubjPKey=new a({hex:"00"+n.getEncodedHex()}))}catch(e){}},void 0!==e&&this.setPubKey(e)},YAHOO.lang.extend(KJUR.asn1.x509.SubjectPublicKeyInfo,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Time=function(e){KJUR.asn1.x509.Time.superclass.constructor.call(this);var t=KJUR.asn1,i=t.DERUTCTime,n=t.DERGeneralizedTime;this.setTimeParams=function(e){this.timeParams=e},this.getEncodedHex=function(){var e=null,e=null!=this.timeParams?new("utc"==this.type?i:n)(this.timeParams):new("utc"==this.type?i:n);return this.TLV=e.getEncodedHex(),this.TLV},this.type="utc",void 0!==e&&(void 0!==e.type?this.type=e.type:void 0!==e.str&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)},YAHOO.lang.extend(KJUR.asn1.x509.Time,KJUR.asn1.ASN1Object),KJUR.asn1.x509.AlgorithmIdentifier=function(e){KJUR.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var t,r=KJUR.asn1,a=r.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw new Error("algorithm not specified");if(null!==this.nameAlg){var e,t=null;for(e in a)e===this.nameAlg&&(t=a[e]);if(null!==t)return this.hTLV=t,this.hTLV}null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=r.x509.OID.name2obj(this.nameAlg));var i=[this.asn1Alg];null!==this.asn1Params&&i.push(this.asn1Params);var n=new r.DERSequence({array:i});return this.hTLV=n.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.name&&(this.nameAlg=e.name),void 0!==e.asn1params&&(this.asn1Params=e.asn1params),void 0!==e.paramempty&&(this.paramEmpty=e.paramempty)),null!==this.asn1Params||!1!==this.paramEmpty||null===this.nameAlg||"withdsa"!==(t=this.nameAlg.toLowerCase()).substr(-7,7)&&"withecdsa"!==t.substr(-9,9)&&(this.asn1Params=new r.DERNull)},YAHOO.lang.extend(KJUR.asn1.x509.AlgorithmIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},KJUR.asn1.x509.GeneralName=function(e){KJUR.asn1.x509.GeneralName.superclass.constructor.call(this);var l={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},t=KJUR.asn1,u=(t.DERSequence,t.DEROctetString),g=t.DERIA5String,d=t.DERTaggedObject,h=t.ASN1Object,p=t.x509.X500Name,f=pemtohex;this.explicit=!1,this.setByParam=function(e){var t=null;if(void 0!==e){if(void 0!==e.rfc822&&(this.type="rfc822",t=new g({str:e[this.type]})),void 0!==e.dns&&(this.type="dns",t=new g({str:e[this.type]})),void 0!==e.uri&&(this.type="uri",t=new g({str:e[this.type]})),void 0!==e.dn&&(this.type="dn",this.explicit=!0,t="string"==typeof e.dn?new p({str:e.dn}):e.dn instanceof KJUR.asn1.x509.X500Name?e.dn:new p(e.dn)),void 0!==e.ldapdn&&(this.type="dn",this.explicit=!0,t=new p({ldapstr:e.ldapdn})),void 0!==e.certissuer){this.type="dn",this.explicit=!0;var i=null;if((r=e.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=r.indexOf("-----BEGIN ")&&(i=f(r)),null==i)throw"certissuer param not cert";(a=new X509).hex=i;var n=a.getIssuerHex();(t=new h).hTLV=n}if(void 0!==e.certsubj){this.type="dn",this.explicit=!0;var r,a,i=null;if((r=e.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=r.indexOf("-----BEGIN ")&&(i=f(r)),null==i)throw"certsubj param not cert";(a=new X509).hex=i;n=a.getSubjectHex();(t=new h).hTLV=n}if(void 0!==e.ip){this.type="ip",this.explicit=!1;var o,s=e.ip,c="malformed IP address";if(s.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(o=intarystrtohex("["+s.split(".").join(",")+"]")).length)throw c}else if(s.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))o=ipv6tohex(s);else{if(!s.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw c;o=s}t=new u({hex:o})}if(null==this.type)throw"unsupported type in params="+e;this.asn1Obj=new d({explicit:this.explicit,tag:l[this.type],obj:t})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==e&&this.setByParam(e)},YAHOO.lang.extend(KJUR.asn1.x509.GeneralName,KJUR.asn1.ASN1Object),KJUR.asn1.x509.GeneralNames=function(e){KJUR.asn1.x509.GeneralNames.superclass.constructor.call(this);var n=KJUR.asn1;this.setByParamArray=function(e){for(var t=0;t<e.length;t++){var i=new n.x509.GeneralName(e[t]);this.asn1Array.push(i)}},this.getEncodedHex=function(){return new n.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==e&&this.setByParamArray(e)},YAHOO.lang.extend(KJUR.asn1.x509.GeneralNames,KJUR.asn1.ASN1Object),KJUR.asn1.x509.DistributionPointName=function(e){KJUR.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=KJUR.asn1,i=t.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new i({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==e){if(!t.x509.GeneralNames.prototype.isPrototypeOf(e))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=e}},YAHOO.lang.extend(KJUR.asn1.x509.DistributionPointName,KJUR.asn1.ASN1Object),KJUR.asn1.x509.DistributionPoint=function(e){KJUR.asn1.x509.DistributionPoint.superclass.constructor.call(this);var i=KJUR.asn1;this.getEncodedHex=function(){var e,t=new i.DERSequence;return null!=this.asn1DP&&(e=new i.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP}),t.appendASN1Object(e)),this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.dpobj&&(this.asn1DP=e.dpobj)},YAHOO.lang.extend(KJUR.asn1.x509.DistributionPoint,KJUR.asn1.ASN1Object),KJUR.asn1.x509.OID=new function(e){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList=JSON.parse('{"sha1":"1.3.14.3.2.26","sha256":"2.16.840.1.101.3.4.2.1","sha384":"2.16.840.1.101.3.4.2.2","sha512":"2.16.840.1.101.3.4.2.3","sha224":"2.16.840.1.101.3.4.2.4","md5":"1.2.840.113549.2.5","md2":"1.3.14.7.2.2.1","ripemd160":"1.3.36.3.2.1","MD2withRSA":"1.2.840.113549.1.1.2","MD4withRSA":"1.2.840.113549.1.1.3","MD5withRSA":"1.2.840.113549.1.1.4","SHA1withRSA":"1.2.840.113549.1.1.5","SHA224withRSA":"1.2.840.113549.1.1.14","SHA256withRSA":"1.2.840.113549.1.1.11","SHA384withRSA":"1.2.840.113549.1.1.12","SHA512withRSA":"1.2.840.113549.1.1.13","SHA1withECDSA":"1.2.840.10045.4.1","SHA224withECDSA":"1.2.840.10045.4.3.1","SHA256withECDSA":"1.2.840.10045.4.3.2","SHA384withECDSA":"1.2.840.10045.4.3.3","SHA512withECDSA":"1.2.840.10045.4.3.4","dsa":"1.2.840.10040.4.1","SHA1withDSA":"1.2.840.10040.4.3","SHA224withDSA":"2.16.840.1.101.3.4.3.1","SHA256withDSA":"2.16.840.1.101.3.4.3.2","rsaEncryption":"1.2.840.113549.1.1.1","commonName":"2.5.4.3","countryName":"2.5.4.6","localityName":"2.5.4.7","stateOrProvinceName":"2.5.4.8","streetAddress":"2.5.4.9","organizationName":"2.5.4.10","organizationalUnitName":"2.5.4.11","domainComponent":"0.9.2342.19200300.100.1.25","userId":"0.9.2342.19200300.100.1.1","surname":"2.5.4.4","title":"2.5.4.12","distinguishedName":"2.5.4.49","emailAddress":"1.2.840.113549.1.9.1","description":"2.5.4.13","businessCategory":"2.5.4.15","postalCode":"2.5.4.17","uniqueIdentifier":"2.5.4.45","organizationIdentifier":"2.5.4.97","jurisdictionOfIncorporationL":"1.3.6.1.4.1.311.60.2.1.1","jurisdictionOfIncorporationSP":"1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationC":"1.3.6.1.4.1.311.60.2.1.3","subjectKeyIdentifier":"2.5.29.14","keyUsage":"2.5.29.15","subjectAltName":"2.5.29.17","issuerAltName":"2.5.29.18","basicConstraints":"2.5.29.19","nameConstraints":"2.5.29.30","cRLDistributionPoints":"2.5.29.31","certificatePolicies":"2.5.29.32","authorityKeyIdentifier":"2.5.29.35","policyConstraints":"2.5.29.36","extKeyUsage":"2.5.29.37","authorityInfoAccess":"1.3.6.1.5.5.7.1.1","ocsp":"1.3.6.1.5.5.7.48.1","caIssuers":"1.3.6.1.5.5.7.48.2","anyExtendedKeyUsage":"2.5.29.37.0","serverAuth":"1.3.6.1.5.5.7.3.1","clientAuth":"1.3.6.1.5.5.7.3.2","codeSigning":"1.3.6.1.5.5.7.3.3","emailProtection":"1.3.6.1.5.5.7.3.4","timeStamping":"1.3.6.1.5.5.7.3.8","ocspSigning":"1.3.6.1.5.5.7.3.9","ecPublicKey":"1.2.840.10045.2.1","secp256r1":"1.2.840.10045.3.1.7","secp256k1":"1.3.132.0.10","secp384r1":"1.3.132.0.34","pkcs5PBES2":"1.2.840.113549.1.5.13","pkcs5PBKDF2":"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7","data":"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2","tstinfo":"1.2.840.113549.1.9.16.1.4","extensionRequest":"1.2.840.113549.1.9.14"}'),this.objCache={},this.name2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.name2oidList[e])throw"Name of ObjectIdentifier not defined: "+e;var t=this.name2oidList[e],i=new KJUR.asn1.DERObjectIdentifier({oid:t});return this.objCache[e]=i},this.atype2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.atype2oidList[e])throw"AttributeType name undefined: "+e;var t=this.atype2oidList[e],i=new KJUR.asn1.DERObjectIdentifier({oid:t});return this.objCache[e]=i}},KJUR.asn1.x509.OID.oid2name=function(e){var t,i=KJUR.asn1.x509.OID.name2oidList;for(t in i)if(i[t]==e)return t;return""},KJUR.asn1.x509.OID.oid2atype=function(e){var t,i=KJUR.asn1.x509.OID.atype2oidList;for(t in i)if(i[t]==e)return t;return e},KJUR.asn1.x509.OID.name2oid=function(e){var t=KJUR.asn1.x509.OID.name2oidList;return void 0===t[e]?"":t[e]},KJUR.asn1.x509.X509Util={},KJUR.asn1.x509.X509Util.newCertPEM=function(e){var t=KJUR.asn1.x509,i=t.TBSCertificate,n=t.Certificate,r=new i;if(void 0===e.serial)throw"serial number undefined.";if(r.setSerialNumberByParam(e.serial),"string"!=typeof e.sigalg.name)throw"unproper signature algorithm name";if(r.setSignatureAlgByParam(e.sigalg),void 0===e.issuer)throw"issuer name undefined.";if(r.setIssuerByParam(e.issuer),void 0===e.notbefore)throw"notbefore undefined.";if(r.setNotBeforeByParam(e.notbefore),void 0===e.notafter)throw"notafter undefined.";if(r.setNotAfterByParam(e.notafter),void 0===e.subject)throw"subject name undefined.";if(r.setSubjectByParam(e.subject),void 0===e.sbjpubkey)throw"subject public key undefined.";if(r.setSubjectPublicKeyByGetKey(e.sbjpubkey),void 0!==e.ext&&void 0!==e.ext.length)for(var a=0;a<e.ext.length;a++)for(key in e.ext[a])r.appendExtensionByName(key,e.ext[a][key]);if(void 0===e.cakey&&void 0===e.sighex)throw"param cakey and sighex undefined.";var o=null;return e.cakey&&(o=new n({tbscertobj:r,prvkeyobj:!0===e.cakey.isPrivate?e.cakey:KEYUTIL.getKey.apply(null,e.cakey)})).sign(),e.sighex&&(o=new n({tbscertobj:r})).setSignatureHex(e.sighex),o.getPEMString()},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),void 0!==KJUR.asn1.cms&&KJUR.asn1.cms||(KJUR.asn1.cms={}),KJUR.asn1.cms.Attribute=function(e){var n=KJUR.asn1;n.cms.Attribute.superclass.constructor.call(this),this.getEncodedHex=function(){var e,t=new n.DERObjectIdentifier({oid:this.attrTypeOid}),i=new n.DERSet({array:this.valueList});try{i.getEncodedHex()}catch(e){throw"fail valueSet.getEncodedHex in Attribute(1)/"+e}e=new n.DERSequence({array:[t,i]});try{this.hTLV=e.getEncodedHex()}catch(e){throw"failed seq.getEncodedHex in Attribute(2)/"+e}return this.hTLV}},YAHOO.lang.extend(KJUR.asn1.cms.Attribute,KJUR.asn1.ASN1Object),KJUR.asn1.cms.ContentType=function(e){var t=KJUR.asn1;t.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var i=null;void 0!==e&&(i=new t.DERObjectIdentifier(e),this.valueList=[i])},YAHOO.lang.extend(KJUR.asn1.cms.ContentType,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.MessageDigest=function(e){var t,i,n,r=KJUR,a=r.asn1,o=a.DEROctetString,s=a.cms;s.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==e&&(e.eciObj instanceof s.EncapsulatedContentInfo&&"string"==typeof e.hashAlg?(t=e.eciObj.eContentValueHex,i=e.hashAlg,(n=new o({hex:r.crypto.Util.hashHex(t,i)})).getEncodedHex()):(n=new o(e)).getEncodedHex(),this.valueList=[n])},YAHOO.lang.extend(KJUR.asn1.cms.MessageDigest,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.SigningTime=function(e){var t=KJUR.asn1;if(t.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==e){var i=new t.x509.Time(e);try{i.getEncodedHex()}catch(e){throw"SigningTime.getEncodedHex() failed/"+e}this.valueList=[i]}},YAHOO.lang.extend(KJUR.asn1.cms.SigningTime,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.SigningCertificate=function(e){var l=KJUR,u=l.asn1,g=u.DERSequence,d=u.cms;l.crypto;d.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12",this.setCerts=function(e){for(var t=[],i=0;i<e.length;i++){var n=pemtohex(e[i]),r=l.crypto.Util.hashHex(n,"sha1"),a=new u.DEROctetString({hex:r});a.getEncodedHex();var o=new d.IssuerSerial({cert:e[i]});o.getEncodedHex();var s=new g({array:[a,o]});s.getEncodedHex(),t.push(s)}var c=new g({array:t});c.getEncodedHex(),this.valueList=[c]},void 0!==e&&"object"==typeof e.array&&this.setCerts(e.array)},YAHOO.lang.extend(KJUR.asn1.cms.SigningCertificate,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.SigningCertificateV2=function(e){var t,g=KJUR.asn1,d=g.DERSequence,h=g.x509,p=g.cms,f=KJUR.crypto;p.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47",this.setCerts=function(e,t){for(var i=[],n=0;n<e.length;n++){var r=pemtohex(e[n]),a=[];"sha256"!==t&&a.push(new h.AlgorithmIdentifier({name:t}));var o=f.Util.hashHex(r,t),s=new g.DEROctetString({hex:o});s.getEncodedHex(),a.push(s);var c=new p.IssuerSerial({cert:e[n]});c.getEncodedHex(),a.push(c);var l=new d({array:a});l.getEncodedHex(),i.push(l)}var u=new d({array:i});u.getEncodedHex(),this.valueList=[u]},void 0!==e&&"object"==typeof e.array&&(t="sha256","string"==typeof e.hashAlg&&(t=e.hashAlg),this.setCerts(e.array,t))},YAHOO.lang.extend(KJUR.asn1.cms.SigningCertificateV2,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.IssuerSerial=function(e){var i=KJUR.asn1,a=i.DERInteger,t=i.cms,n=i.x509,o=n.X500Name,r=n.GeneralNames,s=X509;t.IssuerSerial.superclass.constructor.call(this),this.setByCertPEM=function(e){var t=pemtohex(e),i=new s;i.hex=t;var n=i.getIssuerHex();this.dIssuer=new o,this.dIssuer.hTLV=n;var r=i.getSerialNumberHex();this.dSerial=new a({hex:r})},this.getEncodedHex=function(){var e=new r([{dn:this.dIssuer}]),t=new i.DERSequence({array:[e,this.dSerial]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&this.setByCertPEM(e),e.issuer&&e.serial&&(e.issuer instanceof o?this.dIssuer=e.issuer:this.dIssuer=new o(e.issuer),e.serial instanceof a?this.dSerial=e.serial:this.dSerial=new a(e.serial)),"string"==typeof e.cert&&this.setByCertPEM(e.cert))},YAHOO.lang.extend(KJUR.asn1.cms.IssuerSerial,KJUR.asn1.ASN1Object),KJUR.asn1.cms.IssuerAndSerialNumber=function(e){var t=KJUR.asn1,a=t.DERInteger,i=t.cms,o=t.x509.X500Name,s=X509;i.IssuerAndSerialNumber.superclass.constructor.call(this),this.setByCertPEM=function(e){var t=pemtohex(e),i=new s;i.hex=t;var n=i.getIssuerHex();this.dIssuer=new o,this.dIssuer.hTLV=n;var r=i.getSerialNumberHex();this.dSerial=new a({hex:r})},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&this.setByCertPEM(e),e.issuer&&e.serial&&(e.issuer instanceof o?this.dIssuer=e.issuer:this.dIssuer=new o(e.issuer),e.serial instanceof a?this.dSerial=e.serial:this.dSerial=new a(e.serial)),"string"==typeof e.cert&&this.setByCertPEM(e.cert))},YAHOO.lang.extend(KJUR.asn1.cms.IssuerAndSerialNumber,KJUR.asn1.ASN1Object),KJUR.asn1.cms.AttributeList=function(e){var t=KJUR.asn1,i=t.cms;i.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(e){e instanceof i.Attribute&&this.list.push(e)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new t.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},YAHOO.lang.extend(KJUR.asn1.cms.AttributeList,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SignerInfo=function(e){var o=KJUR.asn1,r=o.DERTaggedObject,t=o.cms,a=t.AttributeList,i=t.ContentType,n=t.EncapsulatedContentInfo,s=t.MessageDigest,c=t.SignedData,l=o.x509.AlgorithmIdentifier,u=KJUR.crypto,g=KEYUTIL;t.SignerInfo.superclass.constructor.call(this),this.dCMSVersion=new o.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new a,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new a,this.setSignerIdentifier=function(e){"string"==typeof e&&-1!=e.indexOf("CERTIFICATE")&&-1!=e.indexOf("BEGIN")&&-1!=e.indexOf("END")&&(this.dSignerIdentifier=new t.IssuerAndSerialNumber({cert:e}))},this.setForContentAndHash=function(e){void 0!==e&&(e.eciObj instanceof n&&(this.dSignedAttrs.add(new i({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new s({eciObj:e.eciObj,hashAlg:e.hashAlg}))),void 0!==e.sdObj&&e.sdObj instanceof c&&-1==e.sdObj.digestAlgNameList.join(":").indexOf(e.hashAlg)&&e.sdObj.digestAlgNameList.push(e.hashAlg),"string"==typeof e.hashAlg&&(this.dDigestAlgorithm=new l({name:e.hashAlg})))},this.sign=function(e,t){this.dSigAlg=new l({name:t});var i=this.dSignedAttrs.getEncodedHex(),n=g.getKey(e),r=new u.Signature({alg:t});r.init(n),r.updateHex(i);var a=r.sign();this.dSig=new o.DEROctetString({hex:a})},this.addUnsigned=function(e){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(e)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof a&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var e=new r({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),t=null;0<this.dUnsignedAttrs.length()&&(t=new r({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var i=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,e,this.dSigAlg,this.dSig];null!=t&&i.push(t);var n=new o.DERSequence({array:i});return this.hTLV=n.getEncodedHex(),this.hTLV}},YAHOO.lang.extend(KJUR.asn1.cms.SignerInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.EncapsulatedContentInfo=function(e){var t=KJUR.asn1,n=t.DERTaggedObject,r=t.DERSequence,i=t.DERObjectIdentifier,a=t.DEROctetString;t.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.dEContentType=new i({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(e){e.match(/^[0-2][.][0-9.]+$/)?this.dEContentType=new i({oid:e}):this.dEContentType=new i({name:e})},this.setContentValue=function(e){void 0!==e&&("string"==typeof e.hex?this.eContentValueHex=e.hex:"string"==typeof e.str&&(this.eContentValueHex=utf8tohex(e.str)))},this.setContentValueHex=function(e){this.eContentValueHex=e},this.setContentValueStr=function(e){this.eContentValueHex=utf8tohex(e)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var e=new a({hex:this.eContentValueHex});this.dEContent=new n({obj:e,tag:"a0",explicit:!0});var t=[this.dEContentType];this.isDetached||t.push(this.dEContent);var i=new r({array:t});return this.hTLV=i.getEncodedHex(),this.hTLV}},YAHOO.lang.extend(KJUR.asn1.cms.EncapsulatedContentInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.ContentInfo=function(e){var t=KJUR.asn1,i=t.DERTaggedObject,n=t.DERSequence,r=t.x509;KJUR.asn1.cms.ContentInfo.superclass.constructor.call(this),this.dContentType=null,this.dContent=null,this.setContentType=function(e){"string"==typeof e&&(this.dContentType=r.OID.name2obj(e))},this.getEncodedHex=function(){var e=new i({obj:this.dContent,tag:"a0",explicit:!0}),t=new n({array:[this.dContentType,e]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&(e.type&&this.setContentType(e.type),e.obj&&e.obj instanceof t.ASN1Object&&(this.dContent=e.obj))},YAHOO.lang.extend(KJUR.asn1.cms.ContentInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SignedData=function(e){var t=KJUR.asn1,n=t.ASN1Object,i=t.DERInteger,c=t.DERSet,l=t.DERSequence,u=t.DERTaggedObject,r=t.cms,a=r.EncapsulatedContentInfo,o=r.SignerInfo,s=r.ContentInfo,g=t.x509.AlgorithmIdentifier;KJUR.asn1.cms.SignedData.superclass.constructor.call(this),this.dCMSVersion=new i({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new a,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new o],this.addCertificatesByPEM=function(e){var t=pemtohex(e),i=new n;i.hTLV=t,this.certificateList.push(i)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var e=[],t=0;t<this.digestAlgNameList.length;t++){var i=this.digestAlgNameList[t],n=new g({name:i});e.push(n)}this.dDigestAlgs=new c({array:e})}var r,a=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];null==this.dCerts&&0<this.certificateList.length&&(r=new c({array:this.certificateList}),this.dCerts=new u({obj:r,tag:"a0",explicit:!1})),null!=this.dCerts&&a.push(this.dCerts);var o=new c({array:this.signerInfoList});a.push(o);var s=new l({array:a});return this.hTLV=s.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new s({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){return hextopem(this.getContentInfoEncodedHex(),"CMS")}},YAHOO.lang.extend(KJUR.asn1.cms.SignedData,KJUR.asn1.ASN1Object),KJUR.asn1.cms.CMSUtil=new function(){},KJUR.asn1.cms.CMSUtil.newSignedData=function(e){var t=KJUR.asn1,i=t.cms,n=i.SignerInfo,r=i.SignedData,a=i.SigningTime,o=i.SigningCertificate,s=i.SigningCertificateV2,c=t.cades.SignaturePolicyIdentifier,l=new r;if(l.dEncapContentInfo.setContentValue(e.content),"boolean"==typeof e.detached&&(l.dEncapContentInfo.isDetached=e.detached),"object"==typeof e.certs)for(var u=0;u<e.certs.length;u++)l.addCertificatesByPEM(e.certs[u]);l.signerInfoList=[];for(u=0;u<e.signerInfos.length;u++){var g=e.signerInfos[u],d=new n;for(attrName in d.setSignerIdentifier(g.signerCert),d.setForContentAndHash({sdObj:l,eciObj:l.dEncapContentInfo,hashAlg:g.hashAlg}),g.sAttr){var h,p=g.sAttr[attrName];"SigningTime"==attrName&&(h=new a(p),d.dSignedAttrs.add(h)),"SigningCertificate"==attrName&&(h=new o(p),d.dSignedAttrs.add(h)),"SigningCertificateV2"==attrName&&(h=new s(p),d.dSignedAttrs.add(h)),"SignaturePolicyIdentifier"==attrName&&(h=new c(p),d.dSignedAttrs.add(h))}d.sign(g.signerPrvKey,g.sigAlg),l.signerInfoList.push(d)}return l},KJUR.asn1.cms.CMSUtil.verifySignedData=function(e){var t=KJUR.asn1,i=t.cms,n=(i.SignerInfo,i.SignedData,i.SigningTime,i.SigningCertificate,i.SigningCertificateV2,t.cades.SignaturePolicyIdentifier,KJUR.lang.String.isHex),c=ASN1HEX.getVbyList,a=ASN1HEX.getTLVbyList,o=ASN1HEX.getIdxbyList,h=ASN1HEX.getChildIdx,p=ASN1HEX.getTLV,s=ASN1HEX.oidname,f=KJUR.crypto.Util.hashHex;void 0===e.cms&&n(e.cms);var r=e.cms,l=function(e,t){var i=t.idx;t.signerid_issuer1=a(e,i,[1,0],"30"),t.signerid_serial1=c(e,i,[1,1],"02"),t.hashalg=s(c(e,i,[2,0],"06"));var n=o(e,i,[3],"a0");t.idxSignedAttrs=n,u(e,t,n);var r=h(e,i).length;if(r<6)throw"malformed SignerInfo";t.sigalg=s(c(e,i,[r-2,0],"06")),t.sigval=c(e,i,[r-1],"04")},u=function(e,t,i){var n=h(e,i);t.signedAttrIdxList=n;for(var r=0;r<n.length;r++){var a,o=n[r],s=c(e,o,[0],"06");"2a864886f70d010905"===s?(a=hextoutf8(c(e,o,[1,0])),t.saSigningTime=a):"2a864886f70d010904"===s&&(a=c(e,o,[1,0],"04"),t.saMessageDigest=a)}},g=function(e,t,i,n){i.verifyDetail={};var r=i.verifyDetail,a=t.parse.econtent,o=i.hashalg,s=i.saMessageDigest;r.validMessageDigest=!1,f(a,o)===s&&(r.validMessageDigest=!0),function(e,t,i){var n,r=t.parse.certsIdx;if(void 0===t.certs){n=[],t.certkeys=[];for(var a=h(e,r),o=0;o<a.length;o++){var s=p(e,a[o]),c=new X509;c.readCertHex(s),n[o]=c,t.certkeys[o]=c.getPublicKey()}t.certs=n}else n=t.certs;t.cccc=n.length,t.cccci=a.length;for(o=0;o<n.length;o++){var l=c.getIssuerHex(),u=c.getSerialNumberHex();i.signerid_issuer1===l&&i.signerid_serial1===u&&(i.certkey_idx=o)}}(e,t,i),r.validSignatureValue=!1;var c=i.sigalg,l="31"+p(e,i.idxSignedAttrs).substr(2);i.signedattrshex=l;var u=t.certs[i.certkey_idx].getPublicKey(),g=new KJUR.crypto.Signature({alg:c});g.init(u),g.updateHex(l);var d=g.verify(i.sigval);!0===(r.validSignatureValue_isValid=d)&&(r.validSignatureValue=!0),i.isValid=!1,r.validMessageDigest&&r.validSignatureValue&&(i.isValid=!0)},d={isValid:!1,parse:{}};return function(e,t){if("2a864886f70d010702"!==c(e,0,[0],"06"))return;t.cmsType="signedData",t.econtent=c(e,0,[1,0,2,1,0]),function(e,t){for(var i,n,r=3;r<6;r++){void 0!==(n=o(e,0,[1,0,r]))&&("a0"===(i=e.substr(n,2))&&(t.certsIdx=n),"a1"===i&&(t.revinfosIdx=n),"31"===i&&(t.signerinfosIdx=n))}}(e,t),t.signerInfos=[],function(e,t){var i=t.signerinfosIdx;if(void 0!==i){var n=h(e,i);t.signerInfoIdxList=n;for(var r=0;r<n.length;r++){var a={idx:n[r]};l(e,a),t.signerInfos.push(a)}}}(e,t)}(r,d.parse),function(e,t){for(var i=t.parse.signerInfos,n=i.length,r=!0,a=0;a<n;a++){var o=i[a];g(e,t,o,a),o.isValid||(r=!1)}t.isValid=r}(r,d),d},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),void 0!==KJUR.asn1.tsp&&KJUR.asn1.tsp||(KJUR.asn1.tsp={}),KJUR.asn1.tsp.Accuracy=function(e){var t=KJUR.asn1,s=t.DERInteger,c=t.DERSequence,l=t.DERTaggedObject;t.tsp.Accuracy.superclass.constructor.call(this),this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var e,t,i,n=null,r=null,a=[];null!=this.seconds&&(e=new s({int:this.seconds}),a.push(e)),null!=this.millis&&(t=new s({int:this.millis}),n=new l({obj:t,tag:"80",explicit:!1}),a.push(n)),null!=this.micros&&(i=new s({int:this.micros}),r=new l({obj:i,tag:"81",explicit:!1}),a.push(r));var o=new c({array:a});return this.hTLV=o.getEncodedHex(),this.hTLV},void 0!==e&&("number"==typeof e.seconds&&(this.seconds=e.seconds),"number"==typeof e.millis&&(this.millis=e.millis),"number"==typeof e.micros&&(this.micros=e.micros))},YAHOO.lang.extend(KJUR.asn1.tsp.Accuracy,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.MessageImprint=function(e){var t=KJUR.asn1,i=t.DERSequence,n=t.DEROctetString,r=t.x509.AlgorithmIdentifier;t.tsp.MessageImprint.superclass.constructor.call(this),this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new i({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==e&&("string"==typeof e.hashAlg&&(this.dHashAlg=new r({name:e.hashAlg})),"string"==typeof e.hashValue&&(this.dHashValue=new n({hex:e.hashValue})))},YAHOO.lang.extend(KJUR.asn1.tsp.MessageImprint,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.TimeStampReq=function(e){var t=KJUR.asn1,i=t.DERSequence,n=t.DERInteger,r=t.DERBoolean,a=t.DERObjectIdentifier,o=t.tsp,s=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.dVersion=new n({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(e){e instanceof s?this.dMessageImprint=e:"object"==typeof e&&(this.dMessageImprint=new s(e))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var e=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&e.push(this.dPolicy),null!=this.dNonce&&e.push(this.dNonce),this.certReq&&e.push(new r);var t=new i({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.mi&&this.setMessageImprint(e.mi),"object"==typeof e.policy&&(this.dPolicy=new a(e.policy)),"object"==typeof e.nonce&&(this.dNonce=new n(e.nonce)),"boolean"==typeof e.certreq&&(this.certReq=e.certreq))},YAHOO.lang.extend(KJUR.asn1.tsp.TimeStampReq,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.TSTInfo=function(e){var t=KJUR.asn1,i=t.DERSequence,n=t.DERInteger,r=t.DERBoolean,a=t.DERGeneralizedTime,o=t.DERObjectIdentifier,s=t.tsp,c=s.MessageImprint,l=s.Accuracy,u=t.x509.X500Name;if(s.TSTInfo.superclass.constructor.call(this),this.dVersion=new n({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var e=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(e.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(e.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(e.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";e.push(this.dGenTime),null!=this.dAccuracy&&e.push(this.dAccuracy),null!=this.dOrdering&&e.push(this.dOrdering),null!=this.dNonce&&e.push(this.dNonce),null!=this.dTsa&&e.push(this.dTsa);var t=new i({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e){if("string"==typeof e.policy){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:e.policy})}void 0!==e.messageImprint&&(this.dMessageImprint=new c(e.messageImprint)),void 0!==e.serialNumber&&(this.dSerialNumber=new n(e.serialNumber)),void 0!==e.genTime&&(this.dGenTime=new a(e.genTime)),void 0!==e.accuracy&&(this.dAccuracy=new l(e.accuracy)),void 0!==e.ordering&&1==e.ordering&&(this.dOrdering=new r),void 0!==e.nonce&&(this.dNonce=new n(e.nonce)),void 0!==e.tsa&&(this.dTsa=new u(e.tsa))}},YAHOO.lang.extend(KJUR.asn1.tsp.TSTInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.TimeStampResp=function(e){var t=KJUR.asn1,i=t.DERSequence,n=t.ASN1Object,r=t.tsp,a=r.PKIStatusInfo;r.TimeStampResp.superclass.constructor.call(this),this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var e=[this.dStatus];null!=this.dTST&&e.push(this.dTST);var t=new i({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.status&&(this.dStatus=new a(e.status)),void 0!==e.tst&&e.tst instanceof n&&(this.dTST=e.tst.getContentInfo()))},YAHOO.lang.extend(KJUR.asn1.tsp.TimeStampResp,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIStatusInfo=function(e){var t=KJUR.asn1,i=t.DERSequence,n=t.tsp,r=n.PKIStatus,a=n.PKIFreeText,o=n.PKIFailureInfo;n.PKIStatusInfo.superclass.constructor.call(this),this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var e=[this.dStatus];null!=this.dStatusString&&e.push(this.dStatusString),null!=this.dFailureInfo&&e.push(this.dFailureInfo);var t=new i({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.status&&(this.dStatus=new r(e.status)),"object"==typeof e.statstr&&(this.dStatusString=new a({array:e.statstr})),"object"==typeof e.failinfo&&(this.dFailureInfo=new o(e.failinfo)))},YAHOO.lang.extend(KJUR.asn1.tsp.PKIStatusInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIStatus=function(e){var t=KJUR.asn1,i=t.DERInteger,n=t.tsp,r=n.PKIStatus;if(n.PKIStatus.superclass.constructor.call(this),this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==e)if(void 0!==e.name){var a=r.valueList;if(void 0===a[e.name])throw"name undefined: "+e.name;this.dStatus=new i({int:a[e.name]})}else this.dStatus=new i(e)},YAHOO.lang.extend(KJUR.asn1.tsp.PKIStatus,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},KJUR.asn1.tsp.PKIFreeText=function(e){var t=KJUR.asn1,n=t.DERSequence,r=t.DERUTF8String;t.tsp.PKIFreeText.superclass.constructor.call(this),this.textList=[],this.getEncodedHex=function(){for(var e=[],t=0;t<this.textList.length;t++)e.push(new r({str:this.textList[t]}));var i=new n({array:e});return this.hTLV=i.getEncodedHex(),this.hTLV},void 0!==e&&"object"==typeof e.array&&(this.textList=e.array)},YAHOO.lang.extend(KJUR.asn1.tsp.PKIFreeText,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIFailureInfo=function(e){var t=KJUR.asn1,i=t.DERBitString,n=t.tsp.PKIFailureInfo;if(n.superclass.constructor.call(this),this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var e=new Number(this.value).toString(2),t=new i;return t.setByBinaryString(e),this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e)if("string"==typeof e.name){var r=n.valueList;if(void 0===r[e.name])throw"name undefined: "+e.name;this.value=r[e.name]}else"number"==typeof e.int&&(this.value=e.int)},YAHOO.lang.extend(KJUR.asn1.tsp.PKIFailureInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},KJUR.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(e,t){throw"not implemented yet"}},KJUR.asn1.tsp.SimpleTSAAdapter=function(e){var r=KJUR.asn1.tsp,a=KJUR.crypto.Util.hashHex;r.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(e,t){var i=a(e,t);this.params.tstInfo.messageImprint={hashAlg:t,hashValue:i},this.params.tstInfo.serialNumber={int:this.serial++};var n=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:n},r.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},YAHOO.lang.extend(KJUR.asn1.tsp.SimpleTSAAdapter,KJUR.asn1.tsp.AbstractTSAAdapter),KJUR.asn1.tsp.FixedTSAAdapter=function(e){var n=KJUR.asn1.tsp,r=KJUR.crypto.Util.hashHex;n.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(e,t){var i=r(e,t);return this.params.tstInfo.messageImprint={hashAlg:t,hashValue:i},n.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},YAHOO.lang.extend(KJUR.asn1.tsp.FixedTSAAdapter,KJUR.asn1.tsp.AbstractTSAAdapter),KJUR.asn1.tsp.TSPUtil=new function(){},KJUR.asn1.tsp.TSPUtil.newTimeStampToken=function(e){var t=KJUR.asn1,i=t.cms,n=(t.tsp,t.tsp.TSTInfo),r=new i.SignedData,a=new n(e.tstInfo).getEncodedHex();if(r.dEncapContentInfo.setContentValue({hex:a}),r.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof e.certs)for(var o=0;o<e.certs.length;o++)r.addCertificatesByPEM(e.certs[o]);var s=r.signerInfoList[0];s.setSignerIdentifier(e.signerCert),s.setForContentAndHash({sdObj:r,eciObj:r.dEncapContentInfo,hashAlg:e.hashAlg});var c=new i.SigningCertificate({array:[e.signerCert]});return s.dSignedAttrs.add(c),s.sign(e.signerPrvKey,e.sigAlg),r},KJUR.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){var t=ASN1HEX,i=t.getChildIdx,n=t.getV,r=t.getTLV,a={certreq:!1},o=i(e,0);if(o.length<2)throw"TimeStampReq must have at least 2 items";var s=r(e,o[1]);a.mi=KJUR.asn1.tsp.TSPUtil.parseMessageImprint(s);for(var c=2;c<o.length;c++){var l,u=o[c],g=e.substr(u,2);"06"==g&&(l=n(e,u),a.policy=t.hextooidstr(l)),"02"==g&&(a.nonce=n(e,u)),"01"==g&&(a.certreq=!0)}return a},KJUR.asn1.tsp.TSPUtil.parseMessageImprint=function(e){var t=ASN1HEX,i=t.getChildIdx,n=t.getV,r=t.getIdxbyList,a={};if("30"!=e.substr(0,2))throw"head of messageImprint hex shall be '30'";i(e,0);var o=n(e,r(e,0,[0,0])),s=t.hextooidstr(o),c=KJUR.asn1.x509.OID.oid2name(s);if(""==c)throw"hashAlg name undefined: "+s;var l=c,u=r(e,0,[1]);return a.hashAlg=l,a.hashValue=n(e,u),a},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),void 0!==KJUR.asn1.cades&&KJUR.asn1.cades||(KJUR.asn1.cades={}),KJUR.asn1.cades.SignaturePolicyIdentifier=function(e){var t,i=KJUR.asn1,n=i.DERObjectIdentifier,r=i.DERSequence,a=i.cades,o=a.OtherHashAlgAndValue;a.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15",void 0!==e&&"string"==typeof e.oid&&"object"==typeof e.hash&&(t=new r({array:[new n({oid:e.oid}),new o(e.hash)]}),this.valueList=[t])},YAHOO.lang.extend(KJUR.asn1.cades.SignaturePolicyIdentifier,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.OtherHashAlgAndValue=function(e){var t=KJUR.asn1,i=t.DERSequence,n=t.DEROctetString,r=t.x509.AlgorithmIdentifier;t.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var e=new i({array:[this.dAlg,this.dHash]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&"string"==typeof e.alg&&"string"==typeof e.hash&&(this.dAlg=new r({name:e.alg}),this.dHash=new n({hex:e.hash}))},YAHOO.lang.extend(KJUR.asn1.cades.OtherHashAlgAndValue,KJUR.asn1.ASN1Object),KJUR.asn1.cades.SignatureTimeStamp=function(e){var t=KJUR.asn1,i=t.ASN1Object;t.x509;if(t.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null,void 0!==e){if(void 0!==e.res&&!("string"==typeof e.res&&e.res.match(/^[0-9A-Fa-f]+$/)||e.res instanceof i))throw"res param shall be ASN1Object or hex string";if(void 0!==e.tst)if("string"==typeof e.tst&&e.tst.match(/^[0-9A-Fa-f]+$/)){var n=new i;this.tstHex=e.tst,n.hTLV=this.tstHex,n.getEncodedHex(),this.valueList=[n]}else if(!(e.tst instanceof i))throw"tst param shall be ASN1Object or hex string"}},YAHOO.lang.extend(KJUR.asn1.cades.SignatureTimeStamp,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.CompleteCertificateRefs=function(e){var n=KJUR.asn1.cades;n.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21",this.setByArray=function(e){this.valueList=[];for(var t=0;t<e.length;t++){var i=new n.OtherCertID(e[t]);this.valueList.push(i)}},void 0!==e&&"object"==typeof e&&"number"==typeof e.length&&this.setByArray(e)},YAHOO.lang.extend(KJUR.asn1.cades.CompleteCertificateRefs,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.OtherCertID=function(e){var i=KJUR.asn1,t=i.cms,n=i.cades;n.OtherCertID.superclass.constructor.call(this),this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(e){this.dOtherCertHash=new n.OtherHash(e),this.hasIssuerSerial&&(this.dIssuerSerial=new t.IssuerAndSerialNumber(e))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var e=[this.dOtherCertHash];null!=this.dIssuerSerial&&e.push(this.dIssuerSerial);var t=new i.DERSequence({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&this.setByCertPEM(e),"object"==typeof e&&(!1===e.hasis&&(this.hasIssuerSerial=!1),"string"==typeof e.cert&&this.setByCertPEM(e.cert)))},YAHOO.lang.extend(KJUR.asn1.cades.OtherCertID,KJUR.asn1.ASN1Object),KJUR.asn1.cades.OtherHash=function(e){var t=KJUR.asn1,i=(t.cms,t.cades),n=i.OtherHashAlgAndValue,r=KJUR.crypto.Util.hashHex;if(i.OtherHash.superclass.constructor.call(this),this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(e){if(-1==e.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var t=pemtohex(e),i=r(t,this.alg);this.dOtherHash=new n({alg:this.alg,hash:i})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==e)if("string"==typeof e)if(-1!=e.indexOf("-----BEGIN "))this.setByCertPEM(e);else{if(!e.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new t.DEROctetString({hex:e})}else"object"==typeof e&&("string"==typeof e.cert?("string"==typeof e.alg&&(this.alg=e.alg),this.setByCertPEM(e.cert)):this.dOtherHash=new n(e))},YAHOO.lang.extend(KJUR.asn1.cades.OtherHash,KJUR.asn1.ASN1Object),KJUR.asn1.cades.CAdESUtil=new function(){},KJUR.asn1.cades.CAdESUtil.addSigTS=function(e,t,i){},KJUR.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){var t=ASN1HEX.getChildIdx,i=ASN1HEX.getTLV,n=ASN1HEX.getTLVbyList,r=(ASN1HEX.getTLVbyListEx,ASN1HEX.getIdxbyList),a=(ASN1HEX.getIdxbyListEx,KJUR.asn1),o=a.ASN1Object,s=a.cms.SignedData,c=a.cades.CAdESUtil,l={};if("06092a864886f70d010702"!=n(e,0,[0]))throw"hex is not CMS SignedData";var u=t(e,r(e,0,[1,0]));if(u.length<4)throw"num of SignedData elem shall be 4 at least";var g=u.shift();l.version=i(e,g);var d=u.shift();l.algs=i(e,d);var h=u.shift();l.encapcontent=i(e,h),l.certs=null,l.revs=null,l.si=[];var p=u.shift();"a0"==e.substr(p,2)&&(l.certs=i(e,p),p=u.shift()),"a1"==e.substr(p,2)&&(l.revs=i(e,p),p=u.shift());var f=p;if("31"!=e.substr(f,2))throw"Can't find signerInfos";for(var I=t(e,f),b=0;b<I.length;b++){var m=I[b],y=c.parseSignerInfoForAddingUnsigned(e,m,b);l.si[b]=y}var C=null;l.obj=new s,(C=new o).hTLV=l.version,l.obj.dCMSVersion=C,(C=new o).hTLV=l.algs,l.obj.dDigestAlgs=C,(C=new o).hTLV=l.encapcontent,l.obj.dEncapContentInfo=C,(C=new o).hTLV=l.certs,l.obj.dCerts=C,l.obj.signerInfoList=[];for(b=0;b<l.si.length;b++)l.obj.signerInfoList.push(l.si[b].obj);return l},KJUR.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,i){var n=ASN1HEX.getChildIdx,r=ASN1HEX.getTLV,a=ASN1HEX.getV,o=KJUR.asn1,s=o.ASN1Object,c=o.cms,l=c.AttributeList,u=c.SignerInfo,g={},d=n(e,t);if(6!=d.length)throw"not supported items for SignerInfo (!=6)";var h=d.shift();g.version=r(e,h);var p=d.shift();g.si=r(e,p);var f=d.shift();g.digalg=r(e,f);var I=d.shift();g.sattrs=r(e,I);var b=d.shift();g.sigalg=r(e,b);var m=d.shift();g.sig=r(e,m),g.sigval=a(e,m);var y=null;return g.obj=new u,(y=new s).hTLV=g.version,g.obj.dCMSVersion=y,(y=new s).hTLV=g.si,g.obj.dSignerIdentifier=y,(y=new s).hTLV=g.digalg,g.obj.dDigestAlgorithm=y,(y=new s).hTLV=g.sattrs,g.obj.dSignedAttrs=y,(y=new s).hTLV=g.sigalg,g.obj.dSigAlg=y,(y=new s).hTLV=g.sig,g.obj.dSig=y,g.obj.dUnsignedAttrs=new l,g},void 0!==KJUR.asn1.csr&&KJUR.asn1.csr||(KJUR.asn1.csr={}),KJUR.asn1.csr.CertificationRequest=function(e){var r=KJUR,t=r.asn1,a=t.DERBitString,o=t.DERSequence,i=t.csr,s=t.x509;i.CertificationRequest.superclass.constructor.call(this),this.sign=function(e,t){null==this.prvKey&&(this.prvKey=t),this.asn1SignatureAlg=new s.AlgorithmIdentifier({name:e});var i=new r.crypto.Signature({alg:e});i.init(this.prvKey),i.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=i.sign(),this.asn1Sig=new a({hex:"00"+this.hexSig});var n=new o({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=n.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return hextopem(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==e&&void 0!==e.csrinfo&&(this.asn1CSRInfo=e.csrinfo)},YAHOO.lang.extend(KJUR.asn1.csr.CertificationRequest,KJUR.asn1.ASN1Object),KJUR.asn1.csr.CertificationRequestInfo=function(e){var t=KJUR.asn1,i=t.DERInteger,a=t.DERSequence,o=t.DERSet,s=t.DERNull,c=t.DERTaggedObject,l=t.DERObjectIdentifier,n=t.csr,r=t.x509,u=r.X500Name,g=r.Extension,d=KEYUTIL;n.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new i({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(e){this.asn1Subject=new u(e)},this.setSubjectPublicKeyByGetKey=function(e){var t=d.getKey(e);this.asn1SubjPKey=new r.SubjectPublicKeyInfo(t)},this.appendExtensionByName=function(e,t){g.appendByNameToArray(e,t,this.extensionsArray)},this.getEncodedHex=function(){var e,t,i,n;this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),n=0<this.extensionsArray.length?(e=new a({array:this.extensionsArray}),t=new o({array:[e]}),i=new a({array:[new l({oid:"1.2.840.113549.1.9.14"}),t]}),new c({explicit:!0,tag:"a0",obj:i})):new c({explicit:!1,tag:"a0",obj:new s}),this.asn1Array.push(n);var r=new a({array:this.asn1Array});return this.hTLV=r.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},YAHOO.lang.extend(KJUR.asn1.csr.CertificationRequestInfo,KJUR.asn1.ASN1Object),KJUR.asn1.csr.CSRUtil=new function(){},KJUR.asn1.csr.CSRUtil.newCSRPEM=function(e){var t=KEYUTIL,i=KJUR.asn1.csr;if(void 0===e.subject)throw"parameter subject undefined";if(void 0===e.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===e.sigalg)throw"parameter sigalg undefined";if(void 0===e.sbjprvkey)throw"parameter sbjpubkey undefined";var n=new i.CertificationRequestInfo;if(n.setSubjectByParam(e.subject),n.setSubjectPublicKeyByGetKey(e.sbjpubkey),void 0!==e.ext&&void 0!==e.ext.length)for(var r=0;r<e.ext.length;r++)for(key in e.ext[r])n.appendExtensionByName(key,e.ext[r][key]);var a=new i.CertificationRequest({csrinfo:n}),o=t.getKey(e.sbjprvkey);return a.sign(e.sigalg,o),a.getPEMString()},KJUR.asn1.csr.CSRUtil.getInfo=function(e){var t=ASN1HEX.getTLVbyListEx,i={subject:{},pubkey:{}};if(-1==e.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var n=pemtohex(e,"CERTIFICATE REQUEST");try{i.subject.hex=t(n,0,[0,1])}catch(e){}try{i.subject.name=X509.hex2dn(i.subject.hex)}catch(e){}i.pubkey.hex=t(n,0,[0,2]),i.pubkey.obj=KEYUTIL.getKey(i.pubkey.hex,null,"pkcs8pub");try{i.ext=[];var r=new X509;r.parseExt(e),i.ext.push({subjectAltName:{array:r.getExtSubjectAltName2()}})}catch(e){}return i},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),void 0!==KJUR.asn1.ocsp&&KJUR.asn1.ocsp||(KJUR.asn1.ocsp={}),KJUR.asn1.ocsp.DEFAULT_HASH="sha1",KJUR.asn1.ocsp.CertID=function(e){var t=KJUR.asn1,r=t.DEROctetString,a=t.DERInteger,i=t.DERSequence,o=t.x509.AlgorithmIdentifier,n=t.ocsp,u=n.DEFAULT_HASH,g=KJUR.crypto.Util.hashHex,d=X509,h=ASN1HEX;if(n.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(e,t,i,n){void 0===n&&(n=u),this.dHashAlg=new o({name:n}),this.dIssuerNameHash=new r({hex:e}),this.dIssuerKeyHash=new r({hex:t}),this.dSerialNumber=new a({hex:i})},this.setByCert=function(e,t,i){void 0===i&&(i=u);var n=new d;n.readCertPEM(t);var r=new d;r.readCertPEM(e);var a=r.getPublicKeyHex(),o=h.getTLVbyList(a,0,[1,0],"30"),s=n.getSerialNumberHex(),c=g(r.getSubjectHex(),i),l=g(o,i);this.setByValue(c,l,s,i),this.hoge=n.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var e=[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber],t=new i({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e){var s=e;if(void 0!==s.issuerCert&&void 0!==s.subjectCert){var c=u;void 0===s.alg&&(c=void 0),this.setByCert(s.issuerCert,s.subjectCert,c)}else{if(void 0===s.namehash||void 0===s.keyhash||void 0===s.serial)throw"invalid constructor arguments";c=u;void 0===s.alg&&(c=void 0),this.setByValue(s.namehash,s.keyhash,s.serial,c)}}},YAHOO.lang.extend(KJUR.asn1.ocsp.CertID,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.Request=function(e){var t,i=KJUR.asn1,n=i.DERSequence,r=i.ocsp;r.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var e=[];if(null===this.dReqCert)throw"reqCert not set";e.push(this.dReqCert);var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&(t=new r.CertID(e),this.dReqCert=t)},YAHOO.lang.extend(KJUR.asn1.ocsp.Request,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.TBSRequest=function(e){var t=KJUR.asn1,n=t.DERSequence,r=t.ocsp;r.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(e){for(var t=[],i=0;i<e.length;i++){var n=new r.Request(e[0]);t.push(n)}this.dRequestList=t},this.getEncodedHex=function(){var e=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var t=new n({array:this.dRequestList});if(e.push(t),null!==this.dRequestExt)throw"requestExtensions not supported";var i=new n({array:e});return this.hTLV=i.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.reqList&&this.setRequestListByParam(e.reqList)},YAHOO.lang.extend(KJUR.asn1.ocsp.TBSRequest,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.OCSPRequest=function(e){var t,i=KJUR.asn1,n=i.DERSequence,r=i.ocsp;r.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var e=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(e.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.reqList&&(t=new r.TBSRequest(e),this.dTbsRequest=t)},YAHOO.lang.extend(KJUR.asn1.ocsp.OCSPRequest,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.OCSPUtil={},KJUR.asn1.ocsp.OCSPUtil.getRequestHex=function(e,t,i){var n=KJUR.asn1.ocsp;void 0===i&&(i=n.DEFAULT_HASH);var r={alg:i,issuerCert:e,subjectCert:t};return new n.OCSPRequest({reqList:[r]}).getEncodedHex()},KJUR.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var t=ASN1HEX.getVbyList,i=ASN1HEX.getVbyListEx,n=ASN1HEX.getIdxbyList,r=(ASN1HEX.getIdxbyListEx,ASN1HEX.getV),a={};try{var o=i(e,0,[0],"0a");a.responseStatus=parseInt(o,16)}catch(e){}if(0!==a.responseStatus)return a;try{var s=n(e,0,[1,0,1,0,0,2,0,1]);"80"===e.substr(s,2)?a.certStatus="good":"a1"===e.substr(s,2)?(a.certStatus="revoked",a.revocationTime=hextoutf8(t(e,s,[0]))):"82"===e.substr(s,2)&&(a.certStatus="unknown")}catch(e){}try{var c=n(e,0,[1,0,1,0,0,2,0,2]);a.thisUpdate=hextoutf8(r(e,c))}catch(e){}try{var l=n(e,0,[1,0,1,0,0,2,0,3]);"a0"===e.substr(l,2)&&(a.nextUpdate=hextoutf8(t(e,l,[0])))}catch(e){}return a},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.lang&&KJUR.lang||(KJUR.lang={}),KJUR.lang.String=function(){},b64utoutf8="function"==typeof Buffer?(utf8tob64u=function(e){return b64tob64u(new Buffer(e,"utf8").toString("base64"))},function(e){return new Buffer(b64utob64(e),"base64").toString("utf8")}):(utf8tob64u=function(e){return hextob64u(uricmptohex(encodeURIComponentAll(e)))},function(e){return decodeURIComponent(hextouricmp(b64utohex(e)))}),KJUR.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},KJUR.lang.String.isHex=function(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))},KJUR.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},KJUR.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=b64utob64(e),KJUR.lang.String.isBase64(e))},KJUR.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)};var strdiffidx=function(e,t){var i=e.length;e.length>t.length&&(i=t.length);for(var n=0;n<i;n++)if(e.charCodeAt(n)!=t.charCodeAt(n))return n;return e.length!=t.length?i:-1};void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER=JSON.parse('{"md5":"cryptojs","sha1":"cryptojs","sha224":"cryptojs","sha256":"cryptojs","sha384":"cryptojs","sha512":"cryptojs","ripemd160":"cryptojs","hmacmd5":"cryptojs","hmacsha1":"cryptojs","hmacsha224":"cryptojs","hmacsha256":"cryptojs","hmacsha384":"cryptojs","hmacsha512":"cryptojs","hmacripemd160":"cryptojs","MD5withRSA":"cryptojs/jsrsa","SHA1withRSA":"cryptojs/jsrsa","SHA224withRSA":"cryptojs/jsrsa","SHA256withRSA":"cryptojs/jsrsa","SHA384withRSA":"cryptojs/jsrsa","SHA512withRSA":"cryptojs/jsrsa","RIPEMD160withRSA":"cryptojs/jsrsa","MD5withECDSA":"cryptojs/jsrsa","SHA1withECDSA":"cryptojs/jsrsa","SHA224withECDSA":"cryptojs/jsrsa","SHA256withECDSA":"cryptojs/jsrsa","SHA384withECDSA":"cryptojs/jsrsa","SHA512withECDSA":"cryptojs/jsrsa","RIPEMD160withECDSA":"cryptojs/jsrsa","SHA1withDSA":"cryptojs/jsrsa","SHA224withDSA":"cryptojs/jsrsa","SHA256withDSA":"cryptojs/jsrsa","MD5withRSAandMGF1":"cryptojs/jsrsa","SHAwithRSAandMGF1":"cryptojs/jsrsa","SHA1withRSAandMGF1":"cryptojs/jsrsa","SHA224withRSAandMGF1":"cryptojs/jsrsa","SHA256withRSAandMGF1":"cryptojs/jsrsa","SHA384withRSAandMGF1":"cryptojs/jsrsa","SHA512withRSAandMGF1":"cryptojs/jsrsa","RIPEMD160withRSAandMGF1":"cryptojs/jsrsa"}'),this.CRYPTOJSMESSAGEDIGESTNAME={md5:CryptoJS.algo.MD5,sha1:CryptoJS.algo.SHA1,sha224:CryptoJS.algo.SHA224,sha256:CryptoJS.algo.SHA256,sha384:CryptoJS.algo.SHA384,sha512:CryptoJS.algo.SHA512,ripemd160:CryptoJS.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,i){var n=this.getDigestInfoHex(e,t),r=i/4;if(n.length+22>r)throw"key is too short for SigAlg: keylen="+i+","+t;for(var a="00"+n,o="",s=r-"0001".length-a.length,c=0;c<s;c+=2)o+="ff";return"0001"+o+a},this.hashString=function(e,t){return new KJUR.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new KJUR.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof RSAKey||e instanceof KJUR.crypto.DSA||e instanceof KJUR.crypto.ECDSA}},KJUR.crypto.Util.md5=function(e){return new KJUR.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},KJUR.crypto.Util.ripemd160=function(e){return new KJUR.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},KJUR.crypto.Util.SECURERANDOMGEN=new SecureRandom,KJUR.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return KJUR.crypto.Util.SECURERANDOMGEN.nextBytes(t),BAtohex(t)},KJUR.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new BigInteger(KJUR.crypto.Util.getRandomHexOfNbytes(e),16)},KJUR.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,i=new Array(1+(e-t)/8);return KJUR.crypto.Util.SECURERANDOMGEN.nextBytes(i),i[0]=(255<<t&255^255)&i[0],BAtohex(i)},KJUR.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new BigInteger(KJUR.crypto.Util.getRandomHexOfNbits(e),16)},KJUR.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var i=KJUR.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(i))return i}},KJUR.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var i=e.compareTo(t);if(1==i)throw"biMin is greater than biMax";if(0==i)return e;var n=t.subtract(e);return KJUR.crypto.Util.getRandomBigIntegerZeroToMax(n).add(e)},KJUR.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(t,e){if(null!==(t=KJUR.crypto.MessageDigest.getCanonicalAlgName(t))&&void 0===e&&(e=KJUR.crypto.Util.DEFAULTPROVIDER[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.md=KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=CryptoJS.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(CryptoJS.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.md=new sjcl.hash.sha256}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},KJUR.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},KJUR.crypto.MessageDigest.getHashLength=function(e){var t=KJUR.crypto.MessageDigest,i=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[i])throw"not supported algorithm: "+e;return t.HASHLENGTH[i]},KJUR.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},KJUR.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=KJUR.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var i=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(i)&&"cryptojs"==t){try{var n=KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[i];this.mac=CryptoJS.algo.HMAC.create(n,this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+i+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=CryptoJS.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(CryptoJS.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=rstrtohex(e)),void(this.pass=CryptoJS.enc.Hex.parse(t))}if("object"!=typeof e)throw"KJUR.crypto.Mac unsupported password type: "+e;t=null;if(void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=utf8tohex(e.utf8)),void 0!==e.rstr&&(t=rstrtohex(e.rstr)),void 0!==e.b64&&(t=b64tohex(e.b64)),void 0!==e.b64u&&(t=b64utohex(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=CryptoJS.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},KJUR.crypto.Signature=function(e){if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(e,t){for(var i="",n=t/4-e.length,r=0;r<n;r++)i+="0";return i+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw new Error("provider not supported: "+t);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new KJUR.crypto.MessageDigest({alg:this.mdAlgName})}catch(e){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+e)}this.init=function(e,t){var i=null;try{i=void 0===t?KEYUTIL.getKey(e):KEYUTIL.getKey(e,t)}catch(e){throw"init failed:"+e}if(!0===i.isPrivate)this.prvKey=i,this.state="SIGN";else{if(!0!==i.isPublic)throw"init failed.:"+i;this.pubKey=i,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==KJUR.crypto.ECDSA&&(this.prvKey=new KJUR.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof RSAKey&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof RSAKey&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof KJUR.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof KJUR.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==KJUR.crypto.ECDSA&&(this.pubKey=new KJUR.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof RSAKey&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof RSAKey&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==KJUR.crypto.ECDSA&&this.pubKey instanceof KJUR.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==KJUR.crypto.DSA&&this.pubKey instanceof KJUR.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},void 0!==(this.initParams=e)&&(void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov?this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{var t=KEYUTIL.getKey(e.prvkeypem);this.init(t)}catch(e){throw"fatal error to load pem private key: "+e}}},KJUR.crypto.Cipher=function(e){},KJUR.crypto.Cipher.encrypt=function(e,t,i){if(t instanceof RSAKey&&t.isPublic){var n=KJUR.crypto.Cipher.getAlgByKeyAndName(t,i);if("RSA"===n)return t.encrypt(e);if("RSAOAEP"===n)return t.encryptOAEP(e,"sha1");var r=n.match(/^RSAOAEP(\d+)$/);if(null!==r)return t.encryptOAEP(e,"sha"+r[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+i}throw"Cipher.encrypt: unsupported key or algorithm"},KJUR.crypto.Cipher.decrypt=function(e,t,i){if(t instanceof RSAKey&&t.isPrivate){var n=KJUR.crypto.Cipher.getAlgByKeyAndName(t,i);if("RSA"===n)return t.decrypt(e);if("RSAOAEP"===n)return t.decryptOAEP(e,"sha1");var r=n.match(/^RSAOAEP(\d+)$/);if(null!==r)return t.decryptOAEP(e,"sha"+r[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+i}throw"Cipher.decrypt: unsupported key or algorithm"},KJUR.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof RSAKey){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},KJUR.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.ECDSA=function(e){var r=Error,l=BigInteger,c=ECPointFp,u=KJUR.crypto.ECDSA,t=KJUR.crypto.ECParameterDB,a=u.getName,o=ASN1HEX.getVbyListEx,s=ASN1HEX.isASN1HEX,i=new SecureRandom;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new l(e.bitLength(),i).mod(e.subtract(l.ONE)).add(l.ONE)},this.setNamedCurve=function(e){this.ecparams=t.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keylen/4;if(e.length!==2+2*t)throw"malformed public key hex length";var i={};return i.x=e.substr(2,t),i.y=e.substr(2+t),i},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":null},this.generateKeyPairHex=function(){var e=this.ecparams.n,t=this.getBigRandom(e),i=this.ecparams.G.multiply(t),n=i.getX().toBigInteger(),r=i.getY().toBigInteger(),a=this.ecparams.keylen/4,o=("0000000000"+t.toString(16)).slice(-a),s="04"+("0000000000"+n.toString(16)).slice(-a)+("0000000000"+r.toString(16)).slice(-a);return this.setPrivateKeyHex(o),this.setPublicKeyHex(s),{ecprvhex:o,ecpubhex:s}},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var i=new l(t,16),n=this.ecparams.n,r=new l(e.substring(0,this.ecparams.keylen/4),16);do{var a=this.getBigRandom(n),o=this.ecparams.G.multiply(a).getX().toBigInteger().mod(n)}while(o.compareTo(l.ZERO)<=0);var s=a.modInverse(n).multiply(r.add(i.multiply(o))).mod(n);return u.biRSSigToASN1Sig(o,s)},this.sign=function(e,t){var i=t,n=this.ecparams.n,r=l.fromByteArrayUnsigned(e);do{var a=this.getBigRandom(n),o=this.ecparams.G.multiply(a).getX().toBigInteger().mod(n)}while(o.compareTo(BigInteger.ZERO)<=0);var s=a.modInverse(n).multiply(r.add(i.multiply(o))).mod(n);return this.serializeSig(o,s)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,i){try{var n=u.parseSigHex(t),r=n.r,a=n.s,o=c.decodeFromHex(this.ecparams.curve,i),s=new l(e.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(s,r,a,o)}catch(e){return!1}},this.verify=function(e,t,i){var n;if(Bitcoin.Util.isArray(t))var r=this.parseSig(t),a=r.r,o=r.s;else{if("object"!=typeof t||!t.r||!t.s)throw"Invalid value for signature";a=t.r,o=t.s}if(i instanceof ECPointFp)n=i;else{if(!Bitcoin.Util.isArray(i))throw"Invalid format for pubkey value, must be byte array or ECPointFp";n=c.decodeFrom(this.ecparams.curve,i)}var s=l.fromByteArrayUnsigned(e);return this.verifyRaw(s,a,o,n)},this.verifyRaw=function(e,t,i,n){var r=this.ecparams.n,a=this.ecparams.G;if(t.compareTo(l.ONE)<0||0<=t.compareTo(r))return!1;if(i.compareTo(l.ONE)<0||0<=i.compareTo(r))return!1;var o=i.modInverse(r),s=e.multiply(o).mod(r),c=t.multiply(o).mod(r);return a.multiply(s).add(n.multiply(c)).getX().toBigInteger().mod(r).equals(t)},this.serializeSig=function(e,t){var i=e.toByteArraySigned(),n=t.toByteArraySigned(),r=[];return r.push(2),r.push(i.length),(r=r.concat(i)).push(2),r.push(n.length),(r=r.concat(n)).unshift(r.length),r.unshift(48),r},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if((t=2)!=e[2])throw new Error("First element in signature must be a DERInteger");var i=e.slice(4,4+e[3]);if(2!=e[t+=2+e[3]])throw new Error("Second element in signature must be a DERInteger");var n=e.slice(t+2,t+2+e[t+1]);return e[t+1],{r:l.fromByteArrayUnsigned(i),s:l.fromByteArrayUnsigned(n)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||7<t)throw"Invalid signature type";var i=this.ecparams.n;return{r:l.fromByteArrayUnsigned(e.slice(1,33)).mod(i),s:l.fromByteArrayUnsigned(e.slice(33,65)).mod(i),i:t}},this.readPKCS5PrvKeyHex=function(e){if(!1===s(e))throw new Error("not ASN.1 hex string");var t,i,n;try{t=o(e,0,["[0]",0],"06"),i=o(e,0,[1],"04");try{n=o(e,0,["[1]",0],"03")}catch(e){}}catch(e){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=a(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(i),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){if(!1===s(e))throw new r("not ASN.1 hex string");var t,i,n;try{o(e,0,[1,0],"06"),t=o(e,0,[1,1],"06"),i=o(e,0,[2,0,1],"04");try{n=o(e,0,[2,0,"[1]",0],"03")}catch(e){}}catch(e){throw new r("malformed PKCS#8 plain ECC private key")}if(this.curveName=a(t),void 0===this.curveName)throw new r("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(i),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){if(!1===s(e))throw new r("not ASN.1 hex string");var t,i;try{o(e,0,[0,0],"06"),t=o(e,0,[0,1],"06"),i=o(e,0,[1],"03")}catch(e){throw new r("malformed PKCS#8 ECC public key")}if(this.curveName=a(t),null===this.curveName)throw new r("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},this.readCertPubKeyHex=function(e,t){if(!1===s(e))throw new r("not ASN.1 hex string");var i,n;try{i=o(e,0,[0,5,0,1],"06"),n=o(e,0,[0,5,1],"03")}catch(e){throw new r("malformed X.509 certificate ECC public key")}if(this.curveName=a(i),null===this.curveName)throw new r("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},KJUR.crypto.ECDSA.parseSigHex=function(e){var t=KJUR.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new BigInteger(t.r,16),s:new BigInteger(t.s,16)}},KJUR.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=ASN1HEX.getChildIdx,i=ASN1HEX.getV;if(ASN1HEX.checkStrictDER(e,0),"30"!=e.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var n=t(e,0);if(2!=n.length)throw new Error("signature shall have two elements");var r=n[0],a=n[1];if("02"!=e.substr(r,2))throw new Error("1st item not ASN.1 integer");if("02"!=e.substr(a,2))throw new Error("2nd item not ASN.1 integer");return{r:i(e,r),s:i(e,a)}},KJUR.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=KJUR.crypto.ECDSA.parseSigHexInHexRS(e),i=t.r,n=t.s;if("00"==i.substr(0,2)&&i.length%32==2&&(i=i.substr(2)),"00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),i.length%32==30&&(i="00"+i),n.length%32==30&&(n="00"+n),i.length%32!=0)throw"unknown ECDSA sig r length error";if(n.length%32!=0)throw"unknown ECDSA sig s length error";return i+n},KJUR.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var t=e.substr(0,e.length/2),i=e.substr(e.length/2);return KJUR.crypto.ECDSA.hexRSSigToASN1Sig(t,i)},KJUR.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var i=new BigInteger(e,16),n=new BigInteger(t,16);return KJUR.crypto.ECDSA.biRSSigToASN1Sig(i,n)},KJUR.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var i=KJUR.asn1,n=new i.DERInteger({bigint:e}),r=new i.DERInteger({bigint:t});return new i.DERSequence({array:[n,r]}).getEncodedHex()},KJUR.crypto.ECDSA.getName=function(e){return"2b8104001f"===e?"secp192k1":"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040021"===e?"secp224r1":"2b81040022"===e?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(e)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":null},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.ECParameterDB=new function(){var C={},A={};function v(e){return new BigInteger(e,16)}this.getByName=function(e){var t=e;if(void 0!==A[t]&&(t=A[e]),void 0!==C[t])return C[t];throw"unregistered EC curve name: "+t},this.regist=function(e,t,i,n,r,a,o,s,c,l,u,g){C[e]={};var d=v(i),h=v(n),p=v(r),f=v(a),I=v(o),b=new ECCurveFp(d,h,p),m=b.decodePointHex("04"+s+c);C[e].name=e,C[e].keylen=t,C[e].curve=b,C[e].G=m,C[e].n=f,C[e].h=I,C[e].oid=u,C[e].info=g;for(var y=0;y<l.length;y++)A[l[y]]=e}},KJUR.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),KJUR.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),KJUR.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),KJUR.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),KJUR.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),KJUR.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),KJUR.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.DSA=function(){ASN1HEX.getVbyList;var o=ASN1HEX.getVbyListEx,s=ASN1HEX.isASN1HEX,t=BigInteger;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(e,t,i,n,r){this.isPrivate=!0,this.p=e,this.q=t,this.g=i,this.y=n,this.x=r},this.setPrivateHex=function(e,t,i,n,r){var a=new BigInteger(e,16),o=new BigInteger(t,16),s=new BigInteger(i,16),c="string"==typeof n&&1<n.length?new BigInteger(n,16):null,l=new BigInteger(r,16);this.setPrivate(a,o,s,c,l)},this.setPublic=function(e,t,i,n){this.isPublic=!0,this.p=e,this.q=t,this.g=i,this.y=n,this.x=null},this.setPublicHex=function(e,t,i,n){var r=new BigInteger(e,16),a=new BigInteger(t,16),o=new BigInteger(i,16),s=new BigInteger(n,16);this.setPublic(r,a,o,s)},this.signWithMessageHash=function(e){var t=this.p,i=this.q,n=this.g,r=(this.y,this.x),a=KJUR.crypto.Util.getRandomBigIntegerMinToMax(BigInteger.ONE.add(BigInteger.ONE),i.subtract(BigInteger.ONE)),o=new BigInteger(e.substr(0,i.bitLength()/4),16),s=n.modPow(a,t).mod(i),c=a.modInverse(i).multiply(o.add(r.multiply(s))).mod(i);return KJUR.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:s}},{int:{bigint:c}}]})},this.verifyWithMessageHash=function(e,t){var i=this.p,n=this.q,r=this.g,a=this.y,o=this.parseASN1Signature(t),s=o[0],c=o[1],l=new BigInteger(e.substr(0,n.bitLength()/4),16);if(0<BigInteger.ZERO.compareTo(s)||0<s.compareTo(n))throw"invalid DSA signature";if(0<=BigInteger.ZERO.compareTo(c)||0<c.compareTo(n))throw"invalid DSA signature";var u=c.modInverse(n),g=l.multiply(u).mod(n),d=s.multiply(u).mod(n);return 0==r.modPow(g,i).multiply(a.modPow(d,i)).mod(i).mod(n).compareTo(s)},this.parseASN1Signature=function(e){try{return[new t(o(e,0,[0],"02"),16),new t(o(e,0,[1],"02"),16)]}catch(e){throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(e){var t,i,n,r,a;if(!1===s(e))throw new Error("not ASN.1 hex string");try{t=o(e,0,[1],"02"),i=o(e,0,[2],"02"),n=o(e,0,[3],"02"),r=o(e,0,[4],"02"),a=o(e,0,[5],"02")}catch(e){throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(t,i,n,r,a)},this.readPKCS8PrvKeyHex=function(e){var t,i,n,r;if(!1===s(e))throw new Error("not ASN.1 hex string");try{t=o(e,0,[1,1,0],"02"),i=o(e,0,[1,1,1],"02"),n=o(e,0,[1,1,2],"02"),r=o(e,0,[2,0],"02")}catch(e){throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(t,i,n,null,r)},this.readPKCS8PubKeyHex=function(e){var t,i,n,r;if(!1===s(e))throw new Error("not ASN.1 hex string");try{t=o(e,0,[0,1,0],"02"),i=o(e,0,[0,1,1],"02"),n=o(e,0,[0,1,2],"02"),r=o(e,0,[1,0],"02")}catch(e){throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(t,i,n,r)},this.readCertPubKeyHex=function(e,t){var i,n,r,a;if(!1===s(e))throw new Error("not ASN.1 hex string");try{i=o(e,0,[0,5,0,1,0],"02"),n=o(e,0,[0,5,0,1,1],"02"),r=o(e,0,[0,5,0,1,2],"02"),a=o(e,0,[0,5,1,0],"02")}catch(e){throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(i,n,r,a)}};var KEYUTIL=(ycb=function(e,t,i,n){var r=CryptoJS.enc.Hex.parse(t),a=CryptoJS.enc.Hex.parse(i),o=CryptoJS.enc.Hex.parse(n),s={};s.key=a,s.iv=o,s.ciphertext=r;var c=e.decrypt(s,a,{iv:o});return CryptoJS.enc.Hex.stringify(c)},Ccb=function(e,t,i,n){var r=CryptoJS.enc.Hex.parse(t),a=CryptoJS.enc.Hex.parse(i),o=CryptoJS.enc.Hex.parse(n),s=e.encrypt(r,a,{iv:o}),c=CryptoJS.enc.Hex.parse(s.toString());return CryptoJS.enc.Base64.stringify(c)},Dcb={"AES-256-CBC":{proc:vcb,eproc:zcb,keylen:32,ivlen:16},"AES-192-CBC":{proc:vcb,eproc:zcb,keylen:24,ivlen:16},"AES-128-CBC":{proc:vcb,eproc:zcb,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,t,i){return ycb(CryptoJS.TripleDES,e,t,i)},eproc:function(e,t,i){return Ccb(CryptoJS.TripleDES,e,t,i)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,t,i){return ycb(CryptoJS.DES,e,t,i)},eproc:function(e,t,i){return Ccb(CryptoJS.DES,e,t,i)},keylen:8,ivlen:8}},{version:"1.0.0",parsePKCS5PEM:Fcb,getKeyAndUnusedIvByPasscodeAndIvsalt:Gcb,decryptKeyB64:Hcb,getDecryptedKeyHex:function(e,t){var i=Fcb(e),n=i.cipher,r=i.ivsalt,a=i.data,o=Gcb(n,t,r).keyhex;return Hcb(a,n,o,r)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,i,n,r){var a,o,s;if(void 0!==n&&null!=n||(n="AES-256-CBC"),void 0===Dcb[n])throw"KEYUTIL unsupported algorithm: "+n;void 0!==r&&null!=r||(a=Dcb[n].ivlen,r=(o=a,s=CryptoJS.lib.WordArray.random(o),CryptoJS.enc.Hex.stringify(s)).toUpperCase());var c,l,u,g=Gcb(n,i,r).keyhex,d="-----BEGIN "+e+" PRIVATE KEY-----\r\n";return d+="Proc-Type: 4,ENCRYPTED\r\n",d+="DEK-Info: "+n+","+r+"\r\n",d+="\r\n",d+=(c=t,l=g,u=r,(0,Dcb[n].eproc)(c,l,u)).replace(/(.{64})/g,"$1\r\n"),d+="\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(e){var t=ASN1HEX.getChildIdx,i=ASN1HEX.getV,n={},r=t(e,0);if(2!=r.length)throw"malformed format: SEQUENCE(0).items != 2: "+r.length;n.ciphertext=i(e,r[1]);var a=t(e,r[0]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+a.length;if("2a864886f70d01050d"!=i(e,a[0]))throw"this only supports pkcs5PBES2";var o=t(e,a[1]);if(2!=a.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+o.length;var s=t(e,o[1]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+s.length;if("2a864886f70d0307"!=i(e,s[0]))throw"this only supports TripleDES";n.encryptionSchemeAlg="TripleDES",n.encryptionSchemeIV=i(e,s[1]);var c=t(e,o[0]);if(2!=c.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+c.length;if("2a864886f70d01050c"!=i(e,c[0]))throw"this only supports pkcs5PBKDF2";var l=t(e,c[1]);if(l.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+l.length;n.pbkdf2Salt=i(e,l[0]);var u=i(e,l[1]);try{n.pbkdf2Iter=parseInt(u,16)}catch(e){throw"malformed format pbkdf2Iter: "+u}return n},getPBKDF2KeyHexFromParam:function(e,t){var i=CryptoJS.enc.Hex.parse(e.pbkdf2Salt),n=e.pbkdf2Iter,r=CryptoJS.PBKDF2(t,i,{keySize:6,iterations:n});return CryptoJS.enc.Hex.stringify(r)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var i=pemtohex(e,"ENCRYPTED PRIVATE KEY"),n=this.parseHexOfEncryptedPKCS8(i),r=KEYUTIL.getPBKDF2KeyHexFromParam(n,t),a={};a.ciphertext=CryptoJS.enc.Hex.parse(n.ciphertext);var o=CryptoJS.enc.Hex.parse(r),s=CryptoJS.enc.Hex.parse(n.encryptionSchemeIV),c=CryptoJS.TripleDES.decrypt(a,o,{iv:s});return CryptoJS.enc.Hex.stringify(c)},getKeyFromEncryptedPKCS8PEM:function(e,t){var i=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(i)},parsePlainPrivatePKCS8Hex:function(e){var t=ASN1HEX,i=t.getChildIdx,n=t.getV,r={algparam:null};if("30"!=e.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var a=i(e,0);if(3!=a.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=e.substr(a[1],2))throw"malformed PKCS8 private key(code:003)";var o=i(e,a[1]);if(2!=o.length)throw"malformed PKCS8 private key(code:004)";if("06"!=e.substr(o[0],2))throw"malformed PKCS8 private key(code:005)";if(r.algoid=n(e,o[0]),"06"==e.substr(o[1],2)&&(r.algparam=n(e,o[1])),"04"!=e.substr(a[2],2))throw"malformed PKCS8 private key(code:006)";return r.keyidx=t.getVidx(e,a[2]),r},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=pemtohex(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,i=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==i.algoid)t=new RSAKey;else if("2a8648ce380401"==i.algoid)t=new KJUR.crypto.DSA;else{if("2a8648ce3d0201"!=i.algoid)throw"unsupported private key algorithm";t=new KJUR.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,i=ASN1HEX.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===i)t=new RSAKey;else if("2a8648ce380401"===i)t=new KJUR.crypto.DSA;else{if("2a8648ce3d0201"!==i)throw"unsupported PKCS#8 public key hex";t=new KJUR.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=ASN1HEX.getChildIdx,i=ASN1HEX.getV,n={};if("30"!=e.substr(0,2))throw"malformed RSA key(code:001)";var r=t(e,0);if(2!=r.length)throw"malformed RSA key(code:002)";if("02"!=e.substr(r[0],2))throw"malformed RSA key(code:003)";if(n.n=i(e,r[0]),"02"!=e.substr(r[1],2))throw"malformed RSA key(code:004)";return n.e=i(e,r[1]),n},parsePublicPKCS8Hex:function(e){var t=ASN1HEX,i=t.getChildIdx,n=t.getV,r={algparam:null},a=i(e,0);if(2!=a.length)throw"outer DERSequence shall have 2 elements: "+a.length;var o=a[0];if("30"!=e.substr(o,2))throw"malformed PKCS8 public key(code:001)";var s=i(e,o);if(2!=s.length)throw"malformed PKCS8 public key(code:002)";if("06"!=e.substr(s[0],2))throw"malformed PKCS8 public key(code:003)";if(r.algoid=n(e,s[0]),"06"==e.substr(s[1],2)?r.algparam=n(e,s[1]):"30"==e.substr(s[1],2)&&(r.algparam={},r.algparam.p=t.getVbyList(e,s[1],[0],"02"),r.algparam.q=t.getVbyList(e,s[1],[1],"02"),r.algparam.g=t.getVbyList(e,s[1],[2],"02")),"03"!=e.substr(a[1],2))throw"malformed PKCS8 public key(code:004)";return r.key=n(e,a[1]).substr(2),r}}),ycb,Ccb,Dcb;function vcb(e,t,i){return ycb(CryptoJS.AES,e,t,i)}function zcb(e,t,i){return Ccb(CryptoJS.AES,e,t,i)}function Fcb(e){var t={},i=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));i&&(t.cipher=i[1],t.ivsalt=i[2]);var n=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));n&&(t.type=n[1]);var r=-1,a=0;-1!=e.indexOf("\r\n\r\n")&&(r=e.indexOf("\r\n\r\n"),a=2),-1!=e.indexOf("\n\n")&&(r=e.indexOf("\n\n"),a=1);var o,s=e.indexOf("-----END");return-1!=r&&-1!=s&&(o=(o=e.substring(r+2*a,s-a)).replace(/\s+/g,""),t.data=o),t}function Gcb(e,t,i){for(var n=i.substring(0,16),r=CryptoJS.enc.Hex.parse(n),a=CryptoJS.enc.Utf8.parse(t),o=Dcb[e].keylen+Dcb[e].ivlen,s="",c=null;;){var l=CryptoJS.algo.MD5.create();if(null!=c&&l.update(c),l.update(a),l.update(r),c=l.finalize(),(s+=CryptoJS.enc.Hex.stringify(c)).length>=2*o)break}var u={};return u.keyhex=s.substr(0,2*Dcb[e].keylen),u.ivhex=s.substr(2*Dcb[e].keylen,2*Dcb[e].ivlen),u}function Hcb(e,t,i,n){var r=CryptoJS.enc.Base64.parse(e),a=CryptoJS.enc.Hex.stringify(r);return(0,Dcb[t].proc)(a,i,n)}KEYUTIL.getKey=function(e,t,i){var n=ASN1HEX.getChildIdx,r=(ASN1HEX.getV,ASN1HEX.getVbyList),a=KJUR.crypto,o=a.ECDSA,s=a.DSA,c=RSAKey,l=pemtohex,u=KEYUTIL;if(void 0!==c&&e instanceof c)return e;if(void 0!==o&&e instanceof o)return e;if(void 0!==s&&e instanceof s)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new o({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new o({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(E=new c).setPublic(e.n,e.e),E;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(E=new c).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),E;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(E=new c).setPrivate(e.n,e.e,e.d),E;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(E=new s).setPublic(e.p,e.q,e.g,e.y),E;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(E=new s).setPrivate(e.p,e.q,e.g,e.y,e.x),E;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(E=new c).setPublic(b64utohex(e.n),b64utohex(e.e)),E;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(E=new c).setPrivateEx(b64utohex(e.n),b64utohex(e.e),b64utohex(e.d),b64utohex(e.p),b64utohex(e.q),b64utohex(e.dp),b64utohex(e.dq),b64utohex(e.qi)),E;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(E=new c).setPrivate(b64utohex(e.n),b64utohex(e.e),b64utohex(e.d)),E;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var g=(x=new o({curve:e.crv})).ecparams.keylen/4,d="04"+("0000000000"+b64utohex(e.x)).slice(-g)+("0000000000"+b64utohex(e.y)).slice(-g);return x.setPublicKeyHex(d),x}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){var g=(x=new o({curve:e.crv})).ecparams.keylen/4,d="04"+("0000000000"+b64utohex(e.x)).slice(-g)+("0000000000"+b64utohex(e.y)).slice(-g),h=("0000000000"+b64utohex(e.d)).slice(-g);return x.setPublicKeyHex(d),x.setPrivateKeyHex(h),x}if("pkcs5prv"===i){var p=e,f=n(p,0);if(9===f.length)(E=new c).readPKCS5PrvKeyHex(p);else if(6===f.length)(E=new s).readPKCS5PrvKeyHex(p);else{if(!(2<f.length&&"04"===p.substr(f[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(E=new o).readPKCS5PrvKeyHex(p)}return E}if("pkcs8prv"===i)return E=u.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===i)return u._getKeyFromPublicPKCS8Hex(e);if("x509pub"===i)return X509.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return X509.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var I=pemtohex(e,"PUBLIC KEY");return u._getKeyFromPublicPKCS8Hex(I)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var b=l(e,"RSA PRIVATE KEY");return u.getKey(b,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var m=r(P=l(e,"DSA PRIVATE KEY"),0,[1],"02"),y=r(P,0,[2],"02"),C=r(P,0,[3],"02"),A=r(P,0,[4],"02"),v=r(P,0,[5],"02");return(E=new s).setPrivate(new BigInteger(m,16),new BigInteger(y,16),new BigInteger(C,16),new BigInteger(A,16),new BigInteger(v,16)),E}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){b=l(e,"EC PRIVATE KEY");return u.getKey(b,null,"pkcs5prv")}if(-1!=e.indexOf("-END PRIVATE KEY-"))return u.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var S=u.getDecryptedKeyHex(e,t),w=new RSAKey;return w.readPKCS5PrvKeyHex(S),w}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var x,E=r(P=u.getDecryptedKeyHex(e,t),0,[1],"04"),k=r(P,0,[2,0],"06"),T=r(P,0,[3,0],"03").substr(2);if(void 0===KJUR.crypto.OID.oidhex2name[k])throw"undefined OID(hex) in KJUR.crypto.OID: "+k;return(x=new o({curve:KJUR.crypto.OID.oidhex2name[k]})).setPublicKeyHex(T),x.setPrivateKeyHex(E),x.isPublic=!1,x}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var P,m=r(P=u.getDecryptedKeyHex(e,t),0,[1],"02"),y=r(P,0,[2],"02"),C=r(P,0,[3],"02"),A=r(P,0,[4],"02"),v=r(P,0,[5],"02");return(E=new s).setPrivate(new BigInteger(m,16),new BigInteger(y,16),new BigInteger(C,16),new BigInteger(A,16),new BigInteger(v,16)),E}if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return u.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")},KEYUTIL.generateKeypair=function(e,t){if("RSA"==e){var i=t;(o=new RSAKey).generate(i,"10001"),o.isPrivate=!0,o.isPublic=!0;var n=new RSAKey,r=o.n.toString(16),a=o.e.toString(16);return n.setPublic(r,a),n.isPrivate=!1,n.isPublic=!0,(s={}).prvKeyObj=o,s.pubKeyObj=n,s}if("EC"!=e)throw"unknown algorithm: "+e;var o,s,c=t,l=new KJUR.crypto.ECDSA({curve:c}).generateKeyPairHex();return(o=new KJUR.crypto.ECDSA({curve:c})).setPublicKeyHex(l.ecpubhex),o.setPrivateKeyHex(l.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(n=new KJUR.crypto.ECDSA({curve:c})).setPublicKeyHex(l.ecpubhex),n.isPrivate=!1,n.isPublic=!0,(s={}).prvKeyObj=o,s.pubKeyObj=n,s},KEYUTIL.getPEM=function(e,t,i,n,r,a){var o=KJUR.asn1,s=o.DERObjectIdentifier,c=o.DERInteger,l=o.ASN1Util.newObject,u=o.x509.SubjectPublicKeyInfo,g=KJUR.crypto,d=g.DSA,h=g.ECDSA,p=RSAKey;function f(e){return l({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function I(e){return l({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function b(e){return l({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==p&&e instanceof p||void 0!==d&&e instanceof d||void 0!==h&&e instanceof h)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return hextopem(A=new u(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==p&&e instanceof p&&(void 0===i||null==i)&&1==e.isPrivate)return hextopem(A=f(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==h&&e instanceof h&&(void 0===i||null==i)&&1==e.isPrivate){var m=new s({name:e.curveName}).getEncodedHex(),y=I(e).getEncodedHex(),C="";return C+=hextopem(m,"EC PARAMETERS"),C+=hextopem(y,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==d&&e instanceof d&&(void 0===i||null==i)&&1==e.isPrivate)return hextopem(A=b(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==p&&e instanceof p&&void 0!==i&&null!=i&&1==e.isPrivate){var A=f(e).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",A,i,n,a)}if("PKCS5PRV"==t&&void 0!==h&&e instanceof h&&void 0!==i&&null!=i&&1==e.isPrivate){A=I(e).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",A,i,n,a)}if("PKCS5PRV"==t&&void 0!==d&&e instanceof d&&void 0!==i&&null!=i&&1==e.isPrivate){A=b(e).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",A,i,n,a)}function v(e,t){var i=S(e,t);return new l({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:i.pbkdf2Salt}},{int:i.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:i.encryptionSchemeIV}}]}]}]},{octstr:{hex:i.ciphertext}}]}).getEncodedHex()}var S=function(e,t){var i=CryptoJS.lib.WordArray.random(8),n=CryptoJS.lib.WordArray.random(8),r=CryptoJS.PBKDF2(t,i,{keySize:6,iterations:100}),a=CryptoJS.enc.Hex.parse(e),o=CryptoJS.TripleDES.encrypt(a,r,{iv:n})+"",s={};return s.ciphertext=o,s.pbkdf2Salt=CryptoJS.enc.Hex.stringify(i),s.pbkdf2Iter=100,s.encryptionSchemeAlg="DES-EDE3-CBC",s.encryptionSchemeIV=CryptoJS.enc.Hex.stringify(n),s};if("PKCS8PRV"==t&&null!=p&&e instanceof p&&1==e.isPrivate){var w=f(e).getEncodedHex(),A=l({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:w}}]}).getEncodedHex();return void 0===i||null==i?hextopem(A,"PRIVATE KEY"):hextopem(y=v(A,i),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==h&&e instanceof h&&1==e.isPrivate){w=new l({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),A=l({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:w}}]}).getEncodedHex();return void 0===i||null==i?hextopem(A,"PRIVATE KEY"):hextopem(y=v(A,i),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==d&&e instanceof d&&1==e.isPrivate){w=new c({bigint:e.x}).getEncodedHex(),A=l({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:w}}]}).getEncodedHex();return void 0===i||null==i?hextopem(A,"PRIVATE KEY"):hextopem(y=v(A,i),"ENCRYPTED PRIVATE KEY")}throw"unsupported object nor format"},KEYUTIL.getKeyFromCSRPEM=function(e){var t=pemtohex(e,"CERTIFICATE REQUEST");return KEYUTIL.getKeyFromCSRHex(t)},KEYUTIL.getKeyFromCSRHex=function(e){var t=KEYUTIL.parseCSRHex(e);return KEYUTIL.getKey(t.p8pubkeyhex,null,"pkcs8pub")},KEYUTIL.parseCSRHex=function(e){var t=ASN1HEX.getChildIdx,i=ASN1HEX.getTLV,n={},r=e;if("30"!=r.substr(0,2))throw"malformed CSR(code:001)";var a=t(r,0);if(a.length<1)throw"malformed CSR(code:002)";if("30"!=r.substr(a[0],2))throw"malformed CSR(code:003)";var o=t(r,a[0]);if(o.length<3)throw"malformed CSR(code:004)";return n.p8pubkeyhex=i(r,o[2]),n},KEYUTIL.getKeyID=function(e){var t=KEYUTIL,i=ASN1HEX;"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&(e=t.getKey(e));var n=pemtohex(t.getPEM(e)),r=i.getIdxbyList(n,0,[1]),a=i.getV(n,r).substring(2);return KJUR.crypto.Util.hashHex(a,"sha1")},KEYUTIL.getJWKFromKey=function(e){var t,i={};if(e instanceof RSAKey&&e.isPrivate)return i.kty="RSA",i.n=hextob64u(e.n.toString(16)),i.e=hextob64u(e.e.toString(16)),i.d=hextob64u(e.d.toString(16)),i.p=hextob64u(e.p.toString(16)),i.q=hextob64u(e.q.toString(16)),i.dp=hextob64u(e.dmp1.toString(16)),i.dq=hextob64u(e.dmq1.toString(16)),i.qi=hextob64u(e.coeff.toString(16)),i;if(e instanceof RSAKey&&e.isPublic)return i.kty="RSA",i.n=hextob64u(e.n.toString(16)),i.e=hextob64u(e.e.toString(16)),i;if(e instanceof KJUR.crypto.ECDSA&&e.isPrivate){if("P-256"!==(t=e.getShortNISTPCurveName())&&"P-384"!==t)throw"unsupported curve name for JWT: "+t;var n=e.getPublicKeyXYHex();return i.kty="EC",i.crv=t,i.x=hextob64u(n.x),i.y=hextob64u(n.y),i.d=hextob64u(e.prvKeyHex),i}if(e instanceof KJUR.crypto.ECDSA&&e.isPublic){if("P-256"!==(t=e.getShortNISTPCurveName())&&"P-384"!==t)throw"unsupported curve name for JWT: "+t;n=e.getPublicKeyXYHex();return i.kty="EC",i.crv=t,i.x=hextob64u(n.x),i.y=hextob64u(n.y),i}throw"not supported key object"},RSAKey.getPosArrayOfChildrenFromHex=function(e){return ASN1HEX.getChildIdx(e,0)},RSAKey.getHexValueArrayOfChildrenFromHex=function(e){var t=ASN1HEX.getV,i=RSAKey.getPosArrayOfChildrenFromHex(e),n=t(e,i[0]),r=t(e,i[1]),a=t(e,i[2]),o=t(e,i[3]),s=t(e,i[4]),c=t(e,i[5]),l=t(e,i[6]),u=t(e,i[7]),g=t(e,i[8]);return(i=new Array).push(n,r,a,o,s,c,l,u,g),i},RSAKey.prototype.readPrivateKeyFromPEMString=function(e){var t=pemtohex(e),i=RSAKey.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8])},RSAKey.prototype.readPKCS5PrvKeyHex=function(e){var t=RSAKey.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},RSAKey.prototype.readPKCS8PrvKeyHex=function(e){var t,i,n,r,a,o,s,c,l=ASN1HEX.getVbyListEx;if(!1===ASN1HEX.isASN1HEX(e))throw new Error("not ASN.1 hex string");try{t=l(e,0,[2,0,1],"02"),i=l(e,0,[2,0,2],"02"),n=l(e,0,[2,0,3],"02"),r=l(e,0,[2,0,4],"02"),a=l(e,0,[2,0,5],"02"),o=l(e,0,[2,0,6],"02"),s=l(e,0,[2,0,7],"02"),c=l(e,0,[2,0,8],"02")}catch(e){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,i,n,r,a,o,s,c)},RSAKey.prototype.readPKCS5PubKeyHex=function(e){var t=ASN1HEX,i=t.getV;if(!1===t.isASN1HEX(e))throw"keyHex is not ASN.1 hex string";var n=t.getChildIdx(e,0);if(2!==n.length||"02"!==e.substr(n[0],2)||"02"!==e.substr(n[1],2))throw"wrong hex for PKCS#5 public key";var r=i(e,n[0]),a=i(e,n[1]);this.setPublic(r,a)},RSAKey.prototype.readPKCS8PubKeyHex=function(e){var t=ASN1HEX;if(!1===t.isASN1HEX(e))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==t.getTLVbyListEx(e,0,[0,0]))throw new Error("not PKCS8 RSA public key");var i=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(i)},RSAKey.prototype.readCertPubKeyHex=function(e,t){var i,n=new X509;n.readCertHex(e),i=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(i)};var _RE_HEXDECONLY=new RegExp("[^0-9a-f]","gi");function _zeroPaddingOfSignature(e,t){for(var i="",n=t/4-e.length,r=0;r<n;r++)i+="0";return i+e}function pss_mgf1_str(e,t,i){for(var n="",r=0;n.length<t;)n+=hextorstr(i(rstrtohex(e+String.fromCharCode.apply(String,[(4278190080&r)>>24,(16711680&r)>>16,(65280&r)>>8,255&r])))),r+=1;return n}function _rsasign_getAlgNameAndHashFromHexDisgestInfo(e){for(var t in KJUR.crypto.Util.DIGESTINFOHEAD){var i=KJUR.crypto.Util.DIGESTINFOHEAD[t],n=i.length;if(e.substring(0,n)==i)return[t,e.substring(n)]}return[]}function X509(){var i,l=ASN1HEX,u=l.getChildIdx,g=l.getV,d=l.getTLV,h=l.getVbyList,n=l.getVbyListEx,a=l.getTLVbyList,r=l.getTLVbyListEx,p=l.getIdxbyList,f=l.getVidx,I=l.oidname,e=X509,t=pemtohex;try{i=KJUR.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(e){}this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==a(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):this.version=3},this.getSerialNumberHex=function(){return h(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){var e,t=r(this.hex,0,[0,1]);for(e in i)if(t===i[e])return e;return I(n(this.hex,0,[0,1,0],"06"))},this.getIssuerHex=function(){return a(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return e.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return a(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return e.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var e=(e=h(this.hex,0,[0,4+this.foffset,0])).replace(/(..)/g,"%$1");return e=decodeURIComponent(e)},this.getNotAfter=function(){var e=(e=h(this.hex,0,[0,4+this.foffset,1])).replace(/(..)/g,"%$1");return e=decodeURIComponent(e)},this.getPublicKeyHex=function(){return l.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return p(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return p(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return KEYUTIL.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return I(h(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return h(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),i=this.getSignatureValueHex(),n=a(this.hex,0,[0],"30"),r=new KJUR.crypto.Signature({alg:t});return r.init(e),r.updateHex(n),r.verify(i)},this.parseExt=function(e){var t,i,n;if(void 0===e){if(n=this.hex,3!==this.version)return-1;t=p(n,0,[0,7,0],"30"),i=u(n,t)}else{n=pemtohex(e);var r=p(n,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=g(n,r))return void(this.aExtInfo=new Array);t=p(n,0,[0,3,0,1,0],"30"),i=u(n,t),this.hex=n}this.aExtInfo=new Array;for(var a=0;a<i.length;a++){var o={critical:!1},s=0;3===u(n,i[a]).length&&(o.critical=!0,s=1),o.oid=l.hextooidstr(h(n,i[a],[0],"06"));var c=p(n,i[a],[1+s]);o.vidx=f(n,c),this.aExtInfo.push(o)}},this.getExtInfo=function(e){var t=this.aExtInfo,i=e;if(e.match(/^[0-9.]+$/)||(i=KJUR.asn1.x509.OID.name2oid(e)),""!==i)for(var n=0;n<t.length;n++)if(t[n].oid===i)return t[n]},this.getExtBasicConstraints=function(){var e=this.getExtInfo("basicConstraints");if(void 0===e)return e;var t=g(this.hex,e.vidx);if(""===t)return{};if("0101ff"===t)return{cA:!0};if("0101ff02"!==t.substr(0,8))throw"basicConstraints parse error";var i=g(t,6);return{cA:!0,pathLen:parseInt(i,16)}},this.getExtKeyUsageBin=function(){var e=this.getExtInfo("keyUsage");if(void 0===e)return"";var t=g(this.hex,e.vidx);if(t.length%2!=0||t.length<=2)throw new Error("malformed key usage value");var i=parseInt(t.substr(0,2)),n=parseInt(t.substr(2),16).toString(2);return(n=("0000000"+n).slice(-8)).substr(0,n.length-i)},this.getExtKeyUsageString=function(){for(var e=this.getExtKeyUsageBin(),t=new Array,i=0;i<e.length;i++)"1"==e.substr(i,1)&&t.push(X509.KEYUSAGE_NAME[i]);return t.join(",")},this.getExtSubjectKeyIdentifier=function(){var e=this.getExtInfo("subjectKeyIdentifier");return void 0===e?e:g(this.hex,e.vidx)},this.getExtAuthorityKeyIdentifier=function(){var e=this.getExtInfo("authorityKeyIdentifier");if(void 0===e)return e;for(var t={},i=d(this.hex,e.vidx),n=u(i,0),r=0;r<n.length;r++)"80"===i.substr(n[r],2)&&(t.kid=g(i,n[r]));return t},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var t=new Array,i=d(this.hex,e.vidx);if(""===i)return t;for(var n=u(i,0),r=0;r<n.length;r++)t.push(I(g(i,n[r])));return t},this.getExtSubjectAltName=function(){for(var e=this.getExtSubjectAltName2(),t=new Array,i=0;i<e.length;i++)"DNS"===e[i][0]&&t.push(e[i][1]);return t},this.getExtSubjectAltName2=function(){var e,t,i,n=this.getExtInfo("subjectAltName");if(void 0===n)return n;for(var r=new Array,a=d(this.hex,n.vidx),o=u(a,0),s=0;s<o.length;s++)i=a.substr(o[s],2),e=g(a,o[s]),"81"===i&&(t=hextoutf8(e),r.push(["MAIL",t])),"82"===i&&(t=hextoutf8(e),r.push(["DNS",t])),"84"===i&&(t=X509.hex2dn(e,0),r.push(["DN",t])),"86"===i&&(t=hextoutf8(e),r.push(["URI",t])),"87"===i&&(t=hextoip(e),r.push(["IP",t]));return r},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtInfo("cRLDistributionPoints");if(void 0===e)return e;for(var t=new Array,i=u(this.hex,e.vidx),n=0;n<i.length;n++)try{var r=hextoutf8(h(this.hex,i[n],[0,0,0],"86"));t.push(r)}catch(e){}return t},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var t={ocsp:[],caissuer:[]},i=u(this.hex,e.vidx),n=0;n<i.length;n++){var r=h(this.hex,i[n],[0],"06"),a=h(this.hex,i[n],[1],"86");"2b06010505073001"===r&&t.ocsp.push(hextoutf8(a)),"2b06010505073002"===r&&t.caissuer.push(hextoutf8(a))}return t},this.getExtCertificatePolicies=function(){var e=this.getExtInfo("certificatePolicies");if(void 0===e)return e;for(var t=d(this.hex,e.vidx),i=[],n=u(t,0),r=0;r<n.length;r++){var a={},o=u(t,n[r]);if(a.id=I(g(t,o[0])),2===o.length)for(var s=u(t,o[1]),c=0;c<s.length;c++){var l=h(t,s[c],[0],"06");"2b06010505070201"===l?a.cps=hextoutf8(h(t,s[c],[1])):"2b06010505070202"===l&&(a.unotice=hextoutf8(h(t,s[c],[1,0])))}i.push(a)}return i},this.readCertPEM=function(e){this.readCertHex(t(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{p(this.hex,0,[0,7],"a3"),this.parseExt()}catch(e){}},this.getInfo=function(){var e,t,i="Basic Fields\n";if(i+="  serial number: "+this.getSerialNumberHex()+"\n",i+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",i+="  issuer: "+this.getIssuerString()+"\n",i+="  notBefore: "+this.getNotBefore()+"\n",i+="  notAfter: "+this.getNotAfter()+"\n",i+="  subject: "+this.getSubjectString()+"\n",i+="  subject public key info: \n",i+="    key algorithm: "+(e=this.getPublicKey()).type+"\n","RSA"===e.type&&(i+="    n="+hextoposhex(e.n.toString(16)).substr(0,16)+"...\n",i+="    e="+hextoposhex(e.e.toString(16))+"\n"),null!=(t=this.aExtInfo)){i+="X509v3 Extensions:\n";for(var n=0;n<t.length;n++){var r=t[n],a=KJUR.asn1.x509.OID.oid2name(r.oid);""===a&&(a=r.oid);var o="";if(!0===r.critical&&(o="CRITICAL"),i+="  "+a+" "+o+":\n","basicConstraints"===a){var s=this.getExtBasicConstraints();void 0===s.cA?i+="    {}\n":(i+="    cA=true",void 0!==s.pathLen&&(i+=", pathLen="+s.pathLen),i+="\n")}else if("keyUsage"===a)i+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===a)i+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===a){var c=this.getExtAuthorityKeyIdentifier();void 0!==c.kid&&(i+="    kid="+c.kid+"\n")}else{if("extKeyUsage"===a)i+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===a)i+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===a)i+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===a){var l=this.getExtAIAInfo();void 0!==l.ocsp&&(i+="    ocsp: "+l.ocsp.join(",")+"\n"),void 0!==l.caissuer&&(i+="    caissuer: "+l.caissuer.join(",")+"\n")}else if("certificatePolicies"===a)for(var u=this.getExtCertificatePolicies(),g=0;g<u.length;g++)void 0!==u[g].id&&(i+="    policy oid: "+u[g].id+"\n"),void 0!==u[g].cps&&(i+="    cps: "+u[g].cps+"\n")}}}return i+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n",i+="signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}RSAKey.prototype.sign=function(e,t){var i,n=(i=e,KJUR.crypto.Util.hashString(i,t));return this.signWithMessageHash(n,t)},RSAKey.prototype.signWithMessageHash=function(e,t){var i=parseBigInt(KJUR.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return _zeroPaddingOfSignature(this.doPrivate(i).toString(16),this.n.bitLength())},RSAKey.prototype.signPSS=function(e,t,i){var n,r=(n=rstrtohex(e),KJUR.crypto.Util.hashHex(n,t));return void 0===i&&(i=-1),this.signWithMessageHashPSS(r,t,i)},RSAKey.prototype.signWithMessageHashPSS=function(e,t,i){function n(e){return KJUR.crypto.Util.hashHex(e,t)}var r=hextorstr(e),a=r.length,o=this.n.bitLength()-1,s=Math.ceil(o/8);if(-1===i||void 0===i)i=a;else if(-2===i)i=s-a-2;else if(i<-2)throw"invalid salt length";if(s<a+i+2)throw"data too long";var c="";0<i&&(c=new Array(i),(new SecureRandom).nextBytes(c),c=String.fromCharCode.apply(String,c));for(var l=hextorstr(n(rstrtohex("\0\0\0\0\0\0\0\0"+r+c))),u=[],g=0;g<s-i-a-2;g+=1)u[g]=0;var d=String.fromCharCode.apply(String,u)+""+c,h=pss_mgf1_str(l,d.length,n),p=[];for(g=0;g<d.length;g+=1)p[g]=d.charCodeAt(g)^h.charCodeAt(g);var f=65280>>8*s-o&255;for(p[0]&=~f,g=0;g<a;g++)p.push(l.charCodeAt(g));return p.push(188),_zeroPaddingOfSignature(this.doPrivate(new BigInteger(p)).toString(16),this.n.bitLength())},RSAKey.prototype.verify=function(e,t){var i=parseBigInt(t=(t=t.replace(_RE_HEXDECONLY,"")).replace(/[ \n]+/g,""),16);if(i.bitLength()>this.n.bitLength())return 0;var n=_rsasign_getAlgNameAndHashFromHexDisgestInfo(this.doPublic(i).toString(16).replace(/^1f+00/,""));if(0==n.length)return!1;var r,a=n[0];return n[1]==(r=e,KJUR.crypto.Util.hashString(r,a))},RSAKey.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var i=parseBigInt(t,16);if(i.bitLength()>this.n.bitLength())return 0;var n=_rsasign_getAlgNameAndHashFromHexDisgestInfo(this.doPublic(i).toString(16).replace(/^1f+00/,""));return 0!=n.length&&n[1]==e},RSAKey.prototype.verifyPSS=function(e,t,i,n){var r,a=(r=rstrtohex(e),KJUR.crypto.Util.hashHex(r,i));return void 0===n&&(n=-1),this.verifyWithMessageHashPSS(a,t,i,n)},RSAKey.prototype.verifyWithMessageHashPSS=function(e,t,i,n){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;function r(e){return KJUR.crypto.Util.hashHex(e,i)}var a=new BigInteger(t,16),o=hextorstr(e),s=o.length,c=this.n.bitLength()-1,l=Math.ceil(c/8);if(-1===n||void 0===n)n=s;else if(-2===n)n=l-s-2;else if(n<-2)throw"invalid salt length";if(l<s+n+2)throw"data too long";for(var u=this.doPublic(a).toByteArray(),g=0;g<u.length;g+=1)u[g]&=255;for(;u.length<l;)u.unshift(0);if(188!==u[l-1])throw"encoded message does not end in 0xbc";var d=(u=String.fromCharCode.apply(String,u)).substr(0,l-s-1),h=u.substr(d.length,s),p=65280>>8*l-c&255;if(0!=(d.charCodeAt(0)&p))throw"bits beyond keysize not zero";var f=pss_mgf1_str(h,d.length,r),I=[];for(g=0;g<d.length;g+=1)I[g]=d.charCodeAt(g)^f.charCodeAt(g);I[0]&=~p;var b=l-s-n-2;for(g=0;g<b;g+=1)if(0!==I[g])throw"leftmost octets not zero";if(1!==I[b])throw"0x01 marker not found";return h===hextorstr(r(rstrtohex("\0\0\0\0\0\0\0\0"+o+String.fromCharCode.apply(String,I.slice(-n)))))},RSAKey.SALT_LEN_HLEN=-1,RSAKey.SALT_LEN_MAX=-2,RSAKey.SALT_LEN_RECOVER=-2,X509.hex2dn=function(e,t){if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw"malformed DN";for(var i=new Array,n=ASN1HEX.getChildIdx(e,t),r=0;r<n.length;r++)i.push(X509.hex2rdn(e,n[r]));return"/"+(i=i.map(function(e){return e.replace("/","\\/")})).join("/")},X509.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw"malformed RDN";for(var i=new Array,n=ASN1HEX.getChildIdx(e,t),r=0;r<n.length;r++)i.push(X509.hex2attrTypeValue(e,n[r]));return(i=i.map(function(e){return e.replace("+","\\+")})).join("+")},X509.hex2attrTypeValue=function(e,t){var i=ASN1HEX,n=i.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw"malformed attribute type and value";var r=i.getChildIdx(e,t);2!==r.length||e.substr(r[0],2);var a=n(e,r[0]),o=KJUR.asn1.ASN1Util.oidHexToInt(a);return KJUR.asn1.x509.OID.oid2atype(o)+"="+hextorstr(n(e,r[1]))},X509.getPublicKeyFromCertHex=function(e){var t=new X509;return t.readCertHex(e),t.getPublicKey()},X509.getPublicKeyFromCertPEM=function(e){var t=new X509;return t.readCertPEM(e),t.getPublicKey()},X509.getPublicKeyInfoPropOfCertPEM=function(e){var t,i=ASN1HEX.getVbyList,n={algparam:null},r=new X509;return r.readCertPEM(e),t=r.getPublicKeyHex(),n.keyhex=i(t,0,[1],"03").substr(2),n.algoid=i(t,0,[0,0],"06"),"2a8648ce3d0201"===n.algoid&&(n.algparam=i(t,0,[0,1],"06")),n},X509.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.jws&&KJUR.jws||(KJUR.jws={}),KJUR.jws.JWS=function(){var g=KJUR.jws.JWS.isSafeJSONString;this.parseJWS=function(e,t){if(void 0===this.parsedJWS||!t&&void 0===this.parsedJWS.sigvalH){var i=e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==i)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var n,r,a=i[1],o=i[2],s=i[3],c=a+"."+o;this.parsedJWS={},this.parsedJWS.headB64U=a,this.parsedJWS.payloadB64U=o,this.parsedJWS.sigvalB64U=s,this.parsedJWS.si=c,t||(r=parseBigInt(n=b64utohex(s),16),this.parsedJWS.sigvalH=n,this.parsedJWS.sigvalBI=r);var l=b64utoutf8(a),u=b64utoutf8(o);if(this.parsedJWS.headS=l,this.parsedJWS.payloadS=u,!g(l,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+l}}},KJUR.jws.JWS.sign=function(e,t,i,n,r){var a,o,s,c=KJUR.jws.JWS,l=c.readSafeJSONString,u=c.isSafeJSONString,g=KJUR.crypto,d=(g.ECDSA,g.Mac),h=g.Signature,p=JSON;if("string"!=typeof t&&"object"!=typeof t)throw"spHeader must be JSON string or object: "+t;if("object"==typeof t&&(o=t,a=p.stringify(o)),"string"==typeof t){if(!u(a=t))throw"JWS Head is not safe JSON string: "+a;o=l(a)}if("object"==typeof(s=i)&&(s=p.stringify(i)),""!=e&&null!=e||void 0===o.alg||(e=o.alg),""!=e&&null!=e&&void 0===o.alg&&(o.alg=e,a=p.stringify(o)),e!==o.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+o.alg;var f=null;if(void 0===c.jwsalg2sigalg[e])throw"unsupported alg name: "+e;f=c.jwsalg2sigalg[e];var I,b,m=utf8tob64u(a)+"."+utf8tob64u(s),y="";if("Hmac"==f.substr(0,4)){if(void 0===n)throw"mac key shall be specified for HS* alg";var C=new d({alg:f,prov:"cryptojs",pass:n});C.updateString(m),y=C.doFinal()}else{-1!=f.indexOf("withECDSA")?((b=new h({alg:f})).init(n,r),b.updateString(m),I=b.sign(),y=KJUR.crypto.ECDSA.asn1SigToConcatSig(I)):"none"!=f&&((b=new h({alg:f})).init(n,r),b.updateString(m),y=b.sign())}return m+"."+hextob64u(y)},KJUR.jws.JWS.verify=function(e,t,i){var n=KJUR.jws.JWS,r=n.readSafeJSONString,a=KJUR.crypto,o=a.ECDSA,s=a.Mac,c=a.Signature,l=RSAKey,u=e.split(".");if(3!==u.length)return!1;var g=u[0]+"."+u[1],d=b64utohex(u[2]),h=r(b64utoutf8(u[0])),p=null,f=null;if(void 0===h.alg)throw"algorithm not specified in header";if((f=(p=h.alg).substr(0,2),null!=i&&"[object Array]"===Object.prototype.toString.call(i)&&0<i.length)&&-1==(":"+i.join(":")+":").indexOf(":"+p+":"))throw"algorithm '"+p+"' not accepted in the list";if("none"!=p&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=KEYUTIL.getKey(t)),!("RS"!=f&&"PS"!=f||t instanceof l))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==f&&!(t instanceof o))throw"key shall be a ECDSA obj for ES* algs";var I=null;if(void 0===n.jwsalg2sigalg[h.alg])throw"unsupported alg name: "+p;if("none"==(I=n.jwsalg2sigalg[p]))throw"not supported";if("Hmac"==I.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var b=new s({alg:I,pass:t});return b.updateString(g),d==b.doFinal()}if(-1==I.indexOf("withECDSA"))return(m=new c({alg:I})).init(t),m.updateString(g),m.verify(d);var m,y=null;try{y=o.concatSigToASN1Sig(d)}catch(e){return!1}return(m=new c({alg:I})).init(t),m.updateString(g),m.verify(y)},KJUR.jws.JWS.parse=function(e){var t,i,n,r=e.split("."),a={};if(2!=r.length&&3!=r.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=r[0],i=r[1],3==r.length&&(n=r[2]),a.headerObj=KJUR.jws.JWS.readSafeJSONString(b64utoutf8(t)),a.payloadObj=KJUR.jws.JWS.readSafeJSONString(b64utoutf8(i)),a.headerPP=JSON.stringify(a.headerObj,null,"  "),null==a.payloadObj?a.payloadPP=b64utoutf8(i):a.payloadPP=JSON.stringify(a.payloadObj,null,"  "),void 0!==n&&(a.sigHex=b64utohex(n)),a},KJUR.jws.JWS.verifyJWT=function(e,t,i){var n=KJUR.jws,r=n.JWS,a=r.readSafeJSONString,o=r.inArray,s=r.includedArray,c=e.split("."),l=c[0],u=c[1],g=(b64utohex(c[2]),a(b64utoutf8(l))),d=a(b64utoutf8(u));if(void 0===g.alg)return!1;if(void 0===i.alg)throw"acceptField.alg shall be specified";if(!o(g.alg,i.alg))return!1;if(void 0!==d.iss&&"object"==typeof i.iss&&!o(d.iss,i.iss))return!1;if(void 0!==d.sub&&"object"==typeof i.sub&&!o(d.sub,i.sub))return!1;if(void 0!==d.aud&&"object"==typeof i.aud)if("string"==typeof d.aud){if(!o(d.aud,i.aud))return!1}else if("object"==typeof d.aud&&!s(d.aud,i.aud))return!1;var h=n.IntDate.getNow();return void 0!==i.verifyAt&&"number"==typeof i.verifyAt&&(h=i.verifyAt),void 0!==i.gracePeriod&&"number"==typeof i.gracePeriod||(i.gracePeriod=0),!(void 0!==d.exp&&"number"==typeof d.exp&&d.exp+i.gracePeriod<h)&&(!(void 0!==d.nbf&&"number"==typeof d.nbf&&h<d.nbf-i.gracePeriod)&&(!(void 0!==d.iat&&"number"==typeof d.iat&&h<d.iat-i.gracePeriod)&&((void 0===d.jti||void 0===i.jti||d.jti===i.jti)&&!!r.verify(e,t,i.alg))))},KJUR.jws.JWS.includedArray=function(e,t){var i=KJUR.jws.JWS.inArray;if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var n=0;n<e.length;n++)if(!i(e[n],t))return!1;return!0},KJUR.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},KJUR.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},KJUR.jws.JWS.isSafeJSONString=function(e,t,i){var n;try{return"object"!=typeof(n=jsonParse(e))?0:n.constructor===Array?0:(t&&(t[i]=n),1)}catch(e){return 0}},KJUR.jws.JWS.readSafeJSONString=function(e){var t;try{return"object"!=typeof(t=jsonParse(e))||t.constructor===Array?null:t}catch(e){return null}},KJUR.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},KJUR.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var i=rstrtohex(t);return hextob64u(KJUR.crypto.Util.hashHex(i,"sha256"))},KJUR.jws.IntDate={},KJUR.jws.IntDate.get=function(e){var t=KJUR.jws.IntDate,i=t.getNow,n=t.getZulu;if("now"==e)return i();if("now + 1hour"==e)return i()+3600;if("now + 1day"==e)return i()+86400;if("now + 1month"==e)return i()+2592e3;if("now + 1year"==e)return i()+31536e3;if(e.match(/Z$/))return n(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},KJUR.jws.IntDate.getZulu=function(e){return zulutosec(e)},KJUR.jws.IntDate.getNow=function(){return~~(new Date/1e3)},KJUR.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},KJUR.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.jws&&KJUR.jws||(KJUR.jws={}),KJUR.jws.JWSJS=function(){var s=KJUR.jws.JWS,i=s.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(e){this.init();var t=e.split(".");if(3!=t.length)throw"malformed input JWS";this.aHeader.push(t[0]),this.sPayload=t[1],this.aSignature.push(t[2])},this.addSignature=function(e,t,i,n){if(void 0===this.sPayload||null===this.sPayload)throw"there's no JSON-JS signature to add.";var r=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var a=KJUR.jws.JWS.sign(e,t,this.sPayload,i,n).split(".");a[0],a[2];this.aHeader.push(a[0]),this.aSignature.push(a[2])}catch(e){throw this.aHeader.length>r&&this.aHeader.pop(),this.aSignature.length>r&&this.aSignature.pop(),"addSignature failed: "+e}},this.verifyAll=function(e){if(this.aHeader.length!==e.length||this.aSignature.length!==e.length)return!1;for(var t=0;t<e.length;t++){var i=e[t];if(2!==i.length)return!1;if(!1===this.verifyNth(t,i[0],i[1]))return!1}return!0},this.verifyNth=function(e,t,i){if(this.aHeader.length<=e||this.aSignature.length<=e)return!1;var n=this.aHeader[e],r=this.aSignature[e],a=n+"."+this.sPayload+"."+r,o=!1;try{o=s.verify(a,t,i)}catch(e){return!1}return o},this.readJWSJS=function(e){if("string"==typeof e){var t=i(e);if(null==t)throw"argument is not safe JSON object string";this.aHeader=t.headers,this.sPayload=t.payload,this.aSignature=t.signatures}else try{if(!(0<e.headers.length))throw"malformed header";if(this.aHeader=e.headers,"string"!=typeof e.payload)throw"malformed signatures";if(this.sPayload=e.payload,!(0<e.signatures.length))throw"malformed signatures";this.aSignature=e.signatures}catch(e){throw"malformed JWS-JS JSON object: "+e}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}};var SecureRandom_1=SecureRandom,rng_seed_time_1=rng_seed_time,BigInteger_1=BigInteger,RSAKey_1=RSAKey,ECDSA=KJUR.crypto.ECDSA,DSA=KJUR.crypto.DSA,Signature=KJUR.crypto.Signature,MessageDigest=KJUR.crypto.MessageDigest,Mac=KJUR.crypto.Mac,Cipher=KJUR.crypto.Cipher,KEYUTIL_1=KEYUTIL,ASN1HEX_1=ASN1HEX,X509_1=X509,CryptoJS_1=CryptoJS,b64tohex_1=b64tohex,b64toBA_1=b64toBA,ECFieldElementFp_1=ECFieldElementFp,ECPointFp_1=ECPointFp,ECCurveFp_1=ECCurveFp,stoBA_1=stoBA,BAtos_1=BAtos,BAtohex_1=BAtohex,stohex_1=stohex,stob64_1=stob64,stob64u_1=stob64u,b64utos_1=b64utos,b64tob64u_1=b64tob64u,b64utob64_1=b64utob64,hex2b64_1=hex2b64,hextob64u_1=hextob64u,b64utohex_1=b64utohex,utf8tob64u_1=utf8tob64u,b64utoutf8_1=b64utoutf8,utf8tob64_1=utf8tob64,b64toutf8_1=b64toutf8,utf8tohex_1=utf8tohex,hextoutf8_1=hextoutf8,hextorstr_1=hextorstr,rstrtohex_1=rstrtohex,hextob64_1=hextob64,hextob64nl_1=hextob64nl,b64nltohex_1=b64nltohex,hextopem_1=hextopem,pemtohex_1=pemtohex,hextoArrayBuffer_1=hextoArrayBuffer,ArrayBuffertohex_1=ArrayBuffertohex,zulutomsec_1=zulutomsec,zulutosec_1=zulutosec,zulutodate_1=zulutodate,datetozulu_1=datetozulu,uricmptohex_1=uricmptohex,hextouricmp_1=hextouricmp,ipv6tohex_1=ipv6tohex,hextoipv6_1=hextoipv6,hextoip_1=hextoip,iptohex_1=iptohex,encodeURIComponentAll_1=encodeURIComponentAll,newline_toUnix_1=newline_toUnix,newline_toDos_1=newline_toDos,hextoposhex_1=hextoposhex,intarystrtohex_1=intarystrtohex,strdiffidx_1=strdiffidx,KJUR_1=KJUR,crypto_1=KJUR.crypto,asn1=KJUR.asn1,jws=KJUR.jws,lang=KJUR.lang,jsrsasign={SecureRandom:SecureRandom_1,rng_seed_time:rng_seed_time_1,BigInteger:BigInteger_1,RSAKey:RSAKey_1,ECDSA:ECDSA,DSA:DSA,Signature:Signature,MessageDigest:MessageDigest,Mac:Mac,Cipher:Cipher,KEYUTIL:KEYUTIL_1,ASN1HEX:ASN1HEX_1,X509:X509_1,CryptoJS:CryptoJS_1,b64tohex:b64tohex_1,b64toBA:b64toBA_1,ECFieldElementFp:ECFieldElementFp_1,ECPointFp:ECPointFp_1,ECCurveFp:ECCurveFp_1,stoBA:stoBA_1,BAtos:BAtos_1,BAtohex:BAtohex_1,stohex:stohex_1,stob64:stob64_1,stob64u:stob64u_1,b64utos:b64utos_1,b64tob64u:b64tob64u_1,b64utob64:b64utob64_1,hex2b64:hex2b64_1,hextob64u:hextob64u_1,b64utohex:b64utohex_1,utf8tob64u:utf8tob64u_1,b64utoutf8:b64utoutf8_1,utf8tob64:utf8tob64_1,b64toutf8:b64toutf8_1,utf8tohex:utf8tohex_1,hextoutf8:hextoutf8_1,hextorstr:hextorstr_1,rstrtohex:rstrtohex_1,hextob64:hextob64_1,hextob64nl:hextob64nl_1,b64nltohex:b64nltohex_1,hextopem:hextopem_1,pemtohex:pemtohex_1,hextoArrayBuffer:hextoArrayBuffer_1,ArrayBuffertohex:ArrayBuffertohex_1,zulutomsec:zulutomsec_1,zulutosec:zulutosec_1,zulutodate:zulutodate_1,datetozulu:datetozulu_1,uricmptohex:uricmptohex_1,hextouricmp:hextouricmp_1,ipv6tohex:ipv6tohex_1,hextoipv6:hextoipv6_1,hextoip:hextoip_1,iptohex:iptohex_1,encodeURIComponentAll:encodeURIComponentAll_1,newline_toUnix:newline_toUnix_1,newline_toDos:newline_toDos_1,hextoposhex:hextoposhex_1,intarystrtohex:intarystrtohex_1,strdiffidx:strdiffidx_1,KJUR:KJUR_1,crypto:crypto_1,asn1:asn1,jws:jws,lang:lang};function createWorkerFallback(t){var i,e=null;try{try{i=new Blob(["importScripts('"+t+"');"],{type:"application/javascript"})}catch(e){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);n.append("importScripts('"+t+"');"),i=n.getBlob("application/javascript")}var r=(window.URL||window.webkitURL).createObjectURL(i),e=new Worker(r)}catch(e){console.log("")}return e}function createWorker(e){return createWorkerFallback(e)}var EventWriter=(createClass(rqb,[{key:"setupWebWorker",value:function(){window.Worker&&!1!==config.getConfig("webworker","behavior")&&(this.worker=createWorker(config.getWorkerJS()))}},{key:"useWebWorker",value:function(){return window.Worker&&!1!==config.getConfig("webworker","behavior")&&!!this.worker}},{key:"initParams",value:function(){this.transmitInterval=1e3*(config.getConfig("transmitInterval","behavior")||constants.record.upload.defaultTransmitInterval),this.mobileTransmitInterval=1e3*(config.getConfig("mobileTransmitInterval","behavior")||constants.record.upload.defaultMobileMaxTransmitInterval),this.maxTransmitInterval=1e3*(config.getConfig("maxTransmitInterval","behavior")||constants.record.upload.defaultMaxTransmitInterval),this.mobileMaxTransmitInterval=1e3*(config.getConfig("mobileMaxTransmitInterval","behavior")||constants.record.upload.defaultMobileMaxTransmitInterval)}},{key:"syncToServerAndPersist",value:function(e){if(this.transformDataForUpload(),this.useWebWorker()){var t,i="";for(t in this.eventCache)i+=this.eventCache[t]+constants.symbols.SPLITFLAG;this.dataLayer.setStrAndCommit(i)}else this.dataLayer.setStrAndCommit(this.serialized);this.upload(e)}},{key:"logVisibilityChange",value:function(){var e=globalSessionTracker.getSessionMetadata();e.isOver||e.sessionId&&this.append(EventType.ViewChangeT(),{k:"vc",v:{sid:e.viewId,status:0,url:location.href,title:this.title}})}},{key:"setReady",value:function(){this.ready=!0,this.stg.setByKey(constants.events.READY,!0)}},{key:"setNotReady",value:function(){this.ready=!1,this.stg.setByKey(constants.events.READY,!1)}},{key:"stopUploading",value:function(){this.setNotReady(),this.initAndClearInterval()}},{key:"initAndClearInterval",value:function(){this.initEventQueue(),this.readyFlagTracker&&(clearInterval(this.readyFlagTracker),delete this.readyFlagTracker)}},{key:"pause",value:function(){var e=this;if(!globalSessionTracker.getSessionMetadata().isOver)return!globalSessionTracker.isCanceled()&&(this.sendRecordingStatusEvent("Recording Paused"),this.serializeAndUpload(!0),setTimeout(function(){e.initAndClearInterval(),e.cancelStorageCheck(),globalSessionTracker.setCancel(!0),e.worker&&e.worker.postMessage(e.createWorkerData("cmd",{command:"pause"}))},500),!0)}},{key:"resume",value:function(){var e=!1;return globalSessionTracker.getSessionMetadata().isOver&&(globalSessionTracker.renewSession(),e=!0),globalSessionTracker.getSessionMetadata(),!!globalSessionTracker.isCanceled()&&(globalSessionTracker.setCancel(!1),this.startCheckingStorage(),this.startCheckingState(),e||globalSessionTracker.initSessionOrPV(),this.sendRecordingStatusEvent("Recording Resumed"),this.worker&&this.worker.postMessage(this.createWorkerData("cmd",{command:"resume"})),!0)}},{key:"sendRecordingStatusEvent",value:function(e){this.append(EventType.CustomEventT(),{k:e,v:JSON.stringify({et:e,url:location.href,title:this.title})})}},{key:"updateToCoBrowsing",value:function(){this.cobrowsing||(this.upgradedToCoBrowsing=!0)}},{key:"isUpgradedToCoBrowsing",value:function(){return this.upgradedToCoBrowsing}},{key:"initState",value:function(e){var r=this,t=e.getByKey(constants.events.READY);this.ready=!_.isDefined(t)||t,t!==this.ready&&this.stg.setByKey(constants.events.READY,this.ready),this.numUploadErrors=0,this.uploadWaiting=!1,this.isUploader=!1,this.prevUploadTS=_.now()-constants.record.upload.initTimeOffset,this.lastPingTime=_.now()-constants.record.upload.initTimeOffset,this.cobrowsing=config.getConfig("cb","record")?1:0,this.upgradedToCoBrowsing=!1,this.title=document.title||_.isObject(history.state)&&history.state&&history.state.title,this.title||(this.title="Untitled Page"),this.eventid=0,this.dataLayer=StorageManager.getInstance(this.storKey),this.serialized="",this.dataLayer&&this.dataLayer.getStr().split(constants.symbols.SPLITFLAG).forEach(function(e,t){var i,n;0<t?(i=r.serialized.lastIndexOf("}"),n=e.indexOf("{"),r.serialized=r.serialized.substring(0,i+1)+","+e.substr(n)):r.serialized+=e}),this.instance=null,this.lastEvtTime=null,this.lastTrackingSessionTime=0,this.resetDomPathCache(),this.initEventQueue(),this.startCheckingState(),this.startCheckingStorage()}},{key:"serializeAndUpload",value:function(e){this.ready&&!globalSessionTracker.isCanceled()&&(e||this.isFull())&&(this.transformDataForUpload(),this.upload(e))}},{key:"readyForUpload",value:function(){return config.isVisualEditorMode()?(this.resetSerialized(),!1):!(globalSessionTracker.isSessionOver()||!this.ready||0===this.serialized.length||globalSessionTracker.isCanceled())}},{key:"upload",value:function(e){if(this.readyForUpload()){var t=_.timestamp();if(this.isUploading){var i=e?constants.record.upload.shortWait:constants.record.upload.wait;if(t-this.prevUploadTS<=i)return void(this.uploadWaiting=!0)}this.prevUploadTS=t,config.getConfig("siteToken","base")?this.sendWithProtobuf(this.serialized):logger.warn("Can not found accessToken")}}},{key:"ping",value:function(){var e;globalSessionTracker.isSessionOver()||!this.ready||globalSessionTracker.isCanceled()||((e=_.now())-this.prevUploadTS<constants.record.upload.pingWaitInterval||e-this.lastPingTime<constants.record.upload.pingWaitInterval||this.append(EventType.HeartbeatT(),{},0))}},{key:"initEventQueue",value:function(){this.queue={},this.newEventsByteLength=0,this.queue.log=[],this.queue.start=_.timestamp(),this.queue.guid=idGen$1.generateGUID()}},{key:"isQueueEmpty",value:function(){return 0===this.queue.log.size}},{key:"addDeviceInfoEvent",value:function(e){var t=browser$1.getScreenResolution(),i={et:EventType.DeviceInfoT(),dt:"",df:"",dm:"",on:"",ov:"",sw:t.w,sh:t.h,longitude:0,latitude:0},n=config.getCurrentIdentity();n&&0<n.length&&(i.identity=n);var r={id:this.eventid,x:-1,p:globalSessionTracker.getPV(),d:i,t:_.now()};return this.eventid=this.eventid+1,e.push(r),e}},{key:"getEventCacheLimit",value:function(){return config.getConfig("eventCacheLength","record")||constants.storage.EVENT_CACHE_MAX_LENGTH}},{key:"transformDataForUpload",value:function(){var e,t,i;this.isQueueEmpty()||(e=JSON.stringify(this.queue.log),-1===this.serialized.indexOf("{")?this.serialized=e:(t=this.serialized.lastIndexOf("}"),i=e.indexOf("{"),this.serialized=this.serialized.substring(0,t+1)+","+e.substr(i)),0<this.serialized.indexOf("{")&&this.useWebWorker()&&(this.eventCacheLength+this.serialized.length>this.getEventCacheLimit()?logger.log("Exceeding the event cache limit. Skip"):(this.requestId++,this.eventCacheLength+=this.serialized.length,this.eventCache[this.requestId]=this.serialized)),this.initEventQueue())}},{key:"append",value:function(e,t,i,n){var r,a,o,s,c,l,u,g,d=3<arguments.length&&void 0!==n?n:0;this.ready&&!globalSessionTracker.isCanceled()&&((r=globalSessionTracker.getSessionMetadata()).isOver||(a="number"==typeof i?i:i?this.updateNodeDict(i.getProcXPath()):0,s=o=_.timestamp(),t.basicProps&&t.basicProps.currentTime?(o=t.basicProps.currentTime,delete t.basicProps):t._to?(o=t._to,delete t._to):o-=d,c=t.pvid||globalSessionTracker.getPV(),delete t.pvid,(t=config.compress(t)).et=e,l=r.sessionId,u=r.viewId,g={id:this.eventid,x:a,p:c,d:t,t:o,ct:s,_v:u,_s:l},e!==EventType.ConsoleT()&&e!==EventType.NetworkT()||(g.d.pv=c,g.d.p.vid=u),e===EventType.KeyStrokeDownT()&&(g.d.trusted=g.d.u,delete g.d.u),this.eventid=this.eventid+1,this.queue.log.push(g),this.newEventsByteLength+=JSON.stringify(g).length,this.isCriticalEvents(e)&&this.serializeAndUpload(!0)))}},{key:"isCriticalEvents",value:function(e){return e===EventType.TapT()||e===EventType.PressT()||e===EventType.MouseClickT()}},{key:"isUserInitiatedEvents",value:function(e){return e===EventType.PVT()||e===EventType.HTMLTextT()||e===EventType.SclWindowT()||e===EventType.MouseLeaveEntryT()||e===EventType.KeyStrokeDownT()||e===EventType.InputValChangedT()||e===EventType.MouseClickT()||e===EventType.SclInNodeT()||e===EventType.SwipeT()||e===EventType.PinchT()||e===EventType.TapT()||e===EventType.PressT()||e===EventType.MouseClickT()}},{key:"updateNodeDict",value:function(e){if(this.ready&&!globalSessionTracker.isCanceled()){var t,i=e.join(",");return _.isDefined(this.domPathCache[i])||(this.domPathList[this.domPathList.length]=i,t=this.domPathList.length-1,urls.isCrossFrame()&&(t=1e5*(globalSessionTracker.frameIdx?globalSessionTracker.frameIdx:1)+t),this.domPathCache[i]=t,this.append(EventType.NodeDictionaryT(),{x:t+"",v:i})),this.domPathCache[i]}}},{key:"resetDomPathCache",value:function(){this.domPathCache={},this.domPathList=[]}},{key:"resetState",value:function(){this.eventid=0}},{key:"isFull",value:function(){return constants.storage.DEFAULT_LIMIT<=this.newEventsByteLength+this.serialized.length}},{key:"loadReadyFlagFromStg",value:function(){var e=this.stg.getByKey(constants.events.READY);this.ready=!_.isDefined(e)||e,this.ready||this.stopUploading()}},{key:"startCheckingState",value:function(){var e=this;this.readyFlagTracker||(this.loadReadyFlagFromStg(),this.readyFlagTracker=setInterval(function(){return e.loadReadyFlagFromStg()},5e3))}},{key:"startCheckingStorage",value:function(){var e=this;this.storageChecker||(this.storageChecker=setInterval(function(){return e.serializeAndUpload()},this.browser.isPhoneOrTablet()?this.mobileTransmitInterval:this.transmitInterval)),this.maxWaitMonitor||(this.maxWaitMonitor=setInterval(function(){return e.serializeAndUpload(!0)},this.browser.isPhoneOrTablet()?this.mobileMaxTransmitInterval:this.maxTransmitInterval))}},{key:"cancelStorageCheck",value:function(){this.storageChecker&&(clearInterval(this.storageChecker),delete this.storageChecker),this.maxWaitMonitor&&(clearInterval(this.maxWaitMonitor),delete this.maxWaitMonitor)}},{key:"useProxy",value:function(){return!0===config.getConfig("proxy","base")}},{key:"getUploadUri",value:function(){var e=config.getConfig("tracking_uri","base");return e=this.useProxy()?config.getConfig("tracking_uri_proxy","base")+"/v1/event":"https://"+e+"/v1/event"}},{key:"uploadToServer",value:function(e,t,i,n,r){var a=this;try{var o,s=new window.XMLHttpRequest;for(o in s.open(r,i,!0),s.onreadystatechange=function(){4===this.readyState&&(202===this.status&&"POST"===r?(a.serialized===t?a.serialized="":-1!==a.serialized.indexOf(t.substr(1,t.length-1))&&(a.serialized="["+a.serialized.substr(t.length)),a.isUploading=!1,a.uploadWaiting&&setTimeout(function(){a.serializeAndUpload(!0)},100)):202!==this.status&&"POST"===r&&(a.isUploading=!1,a.numUploadErrors++,a.numUploadErrors>constants.storage.RETRY_LIMIT?(a.stopUploading(),a.initEventQueue()):a.uploadWaiting&&setTimeout(function(){a.serializeAndUpload(!0)},100)))},n)"Content-length"!==n&&"Connection"!==n&&s.setRequestHeader(o,n[o]);"POST"===r?s.send(e):s.send()}catch(e){}}},{key:"convertToProtobuf",value:function(e,t,i,n){var r=n.sessionId,a=n.viewId,o=n.userId,s=config.getSiteid();if(s&&o&&r){var c=$root.com.auryc.ubi.core.model.Message,l=new buffer_1(e),u=new c.MessagePacket({vid:a,ts:i,status:t,size:l.length,data:l}),g=new c({cid:s,uid:o,sid:r,domain:document.domain.toString(),context:new c.MessageContext({ln:"Web",lv:"2.4.0",ref:document.referrer}),packet:[u]}),d=c.verify(g);if(d)throw Error(d);return c.encode(g).finish()}return null}},{key:"getUTCTime",value:function(){var e=new Date,t=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return Math.floor(t/1e3)}},{key:"getStatusInt",value:function(e,t){var i=0;return 1===e&&(i|=1),1===t&&(i|=2),this.isUpgradedToCoBrowsing()&&(i|=4),i}},{key:"getJWTToken",value:function(){var e={};e.iss=config.getSiteid(),e.iat=this.getUTCTime()-12e4;var t=config.getConfig("siteToken","base"),i=JSON.stringify({alg:"HS256",typ:"JWT"}),n=JSON.stringify(e);return jsrsasign.jws.JWS.sign("HS256",i,n,{rstr:t})}},{key:"splitEvents",value:function(e){var t=[];if(1===e.length)return[e];var i,n,r=Math.floor(e.length/2),a=e.slice(0,r),o=e.slice(r);return JSON.stringify(a).length>constants.storage.MAX_PACKET_SIZE&&1<a.length?(i=this.splitEvents(a),t=t.concat(i)):t.push(a),JSON.stringify(o).length>constants.storage.MAX_PACKET_SIZE&&1<o.length?(n=this.splitEvents(o),t=t.concat(n)):t.push(o),t}},{key:"getLastUserEventTime",value:function(e){if(e&&0<e.length)for(var t=e.length-1;0<=t;t--)if(this.isUserInitiatedEvents(e[t].d.et))return e[t].t;return null}},{key:"isDelayedEvent",value:function(e){return e===EventType.PropChangeT()||e===EventType.MutNodeTextT()}},{key:"sendWithProtobuf",value:function(t){var l=this;logger.isLiveDebug()&&(console.log("prepare to send"),console.log(t));var u=globalSessionTracker.getSessionMetadata();if(!u.isOver){var e,i,n,r,a,o,s=[];try{s=JSON.parse(t)}catch(e){logger.log("json exception"),logger.log(e),logger.log(t),console.log("err",e),s=[]}s&&0!==s.length&&(s=s.filter(function(e){return e&&e.t>=u.sessionTime&&e._v===u.viewId&&e._s===u.sessionId}).sort(function(e,t){return e.t-t.t}).map(function(e){return delete e._v,delete e._s,e}))&&0!==s.length?(e=this.getLastUserEventTime(s),this.lastEvtTime?s[s.length-1].t>=this.lastEvtTime?(s=s.filter(function(e){return l.isDelayedEvent(e.d.et)?e.ct>=l.lastEvtTime:e.t>=l.lastEvtTime}),this.lastEvtTime=e||this.lastEvtTime):s=[]:this.lastEvtTime=e,s&&0!==s.length?(i=(s=this.addDeviceInfoEvent(s))[0].t,s.forEach(function(e){e.t=e.t-i,delete e.ct}),n=JSON.stringify(s),logger.isLiveDebug()&&(console.log("ready to send"),console.log(n)),!(r=function(e,t,i,n){var r,a,o,s=l.getStatusInt(n,l.cobrowsing),c=l.convertToProtobuf(e,s,i,u);c&&(logger.log("SIZE: pb data length: "+c.length,!0),r=l.getJWTToken(),a=l.getUploadUri(),o={"Content-Type":"application/x-protobuf;charset=utf-8",Authorization:r},l.useProxy()&&(o["Payload-Type"]=0),l.uploadToServer(c,t,a,o,"POST",i))})!==config.getConfig("compress","behavior")&&!this.isCompressBlackList()?this.useWebWorker()?(a=this.getStatusInt(1,this.cobrowsing),o=this.createWorkerData("data",{data:n,properties:_extends({},u,{startTime:i,siteId:config.getSiteid(),siteToken:this.getJWTToken(),referrer:document.referrer,flag:a,uploadUrl:this.getUploadUri(),useProxy:this.useProxy(),requestId:this.requestId,domain:document.domain.toString()})}),this.worker.postMessage(o),this.worker.onmessage=function(e){l.eventCache[e.data]&&(l.eventCacheLength-=l.eventCache[e.data].length,delete l.eventCache[e.data])},this.resetSerialized()):Zlib.splitAndProcess(n,t,constants.record.upload.fragLength,this.browser,i,r):r(n,t,i,0)):logger.log("Empty event list. Skip")):logger.log("Empty event list. Skip")}}},{key:"resetSerialized",value:function(){this.serialized=""}},{key:"createWorkerData",value:function(e,t){return _extends({type:e},t)}},{key:"isCompressBlackList",value:function(){var e=getInstance(),t=config.getConfig("perf_blacklist","record")||{},i=t.urls||[],n=(t.browser_cutoff||{})[e.browser.name];if(n&&e.browser.version<n)for(var r=0;r<i.length;r++)if(-1!==window.location.href.indexOf(i[r]))return!0;return!1}}],[{key:"getInstance",value:function(e,t){return rqb.instance||(rqb.instance=new rqb(e)),rqb.instance}}]),rqb);function rqb(e,t,i){classCallCheck(this,rqb),logger.log("event writer constructor"),this.storKey=i,this.stg=e,this.browser=getInstance(),this.initParams(),this.initState(e),this.worker=null,this.setupWebWorker(),this.requestId=0,this.eventCache={},this.eventCacheLength=0}function normalize(e){var i=[];return e.forEach(function(e,t){i.push(normalizeNode(e))}),i}var htmlEscape={"&":"&amp;","=":"&#61;","'":"&#39;","\0":"&#00;","\v":"&#11;","\n":"&#12;","\\[":"&#91;","\\]":"&#93;"};function normalizeAttribute(e){return e.value&&(e.value=replaceAll(e.value.trim(),htmlEscape)),e}function normalizeClassName(e){var t=e.value.replace(/\s\s+/g," ").split(" ").sort();return e.value="."+t.join("."),e}function normalizeNode(e){var i={},n={},r={};e.forEach(function(e){var t=e.name.toLowerCase();0<=["tag","id","class"].indexOf(t)?("tag"===t?e.value=e.value.toLowerCase():"class"===t&&(e=normalizeClassName(e)),i[t]=e):0===t.indexOf(":")?r[t]=e:(e=normalizeAttribute(e),n[t]=e)});var t=[];return i.tag&&t.push(i.tag),i.id&&t.push(i.id),i.class&&t.push(i.class),t=(t=t.concat(mapToArrayByKey(n))).concat(mapToArrayByKey(r))}function mapToArrayByKey(t){var i=[];return Object.keys(t).sort().forEach(function(e){i.push(t[e])}),i}function replaceAll(e,t){var i=new RegExp(Object.keys(t).join("|"),"gi");return e.replace(i,function(e){return t[e.toLowerCase()]||t["\\"+e.toLowerCase()]})}var attrCode={tag:"t",id:"i",class:"c",":nth-child":":nc",":nth-of-type":":nt"};function generateElementContext(e){return serializeNodes(normalize(getElementsOnPath(e)))}function serializeNodes(i){var n="";return i.forEach(function(e,t){e.forEach(function(e){var t=attrCode[e.name]||e.name;n+="["+t+"="+e.value+"]"}),t<i.length-1&&(n+="\v")}),n}function getElementsOnPath(e){for(var t=[];e;){var i=getElementProperties(e);if(t.unshift(i),e===document.body||"BODY"===e.nodeName)break;e=e.parentNode}return t}function getClassName(e){switch(_typeof(e.className)){case"string":return e.className;case"object":return e.className.baseVal||e.getAttribute("class")||"";default:return""}}function specialWhitelist(e){return"src"===e.name&&"/etc/designs/site/cc/img/btn-build-package-small.png"===e.value||"alt"===e.name&&(null===e.value||""===e.value)}function getElementProperties(e){var t=[{name:"tag",value:e.tagName?e.tagName:""}];e.id&&_.isString(e.id)&&t.push({name:"id",value:e.id});var i=getClassName(e).trim();i&&t.push({name:"class",value:i});var n=[],r=!1!==config.getConfig("enableDataAttr","behavior"),a=["id","class"].concat(constants.pii.maskingAttributes);if(e.attributes)for(var o=0;o<e.attributes.length;o++)e.attributes[o].name&&(specialWhitelist(e.attributes[o])||a.indexOf(e.attributes[o].name)<0&&(r||!/data-*/.test(e.attributes[o].name)))&&n.push({name:e.attributes[o].name,value:e.attributes[o].value});0<n.length&&(n=n.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),t=t.concat(n));for(var s=1,c=1,l=previousElementSibling(e);l;)s++,l.tagName===e.tagName&&c++,l=previousElementSibling(l);return t.push({name:":nth-child",value:s}),t.push({name:":nth-of-type",value:c}),t}var ELEMENT_NODE=1;function previousElementSibling(e){if(e.previousElementSibling)return e.previousElementSibling;for(;(e=e.previousSibling)&&e.nodeType!==ELEMENT_NODE;);return e}var eventTargetParser={_initializedTokens:[],_previousElementSibling:function(e){if(e.previousElementSibling)return e.previousElementSibling;for(;(e=e.previousSibling)&&e.nodeType!==Node.ELEMENT_NODE;);return e},_loadScript:function(e,t){var i=document.createElement("script");i.type="text/javascript",i.src=e,i.onload=t;var n=document.getElementsByTagName("script");0<n.length?n[0].parentNode.insertBefore(i,n[0]):document.body.appendChild(i)},_getClassName:function(e){return e.tagName&&"svg"===e.tagName.toLowerCase()?e.className.baseVal||e.getAttribute("class")||"":e.className||""},_isClickEvent:function(e){return"click"===e||"mousedown"===e||-1<e.indexOf("touch")||-1<e.indexOf("pointer")},_shouldTrackDomEvent:function(e,t){if(!e||e===document||e===document.body.parentNode||e.nodeType!==Node.ELEMENT_NODE)return!1;switch(e.tagName?e.tagName.toLowerCase():""){case"html":return!1;case"form":return"submit"===t.type;case"input":return["button","submit"].indexOf(e.getAttribute("type")),this._isClickEvent(t.type);case"select":case"textarea":default:return this._isClickEvent(t.type)}},_getDefaultProperties:function(e){if(document&&document.body)return{$event_type:e,$host:window.location.host,$pathname:window.location.pathname};logger.log("document not ready yet, trying again in 500 milliseconds...");var t=this;setTimeout(function(){t._getDefaultProperties(e)},500)},_getInputValue:function(e){var t=null;switch(e.type.toLowerCase()){case"checkbox":e.checked&&(t=[e.value]);break;case"radio":e.checked&&(t=e.value);break;default:t=e.value}return t},_getSelectValue:function(e){var t,i=e.multiple?(t=[],_.each(e.querySelectorAll("[selected]"),function(e){t.push(e.value)}),t):e.value;return i},_includeProperty:function(e,t){for(var i=e;i.parentNode&&i!==document.body;i=i.parentNode){var n=this._getClassName(i).split(" ");if(_.includes(n,"_ar_hide_")||i._ar_hide_)return!1}if(null===t)return!1;switch((e.type||"").toLowerCase()){case"hidden":case"password":return!1}var r=e.name||e.id||"";if(/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))return!1;if("string"==typeof t){if(/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((t||"").replace(/[\- ]/g,"")))return!1;if(/(^\d{3}-?\d{2}-?\d{4}$)/.test(t))return!1}return!0},_getFormFieldValue:function(e){var t;switch((e.tagName?e.tagName:"").toLowerCase()){case"input":t=this._getInputValue(e);break;case"select":t=this._getSelectValue(e);break;default:t=e.value||e.textContent}return this._includeProperty(e,t)?t:null},_getFormFieldProperties:function(e){var r={};return _.each(e.elements,function(e){var t,i,n=e.getAttribute("name")||e.getAttribute("id");null!==n&&(n="$form_field__"+n,t=this._getFormFieldValue(e),this._includeProperty(e,t)&&(i=r[n],r[n]=void 0!==i?[].concat(i,t):t))},this),r},_extractCustomPropertyValue:function(e){var i=[];return _.each(document.querySelectorAll(e.css_selector),function(e){var t=e.tagName?e.tagName:"";-1<["input","select"].indexOf(t.toLowerCase())?i.push(e.value):e.textContent&&i.push(e.textContent)}),i.join(", ")},_getCustomProperties:function(n){var r={};return _.each(this._customProperties,function(i){_.each(i.event_selectors,function(e){var t=document.querySelectorAll(e);_.each(t,function(e){_.includes(n,e)&&(r[i.name]=this._extractCustomPropertyValue(i))},this)},this)},this),r},_getEventTarget:function(e){return void 0===e.target?e.srcElement:e.target},getTarget:function(e){var r=this;if("string"==typeof e)return this._getDefaultProperties(e);var t=this._getEventTarget(e);if(t.nodeType===Node.TEXT_NODE&&(t=t.parentNode),this._shouldTrackDomEvent(t,e)){for(var i=[t],a=t;a.parentNode&&a!==document.body;)i.push(a.parentNode),a=a.parentNode;var n,o,s,c,l=!1;_.each(i,function(e,t){var i,n;e.tagName&&"a"===e.tagName.toLowerCase()?o=e.getAttribute("href"):e.tagName&&"form"===e.tagName.toLowerCase()&&(c=e),!s&&t<5&&e.textContent&&((i=_.trim(e.textContent.substring(0,510)))&&(s=i.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))),"string"==typeof r._getClassName(e)&&(n=r._getClassName(e).split(" "),(_.includes(n,"_ar_hide_")||a._ar_hide_)&&(l=!0))}),l&&(s="Sensitive Information"),n=generateElementContext(t),logger.log(JSON.stringify(n));var u=_.extend(this._getDefaultProperties(e.type),{$elements:n,$el_attr__href:o});return l||(u=_.extend(u,this._getCustomProperties(i))),!c||"submit"!==e.type&&"click"!==e.type||_.extend(u,this._getFormFieldProperties(c)),u}},_navigate:function(e){window.location.href=e},_customProperties:{},isBrowserSupported:function(){return _.isFunction(document.querySelectorAll)}},SnapshotProperties=(createClass(owb,[{key:"setEventGroups",value:function(e){var t=this;e&&(this.snapshotProperties.egs={},e.forEach(function(e){e.snapshotProperties&&0<e.snapshotProperties.length&&(t.snapshotProperties.egs[e.id]=e)}))}},{key:"isEnabled",value:function(){var e=config.getConfig("spEnabled","behavior");if(!e)return!1;for(var t=(window.location.href||"about:blank").toLowerCase(),i=0;i<e.length;i++){if(new RegExp(e[i],"i").test(t))return!0}return!1}},{key:"getMatchedEventGroups",value:function(e){var t,i=[];for(t in logger.log("getMatchedEventGroups:",e),this.snapshotProperties.egs){var n=this.snapshotProperties.egs[t],r=n.jsCriteria;if(r&&""!==r){/^\s*return/.test(r)||(r="return "+r);var a=!1;try{a=new Function("event",r)(e)}catch(e){logger.warn("error in getMatchedEventGroups:",t),a=!1}logger.log("eg:"+t+": "+a),a&&n&&i.push(n)}}return i}},{key:"collect",value:function(e){var i=this,t=e.snapshotProperties,n={};return t.forEach(function(e){var t=i.collectOne(e);n=_.extend(t,n)}),n}},{key:"collectOne",value:function(e){if(e){var t=e.name,i=e.content,n=e.valueType,r=e.type;if(t&&i&&n&&r){var a,o={};return"javascript"===r.toLowerCase()?null!=(a=this.getJSProp(i,n))?o[t]=a:logger.warn("Ignoring null or undefined property value for content: "+i):logger.warn("Unsupported snapshot property type: "+r),o}logger.warn("missing snapshop properties metadata:",e)}}},{key:"getJSProp",value:function(t,e){/^\s*return/.test(t)||(t="return "+t),e=e.toLowerCase();var i=null;try{i=new Function(t)()+"";switch(logger.log("value: ",i),e){case"number":i=+i;break;case"currency":i=+i.replace(/[^0-9\.-]+/g,"");break;case"boolean":i=!!i}}catch(e){logger.warn("exception in getJSProp: "+t,e),i=null}return i}}]),owb);function owb(){classCallCheck(this,owb),this.snapshotProperties={}}var AurycSP=new SnapshotProperties,EventGenerator=(createClass(axb,[{key:"getTrackingTarget",value:function(e){var t=eventTargetParser.getTarget(e);return _.extend({},browser$1.properties(),t)}},{key:"getConsoleTarget",value:function(e){var t=eventTargetParser.getTarget(e);return _.extend({},browser$1.locationInfo(),t)}},{key:"generateLastVisitTime",value:function(e){if(globalSessionTracker.isSessionOver())logger.log("Session is over. No action");else{var t=e.currentTime;e.$timeSinceFirstVisit=t,e.visitTime=t;var i=globalSessionTracker.getSessionMetadata();if(e.userId=i.userId,e.$timeSinceLastVisit=i.sessionTime,e.userId&&""!==e.userId)return e;logger.log("can not get userId. No action")}}},{key:"getSessionId",value:function(){return globalSessionTracker.getSessionMetadata().sessionId}},{key:"getGlobalSessionId",value:function(){return globalSessionTracker.getSessionMetadata().globalSessionId}},{key:"getStartTs",value:function(e,t){return t&&"pageview"===e.$event_type&&(e.$timeSinceFirstVisit=e.startTS,e.visitTime=e.startTS),e}},{key:"assemblePayloads",value:function(e,t,i){var n,r,a,o,s,c,l,u,g;return t&&(n=t.eventName,o=t.path,s=t.form,c=t.userIdentify,l=t.userProperties,(u=t.eventProperties)&&u.formid&&(r=u.formid),(g=t.eventType)&&(e.$event_type=g),o||(r&&(e.tags=[t.eventName+":"+r]),"Feedback Submitted"===n?(a=u.respid,e.tags=[t.eventName+":"+r+"-"+a]):"FeedbackSubmitted"===n&&(e.tags=[n+":"+r+"-"+a],e.payloads=_.extend(s,e.payloads)),c&&(e.$event_type="IDENTIFY_USER",e.identity=c),l&&(e.$event_type="ADD_USER_PROPERTY",e.payloads=l),i&&(e.payloads=u))),e}},{key:"assembleBehaviorEvent",value:function(e,t){if(!(e=this.generateLastVisitTime(e)))return null;var i,n,r=t&&t.eventType===constants.events.CUSTOM_EVENT,a=(e=this.assemblePayloads(e,t,r)).$event_type;"mousedown"===a&&(a="click");var o=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance;"pageview"===e.$event_type||"feedback"===e.$event_type||r?(i=document.title,n=decodeURIComponent(e.$current_url),a="URL"):"IDENTIFY_USER"===e.$event_type?(i=e.userId,n=e.identity):"ADD_USER_PROPERTY"===e.$event_type?i=e.userId:n=r?(i=t.eventName,t.eventName):(i=a,e.elText);var s,c,l,u,g,d,h,p,f={userId:e.userId,name:i,content:n,source:{elements:e.$elements},payload:{}},I=browser$1.locationInfo();return f.source=_.extend({},f.source,I),"pageview"===e.$event_type&&(s=1,o&&o.timing&&o.timing.requestStart&&o.timing.responseEnd&&(s=o.timing.responseEnd-o.timing.requestStart),f.generationTime=Math.max(1,s),o&&o.timing&&(l=(c=o.timing).domInteractive-c.domLoading,u=c.domContentLoadedEventStart-c.domLoading,g=c.domComplete-c.domLoading,f.payload=_.extend({interactive:l,dcl:u,complete:g},f.payload))),e.ps&&(f.ps=e.ps,f.v=e.elText),r&&t.eventProperties&&(f.payload=_.extend(f.payload,e.payloads)),"pageview"===e.$event_type&&(f=_.extend(f,this.getUTMParameter())),_.inArray(e.$event_type,["click","pageview"])&&AurycSP.isEnabled()&&(d=e.$event_type.toUpperCase(),h=_.extend({libraryName:"Web",type:d},f),(p=AurycSP.getMatchedEventGroups(h))&&p.forEach(function(e){var t=AurycSP.collect(e);f.payload=_.extend(t,f.payload)})),f}},{key:"getUTMParameter",value:function(){var e,t={us:"utm_source",um:"utm_medium",uc:"utm_campaign",ut:"utm_term",un:"utm_content"},i=browser$1.campaignParams(),n={};for(e in t){var r=t[e];i[r]&&(n[e]=i[r])}return n}},{key:"getEventCommonProperties",value:function(e,t,i){var n,r={currentTime:_.now()};if(t===constants.events.PAGEVIEWTRACKER&&(n=globalSessionTracker.getPVStartTS(),r.startTS=parseInt(n),r=_.extend(r,i)),t===constants.events.CLICKTRACKER){if(r.elText=this.getClickTargetText(e),!r.elText)return null;r.ps=this.calcMouseCoord(e,i)}return r}},{key:"getClickTargetText",value:function(e){var t=e.target||e.srcElement||e.originalTarget,i="";if(!t)return i;try{var n=dom.isPIINode(t);if("password"===t.type)i='input[type="password"]';else if("select"===t.nodeName.toLowerCase())i=t.name;else if("img"===t.nodeName.toLowerCase())i=t.alt;else{if("body"===t.nodeName.toLowerCase())return null;if("html"===t.nodeName.toLowerCase())return null}i||n||(t.getAttribute&&t.getAttribute("data-text")&&!n&&(i=t.getAttribute("data-text")),i=i||t.value||t.textContent||t.innerText);0===(i=(i=i&&i.substring(0,60)).replace(/^\s+|\s+$/g,"")).length&&(i=t.nodeName||t.name)&&(i=i.toLowerCase(),t.type&&(i+='[type="'+t.type.toLowerCase()+'"]')),n&&(i+=" - Sensitive Information"),i=i.replace(/^\s+|\s+$/g,""),logger.log("elText: "+i)}catch(e){logger.warn("Exception in getTargetText"),logger.warn(e),i=""}return i}},{key:"calcMouseCoord",value:function(e,t){if(t&&t.position)return t.position;var i={x:e.clientX,y:e.clientY},n=browser$1.getScroll(window);this.previousEventPos=i;var r={};if(r.x=e.clientX+n.x,r.y=e.clientY+n.y,this.inIframe()){var a=dom.getPosInTopFrame(window.frameElement,dom.getTopLevelWin(window.frameElement));return r.x=r.x+a.x-n.x,r.y=r.y+a.y-n.y,r}return r}},{key:"inIframe",value:function(){try{return window!==window.top}catch(e){return!0}}},{key:"getEvent",value:function(e,t,i,n){if(!(n=this.getEventCommonProperties(e,t,i)))return null;var r=this.getTrackingTarget(e),a=_.extend({},n,r),o=this.assembleBehaviorEvent(a,i);return o?(o.basicProps=n,o):null}}],[{key:"getInstance",value:function(){return axb.instance||(axb.instance=new axb),axb.instance}}]),axb);function axb(){classCallCheck(this,axb),this.previousEventPos=null,this.instance=null}var RcInputMonitor=(createClass(Hyb,[{key:"getInputType",value:function(e){var t=((e=e||this.iNode).getAttribute("type")||e.type||"text").toLowerCase();return"select"!==e.nodeName.toLowerCase()&&"textarea"!==e.nodeName.toLowerCase()||(t=e.nodeName.toLowerCase()),t}}],[{key:"getNewInstance",value:function(e,t){return t._arIM||(t._arIM=new Hyb(e,t)),t._arIM}}]),createClass(Hyb,[{key:"trackInputEvents",value:function(t,e,i,n,r){var a=this;e&&(_.addEventListener(n,"focus",function(){return a.iptReceivedFocus(n)}),_.addEventListener(n,"blur",function(){return a.iptLostFocus()}),_.addEventListener(n,"keydown",function(e){return a.processKeyStroke(n,t,e)})),!i&&"select"!==t||[r.getWinObj(),n].forEach(function(e){return _.addEventListener(e,"click",function(){return a.elemCheckValChanged(n,t)})}),i||_.addEventListener(n,"change",function(){return a.elemSelectedValChanged(n,t)})}},{key:"iptReceivedFocus",value:function(e){var t=this;this.updateCursorData(e),this.cursorTracker=setInterval(function(){t.updateCursorData(e)},constants.record.throttler.CURSOR_INFO_INTERVAL)}},{key:"iptLostFocus",value:function(){this.cursorTracker&&clearInterval(this.cursorTracker)}},{key:"elemCheckValChanged",value:function(e,t){var i;this.isSecret(e)||this.previousSelected!==e.checked&&(this.previousSelected=e.checked,i={jNodeName:this.getNodeName(e),aCheckValue:e.checked,wNodePath:this.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(e)),comp:1,sInputType:t},this.eventWriter.append(EventType.InputValChangedT(),i,this.rcProcessor))}},{key:"elemSelectedValChanged",value:function(e,t){var i;this.isSecret(e)||(this.previousElInnerText!==e.innerHTML&&(this.processCurrElem(),this.previousElInnerText=e.innerHTML),i={jNodeName:this.getNodeName(e),"rSelected:hIndex":e.selectedIndex,wNodePath:this.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(e)),comp:1,sInputType:t},this.eventWriter.append(EventType.InputValChangedT(),i,this.rcProcessor),this.previousIptVal=e.value)}},{key:"processKeyStroke",value:function(t,i,n){var r=this;setTimeout(function(){var e;r.isSecret(t)||(r.updateCursorData(),r.processCurrElem(),r.previousIptVal=t.value,t.value&&0<t.value.length&&!dom.isCreditcardInput(t.value)&&!dom.isPIINode(t)&&(e={"rSelected:jKey":1,"oScroll:rPos":{x:r.iNode.scrollTop,y:r.iNode.scrollLeft},wNodePath:r.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(t)),uValue:t.value,comp:1,sInputType:i,trusted:n&&n.isTrusted},r.eventWriter.append(EventType.KeyStrokeDownT(),e,r.rcProcessor)))},1)}},{key:"hasChanged",value:function(){return this.isInputSupported()?this.previousIptVal!==this.iNode.value:!!this.isRadioCbox()&&this.previousSelected!==this.iNode.checked}},{key:"isSecret",value:function(e){return e=e||this.iNode,dom.isPIINode(e)}},{key:"isRadioCbox",value:function(e){var t=(e=e||this.iNode).getAttribute("type")?e.getAttribute("type").toLowerCase():"text";return"radio"===t||"checkbox"===t}},{key:"isInputSupported",value:function(e){return"textarea"===(e=e||this.iNode).nodeName||_.inArray(this.getInputType(e),["","color","email","number","password","search","tel","text","textarea","url"])}},{key:"isSubmitInput",value:function(){return"submit"===(this.iNode.getAttribute("type")?this.iNode.getAttribute("type").toLowerCase():"text")}},{key:"initProcess",value:function(e,t){"hidden"!==e&&"password"!==e&&("text"!==e&&"textarea"!==t.nodeName||""!==t.value)&&(this.isRadioCbox(t)&&!0!==t.checked?this.previousSelected=!1:this.createInputEvent(e))}},{key:"getNodeName",value:function(e){if(!e)return"";var t="";return e.labels&&0<e.labels.length&&(t=e.labels[0].textContent||e.labels[0].innerText),t||!e.getAttribute("data-text")||this.isSecret(e)||(t=e.getAttribute("data-text")),t||(t=e.name||e.nodeName)&&(t=t.toLowerCase(),e.type&&(t+='[type="'+e.type.toLowerCase()+'"]')),t}},{key:"processCurrElem",value:function(){"hidden"!==this.getInputType()&&"password"!==this.getInputType()&&this.hasChanged()&&this.createInputEvent(this.getInputType())}},{key:"getCursorPosition",value:function(e){e=e||this.iNode;var t={rFirst:0,dLast:0};try{t.rFirst=e.selectionStart||0,t.dLast=e.selectionEnd||0}catch(e){}return t.bCurrent=t.dLast,t.comp=1,t}},{key:"updateCursorData",value:function(e){var t,i,n;this.isSecret(e)||(e=e||this.iNode,t=this.getCursorPosition(e),i=!1,this.previousCursorPos||(i=!0),!i&&this.previousCursorPos.rFirst===t.rFirst&&this.previousCursorPos.dLast===t.dLast||(n={zNodeName:this.getNodeName(e),"bCursor:hIndex":config.compress(t),comp:1,wNodePath:this.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(e))},this.eventWriter.append(EventType.InputPosT(),n,this.rcProcessor)),this.previousCursorPos=t)}},{key:"_createRadioCB",value:function(e){var t;this.isSecret(e)||(t=this.iNode.checked)&&(e.aSelected=t,this.eventWriter.append(EventType.FormInputT(),e,this.rcProcessor),this.previousSelected=t)}},{key:"_createTextArea",value:function(e){this.isSecret(e)||(e.uValue=this.iNode.value||"",e["rWidth:yHeight"]={w:parseInt(dom.getStyle(this.iNode,this.rcProcessor.getWinObj(),"width")),h:parseInt(dom.getStyle(this.iNode,this.rcProcessor.getWinObj(),"height"))},this.eventWriter.append(EventType.FormInputT(),e,this.rcProcessor))}},{key:"_createSelect",value:function(e){var t;this.isSecret(e)||(t=[],Array.apply(null,this.iNode.options).forEach(function(e){t.push({uVal:e.value,jKey:e.text,comp:1})}),e["rWidth:yHeight"]={w:this.iNode.offsetWidth,h:this.iNode.offsetHeight},e["rSelected:hIndex"]=this.iNode.options.selectedIndex,e.nOptions=t.map(function(e){return config.compress(e)}),this.previousElInnerText=this.iNode.innerHTML,this.eventWriter.append(EventType.FormInputT(),e,this.rcProcessor))}},{key:"createInputEvent",value:function(e){if(!this.isSecret(this.iNode)){var t=this.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(this.iNode)),i={jNodeName:this.getNodeName(this.iNode),sInputType:e,wNodePath:t,uValue:"",comp:1};switch(e){case"radio":case"checkbox":this._createRadioCB(i);break;case"textarea":this._createTextArea(i);break;case"select":this._createSelect(i);break;default:i.uValue="password"!==e&&!dom.isPIINode(this.iNode)&&this.iNode.value||"";var n=dom.isCreditcardInput(this.iNode.value);n&&!this.rcProcessor.ccInputCache[t]?(this.rcProcessor.ccInputCache[t]=t,this.eventWriter.append(EventType.FormInputT(),i,this.rcProcessor)):n||this.eventWriter.append(EventType.FormInputT(),i,this.rcProcessor)}}}}]),Hyb);function Hyb(e,t){classCallCheck(this,Hyb),this.eventWriter=EventWriter.getInstance(),this.iNode=t,this.rcProcessor=e,this.cursorTracker=null,this.maskClassName=constants.pii.maskingClassName;var i=this.isInputSupported(t),n=this.isRadioCbox(t);i&&(this.previousIptVal=t.getAttribute("value")||t.value||"");var r=this.getInputType(t);(i&&t.value||"checkbox"===r&&t.checked||"select-one"===r||"select"===r)&&this.initProcess(r,t),this.trackInputEvents(r,i,n,t,e)}var StyledComponent=(createClass(fAb,[{key:"getInnerRule",value:function(e){var t=e.querySelectorAll(config.getDynamicCSS()),n="";return t.forEach(function(e){if(e&&(0===e.innerHTML.length||!e._arB)&&e.sheet){e._arB=!0;for(var t=e.sheet.cssRules||e.sheet.rules,i=0;i<t.length;i++)n+=t[i].cssText}}),n}},{key:"processBlobCss",value:function(e,n,r){for(var t,i=e.querySelectorAll("link"),a=0;a<i.length;a++){config.isBlobStyle(i[a])&&((t=new XMLHttpRequest).open("get",i[a].href,!0),t.responseType="blob",t.onloadend=function(e){e.loaded||r&&r("",n)},t.onload=function(){var i;200<=this.status&&this.status<300||304===this.status?((i=new FileReader).readAsText(this.response,"utf-8"),i.onload=function(e){var t=i.result;r&&r(t,n)}):r&&r("",n)},t.send())}}},{key:"getDynamicCssContainer",value:function(e){var t,i,n="data-dynamic-styles-ar",r=e.querySelectorAll("style["+n+"]")[0];return r||((r=e.createElement("style")).setAttribute(n,""),t=e.querySelectorAll("head")[0],(i=e.querySelectorAll(config.getDynamicCSS())[0])&&i.parentNode&&"head"===i.parentNode.nodeName.toLowerCase()?t.insertBefore(r,i):t.appendChild(r)),r}},{key:"process",value:function(e,t,i){this.processDynamicCss(t),this.processBlobCss(e,t,i)}},{key:"processDynamicCss",value:function(e){var t=this.getInnerRule(e);t&&0<t.length&&(this.getDynamicCssContainer(e).innerHTML=t)}}]),fAb);function fAb(){classCallCheck(this,fAb)}var styledComponentHandler=null;function getStyledComponentHandler(){return styledComponentHandler=styledComponentHandler||new StyledComponent}var DomSerialize=(createClass(MAb,[{key:"serialize",value:function(e,t){this.doc=e.document;var i=null;try{getPIIHandler().processKeepInputs(this.doc),this.getBlobStyleCount(this.doc),getStyledComponentHandler().process(this.doc,this.doc,this.addBlobStyleEvent);var n=(i=dom.cloneDomNode(this.doc.querySelectorAll("html")[0])).querySelectorAll('style[id="intercom-stylesheet"]');n&&0<n.length&&(n[0].innerHTML="");for(var r=i.querySelectorAll('img[src*="data:image"]'),a=0;a<r.length;a++){var o=r[a];o.alt&&1e5<o.alt.length&&o.setAttribute("alt",""),o.src&&1e5<o.src.length&&o.setAttribute("src","")}getPIIHandler().processMaskElement(i,this.doc),getPIIHandler().processHiddenElement(i,this.doc),getPIIHandler().processAttribute(i,this.doc)}catch(e){logger.log("serialize error: ",e),i=this.doc.querySelectorAll("html")[0]}return this.handleDomHTML(this._getDocTag()+i.outerHTML,t)}},{key:"getBlobStyleCount",value:function(e){for(var t=e.querySelectorAll("link"),i=0;i<t.length;i++)config.isBlobStyle(t[i])&&MAb.blobStyleNum++;MAb.time=(new Date).getTime()}},{key:"addBlobStyleEvent",value:function(e,t){var i,n,r;MAb.blobStyleCount++,MAb.blobStyleContent+=e,MAb.blobStyleCount===MAb.blobStyleNum&&((i=t.createElement("style")).innerHTML=MAb.blobStyleContent,(r=(n=t.querySelectorAll("head")[0]).querySelectorAll("link")[0])?n.insertBefore(i,r):n.appendChild(i),MAb.blobStyleNum=0,MAb.blobStyleCount=0,MAb.blobStyleContent="")}},{key:"addMutEvent",value:function(e,t,i,n){var r=globalCacheObj.getNodeXPath(e),a=e.innerHTML,o={};o.x=i.updateNodeDict(r),o.dom=MAb.instance.handleDomHTML(a,r),o.v="",n&&(o._to=n),i.append(EventType.MutNodeTextT(),o,i.updateNodeDict(t))}},{key:"handleDomHTML",value:function(e,t){e=e||"",e=getPIIHandler().removeComments(e),e=getPIIHandler().removeJS(e),e=getPIIHandler().removeBlobLink(e),e=getPIIHandler().replaceMediaSrc(e);var i=globalDataCache.getObject(e,t,"kl");return i.id?i:null}},{key:"getDocType",value:function(){return this._getDocTag()}},{key:"_getDocTag",value:function(){var e="";try{window.XMLSerializer&&window.document.doctype&&(e=(new XMLSerializer).serializeToString(window.document.doctype),logger.log("doctype:"+e))}catch(e){}return e}}],[{key:"getInstance",value:function(){return MAb.instance||(MAb.instance=new MAb,MAb.blobStyleNum=0,MAb.blobStyleCount=0,MAb.blobStyleContent=""),MAb.instance}}]),MAb);function MAb(){classCallCheck(this,MAb)}function getUrlObject(e){var t=document.createElement("a");return t.href=e,t}var MAX_VALUE_LENGTH=1024,attributeMap={message:"message",fileLocation:"fileLocation",fileRelativeLocation:"fileRelativeLocation",lineNo:"lineno",columnNo:"colno"},lastTrackedError={};function handleJSError(i,e,t,n){t=t||window;var r={};if(!i)return r;var a=void 0;return e.attribute.forEach(function(e){var t=attributeMap[e.value];t&&(a=getJSErrorAttribute(t,i)),a&&(r[e.name]=a)}),!0===n?r:r=checkAndSetData(r)}function checkAndSetData(e){for(var t=Object.keys(e),i=0;i<t.length;i++){var n=t[i];if(e[n]&&0<e[n].indexOf("auryc.lib"))return null;if(e[n]!==lastTrackedError[n])return lastTrackedError=e}return null}function getJSErrorAttribute(e,t){if("message"!==e)return"fileLocation"===e?getFileLocation(t):"fileRelativeLocation"===e?getFileRelativeLocation(t):"lineno"===e||"colno"===e?""+t[e]:void 0;var i=t.error?t.error.message:t.message;try{i=trimLength(i||"")}catch(e){i=""}return i||""}function getFileLocation(e){var t,i=(e.filename||"<Unknown>")+":"+e.lineno+":"+e.colno;return i.length>MAX_VALUE_LENGTH&&(t=i.length-MAX_VALUE_LENGTH,i=i.subStr(t)),i}function getFileRelativeLocation(e){var t,i=(getUrlObject(e.filename).pathname||"<Unknown>")+":"+e.lineno+":"+e.colno;return i.length>MAX_VALUE_LENGTH&&(t=i.length-MAX_VALUE_LENGTH,i=i.subStr(t)),i}function trimLength(e){return(e||"").substr(1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,2<arguments.length&&void 0!==arguments[2]?arguments[2]:MAX_VALUE_LENGTH)}function handleOptimizely(e,t,i){var n=null;return(i=i||window).optimizely&&"function"==typeof i.optimizely.get&&(n=getExps(t,i)),n}function getExps(e,t){for(var i=(t=t||window).optimizely.get("data"),n=t.optimizely.get("state"),r=n.getActiveExperimentIds(),a=n.getVariationMap(),o=e.name||"optimizely",s={},c=[],l=[],u=0;u<r.length;u++){var g=r[u],d=a[g].name||a[g].id,h=i.experiments[g].name||g;c.push(h+""),l.push(h+"."+d)}return 0<c.length&&(s[o+"_exp"]=c),0<l.length&&(s[o+"_exp_var"]=l),s}var textInputs=["","color","email","number","search","tel","text","textarea","url"],supportedInputs=[].concat(textInputs,["radio","select","checkbox"]);function getInputType(e){return"textarea"===e.nodeName.toLowerCase()?"text":"select"===e.nodeName.toLowerCase()?"select":(e.getAttribute("type")||e.type).toLowerCase()}function isTextInputs(e){return _.inArray(e,textInputs)}function isSupportedInputs(e){return _.inArray(e,supportedInputs)}function handleForm(e,t,i){if(!e||!e.target&&!e.srcElement)return null;i=i||window;var n=e.target||e.srcElement;if(!n||!n.tagName||"form"!==n.tagName.toLowerCase()||dom.isPIINode(n))return null;var o={},r=n;if(r.name&&(o.form_name=r.name+""),r.id&&(o.form_id=r.id+""),r.querySelectorAll("input, textarea, select").forEach(function(e){var t,i,n,r,a=getInputType(e);isSupportedInputs(a)&&!dom.isPIINode(e)&&(t=_.inArray(e.type,["email","tel"])?e.type:e.name||e.id||e.type||"unnamed",i=e.value,isTextInputs(a)?void 0===e.value||""===e.value||dom.isCreditcardInput(e.value)||(o["input_"+t]=(i+"").substring(0,255)):"radio"===a?e.checked&&(o["radio_"+t]=e.value):"checkbox"===a?e.checked&&i&&(o[n="checkbox_"+t]?o[n].push(i):o[n]=[i]):"select"!==a||(r=Array.from(e.querySelectorAll("option:checked"),function(e){return e.value.substring(0,255)}))&&0<r.length&&(o["select_"+t]=r))}),t&&t.dataType&&_.isArray(t.dataType)&&_.inArray("userProperty",t.dataType)){var a=[{property:_extends({},t,{dataType:t.dataType.filter(function(e){return"userProperty"!==e})}),data:o}];return o.input_email&&a.push({property:_extends({},t,{dataType:["userProperty"]}),data:{email:o.input_email}}),a}return o}var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function InvalidCharacterError(e){this.message=e}function polyfill(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,n,r=0,a=0,o="";n=t.charAt(a++);~n&&(i=r%4?64*i+n:n,r++%4)&&(o+=String.fromCharCode(255&i>>(-2*r&6))))n=chars.indexOf(n);return o}InvalidCharacterError.prototype=new Error,InvalidCharacterError.prototype.name="InvalidCharacterError";var atob="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||polyfill;function b64DecodeUnicode(e){return decodeURIComponent(atob(e).replace(/(.)/g,function(e,t){var i=t.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}var base64_url_decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return b64DecodeUnicode(t)}catch(e){return atob(t)}};function InvalidTokenError(e){this.message=e}InvalidTokenError.prototype=new Error,InvalidTokenError.prototype.name="InvalidTokenError";var lib=function(e,t){if("string"!=typeof e)throw new InvalidTokenError("Invalid token specified");var i=!0===(t=t||{}).header?0:1;try{return JSON.parse(base64_url_decode(e.split(".")[i]))}catch(e){throw new InvalidTokenError("Invalid token specified: "+e.message)}},InvalidTokenError_1=InvalidTokenError;function getRegEx(e){return e instanceof Array||(e=[e]),new RegExp(e[0])}lib.InvalidTokenError=InvalidTokenError_1;var subdomainRegex=/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/i;function getObjectProperty(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:window;if(!e)return i;if(!t)return i;if("object"===(void 0===e?"undefined":_typeof(e)))return getObjectPropertyValue(e,t,i);if("location"===e)return getLocationPropertyValue(t,n)||i;if("localStorage"===e||"sessionStorage"===e)return getStoragePropertyValue(e,t,n)||i;if("cookie"===e)return getCookieValue(t,n)||i;if("variable"===e)return getObjectPropertyValue(n,t,i);if("subdomain"!==e)return"domain"===e?n.document.location.hostname:_.get(n[e],t,i);var r=n.document.location.hostname,a=r.match(subdomainRegex);return null!==a?a[1]:r}function getArrayObject(e,t){var i=t.arrayName,n=t.arrayIndex,r=_.get(e,i,{});return _.isArray(r)&&0!==r.length?("last"===n&&(n=r.length-1),r[n]):{}}function getObjectPropertyValue(e,t,i){_.isObject(t)&&t.type&&"array"===t.type&&(e=getArrayObject(e,t),t=t.arrayItem);var n=_.get(e,t,i);if(_.isArray(n)||_.isString(n)||_.isNumber(n))return n;if(_.isObject(n)){for(var r=[],a=Object.keys(n),o=0;o<Math.min(constants.storage.MAX_PROPERTIES,a.length);o++){var s,c=a[o],l=n[c];(_.isString(l)||_.isNumber(l))&&(s=(c+":"+l).substring(0,255),r.push(s))}return r}return JSON.stringify(n)}function getLocationPropertyValue(e,t){t=t||window;var i=e.split("."),n=i[0];if("search"!==n)return"hash"===n?2===i.length?browser$1.getHashParam(t.location.hash||"",i[1]):t.location.hash:t.location[n];if(2<=i.length){var r,a="";try{(a=browser$1.getQueryParam(t.location.search||"",i.slice(1).join(".")))||(r=JSON.parse(browser$1.getQueryParam(t.location.search||"",i[1])),a=_.get(r,i.slice(2).join(".")))}catch(e){a=""}return a}return t.location.search}function getCookieValue(e){if(_.isString(e))return Cookie.Get(e);if(_.isArray(e)){if(1===e.length)return Cookie.Get(e[0]);var t=Cookie.Parse(e[0]);return _.get(t,e.slice(1))}if(_.isObject(e)&&e.name){var i=e.name;try{var n=Cookie.Get(i),r="",r=e.encode?decode(e.encode,n):JSON.parse(n);return e.path?getObjectPropertyValue(r,e.path,""):getObjectPropertyValue(r,e,"")}catch(e){return null}}return null}function decode(e,t){try{return"jwt"===e?lib(t):t}catch(e){return{}}}function getStoragePropertyValue(e,t){if(_.isString(t)&&(t=[t]),_.isArray(t)&&0<t.length){var i=t[0],n=(n=window[e][i])&&decodeURIComponent(n);if(1===t.length)return n;try{var r=JSON.parse(n);return _.get(r,t.slice(1))}catch(e){return null}}else if(_.isObject(t)&&t.name){var a=(a=window[e][t.name])&&decodeURIComponent(a),o="";try{return o=t.encode?decode(t.encode,a):JSON.parse(a),t.path?getObjectPropertyValue(o,t.path):getObjectPropertyValue(o,t)}catch(e){return null}}}var propertyHandlerMap={aurycJSErrorHanlder:handleJSError,aurycOptimizelyHandler:handleOptimizely,aurycFormHandler:handleForm};function getPropertyHandler(e){var t=void 0;return e&&(t="function"==typeof e?e:propertyHandlerMap[e]),t=t||defaultPropertyHandler}function defaultPropertyHandler(e,n){var t,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window,i=void 0,a=void 0,o={},s=!1;return n.attribute?n.attribute instanceof Array?_.each(n.attribute,function(e){var t=selectValue(a=e.value,!0,r);1===t.length?o[e.name]=t[0]:("userProperty"!==n.dataType&&"sessionProperty"!==n.dataType||(t="currency"===a.type||"number"===a.type?t.reduce(function(e,t){return e+t},0):t.join(",")),o[e.name]=t);var i=o[e.name];"true"===e.required&&0!==i&&(!i||_.isArray(i)&&0===i.length)&&(s=!0)}):0<(t=selectValue(a=n,!1,r)).length&&(i=t[0]):i=!0,i&&(o[n.name||"_default_"]=i),s?null:o}function selectValue(r){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window,a=[],i=[].concat(toConsumableArray(t.document.querySelectorAll(r.cssSelector))).filter(function(e){return!dom.isPIINode(e)});return i.length&&(e||(i=[i[0]]),_.each(i,function(e,t){var i,n;!1!==r.visible&&!e.offsetParent||("string"==typeof(n=e[r.attribute]||!1===e[r.attribute]?e[r.attribute]:e.getAttribute(r.attribute))&&(n=n.trim())&&r.pattern&&(i=getRegEx(r.pattern),"currency"===r.type&&(n=n.replace(",","")),n=(n.match(i)||[])[0]),"currency"===r.type||"number"===r.type?acceptValue(n=n?+n:0,r)&&a.push(n):n&&acceptValue(n,r)&&a.push(n))})),a}function acceptValue(e,t){if(!t.ignore)return 1;var i=t.ignore;if(void 0===i.value||i.value!==e){if(void 0!==i.pattern){var n=getRegEx(i.pattern);if(e.match(n))return}return 1}}function sendCustomData(a,o){var s,c=(2<arguments.length&&void 0!==arguments[2]||window,0),c=window,e="string"==typeof a.dataType?[a.dataType]:a.dataType,l=c.aurycBehaviorAPI||window.aurycBehaviorAPI;l?(s=function(e){l.track(e.name,e.attributes||{})},_.each(e,function(e){var i,t,n=void 0,r=void 0;"userProperty"===e?(n=l.addUserProperties,0<Object.keys(o).length&&(r=o)):"sessionProperty"===e?(n=l.addSessionProperties,0<Object.keys(o).length&&(r=o)):"identity"===e?(n=l.identify,r=o[a.identityKey||a.name||"_default_"]):"customEventMultiVal"===e?(n=s,r={name:a.nameOverride||a.name,attributes:o}):"customEvent"===e&&(n=s,i={},t={},_.each(Object.keys(o),function(e){o[e]instanceof Array?i[e]=o[e]:t[e]=o[e]}),r=[],0<Object.keys(t).length&&r.push({name:a.nameOverride||a.name,attributes:t}),_.each(Object.keys(i),function(t){var e=i[t];_.each(e,function(e){r.push({name:a.name,attributes:defineProperty$2({},t,e)})})}),r.length||(r=null)),n&&r&&(r instanceof Array?_.each(r,function(e){_setDataValue(n,e,c)}):_setDataValue(n,r,c))})):console.warn("Auryc API not found")}var attempts=0;function _setDataValue(e,t){window.auryc&&e?e.call(window.aurycBehaviorAPI,t):window.aurycReadyCb?window.aurycReadyCb.push(function(){window.auryc&&e&&e.call(window.aurycBehaviorAPI,t)}):attempts++<=5&&window.setTimeout(function(){_setDataValue(e,t,window)},2e3)}function handleObjectProperty(n,r){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window,o={};return r&&r.attribute&&r.object&&(r.attribute instanceof Array||(r.attribute=[r.attribute]),r.attribute.forEach(function(e){var t=e.value,i=selectValue$1("context"===r.object?n:r.object,t,e.name,a);!i&&0!==i||(o[e.name]=i)})),o}function handlePropertyName(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window,n=t.name;if(n){if(_.isString(n))return n;if(_.isObject(n)&&n.value){var r=n.value,a=selectValue$1("context"===t.object?e:t.object,r,"",i);return a||0===a?a:JSON.stringify(n)}return JSON.stringify(n)}}function selectValue$1(e,t){var i,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:window,r=void 0,a="";if(_.isString(t)||_.isArray(t))r=t;else{if(!_.isObject(t))return"";t.attribute?r=t.attribute:"array"!==t.type&&"object"!==t.type||(r=t)}try{(a=getObjectProperty(e,r,t.default,n))instanceof Array||(a=(a+"").trim()),!_.isObject(t)||"currency"!==t.datatype&&"number"!==t.datatype||(a=a?+a:0)}catch(e){return""}return a?(_.isObject(t)&&(t.pattern?(i=getRegEx(t.pattern),"currency"===t.type&&(a=a.replace(",","")),a=(a.match(i)||[])[0]):t.delim&&(a=a.split(t.delim).filter(function(e){return""!==e})),"currency"!==t.type&&"number"!==t.type||(a=a?+a:0)),a):""}function processCustomDataRule(r,e,a){var t=e.properties;_.each(t,function(e){var t,i,n;e.object?((t=handlePropertyName(r,e,a))&&(e.nameOverride=t),null!==(i=handleObjectProperty(r,e,a))&&sendCustomData(e,i)):null!==(n=getPropertyHandler(e.handler)(r,e,a))&&(_.isArray(n)?n.forEach(function(e){sendCustomData(e.property,e.data,a)}):sendCustomData(e,n,a))})}function getEventHandler(t,e){var i=arguments,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window;return 0<=e.timeout?function(){setTimeout(function(){return processCustomDataRule(i,t,n)},e.timeout)}:(t.eventHandler||(t.eventHandler=function(e){processCustomDataRule(e,t,n)}),t.eventHandler)}var no_of_clicks=5,time$1=3,click_events=[],possible_click=5,radius=100;function detectXClicks(e,t){var i=click_events.length-1,n=(click_events[i].time.getTime()-click_events[i-e+1].time.getTime())/1e3;if(t<n)return null;for(var r=0,a=i-e+1;a<i;a++)for(var o=a+1;o<=i;o++){var s=Math.round(Math.sqrt(Math.pow(click_events[a].event.clientX-click_events[o].event.clientX,2)+Math.pow(click_events[a].event.clientY-click_events[o].event.clientY,2)));if(r<s&&(r=s),radius<s)return null}return{clicks:e,range:r,period:n}}function removeUsedClickPoints(e){click_events.splice(click_events.length-e,e)}var rageClick=function(i){return function(e){var t;click_events.push({event:e||window.event,time:new Date}),click_events.length>possible_click&&click_events.splice(0,click_events.length-possible_click),5<=click_events.length&&(null!=(t=detectXClicks(no_of_clicks,time$1))&&(removeUsedClickPoints(5),i(t)))}},map={rageClick:rageClick};function getListener(e){return map[e]}function setupCutomDataCollection(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window,t=arguments[1],e=e||window;(t=t||getConfig$1())&&collectCustomData(t,null,null,e)}function collectCustomData(e,t,i,n){n=n||window,_.each(e,function(e){!contextMatch(e.context,n)||t&&!e.dynamic||_processCustomDataRules(e,i,n)})}function _processCustomDataRules(o,s,c){var e=o.triggers;s=s||c.document,e?_.each(e,function(i){if(i.event){var e=[],t=i.object?getObject(i.object,null,c):null;if(t)e.push(t);else if(i.cssSelector){var n=s.querySelectorAll(i.cssSelector);if(!n.length)return void(o.dynamic=!0);e=[].slice.call(n)}var r=getListener(i.listener),a=getEventHandler(o,i,c);r&&(a=r(a)),_.each(e,function(e){var t=config.isTrackConsoleEnabled();if("error"===i.event&&"window"===i.object&&t)return!1;e.addEventListener(i.event,a)})}else 0<=i.timeout&&setTimeout(function(){return processCustomDataRule(null,o,c)},i.timeout)}):processCustomDataRule(null,o,c)}function getConfig$1(){return config.getConfig("userProperties","behavior")}function contextMatch(e,t){if(!e)return 1;var i=e.url,n=e.cssSelector,r=objectWithoutProperties(e,["url","cssSelector"]);if(!i&&!n)return 1;if(!(i&&t.location.href.toLowerCase().indexOf(i.toLowerCase())<0)){if(n){var a=void 0;try{if(!(a=t.document.querySelectorAll(n)).length)return}catch(e){return}var o=a[0];if(r)for(var s=Object.keys(r),c=0;c<s.length;c++){var l=s[c];if(!o[l]||r[l]&&o[l].indexOf(r[l])<0)return}}return 1}}function getObject(e,t){for(var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window,n=t||i,r=e.split("."),a=0;n&&a<r.length;)n=n[r[a]],a++;return n}var userProperty={setupCutomDataCollection:setupCutomDataCollection,collectCustomData:collectCustomData},RcDomChangeMonitor=(createClass(zGb,[{key:"exceedLimit",value:function(){return this.childCharMutsLimitEnabled&&this.childCharMutsLimit}},{key:"updateLimit",value:function(e){this.childCharMutsLimitEnabled&&(this.childCharMutsCnt>this.childCharMutsCntLimit?this.setLimit():this.childCharMutsCnt++,e&&e.innerHTML&&(this.childCharMutsLength+e.innerHTML.length>this.childCharMutsSizeLimit?this.setLimit():this.childCharMutsLength+=e.innerHTML.length))}},{key:"setLimit",value:function(){this.childCharMutsLimitEnabled&&(this.childCharMutsLimit=!0)}},{key:"resetState",value:function(){this.childCharMutsLimitEnabled&&(this.childCharMutsCnt=0,this.childCharMutsLength=0,this.childCharMutsLimit=!1)}},{key:"resetCounter",value:function(){this.childCharMutsLimitEnabled&&(this.childCharMutsCnt=0,this.childCharMutsLength=0)}},{key:"ignoreScriptTag",value:function(e){if(!e)return!1;if(0===e.removedNodes.length&&0===e.addedNodes.length)return!1;for(var t=0;t<e.removedNodes.length;t++){var i=e.removedNodes[t];if(i.nodeName&&"script"!==i.nodeName.toLowerCase())return!1}for(var n=0;n<e.addedNodes.length;n++){var r=e.addedNodes[n];if(r.nodeName&&"script"!==r.nodeName.toLowerCase())return!1}return!0}},{key:"delayedProcess",value:function(e,t,i,n){var r,a,o,s,c,l=this;e.nodeType!==Node.ELEMENT_NODE&&(e=e.parentNode),e&&(e._arMutProp||(e._arMutProp="_"+this.mutNodeIdx++),(r=globalCacheObj.getMappingNode(e._arid))&&(a=r.path,o=r.deweyId,this.mutationBl.some(function(e){return a===e})||(s={delayedFn:i,node:e,index:this.evtProcessIndex++,isAttrChange:n,path:a,deweyId:o,time:t||_.now()},c=e._arMutProp+(n?n.toLowerCase():""),this.mutsToProcess[c]=s,n||this.updateLimit(e),this.blocked||(this.blocked=!0,this.timeOffsetBaseTime=_.now(),setTimeout(function(){try{if(0<Object.keys(l.mutsToProcess).length)for(var e=l.groupNodes(l.mutsToProcess),t=0;t<e.length;t++){var i=e[t];i.delayedFn.call(l,i.node,i.time)}}catch(e){}l.mutsToProcess={},l.duplicateStyle={},l.resetCounter(),l.blocked=!1},this.processingDelay)))))}},{key:"groupNodes",value:function(e){var t,n=[],i={},r={},a={};for(t in e){var o=e[t];o.isAttrChange?a[t]=o:-1<o.deweyId.indexOf(this.bodyPath)?r[o.deweyId]=o:-1<o.deweyId.indexOf(this.headPath)&&(i[o.deweyId]=o),delete o.node._arMutProp}n=n.concat(this.findCommonAncestor(i),this.findCommonAncestor(r));var s,c=[];for(s in a)!function(t){var i=a[t].deweyId;n.some(function(e){return e.maxIndex?_.startsWith(i,e.deweyId)&&"."===i.charAt(e.deweyId.length)&&a[t].index<e.maxIndex:_.startsWith(i,e.deweyId)&&"."===i.charAt(e.deweyId.length)&&a[t].index<e.index})||c.push(a[t])}(s);return n=n.concat(c).sort(function(e,t){return e.index-t.index})}},{key:"findMinMaxNode",value:function(e){var t,i=2147483647,n=null,r=-1,a=null;for(t in e){var o=e[t];o.index<i&&(i=o.index,n=o),o.index>r&&(r=o.index,a=o)}return{minIndex:i,maxIndex:r,minNodeWrapper:n,maxNodeWrapper:a}}},{key:"findCommonAncestor",value:function(e){var t=[];if(1<Object.keys(e).length&&config.isBatchProcessingMutationEnabled()){var i=Object.keys(e),n=dom.findCommonPrefix(i);if(n){var r=this.findMinMaxNode(e),a=r.maxNodeWrapper.node,o=r.maxNodeWrapper.index,s=r.maxNodeWrapper.time,c=r.maxNodeWrapper.delayedFn;if(n.prefix===this.headPath)a=this.processor.getHead();else if(n.prefix===this.bodyPath)a=this.processor.getBody();else for(var l=r.maxNodeWrapper.deweyId.split(".").length,u=n.prefix.split(".").length,g=0;g<l-u;g++)a=a.parentNode;t.push({delayedFn:c,node:a,index:o,maxIndex:r.maxIndex,minIndex:r.minIndex,deweyId:n.prefix,time:s})}else for(var d in e)t.push(e[d])}else for(var h in e)t.push(e[h]);return t}},{key:"isMutationWhitelist",value:function(){}},{key:"isMutationBlackList",value:function(){var e=getInstance(),t=config.getConfig("perf_blacklist","record")||config.getConfig("mut_blacklist","record")||{},i=t.urls||[],n=(t.browser_cutoff||{})[e.browser.name],r=window.location.href;if(n&&e.browser.version<n)for(var a=0;a<i.length;a++)if(-1!==r.indexOf(i[a]))return!0;if(!(i=(config.getConfig("mutexclude","record")||{}).urls))return!1;for(var o=0;o<i.length;o++)if(-1!==r.indexOf(i[o]))return!0;return!1}},{key:"isProcessingAttr",value:function(e,t,i,n){return!(!e||!t)&&(i!==n&&(("style"!==t||!n||-1===n.indexOf("display: none")||!i||-1===i.indexOf("display: none"))&&(!(-1<t.indexOf("aria-"))&&("tabindex"!==t&&(!(2<=t.length&&"on"===t.substr(0,2))&&(("value"!==t||!dom.isPIINode(e))&&(!_.inArray(t,constants.record.mutatationConfig.ignoreAttrList)&&(!_.inArray((e.nodeName||"").toLowerCase(),constants.record.mutatationConfig.ignoreNodeContentsList)&&(("value"!==t||e.nodeType!==Node.ELEMENT_NODE||"input"!==e.nodeName.toLowerCase()||"hidden"!==e.type)&&("id"!==t||null!==n))))))))))}},{key:"processAttrMutEvent",value:function(e,r,t){var a,i,o,s,c=this;this.isMutationBlackList()?logger.log("ignore due to url matching"):this.exceedLimit()?this.limitNotified||(window.auryc.addInternalSessionProperties({perfOpt:!0}),this.limitNotified=!0):(a=e.target.getAttribute(e.attributeName),i=e.oldValue,o=e.attributeName,s=e.target,this.isProcessingAttr(s,o,i,a)&&globalCacheObj.getMappingNode(s._arid)&&this.delayedProcess(s,t,function(e,t){var i,n={};n.k=o,n.v=a,n.x=c.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(s,o)),n._to=t,"class"!==o&&"style"!==o||getPIIHandler().updateBoundingRect(s),"style"===o?(i=s.style||s.getAttribute("style"))&&(n.v=_.isDefined(i.cssText)?i.cssText:""):"disabled"===o&&(n.v=""===a),c.eventWriter.append(EventType.PropChangeT(),n,r),"src"===o&&s.tagName&&"iframe"===s.tagName.toLowerCase()&&s.parentNode&&s.parentNode.nodeType===Node.ELEMENT_NODE&&(s._arB=!1,c.processor.notifyDomUpdated(s.parentNode))},o))}},{key:"registerMutationEvents",value:function(i){var n=this,e=i.getDocObj().getElementsByTagName("html")[0];globalCacheObj.setUp(e,this),this.mutProcessor=new MutationObserver(function(e){var t=_.now();e.forEach(function(e){"attributes"===e.type?n.processAttrMutEvent(e,i,t):("childList"===e.type||"characterData"===e.type&&e.target.nodeType===Node.TEXT_NODE)&&n.handleChildCharMut(e,i,t)})}),this.mutProcessor.observe(i.getDocObj(),{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0})}},{key:"setupCustomConfig",value:function(){config.getConfig("userProperties","behavior")&&(this.customDataDefs=config.getConfig("userProperties","behavior"))}},{key:"handleChildCharMut",value:function(e,m,t){var y=this;if(this.isMutationBlackList())logger.log("ignore due to url matching");else if(!this.ignoreScriptTag(e)){var C=e.target;if(this.exceedLimit())this.limitNotified||(window.auryc.addInternalSessionProperties({perfOpt:!0}),this.limitNotified=!0);else{for(var i=0;i<e.removedNodes.length;i++)globalCacheObj.removeMappingNode(e.removedNodes[i]);for(var n=0;n<e.addedNodes.length;n++)globalCacheObj.mappingNode(e.addedNodes[n],C);var r=C.tagName?C.tagName.toLowerCase():"";C.nodeType===Node.ELEMENT_NODE&&(C.getAttribute("_ar_hide_")||_.inArray(r,constants.record.mutatationConfig.ignoreNodeContentsList))||this.delayedProcess(C,t,function(e,t){try{if(e&&(C=e),!C)return;C.nodeType!==Node.ELEMENT_NODE&&(C=C.parentNode),(C.tagName?C.tagName.toLowerCase():"")===constants.record.tags.SELECT&&C._arIM&&C._arIM.processCurrElem();var i=globalCacheObj.getNodeXPath(C);if(i[0].indexOf("html")<0)return;var n=getPIIHandler().tagDynamic(C,y.processor.getDocObj()),r=void 0;getLinkIdHandler().process();for(var a=C.nodeName.toLowerCase(),o=C.querySelectorAll('img[src*="data:image"]'),s=!1,c=0;c<o.length;c++){var l=o[c];if(l.alt&&1e5<l.alt.length||l.src&&1e5<l.src.length){s=!0;break}}if(s){o=(C=dom.cloneDomNode(C)).querySelectorAll('img[src*="data:image"]');for(var u=0;u<o.length;u++){var g=o[u];g.alt&&1e5<g.alt.length&&g.setAttribute("alt",""),g.src&&1e5<g.src.length&&g.setAttribute("src","")}}if("head"===a){var d,h,p=C.querySelectorAll('style[id="intercom-stylesheet"]');r=p&&0<p.length?(h=(d=dom.cloneDomNode(C)).querySelectorAll('style[id="intercom-stylesheet"]'))&&0<h.length?(h[0].innerHTML="",DomSerialize.getInstance().handleDomHTML(d.innerHTML,i)):DomSerialize.getInstance().handleDomHTML(C.innerHTML,i):DomSerialize.getInstance().handleDomHTML(C.outerHTML,i)}else if("true"===n){var f=dom.cloneDomNode(C);getPIIHandler().processMaskElement(f,m.getDocObj()),getPIIHandler().processHiddenElement(f,m.getDocObj()),getPIIHandler().processAttribute(f,m.getDocObj()),r="body"===a?DomSerialize.getInstance().handleDomHTML(f.outerHTML,i):DomSerialize.getInstance().handleDomHTML(f.innerHTML,i)}else if("false"===n){var I=C;getPIIHandler().isAttributeProcessRequired(m.getDocObj())&&(I=dom.cloneDomNode(C),getPIIHandler().processAttribute(I,m.getDocObj())),r="body"===a?DomSerialize.getInstance().handleDomHTML(I.outerHTML,i):DomSerialize.getInstance().handleDomHTML(I.innerHTML,i)}else if("skip"===n)return;if(!r)return;var b={};b.x=y.eventWriter.updateNodeDict(i),b.dom=r,b.v="",b._to=t,globalSessionTracker.isSpaSendPV()&&(b.pvid=globalSessionTracker.getPV()),y.eventWriter.append(EventType.MutNodeTextT(),b,m),y.processor.notifyDomUpdated(C),y.processor.trackNodeDictionary(),y.customDataDefs.length&&userProperty.collectCustomData(y.customDataDefs,!0,C,y.processor.getWinObj())}catch(e){}})}}}}]),zGb);function zGb(e){classCallCheck(this,zGb),this.processor=e,this.customDataDefs=[],this.eventWriter=EventWriter.getInstance(),this.headPath="",this.bodyPath="",this.setupCustomConfig(),this.isMutationBlackList()?logger.log("NOT set up mutations"):this.registerMutationEvents(this.processor),this.mutNodeIdx=0,this.evtProcessIndex=0,this.blocked=!1,this.mutsToProcess={},this.duplicateStyle={};var t=config.getConfig("mutation","record")||{};this.mutationBl=(t.ignore||"").split(","),this.mutationWl=(t.allowUrl||"").split(","),this.processingDelay=t.delay||constants.record.throttler.DOM_MUT_DELAY,this.timeOffsetBaseTime=0,this.childCharMutsCnt=0,this.childCharMutsLength=0,this.childCharMutsLimit=!1,this.limitNotified=!1,this.mutationWl.some(function(e){return-1<document.location.href.indexOf(e)})&&(t.maxNum*=10,t.maxSize*=10),this.childCharMutsCntLimit=t.maxNum||constants.record.throttler.DOM_MUT_MAX_NUM,this.childCharMutsSizeLimit=t.maxSize||constants.record.throttler.DOM_MUT_MAX_SIZE,this.childCharMutsLimitEnabled=!0===t.throttled}var AjaxProxy=(createClass(kJb,[{key:"proxyXhr",value:function(){if(void 0===this.win._originalXhr){var i=this;this.win._originalXhr=this.win._originalXhr||XMLHttpRequest;var e=this.win._originalXhr.prototype.open;if(e&&-1!==e.toString().indexOf("native code")||!0===config.getConfig("forceXhrOverride","behavior"))for(var t in XMLHttpRequest=function(){for(var e in this.xhr=new i.win._originalXhr,this.xhr){var t="";try{t=_typeof(this.xhr[e])}catch(e){console.log("e",e)}"function"===t?this[e]=i._proxy(e,this.xhr):Object.defineProperty(this,e,{get:i.getFactory(e,this.xhr),set:i.setFactory(e,this.xhr,this)})}},this.win._originalXhr)XMLHttpRequest[t]=this.win._originalXhr[t]}}},{key:"proxyFetch",value:function(t){if(this.win.fetch){if(void 0!==this.win._originalFetch)return;var d=this;this.win._originalFetch=this.win._originalFetch||this.win.fetch,-1===this.win._originalFetch.toString().indexOf("native code")&&!0!==config.getConfig("forceFetchOverride","behavior")||(this.win.fetch=function(e,c){var l,u,g;return null==c&&(c={headers:{}}),c.url=e,g=null,u=[t.before],l=[t.after],new Promise(function(i,n){var r=function(){return c.headers&&(c.headers=new Headers(c.headers)),g=g||new Request(c.url,c),d.mergeObjects(c,g)},a=function(e){var t;return l.length?2===(t=l.shift()).length?(t(r(),e),a(e)):3===t.length?t(r(),e,a):a(e):i(e)},t=function(e){var t;if(void 0!==e)return t=new Response(e.body||e.text,e),i(t),void a(t);o()},o=function(){var e;if(u.length)return 1===(e=u.shift()).length?t(e(c)):2===e.length?e(r(),t):void 0;s()},s=function(){return d.win._originalFetch(r()).then(function(e){return a(e)}).catch(function(e){var t={status:"4xx-5xx",url:c.url,error:{message:e.message,name:e.name,fileName:e.fileName||"",lineNumber:e.lineNumber||0,columnNumber:e.columnNumber||0,stack:e.stack}};return a(t),n(e)})};o()})})}}},{key:"getFactory",value:function(e,t){var i=this;return function(){return i.hasOwnProperty(e+"_")?i[e+"_"]:t[e]}}},{key:"setFactory",value:function(t,i,n){var r=this,a=constants.ajax_proxy.readOnlyAttr;return function(e){r.config[t]?i[t]=function(){r.config[t](i),e&&e.apply(n,arguments)}:_.inArray(t,a)?r[t+"_"]=e:i[t]=e}}},{key:"_proxy",value:function(t,i){var n=this;return function(){var e=[].slice.call(arguments);if(!n.config[t]||!n.config[t].call(n,e,i))return i[t].apply(i,e)}}},{key:"depricatedProp",value:function(e){return"returnValue"===e||"totalSize"===e||"position"===e}},{key:"mergeObjects",value:function(e,t){for(var i in e)if(e[i],!this.depricatedProp(i))try{t[i]=e[i]}catch(e){}return t}}]),kJb);function kJb(e){var t=this;classCallCheck(this,kJb),this.suspend=function(){t.win._originalXhr&&(XMLHttpRequest=t.win._originalXhr,t.win._originalXhr=void 0),t.win._originalFetch&&(t.win.fetch=t.win._originalFetch,t.win._originalFetch=void 0)},config.isAjaxBlacklist()||(this.win=e._win||window,this.config=e,this.proxyXhr(e),this.proxyFetch(e))}var $gtm={},wKb;function xKb(e){return null==e?String(e):(e=wKb.exec(Object.prototype.toString.call(Object(e))))?e[1].toLowerCase():"object"}function yKb(e,t){return Object.prototype.hasOwnProperty.call(Object(e),t)}function zKb(e){if(e&&"object"==xKb(e)&&!e.nodeType&&e!=e.window){try{if(e.constructor&&!yKb(e,"constructor")&&!yKb(e.constructor.prototype,"isPrototypeOf"))return}catch(e){return}for(var t in e);return void 0===t||yKb(e,t)}}function AKb(i,e,t){var n;this.b=i,this.f=e||function(){},this.d=!1,this.a={},this.c=[],this.e=(n=this,{set:function(e,t){EKb(DKb(e,t),n.a)},get:function(e){return n.get(e)}}),BKb(this,i,!t);var r=i.push,a=this;i.push=function(){var e=[].slice.call(arguments,0),t=r.apply(i,e);return BKb(a,e),t}}function BKb(e,t,i){for(e.c.push.apply(e.c,t);!1===e.d&&0<e.c.length;){if("array"==xKb(t=e.c.shift()))e:{var n=t,r=e.a;if("string"==xKb(n[0])){for(var a=n[0].split("."),o=a.pop(),n=n.slice(1),s=0;s<a.length;s++){if(void 0===r[a[s]])break e;r=r[a[s]]}try{r[o].apply(r,n)}catch(e){}}}else if("function"==typeof t)try{t.call(e.e)}catch(e){}else{if(!zKb(t))continue;for(var c in t)EKb(DKb(c,t[c]),e.a)}i||(e.d=!0,e.f(e.a,t),e.d=!1)}}function DKb(e,t){for(var i={},n=i,r=e.split("."),a=0;a<r.length-1;a++)n=n[r[a]]={};return n[r[r.length-1]]=t,i}function EKb(e,t){for(var i in e){var n;yKb(e,i)&&("array"==xKb(n=e[i])?("array"==xKb(t[i])||(t[i]=[]),EKb(n,t[i])):zKb(n)?(zKb(t[i])||(t[i]={}),EKb(n,t[i])):t[i]=n)}}window.DataLayerHelper?$gtm.DataLayerHelper=window.DataLayerHelper:(wKb=/\[object (Boolean|Number|String|Function|Array|Date|RegExp)\]/,($gtm.DataLayerHelper=AKb).prototype.get=function(e){var t=this.a;e=e.split(".");for(var i=0;i<e.length;i++){if(void 0===t[e[i]])return;t=t[e[i]]}return t},AKb.prototype.flatten=function(){this.b.splice(0,this.b.length),this.b[0]={},EKb(this.a,this.b[0])});var isBuffer$1=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},flat=flatten;function flatten(e,u){var g=(u=u||{}).delimiter||".",d=u.maxDepth,h={};return function o(s,c,l){l=l||1,Object.keys(s).forEach(function(e){var t=s[e],i=u.safe&&Array.isArray(t),n=Object.prototype.toString.call(t),r=isBuffer$1(t),a=c?c+g+e:e;if(!i&&!r&&("[object Object]"===n||"[object Array]"===n)&&Object.keys(t).length&&(!u.maxDepth||l<d))return o(t,a,l+1);h[a]=t})}(e),h}function unflatten(s,c){var l=(c=c||{}).delimiter||".",u=c.overwrite||!1,g={};if(isBuffer$1(s)||"[object Object]"!==Object.prototype.toString.call(s))return s;function d(e){var t=Number(e);return isNaN(t)||-1!==e.indexOf(".")||c.object?e:t}return Object.keys(s).sort(function(e,t){return e.length-t.length}).forEach(function(e){for(var t=e.split(l),i=d(t.shift()),n=d(t[0]),r=g;void 0!==n;){var a=Object.prototype.toString.call(r[i]),o="[object Object]"===a||"[object Array]"===a;if(!u&&!o&&void 0!==r[i])return;(u&&!o||!u&&null==r[i])&&(r[i]="number"!=typeof n||c.object?{}:[]),r=r[i],0<t.length&&(i=d(t.shift()),n=d(t[0]))}r[i]=unflatten(s[e],c)}),g}flatten.flatten=flatten,flatten.unflatten=unflatten;var DataLayer$1=(createClass(dMb,[{key:"tryEnable",value:function(){var e=config.getConfig("gtm_datalayer","behavior");e&&!0===e.enabled&&this.checkSampling(e.sampling)&&(this.eventConfig=e.events||{},this.eventWhitelist=this.getRegex(this.eventConfig.names||[]),this.eventPrefix=this.eventConfig.prefix?this.eventConfig.prefix+"_":"",this.eventPropertyWhitelist=this.getRegex(this.eventConfig.properties||[]),this.sessionConfig=e.session||{},this.sessionPrefix=this.sessionConfig.prefix?this.sessionConfig.prefix+"_":"",this.sessionPropertyWhitelist=this.getRegex(this.sessionConfig.properties||[]),this.userConfig=e.user||{},this.userPrefix=this.userConfig.prefix?this.userConfig.prefix+"_":"",this.userPropertyWhitelist=this.getRegex(this.userConfig.properties||[]),window.dataLayer=window.dataLayer||[],this.dlHelper=new $gtm.DataLayerHelper(window.dataLayer,this.listener,!0))}},{key:"getRegex",value:function(e){var i={};return _.isArray(e)?i[this.defaultPropertyKey]=e:i=e,_.each(Object.keys(i),function(e){var t=i[e];i[e]=t.map(function(e){return new RegExp(e,"i")})}),i}},{key:"checkSampling",value:function(e){if(void 0===e||100===e||"true"===window.localStorage.auryc_dl_enabled)return!0;if(0===e)return!1;var t="auryc.gtm_dl",i=this.sessionStorage.getByKey(t);if(i)return"t"===i;var n=100*Math.random()<e;return this.sessionStorage.setByKey(t,n?"t":"f"),n}},{key:"isValidValue",value:function(e){return void 0!==e&&""!==e}}]),dMb);function dMb(){var c=this;classCallCheck(this,dMb),this.listener=function(e,t){var i=flat(t);c.sendCustomEvent(i),c.sendUserProp(i),c.sendSessionProp(i)},this.matchList=function(e,t,i){if(!e||!t)return!1;for(var n=t[c.defaultPropertyKey]||[],r=0;r<n.length;r++){var a=n[r];if(e.match(a))return!0}if(!i)return!1;n=t[i]||[];for(var o=0;o<n.length;o++){var s=n[o];if(e.match(s))return!0}return!1},this.sendCustomEvent=function(t){var i;c.matchList(t.event,c.eventWhitelist)&&(i={},_.each(Object.keys(t),function(e){c.matchList(e,c.eventPropertyWhitelist,t.event)&&c.isValidValue(t[e])&&(i[e]=t[e])}),0<Object.keys(i).length?window.aurycBehaviorAPI.track(c.eventPrefix+t.event,i):window.aurycBehaviorAPI.track(c.eventPrefix+t.event))},this.sendUserProp=function(t){var i={};_.each(Object.keys(t),function(e){c.matchList(e,c.userPropertyWhitelist)&&c.isValidValue(t[e])&&(i[c.userPrefix+e]=t[e])}),0<Object.keys(i).length&&window.aurycBehaviorAPI.addUserProperties(i)},this.sendSessionProp=function(t){var i={};_.each(Object.keys(t),function(e){c.matchList(e,c.sessionPropertyWhitelist)&&c.isValidValue(t[e])&&(i[c.sessionPrefix+e]=t[e])}),0<Object.keys(i).length&&window.aurycBehaviorAPI.addSessionProperties(i)},this.dlHelper=null,this.eventWhitelist=[],this.propertyWhitelist=[],this.sessionStorage=DataLayer.getInstance(constants.symbols.SESSION),this.defaultPropertyKey="__shared__"}var gtmDataLayer=new DataLayer$1,AdobeExp=(createClass(PMb,[{key:"setLimit",value:function(e){this.limit=e}},{key:"tryEnable",value:function(){if(this.win)return this.adobeCfg=config.getConfig("adobe_analytics","behavior"),!(!this.adobeCfg||!0!==this.adobeCfg.enabled)&&(!!this.checkSampling(this.adobeCfg.sampling)&&(this.parseUrlFilter(),this.parseReportFilter(),this.parseSelectors(),this.tryRegister(this.win.document.location.href)))}},{key:"parseSelectors",value:function(){var t=this;_.get(this.adobeCfg,"selectors.name",[]).forEach(function(e){t.selectors.name.push(new RegExp(e))}),_.get(this.adobeCfg,"selectors.payloads",[]).forEach(function(e){t.selectors.payloads.push(new RegExp(e))}),this.namePrefix=_.get(this.adobeCfg,"selectors.name_prefix","")}},{key:"parseReportFilter",value:function(){var t=this;_.get(this.adobeCfg,"filter.report_ids",[]).forEach(function(e){t.allowReportId.push(new RegExp(e))})}},{key:"parseUrlFilter",value:function(){var t=this;_.get(this.adobeCfg,"filter.allow_urls",[]).forEach(function(e){t.allowUrlsRegex.push(new RegExp(e))})}},{key:"checkSampling",value:function(e){if(void 0===e||100===e||"true"===window.localStorage.auryc_aa_enabled)return!0;if(0===e)return!1;var t="auryc.adobe_analytics",i=this.sessionStorage.getByKey(t);if(i)return"t"===i;var n=100*Math.random()<e;return this.sessionStorage.setByKey(t,n?"t":"f"),n}}]),PMb);function PMb(e){var c=this;classCallCheck(this,PMb),this.tryRegister=function(e){return c.win.s&&"function"==typeof c.win.s.registerPostTrackCallback?(c.win.s.registerPostTrackCallback(c.handleTrackingUrl),console.log("Adobe callback registered at "+e),!0):c.registerAttempts++<=5?(setTimeout(function(){return c.tryRegister(e)},1e3),!0):(console.warn("Adobe callback not registered after 5 attempts: "+e),!1)},this.passUrlFilter=function(){if(!c.allowUrlsRegex||0===c.allowUrlsRegex.length)return!0;var t=c.win.document.location.href;return c.allowUrlsRegex.some(function(e){return t.match(e)})},this.passReportSuiteId=function(e){if(!c.allowReportId||0===c.allowReportId.length)return!0;var t=e.split("/"),i=t[8]?t[8].split("?")[0]:"";return!!i&&c.allowReportId.some(function(e){return i.match(e)})},this.handleTrackingUrl=function(e){if(e){if(!c.passUrlFilter())return!1;if(!c.passReportSuiteId(e))return!1;var t=c.win.aurycBehaviorAPI||window.aurycBehaviorAPI,i=c.getVisitorId(e);i&&t.addUserProperties({adobe_visitor_id:i});var n=c.getEvents(e);return n&&0!==n.length?t?(n.slice(0,c.limit).forEach(function(e){e.payloads=e.payloads||{},e.payloads[constants.symbols.INTEGRATION_FLAG]="adobe",t.track(e.name,e.payloads)}),!0):(console.warn("Auryc API not found"),!1):!1}},this.passRegex=function(e,t,i){return 0===e.length?i:e.some(function(e){return t.match(e)})},this.getVisitorId=function(e){var t,i,n=e.split("?")[1]?e.split("?")[1]:"",r=n?n.split("&"):[],a={};for(t in r){r.hasOwnProperty(t)&&(a[(i=r[t].split("="))[0]]=decodeURIComponent(i[1]))}return a.mid||a.aid||a.vid},this.getEvents=function(e){var t,i,n=e.split("?")[1]?e.split("?")[1]:"",r=n?n.split("&"):[],a={};for(t in r){r.hasOwnProperty(t)&&(a[(i=r[t].split("="))[0]]=decodeURIComponent(i[1]))}return a.pe?c.handleLinkEvents(a):c.handleBeaconEvents(a)},this.handleLinkEvents=function(e){var t=[];if("CUSTOM LINK"!==(c.types[e.pe]||"Unknown"))return null;var i=e.pev2||e.pev3,n=c.getPayloads(e),r=c.generateEvent(i,n);return r&&t.push(r),t},this.handleBeaconEvents=function(e){var r=[],a=c.getPayloads(e);return(e.events||"").split(",").forEach(function(e){var t,i,n={};(n=-1<e.indexOf("=")?(t=e.split("="),c.generateEvent(t[0],_extends({},a,{value:+t[1]}))):-1<e.indexOf(":")?(i=e.split(":"),a.value=+i[1],c.generateEvent(i[0],_extends({},a,{value:+i[1]}))):c.generateEvent(e,_extends({},a)))&&!_.isEmptyObject(n)&&r.push(n)}),r},this.generateEvent=function(e,t){return c.passRegex(c.selectors.name,e,!0)?_.isEmptyObject(t)?{name:c.namePrefix+e}:{name:c.namePrefix+e,payloads:t}:null},this.getPayloads=function(e){var t,i,n,r,a={},o=c.selectors.payloads;for(t in c.dict)if(c.dict.hasOwnProperty(t))for(var s in e){e.hasOwnProperty(s)&&s.match("^"+t+"$")&&(i=e[s],n="products"===t?c.getProducts(i):i,r=c.dict[t]+(c.dict[t].match(/Hier|eVar|prop/)?s.match(/[0-9]{1,3}/)[0]:""),c.passRegex(o,r,!1)&&(a[r]=n))}return a},this.getProducts=function(e){var t={0:"Category   : ",1:"Product    : ",2:"Quantity   : ",3:"Price      : ",4:"Events     : ",5:"eVars      : "},i="\n";e=e.split(",");for(var n=0;n<e.length;n++){i=i+(0===n?"":"\n")+"    #"+(n+1)+"\n";for(var r=e[n].split(";"),a=0;a<r.length;a++)r[a]&&(i+=a<=5?"    "+t[a]:"    ",i+=r[a]+"\n")}return i},this.win=e,this.allowUrlsRegex=[],this.allowReportId=[],this.registerAttempts=0,this.namePrefix="",this.selectors={name:[],payloads:[]},this.limit=20,this.sessionStorage=DataLayer.getInstance(constants.symbols.SESSION),this.types={lnk_o:"CUSTOM LINK",lnk_e:"EXIT LINK",lnk_d:"DOWNLOAD LINK",m_i:"MEDIA",m_s:"MEDIA"},this.dict={pageName:"Page Name",pageType:"Page Type",ch:"Site Section",server:"Server",g:"Current URL",events:"Events",purchaseID:"Purchase ID",products:"Products",xact:"Transaction ID",v0:"Campaign","h([0-9]{1,2})":"Hier","l([0-9]{1,2})":"List eVar","v([0-9]{1,3})":"eVar","c([0-9]{1,3})":"prop",zip:"Zip",tnt:"TnT Campaign",cc:"Currency Code",vid:"Manualy set visitor ID"}}var RcConsoleMonitor=(createClass(qOb,[{key:"resetState",value:function(){this.cacheEvent={},this.totalMsg=0,this.disabled=!1}},{key:"truncateMsg",value:function(e,t){try{return e=e||"",_.isString(e)||(e=JSON.stringify(e)),e.length>t&&(e=e.substring(0,t),e+="..."),e}catch(e){return""}}},{key:"getExceedLimitMsg",value:function(e){return{l:"warn",m:"Number of messages reached the limit.",s:"",src:e.src,p:_extends({},e.p,{internal:!0})}}},{key:"addToCache",value:function(e,t){var i=this;if(100<=Object.keys(this.cacheEvent))for(var n=Object.keys(this.cacheEvent).sort(function(e,t){return i.cacheEvent[e]-i.cacheEvent[t]}),r=0;r<20;r++)delete this.cacheEvent[n[r]];this.cacheEvent[e]=t}},{key:"exceedLimit",value:function(){var e=this.totalMsg>constants.storage.MAX_DEV_CONSOLE_EVENT;return e&&(this.disabled=!0),e}},{key:"appendEvent",value:function(e,i){var t,n,r,a=this;this.disabled||(t=encoder.hashCode(JSON.stringify(e)),n=_.now(),this.exceedLimit()?(r=this.getExceedLimitMsg(e),this.eventWriter.append(EventType.ConsoleT(),r,this.rcProcessor)):this.isExpired(t,n)&&(this.addToCache(t,n),this.eventWriter.append(EventType.ConsoleT(),e,this.rcProcessor),this.totalMsg++,this.rule&&this.rule.properties&&i&&this.rule.properties.forEach(function(e){var t=handleJSError(i,e,a.rcProcessor.getWinObj()||window,!0);null!==t&&sendCustomData(e,t)})))}},{key:"getValidPromiseReason",value:function(e){if(_.isString(e))return"Uncaught exception (in promise) "+e;try{return"Uncaught exception (in promise) "+JSON.stringify(e)}catch(e){return"Uncaught exception (in promise)"}}},{key:"trackPromiseErrors",value:function(){var r=this;_.addEventListener(this.rcProcessor.getWinObj(),"unhandledrejection",function(e){if(_.isDefined(e.reason)){var t=r.getValidPromiseReason(e.reason);if(!t)return;var i={l:"exception",m:r.truncateMsg(t,constants.storage.CONSOLE_MSG_LENGTH),s:r.truncateMsg(t,constants.storage.CONSOLE_MSG_STACKTRACE_LENGTH),src:browser$1.locationInfo(),p:{}},n={message:r.truncateMsg(t,constants.storage.CONSOLE_MSG_LENGTH),filename:i.src.path,lineno:0,colno:0};r.appendEvent(i,n)}})}},{key:"saveConsoleEvent",value:function(e,t){var i=Array.prototype.slice.call(e).join(","),n="";if(config.isStackTraceEnabledForConsole())try{n=(new Error).stack}catch(e){}var r={l:t,m:this.truncateMsg(i,constants.storage.CONSOLE_MSG_LENGTH),s:this.truncateMsg(n,constants.storage.CONSOLE_MSG_STACKTRACE_LENGTH),src:browser$1.locationInfo(),p:{}};this.appendEvent(r)}},{key:"trackConsole",value:function(){var e,t,i,n,r=this;void 0!==window.console&&(e=console.log,t=console.error,i=console.warn,n=console.info,console.error=function(){try{r.saveConsoleEvent(arguments,"error")}catch(e){}t.apply(console,arguments)},console.log=function(){try{r.saveConsoleEvent(arguments,"log")}catch(e){}e.apply(console,arguments)},console.warn=function(){try{r.saveConsoleEvent(arguments,"warn")}catch(e){}i.apply(console,arguments)},console.info=function(){try{r.saveConsoleEvent(arguments,"info")}catch(e){}n.apply(console,arguments)})}}]),qOb);function qOb(e){var c=this;classCallCheck(this,qOb),this.trackWindowErrors=function(){_.addEventListener(c.rcProcessor.getWinObj(),"error",function(e){var t=e.filename,i=void 0===t?"":t,n=e.lineno,r=e.colno,a=e.message,o="";e.error&&(a=e.error.message||a,o=e.error.stack);var s={l:"exception",m:c.truncateMsg(a,constants.storage.CONSOLE_MSG_LENGTH),s:c.truncateMsg(o,constants.storage.CONSOLE_MSG_STACKTRACE_LENGTH),src:c.eventGenerator.getConsoleTarget(e),p:{filename:i,lineno:n,colno:r}};_.isDefined(s.m)&&-1===i.indexOf("auryc")&&c.appendEvent(s,e)})},this.isExpired=function(e,t){var i=c.cacheEvent[e];return!i||5e3<t-i},this._originalLog=console.log,this.rule=config.getErrorRule(),this.eventWriter=EventWriter.getInstance(),this.rcProcessor=e,this.eventGenerator=EventGenerator.getInstance(),this.trackWindowErrors(),this.trackPromiseErrors(),this.trackConsole(),this.cacheEvent={},this.totalMsg=0,this.disabled=!1}var RcNetworkMonitor=(createClass(EPb,[{key:"setWhiteListHeader",value:function(){this.resHeaderArr=constants.record.inspect.resHeaderAllowed,this.reqHeaderArr=constants.record.inspect.reqHeaderAllowed;var e=config.getRequestHeaderWhiteList();0<e.length&&(this.reqHeaderArr=_.intersection(e,this.reqHeaderArr));var t=config.getResponseHeaderWhiteList();0<t.length&&(this.resHeaderArr=_.intersection(t,this.resHeaderArr))}},{key:"trackResources",value:function(t){var e,i=this;t=t||window,config.isPerfTimingAPIAvailable(t)&&(e=["navigation","resource","measure","mark"],config.isPaintTimingSupported(t)&&e.push("paint"),this.observedCache=this.observedCache.concat(t.performance.getEntries()),this.observer=new t.PerformanceObserver(function(e){e.getEntries().forEach(function(e){_.inArray(e.initiatorType,i.ajaxType)&&(i.observedCache.push(e),150<i.observedCache.length&&(i.observedCache=i.observedCache.filter(function(e){return!e.processed}))),i.addResourceEvent(e)})}),this.observer.observe({entryTypes:e}),this.observedCache.forEach(function(e){i.addResourceEvent(e)}),t.performance.onresourcetimingbufferfull=function(e){t.performance.clearResourceTimings()})}},{key:"getObservedCache",value:function(){return this.observedCache}},{key:"getResHeaders",value:function(e){var t=e.getAllResponseHeaders().trim().split(/[\r\n]+/),r={};return t.forEach(function(e){var t=e.split(": "),i=t.shift(),n=t.join(": ");r[i]=n}),r}},{key:"filterHeaders",value:function(e,i,n){var r={};return e.forEach(function(e){var t=void 0,t=n&&i.headers?i.headers.get(e):i[e];_.isDefined(t)&&(r[e]=t)}),r}},{key:"processRule",value:function(e,t,i){var n=this;if("none"===e.type)t[i]={};else{var r,a,o=t[i],s={};if("req"===i){o=t[i].body||"{}";try{o=JSON.parse(o)}catch(e){o={}}}"specific"===e.type?(r=e.fields.split(",").map(function(e){return e.trim()}),a=[],r.forEach(function(e){for(var t=o,i=e.split("/"),n=0;n<i.length;n++)t[i[n]]&&(t=t[i[n]],n===i.length-1&&a.push(e))}),a.forEach(function(e){var t=o,i=e.split("/");n.assignBody(t,i,s)})):s=o,t[i]=s}return t}},{key:"assignBody",value:function(e,t,i){var n=t.shift();if(i[n]||(i[n]={}),0===t.length)return i[n]=e[n],i;this.assignBody(e[n],t,i[n])}},{key:"isResponseText",value:function(e){return!_.isUndefined(e)&&("text"===e||""===e)}},{key:"isJsonType",value:function(e){if(!e)return!1;var t="";return e.headers?t=e.headers.get("content-type")||e.headers.get("Content-Type")||"":e._header&&(t=config.getParameterCaseInsensitive(e._header,"content-type")||""),-1<t.indexOf("application/json")}},{key:"getResponseText",value:function(e){return this.isResponseText(e.responseType)?e.responseText:""}},{key:"getWaterfall",value:function(e,t){var i={};switch(t){case"xhr":for(var n=0;n<this.observedCache.length;n++){var r=this.observedCache[n];if(!r.processed&&r.name===e.url){e=Object.assign(e,r);var a=!0,o=!1,s=void 0;try{for(var c,l=this.resourceMeasure[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var u=c.value;i[u]=r[u]}}catch(e){o=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw s}}r.processed=!0;break}}break;case"resource":var g=!0,d=!1,h=void 0;try{for(var p,f=this.resourceMeasure[Symbol.iterator]();!(g=(p=f.next()).done);g=!0){var I=p.value;i[I]=e[I]}}catch(e){d=!0,h=e}finally{try{!g&&f.return&&f.return()}finally{if(d)throw h}}break;case"navigation":var b=!0,m=!1,y=void 0;try{for(var C,A=this.navigationMeasure[Symbol.iterator]();!(b=(C=A.next()).done);b=!0){var v=C.value;i[v]=e[v]}}catch(e){m=!0,y=e}finally{try{!b&&A.return&&A.return()}finally{if(m)throw y}}break;case"measure":case"mark":case"paint":var S=!0,w=!1,x=void 0;try{for(var E,k=this.userTimingMeasure[Symbol.iterator]();!(S=(E=k.next()).done);S=!0){var T=E.value;i[T]=e[T]}}catch(e){w=!0,x=e}finally{try{!S&&k.return&&k.return()}finally{if(w)throw x}}}return i}},{key:"addResourceEvent",value:function(e){var t;config.isTrackResourceEnabled()&&(_.inArray(e.initiatorType,this.ajaxType)||((t={n:e.name,i:e.initiatorType||e.entryType,sz:e.transferSize||0,l:(e.responseEnd-e.fetchStart).toFixed(2),t:e.initiatorType||e.entryType,w:this.getWaterfall(e,e.entryType),req:{},res:{},p:{}}).src=browser$1.locationInfo(),this.eventWriter.append(EventType.NetworkT(),t,this.rcProcessor),e.processed=!0))}},{key:"addNetworkEvent",value:function(e,t){var i=config.getAjaxBodyWhitelist(e.responseURL),n=_.get(e,"detail.sz",this.getResponseText(e).length),r=t.statusCode,a=t.exactLatency,o=t.method,s=t.statusCodeGroup,c=t.url,l={url:c},u={n:c,i:"",sz:n,l:a,t:"xhr",w:this.getWaterfall(l,"xhr"),req:{},res:{},p:{s:r,m:o,sg:s}};if(e.detail){if(u.req=e.detail.req,e.responseText)try{u.res=JSON.parse(e.responseText)}catch(e){u.res={}}u.p.res=e.detail.res}if(e.detail)u.p.res=this.filterHeaders(this.resHeaderArr,u.p.res,"readonly"),u.p.req=this.filterHeaders(this.reqHeaderArr,u.req,"readonly");else{var g=this.getResHeaders(e);u.req=e;var d=config.getParameterCaseInsensitive(g,"content-type");if(d&&-1<d.indexOf("application/json"))try{u.res=JSON.parse(e.responseText)}catch(e){u.res={}}u.p.res=this.filterHeaders(this.resHeaderArr,g),u.p.req=this.filterHeaders(this.reqHeaderArr,e._header)}i.isRecorded?(i.req&&(u=this.processRule(i.req,u,"req")),i.res&&(u=this.processRule(i.res,u,"res"))):(u.req={},u.res={}),u.src=browser$1.locationInfo(),_.isArray(u.res)&&(u.res={response:u.res}),this.eventWriter.append(EventType.NetworkT(),u,this.rcProcessor)}}],[{key:"getInstance",value:function(e){return EPb.instance||(EPb.instance=new EPb(e)),EPb.instance}}]),EPb);function EPb(e){classCallCheck(this,EPb),this.eventWriter=EventWriter.getInstance(),this.rcProcessor=e,this.eventGenerator=EventGenerator.getInstance(),this.setWhiteListHeader(),this.observedCache=[],this.timingMeasure=constants.record.inspect.timingMeasure,this.navigationMeasure=constants.record.inspect.navigationMeasure,this.resourceMeasure=constants.record.inspect.resourceMeasure,this.memoryMeasure=constants.record.inspect.memoryMeasure,this.userTimingMeasure=constants.record.inspect.userTimingMeasure,this.ajaxType=constants.record.inspect.ajaxType}var RcEventMonitor=(createClass(MRb,[{key:"trackResize",value:function(){var t=this;_.addEventListener(this.processor.getWinObj(),"resize",_.throttle(function(e){return t.getSizes(e)},constants.record.throttler.RESIZE)),_.addEventListener(this.processor.getWinObj(),"orientationchange",function(e){return setTimeout(function(e){return t.getSizes(e)},constants.record.throttler.ORIENTATION_CHANGE)})}},{key:"startEventMonitoring",value:function(){var e=this;this.handleFormInputs(this.processor.getBody()),_.addEventListener(this.processor.getDocObj(),"click",function(){return e.handleFormInputs(e.processor.getBody())}),_.addEventListener(this.processor.getWinObj(),"load",function(){config.checkDomOnloadSampling()&&e.processor.generateHTML()}),this.hammer=null,this.pinchEventArr=[],this.mobileCapture=this.initMobileCapture(this.processor.getDocObj()),this.monitorPointingDevice(this.mobileCapture),this.trackResize(),this.trackScroll();var t=config.isTrackConsoleEnabled()&&config.isInJsErrorSamplingPool();this.consoleMonitor=null,this.rcDomChangeMonitor=null,this.scrollToBottomFlag=!1,setTimeout(function(){e.rcDomChangeMonitor=new RcDomChangeMonitor(e.processor),t&&(e.consoleMonitor=new RcConsoleMonitor(e.processor)),config.isTrackNetworkEnabled()&&config.isInAjaxSamplingPool()&&RcNetworkMonitor.getInstance(e.processor).trackResources(e.processor.getWinObj())})}},{key:"newPage",value:function(){this.consoleMonitor&&this.consoleMonitor.resetState(),this.rcDomChangeMonitor&&this.rcDomChangeMonitor.resetState()}},{key:"addPassiveScrollElem",value:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}var i=this,n=browser$1.isInternetExp();_.addEventListener(this.processor.getDocObj(),"scroll",_.throttle(function(e){var t=e.target||e.srcElement;t&&"#document"!==t.nodeName&&"body"!==t.nodeName&&"number"==typeof t.scrollTop&&i.eventWriter.append(EventType.SclInNodeT(),{x:i.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(t)),ps:{x:t.scrollLeft,y:t.scrollTop},trusted:e&&e.isTrusted},i.processor)},constants.record.throttler.SCROLL_INTERVAL),e?{capture:!0,passive:!0}:n)}},{key:"trackCssDynamicChanges",value:function(){var t=this,e=this.processor.getWinObj()||window;this.beforeHandler("insertRule",e.CSSStyleSheet.prototype,_.throttle(function(e){t.captureModifyRuleEvent(t.processor)},200,{leading:!1,trailing:!0})),this.beforeHandler("deleteRule",e.CSSStyleSheet.prototype,_.throttle(function(e){t.captureModifyRuleEvent(t.processor)},200,{leading:!1,trailing:!0}))}},{key:"captureModifyRuleEvent",value:function(e){var t=e.getDocObj();getStyledComponentHandler().processDynamicCss(t)}},{key:"beforeHandler",value:function(e,t,i){if(!t||"function"!=typeof t[e])return null;var n=t[e];t[e]=function(){try{i.apply(this,arguments)}catch(e){}return n.apply(this,arguments)}}},{key:"groupStatus",value:function(e){return 200<=e&&e<300?"20x":300<=e&&e<400?"30x":400<=e&&e<500?"40x":500<=e&&e<600?"50x":"others"}},{key:"groupLatencyGroup",value:function(e){if(e<500)return"<500ms";if(500<=e&&e<1e3)return"500ms - 1s";if(1e3<=e&&e<3e3)return"1s - 3s";if(e<constants.storage.MAX_LATENCY){var t=Math.floor(e/constants.storage.LATENCY_BUCKET_WIDTH),i=constants.storage.LATENCY_BUCKET_WIDTH/1e3;return t*i+"s - "+(t+1)*i+"s"}return">"+Math.floor(constants.storage.MAX_LATENCY/1e3)+"s"}},{key:"processApiCall",value:function(e){var t,i,n=e.responseURL||e._responseURL;n&&urls.isAjaxProxyEnabled(n)&&(t={statusCode:""+e.status,url:n?n.substr(0,constants.storage.AJAX_URL_LIMIT):"",exactLatency:_.now()-e._latency,latency:this.groupLatencyGroup(_.now()-e._latency),statusCodeGroup:this.groupStatus(e.status),method:e._method||constants.ajax_proxy.type.xhr},config.isTrackNetworkEnabled()&&config.isInAjaxSamplingPool()&&setTimeout(function(){RcNetworkMonitor.getInstance().addNetworkEvent(e,t)},100),(i=urls.getLocation(n))&&(i.domain&&(t.domain=i.domain.substr(0,constants.storage.AJAX_URL_LIMIT)),i.path&&(t.path=i.path.substr(0,constants.storage.AJAX_URL_LIMIT)),i.query&&(t.query=i.query.substr(0,constants.storage.AJAX_URL_LIMIT)),i.hash&&(t.hash=i.hash.substr(0,constants.storage.AJAX_URL_LIMIT))),e._processed=!0,config.isInAjaxSamplingPool()&&this.eventWriter.append(EventType.CustomEventT(),{k:"api_call",v:JSON.stringify(t),source:locationInfo()}))}},{key:"ajaxProxyHandler",value:function(){var o=this;config.isAjaxProxyEnabled()&&new AjaxProxy({_win:o.processor.getWinObj(),onreadystatechange:function(e){4===e.readyState&&o.processApiCall(e)},open:function(e,t){t._latency=_.now(),t._processed=!1,t._responseURL=e[1],t._header={}},send:function(e,t){t.body=e[0]},ontimeout:function(e,t){o.processApiCall(t)},onload:function(e){!e.responseURL&&!e._responseURL||e._processed||o.processApiCall(e)},setRequestHeader:function(e,t){t._header[e[0]]=e[1]},before:function(e){e._latency=_.now()},after:function(e,t,i){t||i(t);var n=t&&t.headers&&t.headers.get("content-type")||"",r={status:t.status,responseURL:t.url?t.url:"",_latency:e._latency,_method:constants.ajax_proxy.type.fetch,detail:{res:t,req:e,sz:0}};t.error&&(r.responseText=t.error);var a={status:t.status,statusText:t.statusText,ok:t.ok,headers:t.headers};if(-1!==n.indexOf("application/json"))try{t.text().then(function(e){r.responseText=e,r.detail.sz=e.length;var t=new Response(e,a);i(t),o.processApiCall(r)}).catch(function(e){i(t),o.processApiCall(r)})}catch(e){i(t),o.processApiCall(r)}else-1!==n.indexOf("application/octet-stream")||-1!==n.indexOf("application/python-pickle")||-1!==n.indexOf("image/jpeg")?t.blob().then(function(e){r.responseText="{}",r.detail.sz=e.size,i(new Response(e,a)),o.processApiCall(r)}):-1!==n.indexOf("text/plain")?t.text().then(function(e){r.responseText=e,r.detail.sz=e.length,i(new Response(e,a)),o.processApiCall(r)}):(i(t),o.processApiCall(r))}})}},{key:"viewChageHandler",value:function(){var e,n=this,r=this.processor.getDocObj(),a=browser$1.visibilityEventPrefix(),o=_.isObject(history.state)&&history.state&&history.state.title||document.title,s=globalSessionTracker.getSessionMetadata().viewId;_.addEventListener(r,a+"visibilitychange",function(){var e,t,i;globalSessionTracker.getSessionMetadata().isOver||(e="hidden"===r[(""===a?"v":a+"V")+"isibilityState"],t=1,i=EventType.ViewChangeT(),e&&(t=2),n.eventWriter.append(i,{k:"vc",v:{sid:s,status:t,url:location.href,title:o}},n.processor))}),browser$1.canUseVisibilityChange()?_.addEventListener(r,a+"visibilitychange",function(){"hidden"===r[(""===a?"v":a+"V")+"isibilityState"]&&(logger.log("visibility hidden. commit data",!0),n.eventWriter.syncToServerAndPersist(getInstance().isPhoneOrTablet()))}):(e=getInstance().isPhoneOrTablet()?"unload":"beforeunload",_.addEventListener(this.processor.getWinObj(),e,function(){logger.log("befoerunload fires. commit",!0),n.eventWriter.syncToServerAndPersist(!0)})),browser$1.isSafari()&&getInstance().isPhoneOrTablet()&&_.addEventListener(this.processor.getWinObj(),"pagehide",function(){logger.log("pagehid fires.commit data",!0),n.eventWriter.syncToServerAndPersist(!1)}),_.addEventListener(this.processor.getWinObj(),"mouseout",function(e){var t=(e=e||n.eventWriter.getWinObj().event).relatedTarget||e.toElement,i=void 0;try{t&&(i=t.nodeName)}catch(e){}(!t||i&&"HTML"===i)&&n.eventWriter.syncToServerAndPersist(!0)})}},{key:"initMobileCapture",value:function(e){return this.hammer||(this.hammer=new hammer(e,{touchAction:"auto"}),this.hammer.get("pan").set({direction:hammer.DIRECTION_ALL}),this.hammer.get("pinch").set({enable:!0})),this.hammer}},{key:"getSizes",value:function(e){var t,i,n,r,a=dom.getSize(this.processor.getWinObj()),o=this.processor.doc,s=dom.getDocSize(o),c={w:s.width,h:s.height},l=0;return getInstance().isPhoneOrTablet()&&(t=a,a=c,c=t,0!==(l=window.orientation)?(c.w<c.h&&(i=c.w,c.w=c.h,c.h=i),a.w<a.h&&(n=a.w,a.w=a.h,a.h=n)):c.w>c.h&&(r=c.w,c.w=c.h,c.h=r)),0<c.w&&0<c.h&&0<a.w&&0<a.h&&!_.disableEvent(EventType.WindowDimT())&&this.eventWriter.append(EventType.WindowDimT(),{st:l,m:getInstance().isPhoneOrTablet(),sz:a,avs:c,trusted:e&&e.isTrusted},this.processor,constants.record.timeOffset.WIN_SIZE),0<s.height&&0<s.width&&!_.disableEvent(EventType.HTMLDimT())&&this.eventWriter.append(EventType.HTMLDimT(),{sz:{w:s.width,h:s.height},trusted:e&&e.isTrusted},this.processor,constants.record.timeOffset.WIN_SIZE+10),s}},{key:"serializeInput",value:function(e,t){e&&t&&setTimeout(function(){t.forEach(function(e){e.hasChanged()&&_.isDefined(e.iNode)&&"select"!==e.iNode.nodeName.toLowerCase()&&(e.previousIptVal=e.iNode.value,e.processCurrElem())})},constants.record.throttler.SERIALIZE_INPUT_DELAY)}},{key:"getMobileType",value:function(e){switch(e){case"tap":return EventType.TapT();case"press":return EventType.PressT();case"swipe":case"pan":return EventType.SwipeT();case"pinch":return EventType.PinchT();default:return null}}},{key:"captureResize",value:function(e){var t=this.getSizes(),i={zi:{cw:window.innerWidth,ch:window.innerHeight,w:t.width,h:t.height},ps:browser$1.getScroll(e.getWinObj())};this.eventWriter.append(EventType.ResizeT(),i,e)}},{key:"captureMobileEvent",value:function(e,t){var i,n,r=browser$1.getScroll(e.getWinObj()),a={x:t.center.x,y:t.center.y},o=browser$1.getWinSize(e.getWinObj()),s=dom.getSize(e.getWinObj());"pinchin"===t.type||"pinchout"===t.type?t.type="pinch":"pan"===t.type?0===a.x&&0===a.y?(a.x=dom.getPosition(t.target,e.getWinObj()).x,a.y=dom.getPosition(t.target,e.getWinObj()).y,a.x<s.w/4&&(a.x=s.w/2)):(a.x+=r.x,a.y+=r.y):(i=s.w/o.w,n=s.h/o.h,a.x+=r.x*i,a.y+=r.y*n);var c=this.getMobileType(t.type);if(!c)return null;if(!a||0!==a.x&&!a.x||0!==a.y&&!a.y)return null;var l="";c===EventType.PinchT()&&(this.captureResize(e),l="pinchin"===t.additionalEvent?0:1);var u=-1;t.target&&(u=this.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(t.target)));var g=this.eventGenerator.getEvent(t.srcEvent,constants.events.CLICKTRACKER);if(g){var d={ps:a,v:g.v,source:g.source,x:u};if(EventType.isInteractionEvent(c)&&(d.trusted=t&&t.isTrusted),c===EventType.SwipeT())return d.d=t.direction,d.ag=t.angle.toFixed(2),d.s=t.distance.toFixed(2),void(_.inArray(d.d,[2,4,8,16])&&this.eventWriter.append(c,d,e));c===EventType.PinchT()&&(d.e=l,d.d=t.direction,d.ag=t.angle.toFixed(2),d.s=t.distance.toFixed(2)),logger.log("XXX. Captured tap "+d.i,!0),this.eventWriter.append(c,d,e)}}},{key:"handleMouseEvent",value:function(e,t,i){var n,r,a,o,s,c,l,u,g,d,h,p={};t&&(e.delayed||t.getTopMostFrameProc().hasMouse()||(this.eventWriter.append(EventType.MouseLeaveEntryT(),{v:1,trusted:e&&e.isTrusted},t),t.getTopMostFrameProc().mouseEnter()),t.getTopMostFrameProc().hasMouse()&&((i=i||EventType.MouseMoveT())===EventType.MouseClickT()||i===EventType.MouseMoveT()?(n="number"==typeof e.clientX?e.clientX:e.screenX,r="number"==typeof e.clientY?e.clientY:e.screenY,a=browser$1.getScroll(t.getWinObj()),"number"==typeof n?(p.x=n+a.x,p.y=r+a.y,this.prevPos={x:n,y:r}):this.prevPos?(p.x=this.prevPos.x||0+a.x,p.y=this.prevPos.y||0+a.y):(p.x=a.x,p.y=a.y),!t.isCrossDomainIframe()||(o=t.getMyCoordinates())&&(p.x+=o.x,p.y+=o.y),t.parentFrameProc&&(s=t.getWinObj().frameElement,c=dom.getPosInTopFrame(s,dom.getTopLevelWin(s)),p.x=n+c.x,p.y=r+c.y,!t.parentFrameProc.isCrossDomainIframe()||(l=t.parentFrameProc.getMyCoordinates())&&(p.x+=l.x,p.y+=l.y)),u=null,i===EventType.MouseClickT()?(u=this.eventGenerator.getEvent(e,constants.events.CLICKTRACKER,{position:p}),(g=e.target||e.srcElement||e.originalTarget)&&u&&(u.x=this.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(g)),EventType.isInteractionEvent(i)&&(u.trusted=e&&e.isTrusted))):u={ps:p},u&&this.eventWriter.append(i,u,t)):(h=void 0,(d=e.target||e.srcElement||e.originalTarget)&&(h=this.eventWriter.updateNodeDict(globalCacheObj.getNodeXPath(d))),this.eventWriter.append(i,{ps:this.eventGenerator.getPosition(e),x:h},t))))}},{key:"sendPinchEvent",value:function(e){var t,i,n=this.pinchEventArr.length;1<n&&(t="",t="pinchout"===(i=this.pinchEventArr[n-2]).additionalEvent?"pinchout":"pinchin",(i=this.pinchEventArr[0]).additionalEvent=t,i.center.x+=e.x,i.center.y+=e.y,this.captureMobileEvent(this.processor,i),this.pinchEventArr=[])}},{key:"trackMobileActions",value:function(e){var i=this;e.on("press",function(e){i.captureMobileEvent(i.processor,e)}),e.on("pan",_.throttle(function(e){i.captureMobileEvent(i.processor,e)},constants.record.throttler.WIN_EVENT_THROTTLE,{leading:!0,trailing:!1})),e.on("pinchstart pinchin pinchout",function(e){var t;"pinchstart"===e.type&&(t=browser$1.getScroll(i.processor.getWinObj()),i.pinchEventArr=[],setTimeout(function(){i.sendPinchEvent(t)},constants.record.throttler.WIN_EVENT_THROTTLE)),i.pinchEventArr.push(e)}),_.addEventListener(this.processor.getDocObj(),"mousedown",function(e){var t={srcEvent:e,center:{x:"number"==typeof e.clientX?e.clientX:e.screenX,y:"number"==typeof e.clientY?e.clientY:e.screenY},type:"tap",target:e.target};i.captureMobileEvent(i.processor,t)})}},{key:"trackDesktopActions",value:function(){var t=this;_.addEventListener(this.processor.getWinObj(),"mousemove",_.throttle(function(e){return t.handleMouseEvent(e,t.processor,EventType.MouseMoveT())},constants.record.throttler.MOUSE_MOVE_INTERVAL)),_.addEventListener(this.processor.getWinObj(),"mousedown",function(e){t.handleMouseEvent(e,t.processor,EventType.MouseClickT())})}},{key:"trackScroll",value:function(){var o=this;_.addEventListener(this.processor.getWinObj(),"scroll",_.throttle(function(e){var t,i,n,r,a;o.processor.isTopMostProc()&&(t=browser$1.getScroll(o.processor.getWinObj()),getInstance().isPhoneOrTablet()?(n={w:(i=dom.getDocSize(o.processor.getDocObj())).width,h:i.height},r={zi:n=_extends({},n,{cw:window.innerWidth,ch:window.innerHeight}),ps:t},o.eventWriter.append(EventType.ResizeT(),r,o.processor)):(o.handleMouseEvent(e,o.processor,EventType.MouseMoveT()),o.eventWriter.append(EventType.SclWindowT(),{ps:t,trusted:e&&e.isTrusted},o.processor)),a=browser$1.getWinSize(o.processor.getWinObj()),t.y+a.h>getMaxWinHeight()-100&&(o.scrollToBottomFlag||(o.scrollToBottomFlag=!0,config.checkDomOnloadSampling()&&o.processor.generateHTML(null,null,getMaxWinHeight()))))},constants.record.throttler.WIN_EVENT_THROTTLE))}},{key:"getRelatedTarget",value:function(e,t){return e.relatedTarget?e.relatedTarget:"to"===t?e.toElement||null:"from"===t&&e.fromElement||null}},{key:"trackMouseEnterLeave",value:function(){var n=this;this.processor.mouseEnter(),_.addEventListener(this.processor.getDocObj(),"mouseover",function(e){n.processor.hasMouse()||n.getRelatedTarget(e||n.processor.getWinObj().event,"from")||(n.eventWriter.append(EventType.MouseLeaveEntryT(),{v:1,trusted:e&&e.isTrusted},n.processor),n.processor.mouseEnter())}),_.addEventListener(this.processor.getDocObj(),"mouseout",function(e){var t=n.getRelatedTarget(e||n.processor.getWinObj().event,"to"),i=t&&"HTML"===t.nodeName;!n.processor.hasMouse()||t&&!i||(n.eventWriter.append(EventType.MouseLeaveEntryT(),{v:0,trusted:e&&e.isTrusted},n.processor),n.processor.mouseOut())})}},{key:"monitorPointingDevice",value:function(e){getInstance().isPhoneOrTablet()?this.trackMobileActions(e):this.trackDesktopActions(),this.processor.isTopMostProc()&&this.trackMouseEnterLeave()}},{key:"seriaCalBack",value:function(t){setTimeout(function(){for(var e=0;e<t.length;e++)t[e].processCurrElem()},1)}},{key:"handleFormInputs",value:function(e){var t,i=this;!e||(t=e.querySelectorAll(constants.record.form.inputTypes))&&0!==t.length&&t.forEach(function(e){dom.isPIINode(e)||(e._arIM?e._arIM&&e._arIM.processCurrElem(e):RcInputMonitor.getNewInstance(i.processor,e))})}}]),MRb);function MRb(e){classCallCheck(this,MRb),this.processor=e,this.eventWriter=EventWriter.getInstance(),this.eventGenerator=EventGenerator.getInstance(),this.startEventMonitoring(),this.addPassiveScrollElem(),this.viewChageHandler(),this.ajaxProxyHandler(),this.trackCssDynamicChanges(),gtmDataLayer.tryEnable(),this.adobeExp=new AdobeExp(e.getWinObj()),this.adobeExp.tryEnable()}var ReplayProcessor=(createClass(tVb,[{key:"trackPV",value:function(e,t){var i=void 0,i=t.basicProps?t.basicProps.currentTime:window.aurycLoadedTime?Math.max(_.now(),window.aurycLoadedTime):_.now(),n=browser$1.getScreenResolution();t&&!_.disableEvent(EventType.PVT())&&this.getEventWriter().append(EventType.PVT(),_.extend({},t,{r:"W3C",l:config.getConfig("layout","record")||"",m:e.isPhoneOrTablet(),url:t.content,t:t.name,dtm:i,ofs:(new Date).getTimezoneOffset(),sz:{w:n.w,h:n.h},f:document.referrer.toString()})),config.basicMode()||this.getEventWriter().logVisibilityChange(i),this.initSize()}},{key:"mouseEnter",value:function(){this.mIn=!0}},{key:"mouseOut",value:function(){this.mIn=!1}},{key:"hasMouse",value:function(){return!0===this.mIn}},{key:"addChildProc",value:function(e){this.childrenProc.push(e)}},{key:"initEventHandling",value:function(e){var i=this,n=0<arguments.length&&void 0!==e&&e;AurycPubSub.addListener(constants.events.PAGEVIEWTRIGGER,function(e){var t;n||(i.crossDomainIframe?(t=globalSessionTracker.isSpaSendPV(),i.newPage(t,e)):i.newPage(!0,e),config.basicMode()||userProperty.setupCutomDataCollection())}),config.basicMode()||(AurycPubSub.addListener(constants.events.FEEDBACKTRIGGER,function(e){logger.log("addListener replay FEEDBACKTRIGGER",e);var t={p:e.eventProperties.formid,et:e.eventProperties.et};i.getEventWriter().append(EventType.CustomEventT(),{k:"feedback",v:JSON.stringify(t),source:locationInfo()})}),AurycPubSub.addListener(constants.events.TRACKCUSTOMEVENT,function(e){"js_error"===e.eventName&&e.eventProperties?config.isInJsErrorSamplingPool()&&(i.getEventWriter().append(EventType.CustomEventT(),{k:e.eventName,v:JSON.stringify(e.eventProperties),source:locationInfo()}),i.eventWriter.append(EventType.JSExceptionT(),{v:e.eventProperties.error_message+", "+e.eventProperties.relative_error_loc+", "+(e.eventProperties.error_lineNo||0)})):i.getEventWriter().append(EventType.CustomEventT(),{k:e.eventName,v:JSON.stringify(e.eventProperties),source:locationInfo()})}))}},{key:"getEventWriter",value:function(){return this.parentFrameProc?this.parentFrameProc.getEventWriter():this.eventWriter}},{key:"getBody",value:function(){return this.currWindow.document.body}},{key:"getHead",value:function(){return this.currWindow.document.head}},{key:"getBodyHTML",value:function(){return this.getBody().innerHTML}},{key:"getWinObj",value:function(){return this.currWindow}},{key:"logUrlChangeEvent",value:function(e){var t=e.basicProps;_.isDefined(t)&&t.url&&config.isSPAEnabled()&&this.newPage(!0,e)}},{key:"newPage",value:function(e,t){e&&(globalDataCache.clearCache(),this.getEventWriter().resetState(),this.getEventWriter().resetDomPathCache(),globalCacheObj.clearCache()),this.trackPV(getInstance(),t),config.basicMode()?this.generateHTML(!0,t):(this.initCapture(),this.generateHTML(!0,t),this.rcFrame&&this.rcFrame.handleIframe(this)),this.getEventWriter().serializeAndUpload(!0),this.rcEventMonitor&&this.rcEventMonitor.newPage()}},{key:"initSize",value:function(){var e,t=dom.getSize(this.currWindow),i=0,n=this.getEventWriter(),r=dom.getDocSize(this.getDocObj()),a={w:r.width,h:r.height};this.cachedDocSize=r,getInstance().isPhoneOrTablet()&&(e=t,t=a,a=e,i=window.orientation),n.append(EventType.WindowDimT(),{sz:t,avs:a,v:i,m:getInstance().isPhoneOrTablet()},n.updateNodeDict(this.getProcXPath())),0<r.width&&0<r.height&&!_.disableEvent(EventType.HTMLDimT())&&(n.append(EventType.HTMLDimT(),{sz:{w:r.width,h:r.height}},n.updateNodeDict(this.getProcXPath())),n.updateNodeDict(this.getProcXPath())),n.append(EventType.SclWindowT(),{ps:browser$1.getScroll(this.currWindow)},n.updateNodeDict(this.getProcXPath())),this.addInitSizeToSessionProperties()}},{key:"addInitSizeToSessionProperties",value:function(){var e,t,i;globalSessionTracker.getValueByKey(constants.storage.SESSION_INIT_SIZE)||(e=browser$1.getScreenResolution(this.currWindow),t=browser$1.getWinSize(this.currWindow),i={"Display Size":e.w+" x "+e.h,"Browser Size":t.w+" x "+t.h,"Browser Width":t.w,"Browser Height":t.h},window.auryc&&window.auryc.addInternalSessionProperties?window.auryc.addInternalSessionProperties(i):(window.aurycReadyCb=window.aurycReadyCb||[],window.aurycReadyCb.push(function(){window.auryc.addInternalSessionProperties(i)})),globalSessionTracker.setSessionValues(defineProperty$2({},constants.storage.SESSION_INIT_SIZE,!0)))}},{key:"trackDocSizeChange",value:function(){var e=dom.getDocSize(this.getDocObj());if(e)if(this.cachedDocSize){if(this.cachedDocSize.width===e.width&&this.cachedDocSize.height===e.height)return;this.cachedDocSize=e,this.getEventWriter().append(EventType.HTMLDimT(),{sz:{w:e.width,h:e.height}},this)}else this.cachedDocSize=e,this.getEventWriter().append(EventType.HTMLDimT(),{sz:{w:e.width,h:e.height}},this)}},{key:"getProcXPath",value:function(){return this.myFullPath}},{key:"setProcXPath",value:function(e){this.myFullPath=e.split(",")}},{key:"getDocObj",value:function(){return this.currWindow.document}},{key:"setReady",value:function(){this.getEventWriter().setReady()}},{key:"setNotReady",value:function(){this.getEventWriter().setNotReady()}},{key:"getTopMostFrameProc",value:function(){return this.parentFrameProc?this.parentFrameProc.getTopMostFrameProc():this}},{key:"isTopMostProc",value:function(){return this.getTopMostFrameProc()===this}},{key:"isTopMostWindow",value:function(){return this.currWindow===this.currWindow.top}},{key:"getPerfLantecy",value:function(){var e=_.now(),t=Math.min(_.get(window,"performance.timing.responseStart",e),window.aurycLoadedTime),i=Math.max(_.get(window,"performance.timing.responseEnd",e),window.aurycLoadedTime);return Math.min(constants.time.MAX_LOAD_TIME,Math.max(constants.time.MIN_DOMLOAD_TIME,i-t))}},{key:"generateHTML",value:function(e,t,i,n){var r,a,o,s,c,l,u=this.getEventWriter();u&&this.getBody()&&(globalSessionTracker.isSpaSendPV()&&!n&&this.getEventWriter().resetDomPathCache(),r=globalCacheObj.getNodeXPath(this.getBody()),a=this.isTopMostWindow()&&!e?globalDataCache.getObject(this.getBodyHTML(),r).id:null,o=_.get(t,"basicProps.currentTime",globalSessionTracker.getPVStartTS()),s={},s=config.basicMode()?{id:_.UUID(),v:"<!DOCTYPE html><html><head><title>"+this.currWindow.document.title+"</title></head><body>Not Recorded</body></html>"}:DomSerialize.getInstance().serialize(this.currWindow,this.getProcXPath(),u),c=this.currWindow.location.href.toString(),_.isUndefined(i)||(c="ScrollToBottom_"+i),_.isNumber(o)||(o=_.now()),logger.isLiveDebug()&&(console.log("check isnumber:"+o+":"+_.isNumber(o)+", at:"+window.location.href),console.log("et time:"+_.get(t,"basicProps.currentTime",0)),console.log("pv start:"+globalSessionTracker.getPVStartTS()),console.log("now:"+_.now()+", currtime:"+o)),l={"cD:nO:lM":s,comp:1,"hId:cId":a,"sCurr:kTime":o,"tLoc:qHref:k":c,jType:DomSerialize.getInstance().getDocType(),"sTime:cLat":this.getPerfLantecy()},_.disableEvent(EventType.HTMLTextT())||(u.append(EventType.HTMLTextT(),l,u.updateNodeDict(this.getProcXPath())),this.trackNodeDictionary()))}},{key:"notifyDomUpdated",value:function(e){this.domUpdatedEvent.publishTopic(e)}},{key:"notifyEndSession",value:function(){this.endSessionEvent.publishTopic()}},{key:"notifyPauseResume",value:function(e){this.pauseResumeEvent.publishTopic(e)}},{key:"getMyCoordinates",value:function(){return this.myCoordinates}},{key:"isCrossDomainIframe",value:function(){return this.crossDomainIframe}},{key:"initCapture",value:function(e){var t=this;this.rcEventMonitor||(this.domUpdatedEvent=new PubSubTopic,this.rcEventMonitor=new RcEventMonitor(this,getInstance()),this.domUpdatedEvent.addListener(function(e){e=e||t.currWindow.document.body,t.rcFrame&&t.rcFrame.handleIframe(t,e),t.rcEventMonitor.handleFormInputs(e),t.trackDocSizeChange()}),this.endSessionEvent=new PubSubTopic,this.endSessionEvent.addListener(function(){t.rcFrame&&t.rcFrame.handleIframeEndSession(t)}),this.pauseResumeEvent=new PubSubTopic,this.pauseResumeEvent.addListener(function(e){t.rcFrame&&t.rcFrame.handleIframePauseResume(t,e)}),this.rcFrame=RcFrame.getInstance(),!0===e&&(!0===config.getConfig("newFramePage","record")?globalSessionTracker.newFramePage():this.generateHTML()))}},{key:"trackNodeDictionary",value:function(){var t=this,e=this.getDocObj().querySelectorAll("input:not([type]), input[type=text], select, input[type=number]");_.each(e,function(e){t.getEventWriter().updateNodeDict(globalCacheObj.getNodeXPath(e))})}},{key:"sendFramePage",value:function(e){this.generateHTML(null,null,null,e),this.isCrossDomainIframe()&&globalSessionTracker.setSessionCrosFrame(!0)}}],[{key:"getInstance",value:function(e,t){var i;return e=e||window,tVb.instance||(t?(i=t.fpath.split(","),tVb.instance=new tVb(e,i,null,!0,t.myCoordinates)):tVb.instance=new tVb(e)),tVb.instance}}]),tVb);function tVb(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;return classCallCheck(this,tVb),this.childrenProc=[],this.currWindow=e,this.myXPath=t,this.crossDomainIframe=n,this.eventWriter=EventWriter.getInstance(),this.initialized=!1,i?(this.parentFrameProc=i,this.myFullPath=this.myXPath.concat(this.parentFrameProc.getProcXPath()),config.basicMode()||(setupCutomDataCollection(e,config.getConfig("userProperties","behavior")),this.initCapture(),this.rcFrame&&this.rcFrame.handleIframe(this))):n?(this.myFullPath=this.myXPath,config.basicMode()||(this.initCapture(n),this.rcFrame&&this.rcFrame.handleIframe(this),userProperty.setupCutomDataCollection(),this.initEventHandling()),this.myCoordinates=r):(this.myFullPath=this.myXPath,this.parentFrameProc=null,this.initEventHandling(),globalDataCache.clearCache(),this.mIn=!1,this.ccInputCache={}),void(this.initialized=!0)}var SessionTracker=(createClass(iXb,[{key:"initFlags",value:function(){var e=this.sessStg.getByKey(constants.symbols.CANCELED);this.isCanceledFlag=!!_.isDefined(e)&&e}},{key:"getPrevSessionId",value:function(){return this.prevSessionId}},{key:"setPrevSessionId",value:function(e){this.prevSessionId=e}},{key:"removeUser",value:function(){this.persStg.removeByKey(constants.events.USERID),this.persStg.removeByKey(constants.events.IDENTITYVALUE),this.persStg.resetUserProp(),this.stg.purge(),this.endSession(!0)}},{key:"setSessionIds",value:function(e,t,i,n){var r=constants.storage.SESSIONID,a=constants.storage.VIEWID,o=constants.events.USERID,s=i||idGen$1.generateSessionId(e,t);this.setPrevSessionId(s);var c=n||idGen$1.generateViewId();return logger.log("userid: "+e+", time:"+t+" sid: "+s+", vid: "+c),this.sessStg.setSessionByKey(a,c,constants.storage.SCOPE.SESSION.TAB),this.sessStg.setSessionByKey(r,s),this.sessStg.setSessionByKey(constants.events.SESSIONTIME,t),this.stg.setByKey(a,c),this.stg.setByKey(r,s),this.stg.setByKey(o,e),this.stg.setByKey(constants.events.SESSIONTIME,t),this.stg.commit(),{sessionId:s,viewId:c}}},{key:"isCanceled",value:function(){return this.isCanceledFlag}},{key:"setCancel",value:function(e){this.isCanceledFlag=e,this.sessStg.setSessionByKey(constants.symbols.CANCELED,e,constants.storage.SCOPE.SESSION.TAB)}},{key:"setSessionValues",value:function(i){var n=this;return Object.keys(i).forEach(function(e){var t=i[e];void 0!==t&&(n.sessStg.setSessionByKey(e,t),n.stg.setByKey(e,t))}),this.stg.commit(),this.sessStg}},{key:"getValueByKey",value:function(e){return this.stg.getByKey(e)||this.sessStg.getByKey(e)}},{key:"isNewTab",value:function(){var e=constants.storage.IS_NEW,t=this.stg.getByKey(e)||this.sessStg.getByKey(e);return t||(t="true",this.sessStg.setSessionByKey(e,t,constants.storage.SCOPE.SESSION.TAB),this.stg.setByKey(e,t),this.stg.commit()),t}},{key:"getSessionIdTimeCached",value:function(e){var t,i=_.now();return(!this.cachedIdTime||this.lastSessionCheckTime+5e3<i)&&(t=this.sessStg.getByKeyList(e),this.cachedIdTime=t,this.lastSessionCheckTime=i),this.cachedIdTime}},{key:"getSessionMetadata",value:function(){var e=[constants.storage.SESSIONID,constants.events.SESSIONTIME],t=this.getSessionIdTimeCached(e),i=t[constants.storage.SESSIONID]||this.stg.getByKey(constants.storage.SESSIONID),n=t[constants.events.SESSIONTIME]||this.stg.getByKey(constants.events.SESSIONTIME),r=this.persStg.getByKeyFromMem(constants.events.USERID)||this.sessStg.getByKey(constants.events.USERID),a=this.stg.getByKey(constants.linkid.aurycMode),o=this.stg.getByKey(constants.linkid.editorHash),s=constants.storage.VIEWID,c=this.stg.getByKey(s)?this.stg.getByKey(s):this.sessStg.getByKey(s);return c&&!this.stg.getByKey(s)&&(this.stg.setByKey(s,c),this.stg.commit()),this.isSessionOver()?{sessionId:i,viewId:c,userId:r,sessionTime:n,siteId:this.siteid,aurycMode:a,editorHash:o,isOver:!0}:(this.getPrevSessionId()||this.setPrevSessionId(i),i!==this.getPrevSessionId()?(c=idGen$1.generateViewId(),this.setPrevSessionId(i),this.sessStg.setSessionByKey(s,c,constants.storage.SCOPE.SESSION.TAB),this.sessStg.setSessionByKey(constants.storage.IS_NEW,"false",constants.storage.SCOPE.SESSION.TAB),this.stg.setByKey(constants.storage.VIEWID,c),this.stg.setByKey(constants.storage.IS_NEW,"false"),this.initSessionOrPV()):(c||(c=idGen$1.generateViewId(),this.sessStg.setSessionByKey(s,c,constants.storage.SCOPE.SESSION.TAB),this.stg.setByKey(s,c),this.stg.commit(),this.initSessionOrPV()),window.opener&&window.opener!==window.self&&"true"===this.isNewTab()&&(c=idGen$1.generateViewId(),this.sessStg.setSessionByKey(s,c,constants.storage.SCOPE.SESSION.TAB),this.sessStg.setSessionByKey(constants.storage.IS_NEW,"false",constants.storage.SCOPE.SESSION.TAB),this.stg.setByKey(constants.storage.VIEWID,c),this.stg.setByKey(constants.storage.IS_NEW,"false"),this.stg.commit())),logger.log("userid: "+r+", time:"+n+" sessionId: "+i+", viewId: "+c),{sessionId:i,viewId:c,userId:r,sessionTime:n,siteId:this.siteid,aurycMode:a,editorHash:o,isOver:!1})}},{key:"isCrossDomain",value:function(){if(this.crossDomain)return!0;var e=this.stg.getByKey(constants.storage.HOST);return!!e&&this.host!==e}},{key:"setSessionCrosFrame",value:function(e){this.isSessionCrosFrame=e}},{key:"isSpaSendPV",value:function(){return!0===this.isSpaSendPVFlag}},{key:"setSpaSendPV",value:function(e){this.isSpaSendPVFlag=e}},{key:"renewSession",value:function(){this.beginSession(),this.cachedIdTime=null;var e,t=config.getCurrentIdentity();t&&0<t.length&&((e={})[constants.symbols.IDENTITY_IN_SESSION]=t,window.auryc&&window.auryc.addSessionProperties(e))}},{key:"beginSession",value:function(){var e=window.aurycLoadedTime?Math.max(_.now(),window.aurycLoadedTime):_.now(),t=e+this.duration;this.sessStg.setSessionByKey(constants.events.SESSION_EXP,t),logger.warn("begin a new session: "+e+" exp: "+(e+this.duration));var i,n,r,a,o=this.stg.getByKey(constants.events.USERID);this.isCrossDomain()&&o?(i=this.stg.getByKey(constants.storage.VIEWID),n=this.stg.getByKey(constants.storage.SESSIONID),r=(r=this.stg.getByKey(constants.events.SESSIONTIME))||e,this.initPV(),this.setSessionIds(o,r,n,i)):(o=(o=this.persStg.getByKey(constants.events.USERID))||idGen$1.generateUserId(),a=this.setSessionIds(o,e),logger.log("exp: "+this.sessStg.getByKey(constants.events.SESSION_EXP)),this.resetPV(),AurycPubSub.publish(constants.events.NEW_SESSION,{sessionId:a.sessionId,viewId:a.viewId}),this.incPV()),this.persStg.setSessionByKey(constants.events.USERID,o),this.resetTimer(t),AurycPubSub.publish(constants.events.PAGEVIEWTRACKER),config.getConfig("sessionPropertyInherit","behavior")&&this.reSendSessionProperty(o),logger.log("published new session event"),this.syncWindowStg()}},{key:"reSendSessionProperty",value:function(e){var t=e+constants.events.INTERNALSESSIONPROP,i=e+constants.events.SESSIONPROP,n=localStorage.getItem(t);n&&AurycPubSub.publish(constants.events.USERIDENTIFY,{internalSessionProperties:JSON.parse(n)}),(n=localStorage.getItem(i))&&AurycPubSub.publish(constants.events.USERIDENTIFY,{sessionProperties:JSON.parse(n)})}},{key:"incPV",value:function(){var e=this.getPVFromSessStorage();null==e&&(e=this.stg.getByKey(constants.storage.PVCT)),null==e?e=0:e++,this.pvCount=e,this.setPVInStorage(e)}},{key:"resetPV",value:function(){this.sessStg.removeByKey(constants.storage.PV),this.stg.removeByKey(constants.storage.PVCT),this.pvCount=0}},{key:"getPV",value:function(){return this.pvCount}},{key:"getPVFromSessStorage",value:function(){return this.sessStg.getByKey(constants.storage.PV)}},{key:"setPVInStorage",value:function(e){this.sessStg.setSessionByKey(constants.storage.PV,e),this.stg.setByKey(constants.storage.PVCT,e)}},{key:"syncPVInFrame",value:function(e){this.sessStg.setSessionByKey(constants.storage.PV,e),this.stg.setByKey(constants.storage.PVCT,e),this.pvCount=e}},{key:"endSession",value:function(e){this.isSessionOver()||e?(logger.warn("end a session. now:"+_.now()+", exp:"+this.sessStg.getByKey(constants.events.SESSION_EXP)),this.sessStg.removeByKey(constants.events.SESSION_EXP),this.sessStg.removeByKey(constants.storage.VIEWID),this.stg.removeByKey(constants.storage.VIEWID),this.stg.commit(),ReplayProcessor.getInstance().notifyEndSession()):logger.log("session still alive. now:"+_.now()+", exp:"+this.sessStg.getByKey(constants.events.SESSION_EXP))}},{key:"endIframeSession",value:function(){this.askedToEnd=!0}},{key:"isSessionOver",value:function(){if(this.askedToEnd)return!0;if(this.isSessionCrosFrame)return!1;var e=this.sessStg.getByKeyFromMem(constants.events.SESSION_EXP),t=_.now();(!e||e<t)&&(e=this.sessStg.getByKey(constants.events.SESSION_EXP));var i=!0;return!e||e<t?(i=!0,logger.log("session id:"+this.sessStg.getByKey(constants.storage.SESSIONID)+", session is over. now: "+t+", exp: "+e)):i=!1,i}},{key:"resetTimer",value:function(e){var t=this;window.clearTimeout(this.timeoutId);var i,n=this;this.timeoutId=window.setTimeout(function(){t.parentWin||n.endSession()},this.duration),e||(i=_.now()+this.duration,this.sessStg.setSessionByKey(constants.events.SESSION_EXP,i))}},{key:"startTrackingHeartbeat",value:function(){var e=this;config.isVisualEditorMode()||this.heartbeatTracker||(this.heartbeatTracker=setInterval(function(){e.sendHeartbeat()},this.heartbeatInterval))}},{key:"stopTrackingHeartbeat",value:function(){!config.isVisualEditorMode()&&this.heartbeatTracker&&clearInterval(this.heartbeatTracker)}},{key:"sendHeartbeat",value:function(){this.isSessionOver()||config.basicMode()?(logger.log("session is over. skip ping"),this.parentWin||this.endSession()):AurycPubSub.publish(constants.events.PINGTRIGGER)}},{key:"handleUnload",value:function(){var e=browser$1.visibilityEventPrefix();null!==e?document.addEventListener(e+"visibilitychange",_.bind(function(){"hidden"===document[(""===e?"v":e+"V")+"isibilityState"]&&(logger.log("visibility hidden. ping"),this.sendHeartbeat(),this.stg&&this.stg.commit())},this)):browser$1.isPhoneOrTablet()?window.addEventListener("unload",_.bind(function(){logger.log("unload fires. ping"),this.stg&&this.stg.commit(),this.sendHeartbeat()},this)):window.addEventListener("beforeunload",_.bind(function(){logger.log("befoerunload fires. ping"),this.stg&&this.stg.commit(),this.sendHeartbeat()},this))}},{key:"bindEvent",value:function(){var t=this;"pointerover pointerenter pointerdown pointermove pointerup pointercancel pointerout pointerleave".split(" ").forEach(function(e){browser$1.addDomEvent(window,e,_.throttle(function(){t.isSessionOver()?(logger.log("not create a new session"),!0===config.getConfig("renewSession","behavior")&&t.renewSession()):t.resetTimer()},5e3,{leading:!0,trailing:!1}))});var e=browser$1.visibilityEventPrefix();null!==e&&document.addEventListener(e+"visibilitychange",function(){"visible"===document[(""===e?"v":e+"V")+"isibilityState"]&&(logger.log("visibility visible"),t.isSessionOver()?(logger.log("create a new session"),!0===config.getConfig("renewSession","behavior")&&t.renewSession()):t.resetTimer())}),"pointerover pointerenter pointerdown pointermove pointerup pointercancel pointerout pointerleave".split(" ").forEach(function(e){browser$1.addDomEvent(window,e,_.throttle(function(){if(t.parentWin&&!t.askedToEnd)try{t.parentWin.postMessage({source:"_ar_",command:"extendSession"},"*")}catch(e){}},3e4,{leading:!0,trailing:!1}))})}},{key:"syncWindowStg",value:function(){var e=constants.storage.HOST,t=[constants.storage.SESSIONID,constants.events.SESSIONTIME],i=this.sessStg.getByKeyList(t),n=i[constants.storage.SESSIONID],r=i[constants.events.SESSIONTIME];r&&this.stg.setByKey(constants.events.SESSIONTIME,r),n&&this.stg.setByKey(constants.storage.SESSIONID,n);var a=this.persStg.getByKey(constants.events.USERID);a&&this.stg.setByKey(constants.events.USERID,a),this.stg.setByKey(e,this.host),this.stg.commit()}},{key:"initSessionOrPV",value:function(e){if(!this.isCanceled()){var t,i,n,r=config.getArLinkid(),a=browser$1.getLinkidParams();if(0<Object.keys(a).length&&(2===(n=(n=a[r]).split("_")).length&&(t=encoder.shiftString(n[0]),i=encoder.shiftString(n[1]),this.persStg.setSessionByKey(constants.events.USERID,t),this.stg.setByKey(constants.events.USERID,t),this.stg.setByKey(constants.storage.SESSIONID,i),this.sessStg.setSessionByKey(constants.storage.SESSIONID,i),this.setPrevSessionId(i),this.crossDomain=!0)),e){var o=e.userId,s=e.sessionId,c=e.viewId,l=e.sessionTime,u=e.pv,g=e.frameIdx;this.persStg.setSessionByKey(constants.events.USERID,o),this.stg.setByKey(constants.events.USERID,o),this.stg.setByKey(constants.storage.SESSIONID,s),this.sessStg.setByKey(constants.storage.SESSIONID,s,constants.storage.SCOPE.SESSION.TAB);var d=_.now()+this.duration;return this.sessStg.setSessionByKey(constants.events.SESSION_EXP,d,constants.storage.SCOPE.SESSION.TAB),this.sessStg.setSessionByKey(constants.events.USERID,o,constants.storage.SCOPE.SESSION.TAB),this.sessStg.setSessionByKey(constants.storage.SESSIONID,s),this.stg.setByKey(constants.storage.VIEWID,c),this.stg.setByKey(constants.events.SESSIONTIME,l),this.sessStg.setByKey(constants.events.SESSIONTIME,l),this.setPrevSessionId(s),this.pvCount=u,this.setPVInStorage(u),this.resetTimer(),this.frameIdx=g,this.parentWin=e.parentWin,void this.bindEvent()}this.isSessionOver()?this.renewSession():(this.initPV(),AurycPubSub.publish(constants.events.PAGEVIEWTRACKER),this.resetTimer(),this.syncWindowStg()),this.bindEvent(),this.startTrackingHeartbeat()}}},{key:"newFramePage",value:function(){this.initPV(!0),AurycPubSub.publish(constants.events.PAGEVIEWTRACKER)}},{key:"initPV",value:function(e){var t=window.aurycLoadedTime?Math.max(_.now(),window.aurycLoadedTime):_.now();logger.log("create a new pv. setting startTS:"+t),this.sessStg.setSessionByKey(constants.events.PV_START_TS,t,constants.storage.SCOPE.SESSION.TAB);var i=browser$1.getWinSize(window);this.sessStg.setByKey(constants.events.WIN_SIZE,JSON.stringify(i),constants.storage.SCOPE.SESSION.TAB),this.stg.setByKey(constants.events.PV_START_TS,t),this.stg.setByKey(constants.events.WIN_SIZE,JSON.stringify(i)),this.stg.commit(),e||this.incPV()}},{key:"getPVStartTS",value:function(){var e=this.stg.getByKey(constants.events.PV_START_TS)||this.sessStg.getByKey(constants.events.PV_START_TS);return e?(logger.log("Getting start ts from storage: "+e),e):(logger.log("Not getting start ts from storage. using now()"),_.now())}},{key:"getWinSize",value:function(){return this.stg.getByKey(constants.events.WIN_SIZE)||this.sessStg.getByKey(constants.events.WIN_SIZE)}},{key:"getSessionStorage",value:function(){return this.sessStg}},{key:"getSession",value:function(i){var n=this;return i&&Object.keys(i).forEach(function(e){var t=n.stg.getByKey(i[e]);void 0!==t&&n.sessStg.setSessionByKey(i[e],t)}),this.sessStg}}]),iXb);function iXb(e,t){classCallCheck(this,iXb),this.sessStg=e,this.persStg=t,this.prevSessionId=null,this.siteid=config.getSiteid(),this.duration=1e3*config.getConfig("sessionDuration","behavior"),this.timeoutId=null,this.heartbeatTracker=null,this.isNew=!0,this.heartbeatInterval=1e3*(config.getConfig("heartbeatInterval","behavior")||60),this.pvCount=0,this.host=window.location.protocol+"//"+window.location.host,this.stg=StorageManager.getInstance(this.siteid),this.crossDomain=!1,this.initFlags(),this.lastSessionCheckTime=0,this.frameIdx=1,this.isSpaSendPVFlag=!1}var globalSessionTracker=new SessionTracker(DataLayer.getInstance(constants.symbols.SESSION),DataLayer.getInstance(constants.symbols.PERMANENT)),LinkId=(createClass(OZb,[{key:"parseConfig",value:function(){var e=config.getConfig("crossDomainConfig","behavior");this.rules="",e&&e.property&&e.property.cssSelector&&(this.rules=e.property.cssSelector.split(" ").join(","))}},{key:"process",value:function(e){var a=this;e&&(this.rules=e.split(" ").join(","));var t,i=window.document;0<this.rules.length&&(t=i.querySelectorAll(this.rules),[].forEach.call(t,function(e,t){if("a"===e.tagName.toLowerCase()||"form"===e.tagName.toLowerCase())a.addLinkId(e);else for(var i=e.querySelectorAll("a,form"),n=i.length-1;0<=n;n--){var r=i[n];a.addLinkId(r)}}))}},{key:"getAurycLinkId",value:function(){var e=globalSessionTracker.getSessionMetadata(),t=encoder.shiftString(e.userId)+"_"+encoder.shiftString(e.sessionId);return e.aurycMode&&(t="editor#mode="+e.aurycMode+"&t="+e.editorHash),t}},{key:"addLinkId",value:function(e){var t,i,n,r,a,o=e.getAttribute("href")||e.getAttribute("action");o&&0!==o.indexOf("javascript:")&&0!==o.indexOf("#")&&0!==o.indexOf("?")&&(i=void 0,(t=globalSessionTracker.getSessionMetadata()).aurycMode?(i=t.aurycMode,-1===o.indexOf("#mode")&&(o+="#mode="+i+"&t="+t.editorHash)):-1===o.indexOf(this.id)&&(i=encoder.shiftString(t.userId)+"_"+encoder.shiftString(t.sessionId),n=o.indexOf("?")+1,r=o.indexOf("#")+1,a=(n?"&":"?")+this.id+"="+i,o=r?o.replace("#",a+"#"):o+a),e.getAttribute("href")?e.setAttribute("href",o):e.setAttribute("action",o))}}]),OZb);function OZb(){classCallCheck(this,OZb),this.id=config.getArLinkid(),this.parseConfig()}var globalLinkIdHandler=null;function getLinkIdHandler(){return globalLinkIdHandler=globalLinkIdHandler||new LinkId}var LinkidAPI=(createClass(k$b,[{key:"addLinkId",value:function(e){getLinkIdHandler().process(e)}},{key:"getAurycLinkId",value:function(){return getLinkIdHandler().getAurycLinkId()}}]),k$b);function k$b(){classCallCheck(this,k$b)}var RcController=(createClass(o$b,[{key:"init",value:function(e,t){this.rcProcessor=ReplayProcessor.getInstance(this.winobj,t),e&&this.rcProcessor.setReady()}},{key:"setReady",value:function(){this.rcProcessor&&this.rcProcessor.setReady()}},{key:"pause",value:function(){return this.rcProcessor=ReplayProcessor.getInstance(this.winobj),this.rcProcessor.notifyPauseResume("pause"),this.rcProcessor.getEventWriter().pause()}},{key:"resume",value:function(){return this.rcProcessor=ReplayProcessor.getInstance(this.winobj),this.rcProcessor.notifyPauseResume("resume"),this.rcProcessor.getEventWriter().resume()}}],[{key:"getInstance",value:function(e){return o$b.instance||(o$b.instance=new o$b(e)),o$b.instance}}]),o$b);function o$b(e){classCallCheck(this,o$b),this.winobj=e,this.rcProcessor=null}function styleInject(e,t){void 0===t&&(t={});var i,n,r=t.insertAt;e&&"undefined"!=typeof document&&(i=document.head||document.getElementsByTagName("head")[0],(n=document.createElement("style")).id="auryc_style","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)))}var css$1='@charset "UTF-8";@font-face{font-family:AurycFontAwesome;font-weight:400;font-style:normal;src:url(//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.eot);src:url(//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.eot#iefix) format("embedded-opentype"),url(//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.ttf) format("truetype"),url(//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff) format("woff"),url(//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2) format("woff2"),url(//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.svg#fontawesomeregular) format("svg")}@font-face{font-family:Open Sans;font-style:normal;font-weight:400;src:local("Open Sans Regular"),local("OpenSans-Regular"),url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFWJ0bf8pkAp6a.woff2) format("woff2");unicode-range:u+0460-052f,u+1c80-1c88,u+20b4,u+2de0-2dff,u+a640-a69f,u+fe2e-fe2f}@font-face{font-family:Open Sans;font-style:normal;font-weight:400;src:local("Open Sans Regular"),local("OpenSans-Regular"),url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFUZ0bf8pkAp6a.woff2) format("woff2");unicode-range:u+0400-045f,u+0490-0491,u+04b0-04b1,u+2116}@font-face{font-family:Open Sans;font-style:normal;font-weight:400;src:local("Open Sans Regular"),local("OpenSans-Regular"),url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFWZ0bf8pkAp6a.woff2) format("woff2");unicode-range:u+1f??}@font-face{font-family:Open Sans;font-style:normal;font-weight:400;src:local("Open Sans Regular"),local("OpenSans-Regular"),url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFVp0bf8pkAp6a.woff2) format("woff2");unicode-range:u+0370-03ff}@font-face{font-family:Open Sans;font-style:normal;font-weight:400;src:local("Open Sans Regular"),local("OpenSans-Regular"),url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFWp0bf8pkAp6a.woff2) format("woff2");unicode-range:u+0102-0103,u+0110-0111,u+1ea0-1ef9,u+20ab}@font-face{font-family:Open Sans;font-style:normal;font-weight:400;src:local("Open Sans Regular"),local("OpenSans-Regular"),url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFW50bf8pkAp6a.woff2) format("woff2");unicode-range:u+0100-024f,u+0259,u+1e??,u+2020,u+20a0-20ab,u+20ad-20cf,u+2113,u+2c60-2c7f,u+a720-a7ff}@font-face{font-family:Open Sans;font-style:normal;font-weight:400;src:local("Open Sans Regular"),local("OpenSans-Regular"),url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0bf8pkAg.woff2) format("woff2");unicode-range:u+00??,u+0131,u+0152-0153,u+02bb-02bc,u+02c6,u+02da,u+02dc,u+2000-206f,u+2074,u+20ac,u+2122,u+2191,u+2193,u+2212,u+2215,u+feff,u+fffd}@font-face{font-family:Open Sans;font-style:normal;font-weight:600;src:local("Open Sans SemiBold"),local("OpenSans-SemiBold"),url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOX-hpKKSTj5PW.woff2) format("woff2");unicode-range:u+0460-052f,u+1c80-1c88,u+20b4,u+2de0-2dff,u+a640-a69f,u+fe2e-fe2f}@font-face{font-family:Open Sans;font-style:normal;font-weight:600;src:local("Open Sans SemiBold"),local("OpenSans-SemiBold"),url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOVuhpKKSTj5PW.woff2) format("woff2");unicode-range:u+0400-045f,u+0490-0491,u+04b0-04b1,u+2116}@font-face{font-family:Open Sans;font-style:normal;font-weight:600;src:local("Open Sans SemiBold"),local("OpenSans-SemiBold"),url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOXuhpKKSTj5PW.woff2) format("woff2");unicode-range:u+1f??}@font-face{font-family:Open Sans;font-style:normal;font-weight:600;src:local("Open Sans SemiBold"),local("OpenSans-SemiBold"),url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOUehpKKSTj5PW.woff2) format("woff2");unicode-range:u+0370-03ff}@font-face{font-family:Open Sans;font-style:normal;font-weight:600;src:local("Open Sans SemiBold"),local("OpenSans-SemiBold"),url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOXehpKKSTj5PW.woff2) format("woff2");unicode-range:u+0102-0103,u+0110-0111,u+1ea0-1ef9,u+20ab}@font-face{font-family:Open Sans;font-style:normal;font-weight:600;src:local("Open Sans SemiBold"),local("OpenSans-SemiBold"),url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOXOhpKKSTj5PW.woff2) format("woff2");unicode-range:u+0100-024f,u+0259,u+1e??,u+2020,u+20a0-20ab,u+20ad-20cf,u+2113,u+2c60-2c7f,u+a720-a7ff}@font-face{font-family:Open Sans;font-style:normal;font-weight:600;src:local("Open Sans SemiBold"),local("OpenSans-SemiBold"),url(https://fonts.gstatic.com/s/opensans/v17/mem5YaGs126MiZpBA-UNirkOUuhpKKSTjw.woff2) format("woff2");unicode-range:u+00??,u+0131,u+0152-0153,u+02bb-02bc,u+02c6,u+02da,u+02dc,u+2000-206f,u+2074,u+20ac,u+2122,u+2191,u+2193,u+2212,u+2215,u+feff,u+fffd}.auryc-feedback .description{font-size:12px!important;font-weight:600!important;color:#292e3f!important}.auryc-feedback #mainLabel{padding-bottom:15px!important}.auryc-feedback .radioOption{text-align:center!important}.auryc-feedback table{margin:16px 0 24px!important;width:100%!important}.auryc-feedback tr:nth-child(odd):not(:first-child){background-color:#f6f7f9!important}.auryc-feedback .questionText{font-size:12px!important;width:60%!important;width:36%!important;padding:12px!important}.auryc-feedback .questionColumn{padding:10px 0!important;width:50%!important}.auryc-feedback *{font-family:Open Sans,sans-serif!important;float:none!important;text-transform:none!important;height:auto}.auryc-feedback{display:block;font-size:10px!important;line-height:1.599!important;padding:2em!important;text-align:left!important;border-radius:5px!important;resize:both!important}.auryc-fbmodal-wrapper,.auryc-feedback{font-family:Open Sans,sans-serif!important;color:#4a4a4a}.auryc-fbmodal-wrapper{display:block;position:fixed!important;z-index:2147483647!important;width:100%!important;height:100%!important;left:0!important;top:0!important;padding:0!important;margin:0!important;display:table}.auryc-fbmodal-bground{opacity:0!important}.auryc-fbmodal-bground,.auryc-fbmodal-bground-enabled{width:100%!important;height:100%!important;left:0!important;top:0!important;padding:0!important;margin:0!important;position:fixed!important;z-index:900!important}.auryc-fbmodal-bground-enabled{opacity:.79!important;-webkit-transition:opacity .4s!important;transition:opacity .4s!important;background:#292d33}.auryc-fbmodal-container{width:100%!important;height:100%!important;left:0!important;top:0!important;position:fixed!important;overflow:scroll!important;padding:0!important;margin:0!important;z-index:2147483647!important}.auryc-fbmodal-content{display:block;font-size:18px!important;margin:0 auto 100px!important;text-align:left!important;padding:9.5px!important;height:100%!important;width:calc(99vw - 19px)!important;-webkit-font-smoothing:antialiased!important;-moz-osx-font-smoothing:grayscale!important;outline:none!important;-webkit-box-sizing:unset!important;box-sizing:unset!important}.auryc-fbmodal-content:focus{border-radius:0!important;outline:none!important;-webkit-box-shadow:none!important;box-shadow:none!important;background-color:none!important;border:0!important}@media (min-width:480px){.auryc-fbmodal-content{max-width:540px!important}}.auryc-fbmodal-body{display:block;opacity:0!important;width:100%!important}.auryc-fbmodal-body-enabled{background:#fff;-webkit-box-shadow:0 0 39px 0 rgba(0,0,0,.3)!important;box-shadow:0 0 39px 0 rgba(0,0,0,.3)!important;display:block;border-radius:4.9px!important;opacity:1!important;-webkit-transition:opacity .4s ease!important;transition:opacity .4s ease!important;width:100%!important;text-align:center!important}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){.auryc-fbmodal-body-enabled{-webkit-transition:none!important;transition:none!important}}.auryc-fbmodal-head{opacity:0!important}.auryc-fbmodal-head,.auryc-fbmodal-head-enabled{width:100%!important;display:block;clear:both!important}.auryc-fbmodal-head-enabled{opacity:1!important;-webkit-transition:opacity .4s ease!important;transition:opacity .4s ease!important;z-index:1!important}.auryc-fb-modal-closebtn{position:relative!important;right:10px!important;float:right!important;top:5px!important;background:none!important;outline:none!important;border:none!important;cursor:pointer!important;font-size:20px!important;font-weight:700!important;color:#505673!important;letter-spacing:normal!important;padding:0!important;padding:initial!important;width:auto!important}.auryc-fb-modal-closebtn:hover{color:#292e3f!important}.auryc-fb-modal-closebtn:focus{-webkit-box-shadow:0 0 2px #503bff!important;box-shadow:0 0 2px #503bff!important}#auryc-feedback-canvas{margin-top:15px!important;position:relative!important;text-align:right!important;width:100%!important}.auryc-feedback-fbquestiongroup{display:none}.auryc-feedback-fbquestiongroup-shown{display:block}#auryc-feedback-tab.auryc-feedback-tab-loc-br-horizontal{position:fixed!important;display:inherit;-webkit-box-sizing:inherit!important;box-sizing:inherit!important;overflow:inherit!important;top:auto!important;right:.59em!important;bottom:.59em;left:auto!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-br-horizontal:hover{-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-br-horizontal .auryc-feedback-tab-label{padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-loc-br{left:auto!important;right:0!important;top:auto!important;bottom:.59em;-webkit-transform:rotate(-90deg) translate(100%,2px)!important;transform:rotate(-90deg) translate(100%,2px)!important;-webkit-transform-origin:100% 100%!important;transform-origin:100% 100%!important;overflow:hidden!important;border-radius:6px 6px 0 0!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-br:hover{-webkit-transform:rotate(-90deg) translate(100%)!important;transform:rotate(-90deg) translate(100%)!important;-webkit-box-shadow:0 -2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 -2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-bl-horizontal{position:fixed!important;display:inherit;-webkit-box-sizing:inherit!important;box-sizing:inherit!important;overflow:inherit!important;top:auto!important;right:auto!important;bottom:1.2em!important;left:.59em!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-bl-horizontal:hover{-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-bl-horizontal .auryc-feedback-tab-label{padding-right:.29em!important;padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-loc-bl{top:auto!important;right:auto!important;bottom:1.2em!important;-webkit-transform:translate(-2px,100%) rotate(-90deg)!important;transform:translate(-2px,100%) rotate(-90deg)!important;-webkit-transform-origin:0 0!important;transform-origin:0 0!important;border-radius:0 0 6px 6px!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-bl:hover{-webkit-transform:translateY(100%) rotate(-90deg)!important;transform:translateY(100%) rotate(-90deg)!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tr-horizontal{position:fixed!important;display:inherit;-webkit-box-sizing:inherit!important;box-sizing:inherit!important;overflow:inherit!important;top:.59em!important;right:.59em!important;bottom:auto!important;left:auto!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tr-horizontal:hover{-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tr-horizontal .auryc-feedback-tab-label{padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tr{position:fixed!important;top:.59em!important;right:0!important;left:auto!important;-webkit-transform:rotate(-90deg) translateY(-28px)!important;transform:rotate(-90deg) translateY(-28px)!important;-webkit-transform-origin:100% 0!important;transform-origin:100% 0!important;border-radius:6px 6px 0 0!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tr:hover{-webkit-transform:rotate(-90deg) translateY(-30px)!important;transform:rotate(-90deg) translateY(-30px)!important;-webkit-box-shadow:0 -2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 -2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tr .auryc-feedback-tab-label:before{content:"";font-family:AurycFontAwesome!important;padding-left:5px!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tl-horizontal{position:fixed!important;display:inherit;-webkit-box-sizing:inherit!important;box-sizing:inherit!important;top:.59em!important;right:auto!important;bottom:auto!important;left:.59em!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tl-horizontal:hover{-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tl-horizontal .auryc-feedback-tab-label{padding-right:.29em!important;padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tl{margin:0!important;top:.59em!important;right:auto!important;border-radius:0 0 6px 6px!important;-webkit-transform:rotate(-90deg) translate(-100%,-2px)!important;transform:rotate(-90deg) translate(-100%,-2px)!important;-webkit-transform-origin:0 0!important;transform-origin:0 0!important;-webkit-transition:all .3s ease-in-out!important;transition:all .3s ease-in-out!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tl,#auryc-feedback-tab.auryc-feedback-tab-loc-tl:hover{-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-tl:hover{-webkit-transform:rotate(-90deg) translate(-100%)!important;transform:rotate(-90deg) translate(-100%)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cl-horizontal{position:fixed!important;display:inherit;-webkit-box-sizing:inherit!important;box-sizing:inherit!important;top:50%!important;right:auto!important;bottom:auto!important;left:.59em!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cl-horizontal:hover{-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cl-horizontal .auryc-feedback-tab-label{padding-right:.29em!important;padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cl{right:auto!important;top:50%!important;-webkit-transform:rotate(-90deg) translate(-50%,-2px)!important;transform:rotate(-90deg) translate(-50%,-2px)!important;-webkit-transform-origin:0 0!important;transform-origin:0 0!important;border-radius:0 0 6px 6px!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cl:hover{-webkit-transform:rotate(-90deg) translate(-50%)!important;transform:rotate(-90deg) translate(-50%)!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cr-horizontal{position:fixed!important;display:inherit;-webkit-box-sizing:inherit!important;box-sizing:inherit!important;overflow:inherit!important;top:50%!important;right:.59em!important;bottom:auto!important;left:auto!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cr-horizontal:hover{-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 14px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cr-horizontal .auryc-feedback-tab-label{padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cr{top:50%!important;right:0!important;bottom:auto!important;left:auto!important;-webkit-transform:rotate(-90deg) translate(50%,-28px)!important;transform:rotate(-90deg) translate(50%,-28px)!important;-webkit-transform-origin:100% 0!important;transform-origin:100% 0!important;overflow:hidden!important;border-radius:6px 6px 0 0!important;-webkit-box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important;box-shadow:0 1px 0 0 rgba(41,46,63,.1),0 2px 4px 0 rgba(63,78,108,.2)!important}#auryc-feedback-tab.auryc-feedback-tab-loc-cr:hover{-webkit-transform:rotate(-90deg) translate(50%,-30px)!important;transform:rotate(-90deg) translate(50%,-30px)!important;-webkit-box-shadow:0 -2px 14px 0 rgba(63,78,108,.2)!important;box-shadow:0 -2px 14px 0 rgba(63,78,108,.2)!important}.auryc-fb-validation-msg-section{font-family:Open Sans,sans-serif!important;font-size:14px!important;color:#db2d43;border-radius:.49em!important;margin-bottom:.49em!important;margin-top:2em!important;display:none;text-align:left!important}#auryc-feedback-tab{display:block;position:fixed!important;top:0!important;margin:0!important;border:none!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;left:0!important;background:#503bff;opacity:.95!important;font-family:Open Sans,sans-serif!important;line-height:32px!important;cursor:pointer!important;z-index:2147483647!important;-webkit-font-smoothing:antialiased!important;-moz-osx-font-smoothing:grayscale!important}.auryc-feedback-tab-label{font-family:inherit!important;color:#fff;font-size:100%!important;z-index:5!important;font-weight:600!important;line-height:inherit!important;letter-spacing:normal!important}.auryc-feedback div,.auryc-feedback fieldset,.auryc-feedback h1,.auryc-feedback h2,.auryc-feedback img,.auryc-feedback label,.auryc-feedback p,.auryc-feedback span{margin:0!important;font:inherit!important;padding:0!important;border:0!important;vertical-align:baseline!important}#auryc-feedback-tab.auryc-feedback-tab-dt-desktop,#auryc-feedback-tab.auryc-feedback-tab-dt-tablet{display:block;height:30px!important;margin:0!important;padding:0 16px!important;border-radius:100px;font-size:14px!important;-webkit-transition:-webkit-box-shadow .1s ease-out!important;transition:-webkit-box-shadow .1s ease-out!important;transition:box-shadow .1s ease-out!important;transition:box-shadow .1s ease-out,-webkit-box-shadow .1s ease-out!important;overflow:hidden!important}#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone{width:40px!important;height:40px!important;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;-webkit-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important;background:#2f8cff;border-radius:50%!important;cursor:pointer!important;fill:#fff;-webkit-box-shadow:0 1px 5px rgba(0,0,0,.06),0 2px 30px rgba(0,0,0,.12)!important;box-shadow:0 1px 5px rgba(0,0,0,.06),0 2px 30px rgba(0,0,0,.12)!important;bottom:40px;margin-right:10px}#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone-new{height:28px!important;display:block;border-radius:4px 4px 0 0;-webkit-box-shadow:0 1px 2px 1px rgba(41,46,63,.26)!important;box-shadow:0 1px 2px 1px rgba(41,46,63,.26)!important;padding:0 14px!important;overflow:hidden!important;font-size:12px!important;line-height:28px!important}#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone-new.auryc-feedback-tab-loc-bl-horizontal,#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone-new.auryc-feedback-tab-loc-br-horizontal{bottom:0!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-tr-horizontal{margin-right:.59em!important;position:fixed!important;left:auto!important;right:0!important;top:.59em!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;overflow:hidden!important;margin-left:.59em!important;display:block;bottom:auto!important}#auryc-feedback-tab.auryc-feedback-tab-loc-smartphone-tr-horizontal .auryc-feedback-tab-label{padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-tr{position:fixed!important;display:inherit;-webkit-box-sizing:inherit!important;box-sizing:inherit!important;-webkit-transform:rotate(-90deg) translateY(-78%)!important;transform:rotate(-90deg) translateY(-78%)!important;-webkit-transform-origin:100% 0!important;transform-origin:100% 0!important;border-radius:5px 5px 0 0!important;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;left:auto!important;right:0!important;top:.59em!important;margin-right:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-tr .auryc-feedback-tab-label:before{content:"";font-family:AurycFontAwesome!important;padding-left:5px!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-tl-horizontal{position:fixed!important;left:0!important;right:auto!important;top:.59em!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;overflow:hidden!important;margin-left:.59em!important;display:block;bottom:auto!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-tl-horizontal .auryc-feedback-tab-label{padding-right:.29em!important;padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-tl{-webkit-transform:rotate(-90deg) translate(-100%,-22%)!important;transform:rotate(-90deg) translate(-100%,-22%)!important;-webkit-transform-origin:0 0!important;transform-origin:0 0!important;border-radius:0 0 5px 5px!important;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;right:auto!important;margin-left:.29em!important;top:.59em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-tl .auryc-feedback-tab-label:before{content:"";font-family:AurycFontAwesome!important;padding-left:5px!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cl-horizontal{position:fixed!important;left:0!important;right:auto!important;top:50%!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;overflow:hidden!important;margin-left:.59em!important;display:block;bottom:auto!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cl-horizontal .auryc-feedback-tab-label{padding-right:.29em!important;padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cl{right:auto!important;margin-left:.29em!important;top:50%!important;-webkit-transform:rotate(-90deg) translate(-50%,-22%)!important;transform:rotate(-90deg) translate(-50%,-22%)!important;-webkit-transform-origin:0 0!important;transform-origin:0 0!important;border-radius:0 0 5px 5px!important;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;box-shadow:0 -2px 4px rgba(0,0,0,.1)!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cl .auryc-feedback-tab-label:before{content:"";font-family:AurycFontAwesome!important;padding-left:5px!important}#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone-loc-br{-webkit-transform:rotate(-90deg) translate(50%,-78%)!important;transform:rotate(-90deg) translate(50%,-78%)!important;-webkit-transform-origin:100% 0!important;transform-origin:100% 0!important;height:30px!important;padding:7px 14px!important;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;-webkit-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important;background:#2f8cff;border-radius:4px 4px 0 0!important}#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone-loc-br-horizontal{bottom:0!important}#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone-loc-br-horizontal .auryc-feedback-tab-label{padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-br .auryc-feedback-tab-label:before{content:"";font-family:AurycFontAwesome!important;padding-left:5px!important}#auryc-feedback-tab.auryc-feedback-tab-dt-smartphone-loc-cr-horizontal{position:fixed!important;left:auto!important;right:0!important;top:50%!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;overflow:hidden!important;margin-left:.59em!important;display:block;bottom:auto!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cr-horizontal .auryc-feedback-tab-label{padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cr .auryc-feedback-tab-label:before{content:"";font-family:AurycFontAwesome!important;padding-left:5px!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cr{-webkit-transform:rotate(-90deg) translate(50%,-100%)!important;transform:rotate(-90deg) translate(50%,-100%)!important;-webkit-transform-origin:100% 0!important;transform-origin:100% 0!important;border-radius:5px 5px 0 0!important;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;left:auto!important;right:0!important;top:50%!important;margin-right:inherit!important;bottom:auto!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-bl-horizontal,#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-cr{position:fixed!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;overflow:hidden!important;display:block}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-bl-horizontal{margin-right:.59em!important;right:auto!important;margin-left:.59em!important;top:auto!important;bottom:0!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-bl-horizontal .auryc-feedback-tab-label{padding-right:.29em!important;padding-left:.29em!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-bl{right:auto!important;margin-left:.59em!important;top:auto!important;bottom:1.2em!important;-webkit-transform:translate(-8%,100%) rotate(-90deg)!important;transform:translate(-8%,100%) rotate(-90deg)!important;-webkit-transform-origin:0 0!important;transform-origin:0 0!important;border-radius:0 0 5px 5px!important;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1)!important;box-shadow:0 -2px 4px rgba(0,0,0,.1)!important}#auryc-feedback-tab.auryc-feedback-tab-smartphone-loc-bl .auryc-feedback-tab-label:before{content:"";font-family:AurycFontAwesome!important;padding-left:5px!important}@media print{#auryc-feedback-tab.auryc-feedback-tab-dt-desktop,#auryc-feedback-tab.auryc-feedback-tab-dt-tablet{display:none!important}}.auryc-feedback-spinner{display:block;top:1!important;left:1!important;position:absolute!important;z-index:2147483647!important}.auryc-fbmodal-body-selection{color:#4a4a4a;text-align:left!important;padding:25px 15px 15px!important}.auryc-fbmodal-body-selection .auryc-fbmodal-body-selection_title{font-size:18px!important;font-weight:600!important;line-height:24px!important}.auryc-fbmodal-body-selection .auryc-feedback-general,.auryc-fbmodal-body-selection .auryc-feedback-screenshot{background-color:#f6f6f6;border:1px solid #cfcfcf;border-radius:3px!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;cursor:default!important;display:table;margin-top:10px!important;padding:5px!important;white-space:nowrap!important;width:100%!important}.auryc-fbmodal-body-selection .auryc-feedback-general .auryc-feedback_option_row,.auryc-fbmodal-body-selection .auryc-feedback-screenshot .auryc-feedback_option_row{display:table-row;height:60px!important}.auryc-fbmodal-body-selection .auryc-feedback-general .auryc-feedback_option_column,.auryc-fbmodal-body-selection .auryc-feedback-screenshot .auryc-feedback_option_column{display:table-cell;vertical-align:middle!important}.auryc-fbmodal-body-selection .auryc-feedback-general .auryc-feedback-selection__label1,.auryc-fbmodal-body-selection .auryc-feedback-screenshot .auryc-feedback-selection__label1{font-size:16px!important;font-weight:600!important;line-height:22px!important}.auryc-fbmodal-body-selection .auryc-feedback-general .auryc-feedback-selection__label2,.auryc-fbmodal-body-selection .auryc-feedback-screenshot .auryc-feedback-selection__label2{font-size:14px!important;font-weight:400!important;line-height:19px!important;white-space:normal!important}.auryc-fbmodal-body-selection .auryc-feedback-general .auryc-feedback-selection__labels,.auryc-fbmodal-body-selection .auryc-feedback-screenshot .auryc-feedback-selection__labels{padding-left:5px!important;vertical-align:middle!important}.auryc-fbmodal-body-selection .auryc-feedback-general .auryc-feedback_option_image,.auryc-fbmodal-body-selection .auryc-feedback-screenshot .auryc-feedback_option_image{width:50px!important}.auryc-fbmodal-body-selection .auryc-feedback-general img,.auryc-fbmodal-body-selection .auryc-feedback-screenshot img{vertical-align:middle!important;padding:0 5px!important}.auryc-fbmodal-body-selection .auryc-feedback-general:hover,.auryc-fbmodal-body-selection .auryc-feedback-screenshot:hover{background-color:#e4ecfc!important}div [dataType=auryc-fbq-wrapper]>p,div [dataType=auryc-fbq]>p{display:block;font-size:14px!important;text-align:center!important;font-weight:400!important;color:#4a4a4a;letter-spacing:0!important}.auryc-fbmodal-body-fbform,.auryc-fbmodal-body-selection{display:none}@media (min-width:1024px){.auryc-feedback{text-align:left!important}.auryc-feedback .auryc-fb-starrating-field{font-size:15px!important}}.auryc-feedback .auryc-feedback-fbform-headtag{font-family:light,Open Sans,sans-serif!important;margin-bottom:10px!important;line-height:1.2!important;color:#4a4a4a;letter-spacing:-.1px!important;background:transparent none repeat 0 0/auto auto padding-box border-box scroll!important;background:initial!important}.auryc-feedback .auryc-feedback-fbform-headtag-h1{font-size:25px!important;font-family:Open Sans,sans-serif!important;font-weight:400!important;text-align:center!important;width:inherit!important;text-transform:none!important}.auryc-feedback .auryc-feedback-fbform-headtag-h2{font-size:2.4em!important}.auryc-feedback .auryc-feedback-fblabel p{font-weight:600!important;font-size:14px!important;color:#4a4a4a;letter-spacing:0!important}.auryc-feedback p{font-size:1.2em!important;line-height:1.2!important;margin-bottom:.2em!important}.auryc-feedback .auryc-feedback-title-section{font-family:Open Sans,sans-serif!important;text-align:center!important;font-size:14px!important;margin-bottom:20px!important}.auryc-feedback .auryc-feedback-title-section .auryc-feedback-fblogo{height:3.49em!important;margin:0 auto 1.7em!important;display:block;max-height:144px!important;width:auto!important}.auryc-feedback .auryc-fb-starrating-field{width:96%!important;color:#cfcfcf!important;display:block;margin:0 auto!important;text-align:center!important;text-indent:0!important;white-space:nowrap!important}.auryc-feedback .auryc-fb-starrating-field label{color:#cfcfcf;float:none!important;height:auto!important;min-width:0!important;max-width:none!important}.auryc-fbmodal-body-fbform-enabled{display:block}.auryc-feedback #post-fb-resp-button{display:inline-block;background:#22c6f3;border:.9px solid #20c8f7;border-radius:2.9px!important;padding:.02em 4.49em!important;color:#555;resize:none!important;width:199px!important;height:35px!important;margin-top:19px!important;font-size:14px!important;letter-spacing:normal!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important}.auryc-feedback .auryc-fb-invite-body{margin-top:15px!important}.auryc-feedback #invite-fb-yes-button{display:inline-block;background:#22c6f3;border:.9px solid #20c8f7;border-radius:2.9px!important;padding:.02em 2.25em!important;color:#555;resize:none!important;width:199px!important;height:35px!important;margin-top:19px!important;font-size:14px!important;letter-spacing:normal!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important}.auryc-feedback #invite-fb-no-button{background:transparent!important;border:1px solid transparent!important;color:#505673!important;margin-top:8px!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important}.auryc-feedback .auryc-starrating-section{margin-bottom:.49em!important;font-size:18px!important;display:block;margin-top:10px!important}div[dataType=auryc-fbq-wrapper],div[dataType=auryc-fbq]{display:block;margin-top:10px!important}div[dataType=auryc-fbq-wrapper]{margin-bottom:24px!important}.auryc-feedback-fbquestion,.auryc-feedback-fbquestion-dropdown{display:block}.auryc-feedback .auryc-feedback-fblabel{display:block;text-align:center!important;font-size:12px!important;font-family:Open Sans,sans-serif!important;color:#4a4a4a;font-weight:600!important;margin-bottom:0!important;float:none!important;height:auto!important;border:0!important;position:static!important;letter-spacing:0!important;padding:0!important}.auryc-feedback div[dataType=auryc-feedback-checkbox]>fieldset>label,.auryc-feedback div[dataType=auryc-feedback-checkbox]>label,.auryc-feedback div[dataType=auryc-feedback-radio]>fieldset>label,.auryc-feedback div[dataType=auryc-feedback-radio]>label{border:1px solid #979797!important;border-radius:3px!important}.auryc-feedback .auryc-feedback-fbemail,.auryc-feedback div[dataType=auryc-feedback-checkbox]>fieldset>label,.auryc-feedback div[dataType=auryc-feedback-checkbox]>label,.auryc-feedback div[dataType=auryc-feedback-radio]>fieldset>label,.auryc-feedback div[dataType=auryc-feedback-radio]>label{position:relative!important;background:#fff!important;width:100%!important;font-size:12px!important;resize:none!important;padding:.49em!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;text-align:left!important;-webkit-appearance:none!important;-moz-appearance:none!important;-ms-appearance:none!important;-o-appearance:none!important;appearance:none!important}.auryc-feedback .auryc-feedback-fbemail{outline:none!important;border:1px solid #d0d7e6!important;color:#292e3f!important;border-radius:3px!important;letter-spacing:normal!important}.auryc-feedback .auryc-feedback-fbemail:focus{border:1px solid #838aa4!important}.auryc-feedback ::-webkit-input-placeholder{color:#505673!important;font-family:inherit!important;text-align:left!important;font-size:inherit!important}.auryc-feedback ::-moz-placeholder{color:#505673!important;font-family:inherit!important;text-align:left!important;font-size:inherit!important}.auryc-feedback ::-ms-input-placeholder{color:#505673!important;font-family:inherit!important;text-align:left!important;font-size:inherit!important}.auryc-feedback .auryc-feedback-question-textarea{position:relative!important;border-radius:3px!important;background:#fff!important;color:#292e3f!important;width:100%!important;font-size:12px!important;resize:none!important;padding:.49em!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;text-align:left!important;-webkit-appearance:none!important;-moz-appearance:none!important;-ms-appearance:none!important;-o-appearance:none!important;appearance:none!important;height:54px!important;border:1px solid #d0d7e6!important}.auryc-feedback .auryc-feedback-fbtarea{display:block;position:relative!important;margin:0!important;text-align:right!important}.auryc-feedback .auryc-feedback-fbtarea .auryc-feedback-fbctrl{padding-bottom:1.2em!important;margin:0!important;max-width:100%!important}.auryc-feedback .auryc-feedback-question-dropdown-choose,.auryc-feedback .auryc-feedback-question-select-choose{position:relative!important;border-radius:none!important;background:#fff!important;width:100%!important;font-size:12px!important;resize:none!important;padding:.49em!important;-webkit-box-sizing:border-box!important;text-align:left!important;-webkit-appearance:none!important;-moz-appearance:none!important;-ms-appearance:none!important;-o-appearance:none!important;appearance:none!important;border:none!important;outline:none!important;color:#313943!important;box-sizing:border-box!important}a.PoweredByAuryc,a.PoweredByAuryc:hover{text-decoration:none!important;border:none!important}a.PoweredByAuryc:hover span{text-decoration:underline!important}.PoweredByAuryc:focus{outline:none!important;border:1px solid #4d90fe!important;-webkit-box-shadow:0 0 5px #4d90fe!important;box-shadow:0 0 5px #4d90fe!important}.auryc-feedback .auryc-feedback-footer-section{display:block;position:relative!important;text-align:center!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;white-space:normal!important}.auryc-feedback .auryc-feedback-footer-section .auryc-fbmodal-footer{background:inherit!important;position:relative!important;left:1px!important;display:table;font-size:10px!important;color:#4a4a4a!important;letter-spacing:-.35px!important;z-index:3!important;width:100%!important}.auryc-fbmodal-footer span{display:inline;color:#292e3f!important;font-size:11px!important;font-weight:400!important}.auryc-feedback .auryc-feedback-footer-section .auryc-fbmodal-footer img{display:inline;position:relative!important;top:-1px!important;left:1px!important;vertical-align:middle!important}.auryc-feedback .auryc-feedback-question-select-choose .auryc-fb-question-selector,.auryc-feedback .auryc-feedback-question-select-choose .auryc-fb-questiongroup-selector{font-size:12px!important;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAA3klEQVRIS+3VMU9CMRTF8d8zBL+aizoQFhx0kUk33RzdYMNFXUFnYeGrYYyaJiUxJHDLSxodbNKpfeffc9/pbaPyaCrr+3OA++z4rtT5Pg5GuMnCY9yWQEoBE1xhlUUP8YDrCBIB0vojLvGO0yz4hm4JJAKcYYoPHGOZAUdYoIMBXrc5iQAHeMlzviFygj7O8dkWEJU4XI8chALRhn9AVKHf70VRTHu4wFfbmKZLNKt50dLBnna0imcMd/2I0phWa3Y/D1e1Xa9BCZJG0VuQNpaWKMx72xS1Fl5/WN3BN+AgJhnZQlq4AAAAAElFTkSuQmCC")!important;background-position:calc(100% - .5rem),100% 0!important;background-size:1.5em 1.5em!important;background-repeat:no-repeat!important;background-color:#fff!important;padding:4px 30px 4px 4px!important;z-index:auto!important;letter-spacing:normal!important;min-height:36px!important;white-space:normal!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important}.auryc-feedback .auryc-feedback-question-dropdown-choose .auryc-fb-dropdown-selector,.auryc-feedback .auryc-feedback-question-select-choose .auryc-fb-question-selector,.auryc-feedback .auryc-feedback-question-select-choose .auryc-fb-questiongroup-selector{position:absolute!important;left:0!important;top:0!important;width:100%!important;text-transform:none!important;cursor:pointer!important;border:1px solid #d0d7e6!important;border-radius:3px!important;font-weight:600!important;color:#292e3f!important;-webkit-appearance:none!important;-moz-appearance:none!important;-ms-appearance:none!important;-o-appearance:none!important;appearance:none!important}.auryc-feedback .auryc-feedback-question-dropdown-choose .auryc-fb-dropdown-selector{font-size:14px!important;background:#fff!important;padding:4px!important}.auryc-fb-question-selector::-ms-expand,.auryc-fb-questiongroup-selector::-ms-expand{display:none}.auryc-fb-questiongroup-selector:focus .auryc-fb-question-selector:focus{-webkit-box-shadow:0 0 1px 1px #23c6f5!important;box-shadow:0 0 1px 1px #23c6f5!important}.auryc-feedback .auryc-close-btn{width:222px!important;height:36px!important;position:relative!important;padding:.29em 1.9em!important;font-family:Open Sans,sans-serif!important;font-size:18px!important;line-height:0!important;text-align:center!important;color:#555!important;font-weight:400!important;display:inline-block;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;border-radius:0!important;background-color:#464c55;border:1px solid #464c55;cursor:pointer!important;margin:0 auto!important}.auryc-feedback .auryc-feedback-select-button{font-family:Open Sans,sans-serif!important;font-size:14px!important;font-weight:400!important;color:transparent!important;text-align:left!important}.auryc-feedback .post-fb-resp-button{padding:.49em .6999em!important;font-size:14px!important;line-height:1.618!important;width:100%!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important}.auryc-feedback .auryc-feedback-btn,.auryc-feedback .post-fb-resp-button{display:inline-block;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;border-radius:0!important;background-color:#464c55;border:1px solid #464c55;cursor:pointer!important;color:#fff;text-align:center!important;font-weight:400!important;-webkit-transition:all .14s ease!important;transition:all .14s ease!important;margin:0 auto!important}.auryc-feedback .auryc-feedback-btn{padding:.49em .69999em!important;font-size:1.7em!important;line-height:1.599!important;outline:0!important}.auryc-feedback .auryc-fb-starrating-field .auryc-fb-starrating-field-staricon{font-size:6em!important;cursor:pointer!important;border:0!important}.auryc-feedback .auryc-fb-starrating-field .auryc-fb-starrating-field-staricon:before{font-family:Open Sans,sans-serif!important;content:""}.auryc-feedback .auryc-fb-starrating-field--disabled{color:#eaebec!important}.auryc-feedback .auryc-fb-starrating-field--disabled .auryc-fb-starrating-field-staricon{cursor:default!important;border:0!important}.auryc-feedback .auryc-fb-starrating-field input[type=radio]{position:absolute!important;left:-10000px!important;display:block}.auryc-feedback input[type=text],.auryc-feedback textarea{font-family:Open Sans,sans-serif!important;height:100%!important;float:none!important;height:auto!important;min-height:auto!important}.auryc-feedback .auryc-fb-starrating-field .auryc-fb-starrating-field-staricon:before,.auryc-feedback .auryc-fb-starrating-field label:before,.auryc-feedback .auryc-feedback-checkbox:before,.auryc-feedback .auryc-feedback-radio:before{font-family:AurycFontAwesome!important;line-height:1!important;font-style:normal!important;font-weight:400!important;font-stretch:normal!important;-webkit-font-feature-settings:normal!important;font-feature-settings:normal!important;font-variant:normal!important;font-size:inherit!important;text-rendering:auto!important;margin:0!important;-webkit-font-smoothing:antialiased!important;-moz-osx-font-smoothing:grayscale!important;-webkit-box-sizing:unset!important;box-sizing:unset!important;-webkit-box-shadow:none!important;box-shadow:none!important;border-radius:0!important;position:relative!important;top:0!important;left:0!important;-webkit-transform:unset!important;transform:unset!important;display:inline!important}.auryc-feedback .auryc-fb-starrating-field input[type=radio]:checked+label:after,.auryc-feedback .auryc-fb-starrating-field input[type=radio]:not(:checked)+label:after{background:transparent!important}.auryc-feedback .auryc-fb-starrating-field input.auryc-fb-starrating-field-staricon+label{padding:0!important;font-size:2em!important;cursor:pointer!important;display:inline-block;margin:0!important;border:0!important;position:static!important}.auryc-feedback .auryc-fb-starrating-field label:before{-webkit-transition:color .15s ease!important;transition:color .15s ease!important;content:""!important;background:0 0!important;height:auto!important;width:auto!important;top:0!important;margin:0!important;position:static!important;border:none!important}.auryc-feedback .auryc-fb-starrating-field input.auryc-fb-starrating-field-staricon:checked+label:before{content:""!important;color:#ffaf40;background:0 0!important;position:static!important;border:0!important}.auryc-feedback .auryc-fb-starrating-field label.auryc-ratings-chosen:before{color:#ffaf40;content:""!important}.auryc-feedback .auryc-nps__container{border:1px solid #f6f7f9!important;border-radius:5px!important;padding:10px 0!important;background-color:transparent!important}@media (max-width:360px) and (orientation:portrait){.auryc-feedback .auryc-nps__container{padding:10px 0 0!important}}.auryc-feedback .auryc-nps__container .nps-rating{padding:10px 10px 0!important;margin:auto auto 10px!important;min-height:35px!important;text-align:justify!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__labels{display:block}.auryc-feedback .auryc-nps__container .nps-rating input[type=radio]:checked+label:after,.auryc-feedback .auryc-nps__container .nps-rating input[type=radio]:not(:checked)+label:after{background:transparent!important}.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_left_label,.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_right_label{font-size:12px;color:#505673}.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_left_label{float:left!important}.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_right_label{float:right!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges{display:block;text-align:center!important;min-height:30px!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges label{padding:0!important;cursor:pointer!important;display:inline;margin:0!important;border:0!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges label:before{display:none}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges label:hover{color:#fff;background-color:#23c6f5}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge{border-radius:50%!important;width:28px!important;padding:2px!important;font-size:12px!important;line-height:1em!important;position:relative!important;background:#f6f7f9;border:1px solid #d0d7e6;display:inline-block;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;bottom:auto!important;top:auto!important;left:auto!important;right:auto!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .aurycNpsRatingChecked,.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges input[type=radio]:checked+label{color:#fff;background-color:#23c6f5}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge .nps-rating__height_fix{margin-top:100%!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge .nps-rating__num{position:absolute!important;left:0!important;top:50%!important;height:100%!important;width:100%!important;text-align:center!important;margin-top:-6px!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .stretch{width:100%!important;display:inline-block;font-size:0!important;line-height:0!important;padding:0!important;margin:0!important;height:0!important}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges input[type=radio]{position:absolute!important;left:-10000px!important;display:block}@media (max-width:420px) and (orientation:portrait){.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge{width:20px!important}}.auryc-feedback .auryc-feedback-checkbox,.auryc-feedback .auryc-feedback-radio{text-align:left!important;display:block;cursor:pointer!important;padding:4px 10px!important;bottom:auto!important;top:auto!important;left:auto!important;right:auto!important}.auryc-feedback .auryc-feedback-checkbox:focus,.auryc-feedback .auryc-feedback-radio:focus{background:#f6f7f9!important}.auryc-feedback .auryc-feedback-checkbox:nth-child(1n+2),.auryc-feedback .auryc-feedback-radio:nth-child(1n+2){margin-top:.49em!important}@media (orientation:landscape),screen and (max-width:720px){.auryc-feedback .auryc-feedback-checkbox input,.auryc-feedback .auryc-feedback-checkbox input:checked,.auryc-feedback .auryc-feedback-radio input,.auryc-feedback .auryc-feedback-radio input:checked{display:inline-block;font-size:14px!important;opacity:1!important;position:static!important}}@media (min-width:720px) and (orientation:portrait){.auryc-feedback .auryc-feedback-checkbox input,.auryc-feedback .auryc-feedback-radio input{display:none}.auryc-feedback .auryc-feedback-checkbox:before{content:"";padding-left:.29em!important;padding-right:.29em!important;color:inherit;opacity:.3}.auryc-feedback .auryc-feedback-checkbox.aurycChecked:before{content:"";opacity:1;color:#23c6f5}.auryc-feedback .auryc-feedback-radio:before{padding-left:.29em!important;padding-right:.29em!important;color:inherit;opacity:.3;content:"\\f10c"}.auryc-feedback .auryc-feedback-radio.aurycChecked:before{content:"\\f111";opacity:1;color:#23c6f5}}.aurycIsRequired{color:#db2d43!important}.fb-desktop:not(.user-is-tabing) button:focus,.fb-desktop:not(.user-is-tabing) input:focus,.fb-desktop:not(.user-is-tabing) select:focus,.fb-desktop:not(.user-is-tabing) textarea:focus{outline:none!important}.fb-desktop .auryc-feedback div[dataType=auryc-feedback-checkbox]>fieldset>label,.fb-desktop .auryc-feedback div[dataType=auryc-feedback-radio]>fieldset>label{border:1px solid transparent!important;vertical-align:middle!important;background:transparent!important}.fb-desktop.user-is-tabing .auryc-feedback div[dataType=auryc-feedback-checkbox]>fieldset>label.focus,.fb-desktop.user-is-tabing .auryc-feedback div[dataType=auryc-feedback-radio]>fieldset>label.focus,.fb-desktop.user-is-tabing button:focus,.fb-desktop.user-is-tabing input:focus,.fb-desktop.user-is-tabing select:focus,.fb-desktop.user-is-tabing textarea:focus{outline:none!important;border:1px solid #4d90fe!important;-webkit-box-shadow:0 0 5px #4d90fe!important;box-shadow:0 0 5px #4d90fe!important}.fb-desktop .auryc-feedback div[dataType=auryc-feedback-checkbox]>fieldset>input,.fb-desktop .auryc-feedback div[dataType=auryc-feedback-radio]>fieldset>input{position:absolute!important;left:-10000px!important}.auryc-feedback .auryc-fb-starrating-field input.auryc-fb-starrating-field-staricon+label{border:1px solid hsla(0,0%,100%,.5)!important}.fb-desktop.user-is-tabing .auryc-feedback .auryc-fb-starrating-field input.auryc-fb-starrating-field-staricon+label.focus{outline:none!important;border:1px solid #4d90fe!important;-webkit-box-shadow:0 0 5px #4d90fe!important;box-shadow:0 0 5px #4d90fe!important}.fb-desktop .auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge{border:1px solid transparent!important}.fb-desktop.user-is-tabing .auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge.focus{outline:none!important;border:1px solid #4d90fe!important;-webkit-box-shadow:0 0 5px #4d90fe!important;box-shadow:0 0 5px #4d90fe!important}.fb-desktop .auryc-feedback .auryc-starrating-section legend.auryc-feedback-fblabel,.fb-desktop .auryc-feedback .nps-rating legend.auryc-feedback-fblabel{margin-left:-10px!important}.fb-desktop .auryc-feedback label.auryc-feedback-checkbox:focus,.fb-desktop .auryc-feedback label.auryc-feedback-radio:focus{background:#fafaff!important;-webkit-box-shadow:0 1px 1px #b3badb!important;box-shadow:0 1px 1px #b3badb!important;color:#292e3f!important;border:1px solid #6875b8!important}.auryc-feedback .auryc-feedback-title-section .auryc-feedback-fblogo{margin:0 0 20px!important}.fb-desktop .auryc-feedback h1{font-weight:600!important;font-size:20px!important;color:#292e3f!important;text-align:left!important}.fb-desktop .auryc-feedback p{font-size:14px!important;color:#292e3f!important;text-align:left!important}.fb-desktop .auryc-feedback .required-label{color:#505673!important;font-size:12px!important;font-style:italic!important;margin:10px 0!important}.fb-desktop .auryc-feedback .required-label b{color:#db2d43!important}.fb-desktop .auryc-feedback .auryc-feedback-fblabel{text-align:left!important;font-weight:600!important;font-size:12px!important;color:#292e3f!important;position:static!important}.fb-desktop .auryc-feedback .auryc-feedback-fblabel.aurycIsRequired{color:#db2d43!important}.fb-desktop .auryc-feedback .auryc-fb-starrating-field{text-align:left!important}.fb-desktop.fb-desktop.user-is-tabing .auryc-feedback .auryc-fb-starrating-field.focus{outline:solid!important}.fb-desktop .auryc-feedback .auryc-fb-starrating-field label{color:#838aa4!important}.fb-desktop .auryc-feedback .auryc-nps__container{background:transparent!important;border:transparent!important}.fb-desktop .auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;text-align:left!important;min-height:30px!important;-webkit-box-pack:justify!important;-ms-flex-pack:justify!important;justify-content:space-between!important;-ms-flex-flow:wrap!important;flex-flow:wrap!important}.fb-desktop .auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge{border-radius:4px!important}.fb-desktop .auryc-feedback .auryc-feedback-radio:before{content:"\\f1db"!important;font-size:18px!important;opacity:1!important;padding-left:4px!important;padding-right:4px!important}.fb-desktop .auryc-feedback .auryc-feedback-radio.aurycCheckedOverride:before{border:1px solid #000!important;border-radius:12px!important;content:"\\f111"!important;font-size:14px!important;margin:3px!important;padding:1px 2px!important;opacity:1!important}.fb-desktop .auryc-feedback .auryc-feedback-checkbox:before{content:"\\f096";font-size:20px!important;padding-left:4px!important;padding-right:4px!important;opacity:1!important}.auryc-feedback .auryc-feedback-checkbox.aurycCheckedOverride:before,.auryc-feedback .auryc-feedback-radio.aurycCheckedOverride:before{background:transparent!important}.auryc-feedback .auryc-feedback-checkbox.aurycCheckedOverride:before{padding-left:3px!important;padding-right:3px!important}.fb-desktop .auryc-feedback .auryc-feedback-checkbox,.fb-desktop .auryc-feedback .auryc-feedback-radio{display:inline!important;outline:none!important;padding:4px 10px!important}.fb-desktop .auryc-feedback-checkbox.full,.fb-desktop .auryc-feedback-radio.full{display:block!important}.fb-desktop .auryc-feedback .auryc-fb-starrating-field.centered{text-align:center!important}.auryc-feedback .auryc-feedback-title-section .auryc-feedback-fblogo.centered{margin:0 auto 1.7em!important}.fb-desktop .auryc-feedback-title-section h1.centered,.fb-desktop .auryc-feedback-title-section p.centered,.fb-desktop .auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges.centered,.fb-desktop .auryc-nps__container .auryc-feedback-fblabel.centered,.fb-desktop .auryc-starrating-section .auryc-feedback-fblabel.centered{text-align:center!important}@media screen and (max-width:786px){.auryc-feedback .matrix td{display:block!important}.auryc-feedback .matrix .inLineRadio{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-pack:distribute!important;justify-content:space-around!important}.auryc-feedback .matrix .inLineRadio,.auryc-feedback .matrix .lineBreakRadio{-webkit-box-orient:horizontal!important;-webkit-box-direction:normal!important;-ms-flex-direction:row!important;flex-direction:row!important;padding-bottom:12px!important}.auryc-feedback .matrix .lineBreakRadio{display:block!important}.auryc-feedback .matrix .lineBreakRadio .radioList{padding:4px 10px!important}.auryc-feedback .matrix .questionText{width:100%!important;padding:8px 0 8px 8px!important;font-weight:600!important}}';styleInject(css$1);var Event=(createClass(D$b,[{key:"addListener",value:function(){this.event.addListener.apply(this.event,arguments),0<this.event.listeners.length&&this.listener.start()}},{key:"handleEvent",value:function(){this.event.publishTopic()}}]),D$b);function D$b(e){classCallCheck(this,D$b),this.event=new PubSubTopic,this.listener=new e(this.handleEvent.bind(this))}var NavigationListener=(createClass(H$b,[{key:"start",value:function(){this.started||history.pushState&&window.addEventListener&&(this.originalPushState=history.pushState,history.pushState=function(e,t){this.originalPushState.apply(history,arguments),this.handleEvent()}.bind(this),this.originalReplaceState=history.replaceState,history.replaceState=function(e,t){this.originalReplaceState.apply(history,arguments),this.handleEvent()}.bind(this),window.addEventListener("popstate",this.handleEvent),this.started=!0)}},{key:"stop",value:function(){this.started&&(history.pushState=this.originalPushState,history.replaceState=this.originalReplaceState,window.removeEventListener("popstate",this.handleEvent),this.originalPushState=null,this.originalReplaceState=null,this.started=!1)}}]),H$b);function H$b(e){classCallCheck(this,H$b),this.handleEvent=e,this.started=!1}var unloadListener=(createClass(P$b,[{key:"start",value:function(){this.started||(addDomEvent(window,"unload",this.handleEvent),this.started=!0)}},{key:"stop",value:function(){this.started&&(removeDomEvent(window,"unload",this.handleEvent),this.started=!1)}}]),P$b);function P$b(e){classCallCheck(this,P$b),this.handleEvent=e,this.started=!1}var navigationEvent=new Event(NavigationListener),unloadEvent=new Event(unloadListener),baseIcon='\n    <svg width="13px" height="14px" viewBox="0 0 10 11" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <g id="Icon" stroke="none" fill-rule="evenodd">\n            <path d="M8.88888889,2.26638076 C8.88888889,1.64053699 8.3914275,1.13319038 7.77777778,1.13319038 L2.22222222,1.13319038 C1.6085725,1.13319038 1.11111111,1.64053699 1.11111111,2.26638076 L1.11111111,6.11922804 C1.11111111,6.7450718 1.6085725,7.25241842 2.22222222,7.25241842 L7.89678531,7.25241842 L8.88888889,8.26423642 L8.88888889,2.26638076 Z M2.22222222,8.3856088 C0.994922778,8.3856088 1.44364238e-13,7.37091557 1.44364238e-13,6.11922804 L0,2.26638076 C0,1.01469323 0.994922778,0 2.22222222,0 L7.77777778,0 C9.00507722,0 10,1.01469323 10,2.26638076 L10,11 L7.43654802,8.3856088 L2.22222222,8.3856088 Z" id="Rectangle-Copy-18"></path>\n        </g>\n    </svg>',FBTab=(createClass(T$b,[{key:"isValid",value:function(){if(!this.fbTabEl)return!1;for(var e=this.fbTabEl.parentElement;null!==e&&"html"!==e.tagName.toLowerCase();)e=e.parentElement;return null!==e&&"html"===e.tagName.toLowerCase()}},{key:"setupInteractions",value:function(e,t,i){addDomEvent(e,"click",function(){i&&i(t)}),addDomEvent(e,"keydown",function(e){e.which===constants.keyCodes.enter&&(e.target.click(),e.stopPropagation(),e.preventDefault(),i(t))})}},{key:"setupTabTemplate",value:function(e){var t=this,i=encoder.decodeBase64(this.cfg.badgeTemplate),n=document.createElement("div");return n.innerHTML=i,(n=n.firstChild).querySelectorAll(".auryc-feedback-tab-label")[0].innerHTML=e.label,this.cfg.chat&&setTimeout(function(){t.handleChat(e,5)},0),n}},{key:"setupRegularTab",value:function(e){var t=getInstance(),i="",n="",r=!e.mobile_new,i=t.isPhone()&&r?(e.fontColor&&_.isValidColor(e.fontColor)&&(n='style="fill:'+e.fontColor+';position:relative;line-height:17px;display:flex"'),"<div "+n+">"+baseIcon+"</div>"):(e.fontColor&&_.isValidColor(e.fontColor)&&(n='style="fill:'+e.fontColor+";color:"+e.fontColor+'"'),'<span class="auryc-feedback-tab-label" aria-hidden="true" '+n+">"+e.label+"</span>"),a=document.createElement("div"),a=toDomNode('<div id="auryc-feedback-tab" tabindex="0" style="" role="button"\n      aria-label="Give Us Feedback">'+i+"</div>");t.isPhone()&&!r?a.addCssCls("auryc-feedback-tab-dt-"+t.getDT().toLowerCase()+"-new"):a.addCssCls("auryc-feedback-tab-dt-"+t.getDT().toLowerCase());var o=this.getLocationCss(t.isPhone()&&e.fblocation_mobile?e.fblocation_mobile:e.fblocation);return t.isPhone()&&r&&(o=this.getLocationCss("bottomright")),t.isPhone()&&r||"horizontal"===e.fbdirection?a.addCssCls("auryc-feedback-tab-loc-"+o+"-horizontal"):a.addCssCls("auryc-feedback-tab-loc-"+o),e.backgroundColor&&_.isValidColor(e.backgroundColor)&&a.css({backgroundColor:e.backgroundColor}),a}},{key:"getLocationCss",value:function(e){switch(e){case"bottomright":return"br";case"bottomleft":return"bl";case"middleleft":return"cl";case"middleright":return"cr";case"topright":return"tr";case"topleft":return"tl"}}},{key:"getFBTabDomNode",value:function(){return this.fbTabEl}},{key:"render",value:function(e){e&&document.body.appendChild(this.getFBTabDomNode()),this.cfg.preview?(this.cfg.badgeTemplate&&this.setChatVisible(!0),this.setVisible(!0)):this.setVisible(!1),this.applyCustomProperties(this.cfg)}},{key:"setClicked",value:function(){this.clicked=!0,this.cfg&&!1===this.cfg.autoHide||this.setFeedbackVisible(!1)}},{key:"setFeedbackVisible",value:function(e){var t,i=(e=e&&!this.clicked)?"block":"none",n=void 0;(n=0<=this.fbTabEl.id.indexOf("auryc-feedback-tab")?[this.fbTabEl]:this.fbTabEl.sel("#auryc-feedback-tab"))&&0<n.length&&((t=toDomNode(n[0])).css({display:i}),(this.fbVisible=e)?this.setVisible(e):(1===this.fbTabEl.children.length&&this.fbTabEl.children[0]===t&&this.setVisible(!1),this.chatVisible||this.setVisible(!1)))}},{key:"setChatVisible",value:function(e){var t,i=e?"":"none",n=this.fbTabEl.sel("__aurycChat");n&&0<n.length&&((t=toDomNode(n[0])).css({display:i}),(this.chatVisible=e)?this.setVisible(e):(1===this.fbTabEl.children.length&&this.fbTabEl.children[0]===t&&this.setVisible(!1),this.fbVisible||this.setVisible(!1)))}},{key:"setVisible",value:function(e){var t;this.cfg.chat?this.fbVisible=e:(t=e?"":"none",this.fbTabEl.css({display:t}))}},{key:"remove",value:function(){this.fbTabEl.parentNode&&this.fbTabEl.parentNode.removeChild(this.fbTabEl)}},{key:"removeModal",value:function(){var e=document.querySelectorAll(".auryc-fb-modal-closebtn");0<e.length&&e[0].click()}},{key:"removeFeedback",value:function(){var e,t=this.fbTabEl.sel(".auryc-feedback-tab-label");t&&0<t.length&&(e=toDomNode(t[0]),1===this.fbTabEl.children.length&&this.fbTabEl.children[0]===e?this.remove():this.fbTabEl.removeChild(e))}},{key:"handleChat",value:function(e,t){if("olark"===e.chat.vendor){void 0===t&&(t=5);var i=this;if("function"!=typeof olark){if(t<=0)return;return void setTimeout(function(){i.handleChat(e,--t)},1e3)}olark("api.box.onShrink",function(){}),olark("api.box.onExpand",function(){})}}},{key:"applyCustomProperties",value:function(e){var i=getInstance();if(e.customProperties&&(e.customProperties.badge||e.customProperties.fbTab))for(var t=e.customProperties.badge||e.customProperties.fbTab,n=0;n<t.length;n++){var r=t[n];if(function(t){if(!t)return 1;var e=[];return(e="string"==typeof t.deviceType?[t.deviceType]:t.deviceType)&&0!==e.length?e.some(function(e){return e.toLowerCase()===i.getDT().toLowerCase()||"mobilephone"===t.deviceType.toLowerCase()&&i.isPhone()}):1}(r.context))try{var a=r.cssSelector;-1<a.toLowerCase().indexOf("._aurycbadge")&&a.toLowerCase().indexOf("#auryc-feedback-tab")<0&&(a+=",#auryc-feedback-tab");for(var o=document.querySelectorAll(a),s=0;s<o.length;s++){!function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++){var r=i[n],a=t[r];"style"===r?e.style.cssText+=a:e[r]=a}}(o[s],r.properties)}}catch(e){logger.log(e)}}}}]),T$b);function T$b(e,t){classCallCheck(this,T$b),this.fbVisible=!1,this.chatVisible=!1,this.fbTabEl=null,this.clicked=!1,this.cfg=e,this.cfg.badgeTemplate?this.fbTabEl=this.setupTabTemplate(e):this.fbTabEl=this.setupRegularTab(e);var i=e.badgeTemplate&&e.chat?this.fbTabEl.querySelectorAll("#auryc-feedback-tab")[0]:this.fbTabEl;this.setupInteractions(i,e,t)}var FeedbackAPI=(createClass(n0b,[{key:"setFeedbackEnabled",value:function(e){this.stg.setByKey("enabled",e),this.feedbackEnabled.publishTopic(e)}},{key:"_getFeedbackEnabled",value:function(){return!1!==this.stg.getByKey("enabled")}},{key:"addFBSubmitHandler",value:function(e,t){e&&t&&"function"==typeof t?this.submitCb[e]=t:console.error("Invalid feedback submit callback functions")}},{key:"getFBSubmitHandler",value:function(e){if(e)return this.submitCb[e]}},{key:"addFBShownHandler",value:function(e,t){e&&t&&"function"==typeof t?this.shownCb[e]=t:console.error("Invalid feedback shown callback functions")}},{key:"getFBShownHandler",value:function(e){if(e)return this.shownCb[e]}},{key:"clearFBSubmitHandler",value:function(e){-1===e?this.submitCb={}:delete this.submitCb[e]}},{key:"clearFBCancelHandler",value:function(e){-1===e?this.cancelCb={}:delete this.cancelCb[e]}},{key:"addFBCancelHandler",value:function(e,t){e&&t&&"function"==typeof t?this.cancelCb[e]=t:console.error("Invalid feedback submit callback functions")}},{key:"getFBCancelHandler",value:function(e){if(e)return this.cancelCb[e]}},{key:"addFBCustomData",value:function(e){if(localStorage&&e){for(var t=(t=this.getFBCustomData())||{},i=Object.keys(e),n=0;n<i.length;n++){var r=i[n],a=e[r];if("string"!=typeof r||"string"!=typeof a)return void console.error("fb custom data must be string");if(!r||!a)return void console.error("fb custom data cannot be empty");if(255<r.length)return void console.warn("fb custom data key must be 255 characters or less. Ingoring "+r);a=a.substring(0,255),t[r]=a}var o=Object.keys(t);20<o.length&&(console.warn("There will be more than 20 items in feedback custom data. Will only keep first 20"),o=o.slice(0,20));for(var s={},c=0;c<o.length;c++){var l=o[c],u=t[l];s[l]=u}localStorage.setItem("ar_fbc",JSON.stringify(s))}}},{key:"getFBCustomData",value:function(){if(!localStorage)return null;try{return JSON.parse(localStorage.getItem("ar_fbc"))}catch(e){return null}}},{key:"clearFBCustomData",value:function(){localStorage&&localStorage.removeItem("ar_fbc")}},{key:"_makePublic",value:function(e,t,i){_.isDefined(e)&&(window.auryc||(window.aurycFeedbackAPI={}),window.aurycFeedbackAPI=e,t&&i&&this._defineExternalLaunch(t,i))}},{key:"_defineExternalLaunch",value:function(c,l){var u=this;window.launchAurycFeedback=function(e,t,i){try{n=e,r=t,a=i,!u._getFeedbackEnabled()||c.instances.length<1||((s=0<(o=c.instances.filter(function(e){return!0!==e.disabled}).filter(function(e){return!n||e.projectId===n})).length?o[0]:null)?l.hasPopup()&&!r||(s.launchedFromTimer=a,l.initialize(s)):console.log("No enabled feedback is found"+(n?" for feedback "+n:"")))}catch(e){}var n,r,a,o,s}}}]),n0b);function n0b(){classCallCheck(this,n0b),this.stg=DataLayer.getInstance(constants.symbols.PERMANENT,"feedback"),this.feedbackEnabled=new PubSubTopic,this.submitCb={},this.cancelCb={},this.shownCb={}}var feedbackAPI=new FeedbackAPI,TTF_TOKEN_DELIMITER=":",stg=DataLayer.getInstance(constants.symbols.PERMANENT,"feedback"),Trigger=(createClass(t1b,[{key:"disable",value:function(){this.enabled=!1,this.fbTab&&(this.fbTab.removeFeedback(),this.fbTab.removeModal())}},{key:"setEnabled",value:function(e){this.enabled=!!e,this.fbTab&&(this.enabled?this.setupFBTab():this.fbTab.setFeedbackVisible(!1))}},{key:"setupFBTab",value:function(){this.enabled&&(this.renderFBTab(),this.setupDelayedPopup(this.config),this.setupExitPopup(this.config))}},{key:"renderFBTab",value:function(){var e=this;this.fbTab=new FBTab(this.config,function(){return e.fbTabClicked.publishTopic()}),this.fbTab.render(!0),this.displayFBTab(!0)}},{key:"displayFBTab",value:function(e){function t(){var e=browser$1.getScroll(window),t=browser$1.getWinSize(window),i=Math.min(t.h/4,(document.body.scrollHeight-t.h)/4);feedbackAPI._getFeedbackEnabled()&&n.setFeedbackVisible(e.y>i)}var i,n=this.fbTab,r=this.config;void 0!==r.projectId&&!1!==r.showBadge&&feedbackAPI._getFeedbackEnabled()||(e=!1),"D"===r.triggerbehavior?(this.delayFBTabTimer&&clearTimeout(this.delayFBTabTimer),e&&(this.delayFBTabTimer=setTimeout(function(){feedbackAPI._getFeedbackEnabled()&&n.setFeedbackVisible(!0)},1e3*r.triggerdelayseconds))):"T"===r.triggerbehavior||"S"===r.triggerbehavior?e?(i=browser$1.getWinSize(window),document.body.scrollHeight<=i.h?n.setFeedbackVisible(!0):browser$1.addDomEvent(window,"scroll",t)):(browser$1.removeDomEvent(window,"scroll",t),n.setFeedbackVisible(!1)):n.setFeedbackVisible(e)}},{key:"isPopupEnabled",value:function(e){return e.disabled?(logger.warn("Feedback is not enabled in config for project "+e.projectId),!1):!!this.criteria.isDelayedPopupActive(e)||(logger.warn("deplayed popup is not active in this session for project "+e.projectId),!1)}},{key:"setupDelayedPopup",value:function(e){if(!this.hasDelayedPopup(e))return!1;this.startTimer(this.siteId,e.projectId);var t=this;return unloadEvent.addListener(function(){t.handlePageUnload()}),!0}},{key:"setupExitPopup",value:function(e){var i,t,n,r,a,o,s,c=this;this.hasExitPopup(e)&&(browser$1.getInstance().isPhoneOrTablet()?(i=constants.exit_popup.scrollPercent,t=constants.exit_popup.scrollInterval,n=browser$1.getScroll(window).y,r=dom.getDocSize(document).height,a=!1,o=globalSessionTracker.getSessionMetadata(),s=+(this.config.exitPopupDelay||"10"),0<r&&(this.exitPopupMobileHandler=setInterval(function(){var e,t=n-browser$1.getScroll(window).y;t<0&&(t=0,n=browser$1.getScroll(window).y),parseFloat(t)/parseFloat(r)>parseFloat(i)/100&&(clearInterval(c.exitPopupMobileHandler),c.exitPopupMobileHandler=null,a||(e=(new Date).getTime()-o.sessionTime,s<=e/1e3&&c.launchFeedback(),a=!0))},t))):(this.exitPopupHandler=function(e){var t=e.relatedTarget,i=(new Date).getTime(),n=globalSessionTracker.getSessionMetadata();if(n.isOver||!n.sessionTime)return!1;var r=+(c.config.exitPopupDelay||"10"),a=i-n.sessionTime;(!t||t!==document&&!dom.nodeBelongsTo(t,document))&&e.clientY<10&&r<=a/1e3&&c.launchFeedback()},browser$1.addDomEvent(document,"mouseout",this.exitPopupHandler)))}},{key:"clearExitPopupHandler",value:function(){clearInterval(this.exitPopupMobileHandler),this.exitPopupHandler=null,this.exitPopupMobileHandler=null}},{key:"launchFeedback",value:function(){var e=this.config;if(this.criteria.isFeedbackShown(e)||!feedbackAPI._getFeedbackEnabled()||!this.criteria.passExtraConditions(e)||!this.criteria.passURLFilter(e))return!1;window.launchAurycFeedback(e.projectId,!1,!0)}},{key:"setup",value:function(e){if(!this.hasDelayedPopup(e))return!1;this.startTimer(this.siteId,e.projectId);var t=this;return unloadEvent.addListener(function(){t.handlePageUnload()}),!0}},{key:"handlePageUnload",value:function(){this.suspendTimer(this.siteId,this.config.projectId)}},{key:"handleTimeout",value:function(){var e=this.config,t=this.siteId;this.criteria.isDelayedPopupActive(e)&&null!==this.getTimeRemain(t,e.projectId)&&(this.setTimeRemain(t,e.projectId,null),this.launchFeedback())}},{key:"handleNavigation",value:function(e){var t=this,i=this.config;this.fbTab&&setTimeout(function(){t.fbTab.isValid()?t.displayFBTab(e):e&&t.setupFBTab()},1e3),this.hasDelayedPopup(i)&&(this.suspendTimer(this.siteId,i.projectId),e&&this.startTimer(this.siteId,i.projectId)),this.hasExitPopup(i)&&(this.clearExitPopupHandler(),e&&this.setupExitPopup(i))}},{key:"hasDelayedPopup",value:function(e){return e.popupDelayEnabled?!!this.isPopupEnabled(e)&&(logger.warn("delayed popup is enabled for project "+e.projectId+", delay: "+e.popupDelaySeconds+" seconds"),!0):(logger.warn("delayed popup is not enabled in config for project "+e.projectId),!1)}},{key:"hasExitPopup",value:function(e){return!(!e.exitPopupEnabled||!this.isPopupEnabled(e))&&(logger.warn("exit popup is enabled for project "+e.projectId),!0)}},{key:"startTimer",value:function(e,t){var i,n;this.criteria.isFeedbackShown(this.config)||(this.delayedPopupTimer&&clearTimeout(this.delayedPopupTimer),(i=this.getTimeRemain(e,t))||0===i||(i=1e3*this.config.popupDelaySeconds,this.setTimeRemain(e,t,i)),(n=this).startTime=(new Date).getTime(),this.delayedPopupTimer=setTimeout(function(){n.handleTimeout()},i))}},{key:"suspendTimer",value:function(e,t){var i,n=(new Date).getTime()-this.startTime,r=this.getTimeRemain(e,t);null!==r&&(i=n<r?r-n:0,this.setTimeRemain(e,t,i)),this.delayedPopupTimer&&clearTimeout(this.delayedPopupTimer),this.delayedPopupTimer=null}},{key:"getTimeRemain",value:function(e,t){var i=globalSessionTracker.getSessionMetadata();if(i.isOver)return null;var n=stg.getByKey("TTF_"+e+"_"+t);if(!n)return null;var r=n.split(TTF_TOKEN_DELIMITER);return r[0]!==i.sessionId?null:+r[1]}},{key:"setTimeRemain",value:function(e,t,i){var n="TTF_"+e+"_"+t;if(null!==i){var r=globalSessionTracker.getSessionMetadata();if(r.isOver)return null;var a=r.sessionId+TTF_TOKEN_DELIMITER+i;stg.setByKey(n,a)}else stg.removeByKey(n)}}]),t1b);function t1b(e,t){classCallCheck(this,t1b),this.config=e,this.criteria=t,this.fbTab=null,this.enabled=!0,this.delayedPopupTimer=!1,this.siteId=config.getConfig("siteid"),this.fbTabClicked=new PubSubTopic,this.exitPopupHandler=null,this.exitPopupMobileHandler=null,this.setupFBTab()}var RadioInput=(createClass(c3b,[{key:"init",value:function(){this.setTabIndex(-1),addDomEvent(this.input,"keydown",this.handleKeydown),addDomEvent(this.input,"click",this.handleClick),addDomEvent(this.input,"focus",this.handleFocus),addDomEvent(this.input,"blur",this.handleBlur)}},{key:"setTabIndex",value:function(e){this.input.tabIndex=e}},{key:"uncheck",value:function(){this.input.removeAttribute("checked"),this.setTabIndex(-1),toDomNode(this.label).removeCssCls(this.styles.checked)}},{key:"check",value:function(){this.input.setAttribute("checked","true"),this.input.checked=!0,this.setTabIndex(0),toDomNode(this.label).addCssCls(this.styles.checked)}},{key:"inclusiveCheck",value:function(){toDomNode(this.label).addCssCls(this.styles.checked)}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){toDomNode(this.label).removeCssCls(this.styles.focus)}}]),c3b);function c3b(e,t,i,n){var r=this;classCallCheck(this,c3b),this.handleKeydown=function(e){var t=!1;switch(e.which||e.keyCode){case constants.keyCodes.space:case constants.keyCodes.enter:r.radioGroup.setChecked(r),t=!0;break;case constants.keyCodes.left:case constants.keyCodes.up:r.radioGroup.setCheckedToPreviousItem(r),t=!0;break;case constants.keyCodes.right:case constants.keyCodes.down:r.radioGroup.setCheckedToNextItem(r),t=!0}t&&(e.stopPropagation(),e.preventDefault())},this.handleClick=function(e){r.radioGroup.setChecked(r)},this.handleFocus=function(e){var t=r.radioGroup.getLastFocused();t&&t.blur(),toDomNode(r.label).addCssCls(r.styles.focus),r.radioGroup.setFocus(r)},this.handleBlur=function(e){toDomNode(r.label).removeCssCls(r.styles.focus)},this.input=e,this.label=t,this.radioGroup=i,this.styles=n}var RadioGroup=(createClass(x3b,[{key:"init",value:function(e,t,i){for(var n=this.domNode.querySelectorAll(e),r=this.domNode.querySelectorAll(t),a=0;a<n.length;a++){var o=new RadioInput(n[a],r[a],this,i);o.init(),this.allInputs.push(o),this.firstInput||(this.firstInput=o),this.lastInput=o}this.firstInput.setTabIndex(0)}},{key:"isInclusive",value:function(){return"inclusive"===this.mode}},{key:"setFocus",value:function(e){this.lastFocused=e}},{key:"setChecked",value:function(e){for(var t=0;t<this.allInputs.length;t++){this.allInputs[t].uncheck()}if(e.check(),e.focus(),this.lastFocused=e,this.isInclusive())for(var i=0;i<this.allInputs.length;i++){var n=this.allInputs[i];if(n===e)break;n.inclusiveCheck()}}},{key:"getLastFocused",value:function(){return this.lastFocused}},{key:"setCheckedToPreviousItem",value:function(e){var t;e===this.firstInput?this.setChecked(this.lastInput):(t=this.allInputs.indexOf(e),this.setChecked(this.allInputs[t-1]))}},{key:"setCheckedToNextItem",value:function(e){var t;e===this.lastInput?this.setChecked(this.firstInput):(t=this.allInputs.indexOf(e),this.setChecked(this.allInputs[t+1]))}}]),x3b);function x3b(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"exclusive";classCallCheck(this,x3b),this.domNode=e,this.allInputs=[],this.firstInput=null,this.lastInput=null,this.lastFocused=null,this.mode=t}var CheckBox=(createClass(Y3b,[{key:"init",value:function(){this.input.tabIndex=0,addDomEvent(this.input,"keydown",this.handleKeydown),addDomEvent(this.label,"keydown",this.handleKeydown),addDomEvent(this.input,"keyup",this.handleKeyup),addDomEvent(this.label,"click",this.handleClick),addDomEvent(this.input,"click",this.handleClick),addDomEvent(this.label,"touchstart",this.handleClick),addDomEvent(this.input,"focus",this.handleFocus),addDomEvent(this.input,"blur",this.handleBlur)}}]),Y3b);function Y3b(e,t,i){var n=this;classCallCheck(this,Y3b),this.handleKeyup=function(e){e.keyCode!==constants.keyCodes.space&&e.keyCode!==constants.keyCodes.enter||e.preventDefault()},this.toggleCheckbox=function(){n.input.hasAttribute("checked")?(n.input.checked=!1,n.input.removeAttribute("checked"),n.input.setAttribute("aria-checked",!1),n.label.setAttribute("aria-checked",!1),toDomNode(n.label).removeCssCls(n.styles.checked),toDomNode(n.label).removeCssCls(n.styles.focus)):(n.input.setAttribute("checked","true"),n.input.checked=!0,n.input.setAttribute("aria-checked",!0),n.label.setAttribute("aria-checked",!0),toDomNode(n.label).addCssCls(n.styles.checked),toDomNode(n.label).addCssCls(n.styles.focus))},this.handleKeydown=function(e){var t=!1;switch(e.which||e.keyCode){case constants.keyCodes.space:case constants.keyCodes.enter:n.toggleCheckbox(),t=!0}t&&(e.stopPropagation(),e.preventDefault()),n.input.focus()},this.handleClick=function(e){var t=+new Date;t-n.lastInteractionTime<n.throttleInterval||(n.lastInteractionTime=t,n.toggleCheckbox(),n.input.focus(),e.stopPropagation(),e.preventDefault())},this.handleFocus=function(e){toDomNode(n.label).addCssCls(n.styles.focus)},this.handleBlur=function(e){toDomNode(n.label).removeCssCls(n.styles.focus)},this.input=e,this.label=t,this.styles=i,this.lastInteractionTime=0,this.throttleInterval=100}var CheckBoxGroup=(createClass(k4b,[{key:"init",value:function(e,t,i){for(var n=this.domNode.querySelectorAll(e),r=this.domNode.querySelectorAll(t),a=0;a<n.length;a++){new CheckBox(n[a],r[a],i).init()}}}]),k4b);function k4b(e){classCallCheck(this,k4b),this.domNode=e}var FBModel=(createClass(u4b,[{key:"setIsTabbing",value:function(e){var t=0<arguments.length&&void 0!==e&&e;this.isUserTabbing=t}},{key:"getDefaultData",value:function(){return"CI6MywibmFtZSI6IkRhbmdkYW5nIFN1cnZleSAyMDE2IiwiZGVzY3JpcHRpb24iOiJ0ZXN0IGZvciBkYW5nZGFuZyIsImxhbmd1YWdlQ29kZSI6bnVsbCwic2l0ZUtleSI6IjEtbHl5dGVzdDFzcG9ydGNvbSIsImNyZWF0ZWREYXRlIjoiMjAxNy0xMi0xOVQxMjoyNjo1MCIsImNyZWF0ZWRVc2VySWQiOjEsImRlbGV0ZWQiOnRydWUsImxhc3RVcGRhdGVEYXRlIjoiMjAxNy0xMi0xOVQxMzoyNToxMyIsImVuYWJsZWQiOmZhbHNlLCJmb3JtQ29uZmlnIjoie1wiYmFja2dyb3VuZENvbG9yXCI6XCIjMTIxNTFBXCIsXCJmb250Q29sb3JcIjpcIiNGRkZGRkZcIixcInRyaWdnZXJiZWhhdmlvclwiOlwiSVwiLFwiYnJhbmRcIjpcInNob3dcIixcInRyaWdnZXJkZWxheXNlY29uZHNcIjpcIjEwXCIsXCJ0cmlnZ2VyaGFsZndheWRvd25wYWdlXCI6ZmFsc2UsXCJ0YXJnZXRpbmdkZXZpY2VkZXNrdG9wXCI6dHJ1ZSxcInRhcmdldGluZ2RldmljZW1vYmlsZVwiOnRydWUsXCJ0cmlnZ2VycGFnZWZpbHRlclwiOlwiQVwiLFwiZmlsdGVycGFnZXNcIjpbXCJcIl0sXCJmaWx0ZXJwYWdlc0luY2x1ZGVcIjpbXCJcIl0sXCJmYmRpcmVjdGlvblwiOlwiaG9yaXpvbnRhbFwiLFwidGFyZ2V0aW5nY2FwXCI6XCIxMDBcIixcInBvcHVwRGVsYXlFbmFibGVkXCI6ZmFsc2UsXCJwb3B1cERlbGF5U2Vjb25kc1wiOlwiMzBcIixcInNwZWNpZmljRm9ybUVuYWJsZVwiOmZhbHNlLFwic3VydmV5VGhyb3R0bGVzXCI6e1wiY29va2llXCI6XCJhdXJ5Yy5mYnRcIixcImFiYW5kb25lZFwiOjcsXCJzdWJtaXR0ZWRcIjo5MCxcInNhbXBsaW5nXCI6MTAwfSxcImZlZWRiYWNrSWRcIjpcIjM0OTlcIixcImljb25cIjpcImFzcGFyazEwMC5wbmdcIixcImRlbGF5XCI6MCxcInRlbXBsYXRlXCI6XCJkZWZhdWx0XCIsXCJsYWJlbFwiOlwiT3B0aW9uUXVlc3Rpb25GZWVkQmFja1wiLFwiZmJsb2NhdGlvblwiOlwibWlkZGxlcmlnaHRcIixcInBvcHVwXCI6ZmFsc2UsXCJkaXNhYmxlZFwiOmZhbHNlLFwiZmJhbmltYXRlXCI6ZmFsc2UsXCJmYmZpeGVkXCI6ZmFsc2UsXCJzYXZlZFwiOlwiXCIsXCJ0b3BpY3NcIjpbe1wib3JkZXJcIjoxLFwiaWRcIjpcIjcyMThcIixcImFuc3dlcklkXCI6XCJDQU8wMDg0Nzg0QTAwMVwiLFwid2hpdGVsaXN0QWN0aXZlXCI6ZmFsc2UsXCJ3aGl0ZWxpc3REYXRhXCI6XCJcIixcInRvcGljVGV4dFwiOlwiTmV3IFF1ZXN0aW9uIEdyb3VwIDFcIn1dfSIsImZlZWRiYWNrVGl0bGUiOiJGZWVkYmFjayBTdXJ2ZXkiLCJsb2dvUGljIjoiaHR0cHM6Ly9mYi1sb2dvLnVzZXJ0eS5jb20vMTQ0N2Y3Y2FjYmJhNzBjNDFjZDRlZDkyMDA3ZDdjMmMvY2MtbG9nby5zdmciLCJwcm9sb2d1ZVRleHQiOiI8aDE+Q2xpY2sgaGVyZSB0byBlbnRlciBzdXJ2ZXkgVGl0bGU8L2gxPjxwPkNsaWNrIGhlcmUgdG8gdHlwZSBXZWxjb21lIE1lc3NhZ2U8L3A+IiwiZXBpbG9ndWVUZXh0IjoiPGgxPldlIEFwcHJlY2lhdGUgWW91ciBGZWVkYmFjazwvaDE+PHA+WW91ciBmZWVkYmFjayB3aWxsIGhlbHAgdXMgaW1wcm92ZTwvcD4iLCJ0b3BpY1F1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMjA4IiwicmF0aW5nUXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAwOTUiLCJucHNRdWVzdGlvbklkIjoiMTUxMzY1NzYxMDE3NCIsInRvcGljR3JvdXBJZCI6ImM1ZmQ2ZjFiMTM0NTRiMjA5ZjlhYzdlZGVlM2Y4N2YxIiwicHVibGlzaGVkVmVyc2lvbiI6bnVsbCwicHVibGlzaGVkRGF0ZSI6bnVsbCwicXVlc3Rpb25zIjpbeyJpZCI6IjE1MTM2NTc2MTAxNzQiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvblRleHQiOiJIb3cgbGlrZWx5IGFyZSB5b3UgdG8gcmVjb21tZW5kIFRlc3QgQ29tcGFueSB0byBhIGZyaWVuZCBvciBjb2xsZWFndWU/IiwicmVxdWlyZWQiOnRydWUsIm51bWVyaWMiOnRydWUsInF1ZXN0aW9uVHlwZSI6Ik5QUyIsInF1ZXN0aW9uR3JvdXBJZCI6bnVsbCwicGFyZW50UXVlc3Rpb25JZCI6bnVsbCwicGFyZW50QW5zd2VySWQiOm51bGwsInF1ZXN0aW9uT3JkZXIiOjEsInF1ZXN0aW9uTGFiZWwiOm51bGwsImhpZGRlbiI6ZmFsc2UsIm1pblNjYWxlIjpudWxsLCJtYXhTY2FsZSI6bnVsbCwiYW5zd2VycyI6W3siaWQiOiIxNTEzNjU3NjEwMTc0QTAwMSIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMTc0IiwibGFiZWwiOiJOb3QgQXQgQWxsIExpa2VseSIsInZhbHVlIjowLCJkaXNwbGF5T3JkZXIiOjEsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDE3NEEwMDIiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDE3NCIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6MSwiZGlzcGxheU9yZGVyIjoyLCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAxNzRBMDAzIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAxNzQiLCJsYWJlbCI6bnVsbCwidmFsdWUiOjIsImRpc3BsYXlPcmRlciI6MywiZGlzcGxheUxhYmVsIjpmYWxzZSwiZGlzcGxheVZhbHVlIjp0cnVlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjU3NjEwMTc0QTAwNCIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMTc0IiwibGFiZWwiOm51bGwsInZhbHVlIjozLCJkaXNwbGF5T3JkZXIiOjQsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDE3NEEwMDUiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDE3NCIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6NCwiZGlzcGxheU9yZGVyIjo1LCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAxNzRBMDA2IiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAxNzQiLCJsYWJlbCI6bnVsbCwidmFsdWUiOjUsImRpc3BsYXlPcmRlciI6NiwiZGlzcGxheUxhYmVsIjpmYWxzZSwiZGlzcGxheVZhbHVlIjp0cnVlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjU3NjEwMTc0QTAwNyIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMTc0IiwibGFiZWwiOm51bGwsInZhbHVlIjo2LCJkaXNwbGF5T3JkZXIiOjcsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDE3NEEwMDgiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDE3NCIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6NywiZGlzcGxheU9yZGVyIjo4LCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAxNzRBMDA5IiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAxNzQiLCJsYWJlbCI6bnVsbCwidmFsdWUiOjgsImRpc3BsYXlPcmRlciI6OSwiZGlzcGxheUxhYmVsIjpmYWxzZSwiZGlzcGxheVZhbHVlIjp0cnVlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjU3NjEwMTc0QTAxMCIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMTc0IiwibGFiZWwiOm51bGwsInZhbHVlIjo5LCJkaXNwbGF5T3JkZXIiOjEwLCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAxNzRBMDExIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAxNzQiLCJsYWJlbCI6IkV4dHJlbWVseSBMaWtlbHkiLCJ2YWx1ZSI6MTAsImRpc3BsYXlPcmRlciI6MTEsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfV19LHsiaWQiOiIxNTEzNjU3NjEwMDk1IiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25UZXh0IjoiUGxlYXNlIHJhdGUgeW91ciBleHBlcmllbmNlIG9uIG91ciB3ZWJzaXRlIiwicmVxdWlyZWQiOnRydWUsIm51bWVyaWMiOnRydWUsInF1ZXN0aW9uVHlwZSI6IlNDQUxFRCIsInF1ZXN0aW9uR3JvdXBJZCI6bnVsbCwicGFyZW50UXVlc3Rpb25JZCI6bnVsbCwicGFyZW50QW5zd2VySWQiOm51bGwsInF1ZXN0aW9uT3JkZXIiOjIsInF1ZXN0aW9uTGFiZWwiOm51bGwsImhpZGRlbiI6ZmFsc2UsIm1pblNjYWxlIjpudWxsLCJtYXhTY2FsZSI6bnVsbCwiYW5zd2VycyI6W3siaWQiOiIxNTEzNjU3NjEwMDk1QTAwMSIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMDk1IiwibGFiZWwiOm51bGwsInZhbHVlIjoxLCJkaXNwbGF5T3JkZXIiOjEsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDA5NUEwMDIiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDA5NSIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6MiwiZGlzcGxheU9yZGVyIjoyLCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAwOTVBMDAzIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAwOTUiLCJsYWJlbCI6bnVsbCwidmFsdWUiOjMsImRpc3BsYXlPcmRlciI6MywiZGlzcGxheUxhYmVsIjpmYWxzZSwiZGlzcGxheVZhbHVlIjp0cnVlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjU3NjEwMDk1QTAwNCIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMDk1IiwibGFiZWwiOm51bGwsInZhbHVlIjo0LCJkaXNwbGF5T3JkZXIiOjQsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDA5NUEwMDUiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDA5NSIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6NSwiZGlzcGxheU9yZGVyIjo1LCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH1dfSx7ImlkIjoiMTUxMzY1NzYxMDIwOCIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uVGV4dCI6IldoYXQgaXMgeW91ciBmZWVkYmFjayByZWdhcmRpbmc/IiwicmVxdWlyZWQiOnRydWUsIm51bWVyaWMiOmZhbHNlLCJxdWVzdGlvblR5cGUiOiJEUk9QX0RPV04iLCJxdWVzdGlvbkdyb3VwSWQiOiJjNWZkNmYxYjEzNDU0YjIwOWY5YWM3ZWRlZTNmODdmMSIsInBhcmVudFF1ZXN0aW9uSWQiOm51bGwsInBhcmVudEFuc3dlcklkIjpudWxsLCJxdWVzdGlvbk9yZGVyIjozLCJxdWVzdGlvbkxhYmVsIjpudWxsLCJoaWRkZW4iOmZhbHNlLCJtaW5TY2FsZSI6bnVsbCwibWF4U2NhbGUiOm51bGwsImFuc3dlcnMiOlt7ImlkIjoiMTUxMzY1NzYxMDIwOEEwMDIiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsImxhYmVsIjoibmV3IHRvcGljMSIsInZhbHVlIjoyLCJkaXNwbGF5T3JkZXIiOjEsImRpc3BsYXlMYWJlbCI6dHJ1ZSwiZGlzcGxheVZhbHVlIjpmYWxzZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDIwOEEwMDMiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsImxhYmVsIjoibmV3IHRvcGljMiIsInZhbHVlIjozLCJkaXNwbGF5T3JkZXIiOjIsImRpc3BsYXlMYWJlbCI6dHJ1ZSwiZGlzcGxheVZhbHVlIjpmYWxzZSwiaXNEZWZhdWx0IjpudWxsfV19XSwidG9waWNzIjpbeyJpZCI6NiwiZmVlZGJhY2tJZCI6MywidG9waWNBbnN3ZXJJZCI6IjE1MTM2NTc2MTAyMDhBMDAyIiwidG9waWNUZXh0IjoibmV3IHRvcGljMSIsInRvcGljT3JkZXIiOjEsInRvcGljVmFsdWUiOjIsInF1ZXN0aW9ucyI6W3siaWQiOiIxNTEzNjYxMTEzMjExIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25UZXh0IjoiRG8geW91IHdhbnQgdG8gZWF0PyIsInJlcXVpcmVkIjp0cnVlLCJudW1lcmljIjpmYWxzZSwicXVlc3Rpb25UeXBlIjoiUkFESU9fQlVUVE9OIiwicXVlc3Rpb25Hcm91cElkIjoiYzVmZDZmMWIxMzQ1NGIyMDlmOWFjN2VkZWUzZjg3ZjEiLCJwYXJlbnRRdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsInBhcmVudEFuc3dlcklkIjoiMTUxMzY1NzYxMDIwOEEwMDIiLCJxdWVzdGlvbk9yZGVyIjo1LCJxdWVzdGlvbkxhYmVsIjpudWxsLCJoaWRkZW4iOmZhbHNlLCJtaW5TY2FsZSI6bnVsbCwibWF4U2NhbGUiOm51bGwsImFuc3dlcnMiOlt7ImlkIjoiMTUxMzY2MTExMzIxMUEwMDEiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY2MTExMzIxMSIsImxhYmVsIjoiWWVzIiwidmFsdWUiOjEsImRpc3BsYXlPcmRlciI6MSwiZGlzcGxheUxhYmVsIjp0cnVlLCJkaXNwbGF5VmFsdWUiOmZhbHNlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjYxMTEzMjExQTAwMiIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjYxMTEzMjExIiwibGFiZWwiOiJObyIsInZhbHVlIjoyLCJkaXNwbGF5T3JkZXIiOjIsImRpc3BsYXlMYWJlbCI6dHJ1ZSwiZGlzcGxheVZhbHVlIjpmYWxzZSwiaXNEZWZhdWx0IjpudWxsfV19LHsiaWQiOiIxNTEzNjYxMTEzMjIzIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25UZXh0IjoiSG93IG9sZCBhcmUgeW91PyIsInJlcXVpcmVkIjp0cnVlLCJudW1lcmljIjpmYWxzZSwicXVlc3Rpb25UeXBlIjoiUkFESU9fQlVUVE9OIiwicXVlc3Rpb25Hcm91cElkIjoiYzVmZDZmMWIxMzQ1NGIyMDlmOWFjN2VkZWUzZjg3ZjEiLCJwYXJlbnRRdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsInBhcmVudEFuc3dlcklkIjoiMTUxMzY1NzYxMDIwOEEwMDIiLCJxdWVzdGlvbk9yZGVyIjo2LCJxdWVzdGlvbkxhYmVsIjpudWxsLCJoaWRkZW4iOmZhbHNlLCJtaW5TY2FsZSI6bnVsbCwibWF4U2NhbGUiOm51bGwsImFuc3dlcnMiOlt7ImlkIjoiMTUxMzY2MTExMzIyM0EwMDEiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY2MTExMzIyMyIsImxhYmVsIjoiPDUiLCJ2YWx1ZSI6MSwiZGlzcGxheU9yZGVyIjoxLCJkaXNwbGF5TGFiZWwiOnRydWUsImRpc3BsYXlWYWx1ZSI6ZmFsc2UsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NjExMTMyMjNBMDAyIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NjExMTMyMjMiLCJsYWJlbCI6IjV+MTAiLCJ2YWx1ZSI6MiwiZGlzcGxheU9yZGVyIjoyLCJkaXNwbGF5TGFiZWwiOnRydWUsImRpc3BsYXlWYWx1ZSI6ZmFsc2UsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NjExMTMyMjNBMDAzIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NjExMTMyMjMiLCJsYWJlbCI6Ij4xMCIsInZhbHVlIjozLCJkaXNwbGF5T3JkZXIiOjEwLCJkaXNwbGF5TGFiZWwiOnRydWUsImRpc3BsYXlWYWx1ZSI6ZmFsc2UsImlzRGVmYXVsdCI6bnVsbH1dfSx7ImlkIjoiMTUxMzY2MTExMzMzMyIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uVGV4dCI6IlBsZWFzZSBlbnRlciB5b3VyIGNvbW1lbnRzIiwicmVxdWlyZWQiOmZhbHNlLCJudW1lcmljIjpmYWxzZSwicXVlc3Rpb25UeXBlIjoiT1BFTkVORCIsInF1ZXN0aW9uR3JvdXBJZCI6ImM1ZmQ2ZjFiMTM0NTRiMjA5ZjlhYzdlZGVlM2Y4N2YxIiwicGFyZW50UXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAyMDgiLCJwYXJlbnRBbnN3ZXJJZCI6IjE1MTM2NTc2MTAyMDhBMDAyIiwicXVlc3Rpb25PcmRlciI6NywicXVlc3Rpb25MYWJlbCI6bnVsbCwiaGlkZGVuIjpmYWxzZSwibWluU2NhbGUiOm51bGwsIm1heFNjYWxlIjpudWxsfV19LHsiaWQiOjcsImZlZWRiYWNrSWQiOjMsInRvcGljQW5zd2VySWQiOiIxNTEzNjU3NjEwMjA4QTAwMyIsInRvcGljVGV4dCI6Im5ldyB0b3BpYzIiLCJ0b3BpY09yZGVyIjoyLCJ0b3BpY1ZhbHVlIjozLCJxdWVzdGlvbnMiOlt7ImlkIjoiMTUxMzY2MTExMzIzNiIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uVGV4dCI6IkRvIHlvdSBsaWtlIG1lPyIsInJlcXVpcmVkIjp0cnVlLCJudW1lcmljIjpmYWxzZSwicXVlc3Rpb25UeXBlIjoiUkFESU9fQlVUVE9OIiwicXVlc3Rpb25Hcm91cElkIjoiYzVmZDZmMWIxMzQ1NGIyMDlmOWFjN2VkZWUzZjg3ZjEiLCJwYXJlbnRRdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsInBhcmVudEFuc3dlcklkIjoiMTUxMzY1NzYxMDIwOEEwMDMiLCJxdWVzdGlvbk9yZGVyIjo3LCJxdWVzdGlvbkxhYmVsIjpudWxsLCJoaWRkZW4iOmZhbHNlLCJtaW5TY2FsZSI6bnVsbCwibWF4U2NhbGUiOm51bGwsImFuc3dlcnMiOlt7ImlkIjoiMTUxMzY2MTExMzIzNkEwMDEiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY2MTExMzIzNiIsImxhYmVsIjoiWWVzIiwidmFsdWUiOjEsImRpc3BsYXlPcmRlciI6MSwiZGlzcGxheUxhYmVsIjp0cnVlLCJkaXNwbGF5VmFsdWUiOmZhbHNlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjYxMTEzMjM2QTAwMiIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjYxMTEzMjM2IiwibGFiZWwiOiJObyIsInZhbHVlIjoyLCJkaXNwbGF5T3JkZXIiOjIsImRpc3BsYXlMYWJlbCI6dHJ1ZSwiZGlzcGxheVZhbHVlIjpmYWxzZSwiaXNEZWZhdWx0IjpudWxsfV19XX1dLCJleHRyYUluZm8iOnsicmF0aW5nIjoiUGxlYXNlIHByb3ZpZGUgYSBiYXNpYyByYXRpbmciLCJjaG9vc2UiOiJDaG9vc2XigKYiLCJzdWJtaXQiOiJTdWJtaXQiLCJvayI6Ik9LIiwiZW1haWxlbXB0eSI6IkVtYWlsIGNhbm5vdCBiZSBlbXB0eSIsImVtYWlsdmFsaWQiOiJQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzIiwibnBzWmVybyI6Ik5vdCBBdCBBbGwgTGlrZWx5IiwibnBzVGVuIjoiRXh0cmVtZWx5IExpa2VseSIsInlvdXJBbnN3ZXIiOiJZb3VyIEFuc3dlciIsInBvd2VyZWRCeSI6IlBvd2VyZWQgYnkiLCJsZWZ0IjoiJHtOVU19IGNoYXJhY3RlcnMgbGVmdCJ9fQ==eyJpZ"}},{key:"setupFBDoneHandler",value:function(e){this.fbDoneFn=e}},{key:"hasRequiredQuestions",value:function(e){for(var t=0;t<e.fb.questions.length;t++)if(e.fb.questions[t].required&&!e.fb.questions[t].hidden)return!0;for(var i=0;i<e.topics.length;i++)for(var n=e.topics[i].questions,r=0;r<n.length;r++)if(n[r].required&&!n[r].hidden)return!0;return!1}},{key:"processFeedbackData",value:function(e,t){function i(e,t){return e.questionOrder-t.questionOrder}function n(e,t){return e.displayOrder-t.displayOrder}function r(e){return!e.hidden}e.mainQ=e.fb.questions.filter(r).sort(i).map(function(e){return e.answers=e.answers.sort(n),e}),e.topics=e.fb.topics.sort(function(e,t){return e.topicOrder-t.topicOrder});for(var a=0;a<e.topics.length;a++)e.topics[a].questions=e.topics[a].questions.filter(r).sort(i).map(function(e){return e.answers&&(e.answers=e.answers.sort(n)),e});for(var o={},s=[],c=0;c<e.topics.length;c++)var l=e.topics[c].questions,s=s.concat(l.filter(function(e){return e.questionLabel&&0<e.questionLabel.length}));o=this.groupBy(s,"questionLabel");for(var u=0;u<e.topics.length;u++)e.topics[u].questions.forEach(function(e){var t;o[e.questionLabel]&&(e.matrix=!0,e.group=o[e.questionLabel],t=_.get(e,"group[0].answers",[]),e.answerLength=t.reduce(function(e,t){return _.get(t,"label.length",0)+e},0),delete o[e.questionLabel])});e.hasRequiredQuestions=this.hasRequiredQuestions(e),e.formConfig=JSON.parse(e.fb.formConfig),e.extraInfo=e.meta["ext-info"],e.meta=e.meta.info,e.logoPic=e.meta.logo1graphic,e.feedbackTitle=e.meta.surveytitle,e.prologueText=e.meta.prologuetext,this.feedbackDef=e,t&&t(e)}},{key:"groupBy",value:function(e,i){return e.reduce(function(e,t){return t.matrix=!0,e[t[i]]||(e[t[i]]=[]),e[t[i]].push(t),e},{})}},{key:"getFeedbackData",value:function(n){function r(){a.feedbackReqTimer&&clearTimeout(a.feedbackReqTimer)}function e(e){a.feedbackReqTimer&&clearTimeout(a.feedbackReqTimer);try{a.cachedRes||(a.cachedRes=e);var t,i=encoder.decodeBase64(e);_.isEmpty(i)?(logger.log("empty feedback json"),r()):(t=JSON.parse(i),a.processFeedbackData(t,n))}catch(e){logger.warn("Unable to parse feedback definition: "+e),r()}}var t,a=this;this.cachedRes?e(this.cachedRes):(this.feedbackReqTimer=setTimeout(function(){var e=encoder.decodeBase64(a.getDefaultData());a.processFeedbackData(e,n)},5e3),t={fid:this.fbConfig.mid,version:this.fbConfig.version||"1",type:"fb"},asyncReq({type:"GET",url:(this.fbConfig.urlOverride||config.getFBViewUrl())+"?"+buildQuery("",t),onSuccess:e,onFailure:r,contentType:"application/json"}))}},{key:"getResponseSummary",value:function(){var e=0<=(e=this.npsRatings)&&e<=6?"detractors":6<e&&e<=8?"passives":8<e?"promoters":"unknown";return{starRating:this.starsRatings,npsResponse:e,formType:this.formType,formName:this.fbConfig.label,questionGroup:this.questionGroup}}},{key:"getCallbackSummary",value:function(e){var t=0<=(t=this.npsRatings)&&t<=6?"detractors":6<t&&t<=8?"passives":8<t?"promoters":"unknown";this.starsRatings||(this.starsRatings="unknown");var i={};return e&&((e=JSON.parse(e)).responses=e.responses.filter(function(e){if(e.answerText)return!0}),_.each(e.responses,function(e){delete e.required,delete e.questionId,delete e.answerId}),i=e.responses),{starRating:this.starsRatings,npsResponse:t,formid:this.fbConfig.projectId,formName:this.feedbackDef.fb.name,responses:i}}},{key:"getCBAnswers",value:function(e,t,i,n){for(var r=[],a=toDomNode(e).sel("input"),o=0;o<a.length;o++){var s=a[o].getAttribute(constants.css.FB_QID);a[o].checked&&r.push({questionId:t,questionText:n[t],answerId:s,answerText:n[s],required:i})}return 0===r.length&&r.push({questionId:t,questionText:n[t],required:i}),r}},{key:"handleSingleNonCB",value:function(e,t,i,n){var r,a={},o=toDomNode(e).sel("select"),s=toDomNode(e).sel("input"),c=toDomNode(e).sel("textarea");if(1<=c.length){var l=c[0].value.replace(/\s+/g," ");a.answerText=l.length>=constants.css.TEXT_LIMIT?l.substr(0,constants.css.TEXT_LIMIT-1):l}else if(1<=s.length){var u=s[0],g=u.getAttribute("type");if(g===constants.css.HIDDEN.toLowerCase())a.answerId=u.value;else if(g!==constants.css.RADIO.toLowerCase())a.answerText=u.value;else for(var d=0;d<s.length;d++)s[d].checked&&(a.answerId=s[d].value,toDomNode(e).className.trim()===constants.css.FB_QUESTION&&5===s.length&&(this.starsRatings=d+1),"auryc-nps__container auryc-feedback-fbquestion"===toDomNode(e).className.trim()&&11===s.length&&(this.npsRatings=d))}else{1<=o.length&&(1<=(r=o[0]).selectedIndex&&(a.answerId=r.value,this.questionGroup=r.options[r.selectedIndex].value,a.answerId&&1<=a.answerId.length||(a.skip=!0)))}return a.questionId=t,a.questionText=n[t],a.required=i,a.answerText||(a.answerText=n[a.answerId]),a}},{key:"generateQuestionMap",value:function(e,t){_.each(e,function(e){t[e.id]=e.questionText,_.each(e.answers,function(e){t[e.id]=e.label||e.value})})}},{key:"assembleResponse",value:function(){var t=this,e=this.feedbackDef.questions||[],i={};this.generateQuestionMap(e,i);var n=this.feedbackDef.topics||[];_.each(n,function(e){t.generateQuestionMap(e.questions,i)});var r=this.feedbackDef.mainQ||[];this.generateQuestionMap(r,i),this.starsRatings=!1,this.npsRatings="unknown",this.questionGroup=null;var a=globalSessionTracker.getSessionMetadata();if(!a.isOver){var o={siteKey:config.getSiteid(),mid:this.fbConfig.mid||this.fbConfig.fid,globalId:a.sessionId,sessionId:a.viewId,url:window.location.href},s=config.getCurrentIdentity();s&&0<s.length&&(o.identity=s);var c=feedbackAPI.getFBCustomData()||{};c._ar_display_=getWinScrResString(),o.customData=c,this.fbConfig.version?o.version=this.fbConfig.version:o.version&&delete o.version;var l,u,g=[];1===this.feedbackDef.topics.length&&(l=void 0,u=this.feedbackDef.topics[0].questions,_.each(u,function(e){e.parentAnswerId===t.feedbackDef.topics[0].topicAnswerId&&(l=e.parentQuestionId)}),g.push({questionId:l,questionText:i[l],answerId:this.feedbackDef.topics[0].topicAnswerId,answerText:this.feedbackDef.topics[0].topicText}));for(var d='.auryc-feedback-fbquestiongroup-shown [quesType="auryc-fbq"], .'+constants.css.FB_QUESTION,h=this.htmlElem.sel(d),p=0;p<h.length;p++){var f,I,b=h[p],m=b.getAttribute(constants.css.FB_QID),y=b.getAttribute(constants.css.FB_QTYPE),C=b.hasAttribute(constants.css.REQUIRED);y===constants.css.CHECKBOX?(f=this.getCBAnswers(b,m,C,i))&&0<f.length&&(g=g.concat(f)):!0!==(I=this.handleSingleNonCB(b,m,C,i)).skip&&g.push(I)}o.responses=g;var A=this.htmlElem.sel("#auryc-feedback-canvas canvas")[0];if(A)try{o.image=A.toDataURL("image/png").replace("image/png","image/octet-stream")}catch(e){logger.log(e)}for(var v=this.feedbackDef.fb.topicQuestionId,S=!0,w=o.responses,x={},E=!1,k=0;k<w.length;k++)!0!==w[k].required||w[k].answerId||w[k].answerText&&w[k].answerText.trim()||(E=x[w[k].questionId]=!0);var T=this.getInvalidQ();if(E||T){for(var P=null,R=0;R<h.length;R++){var F=h[R],N=F.getAttribute(constants.css.FB_QID),B=toDomNode(this.htmlElem.sel("#auryc_lbl"+N)[0]);if(B&&B.removeCssCls("aurycIsRequired"),x[N])B&&B.addCssCls("aurycIsRequired"),P=P||F;else for(var D=F.querySelectorAll(".auryc-fb-validation-msg-section"),U=0;U<D.length;U++)"none"!==toDomNode(D[U]).getStyle("display")&&(P=P||F)}return this.setInvalidQFocus(P),"notValid"}for(var J=0;J<w.length;J++)if(w[J].questionId!==v&&(w[J].answerId||w[J].answerText&&w[J].answerText.trim())){S=!1;break}return S?null:o={str:JSON.stringify(o),obj:o}}}},{key:"submitFeedbackResponse",value:function(){var t=this;if(!this.fbConfig.preview){var e=this.assembleResponse(),i=e.str;if("notValid"!==i){if(!i)return this.submitted=!1,void(this.fbDoneFn&&this.fbDoneFn(this.getCallbackSummary()));if(this.email&&(logger.isLiveDebug()&&console.log("email:"+this.email),window.aurycBehaviorAPI.identify(this.email)),!this.submitting){var n={type:"POST",url:config.getFBSubmitUrl(),data:encoder.encodeBase64(i),onSuccess:function(e){t.submitted=!0,AurycPubSub.publish(constants.events.FEEDBACKTRACKER,{eventType:constants.events.CUSTOM_EVENT,eventName:"Feedback Submitted",tagName:"FeedbackSubmitted",eventProperties:_.extend({formid:t.fbConfig.projectId,name:"Feedback Submitted",respid:JSON.parse(e).respondentId,et:"submitted"},t.getResponseSummary())}),t.fbDoneFn&&t.fbDoneFn(t.getCallbackSummary(i))},contentType:"application/json"};config.getConfig("fbReferer","behavior")&&(n.referer=document.referrer),asyncReq(n);var r=config.getSecondaryFBSubmitUrl();if(config.isDoubleFBSubmit()&&r)try{n.url=r,n.onSuccess=function(){logger.isLiveDebug()&&console.log("Successfully sent to secondary url:"+r)};var a=e.obj;a.customData.__dest__="secondary",n.data=encoder.encodeBase64(JSON.stringify(a)),asyncReq(n)}catch(e){}}this.submitting=!0}else this.submitted=!1}}},{key:"isSubmitting",value:function(){return this.submitting}},{key:"render",value:function(e,t){var i=this;t=toDomNode(t),this.htmlElem=t,this.modalElem=e,this.setupSelectionMode(t);var n=getInstance(),r=this.createTempStyle(n.isPhoneOrTablet())||"aurycChecked";["TopicSelector","Nps","OpenEnd","Selects","Stars","Emails"].forEach(function(e){i["handle"+e](t,r)}),this.handleCheckableInputs(t,"checkbox",r),this.handleCheckableInputs(t,"radio",r),this.canShowScreenshot()?(toDomNode(this.htmlElem.sel(".auryc-fbmodal-body-selection")[0]).addCssCls("fb-enabled"),toDomNode(this.htmlElem.sel(".auryc-fbmodal-body-fbform")[0]).removeCssCls("fb-enabled"),this.modalElem.htmlElem.addCssCls("formSelection"),this.modalElem.enableFBFormUI(!0)):this.showFeedback()}},{key:"getInvalidQ",value:function(){var e=this.htmlElem.sel("."+constants.css.FB_TOPIC)[0];if(e)for(var t=e.sel('div[dataType="auryc-fbq"] [quesType="auryc-fbq"]'),i=0;i<t.length;i++)for(var n=t[i],r=n.querySelectorAll(".auryc-fb-validation-msg-section"),a=0;a<r.length;a++)if("none"!==toDomNode(r[a]).getStyle("display"))return n;return null}},{key:"showValidationMessage",value:function(e,t){var i;e&&(i=toDomNode(e.sel(".auryc-fb-validation-msg-section")[0]),t?i.css({display:"block"}):i.css({display:"none"}))}},{key:"handleEmails",value:function(e){e=toDomNode(e);for(var r=this,t=e.sel(".auryc-feedback-email"),a=browser$1.getFbParams(),i=0;i<t.length;i++){var n=toDomNode(t[i]).sel("input")[0];this.fbConfig.fbStandalone&&a.email&&(n.value=a.email),addDomEvent(n,"blur",o)}function o(e){var t=e.target||e.srcElement,i="";t.hasAttribute(constants.css.REQUIRED)&&_.isEmpty(t.value)?i=r.feedbackDef.extraInfo.emailempty||r.feedbackDef.ext.emailempty:_.isEmpty(t.value)||_.isEmail(t.value)||(i=r.feedbackDef.extraInfo.emailvalid||r.feedbackDef.ext.emailvalid),_.isEmpty(t.value)||!_.isEmail(t.value)||a.email||(r.email=t.value);var n=toDomNode(t.parentElement);n.sel(".auryc-fb-validation-msg-section")[0].innerHTML=i,r.showValidationMessage(n,0<i.length)}}},{key:"handleOpenEnd",value:function(e){function t(e){var t,i=e.srcElement||e.target;if(constants.css.TEXT_LIMIT-i.value.replace(/\s+/g," ").length-1<0&&(((t=e.keyCode)<37||41<t)&&8!==t&&16!==t))return e.preventDefault(),!1}function i(e){var t=e.srcElement||e.target,i=constants.css.TEXT_LIMIT-t.value.replace(/\s+/g," ").length,n=toDomNode(t.parentNode).sel(".auryc-feedback-text-remaining")[0].innerHTML,r=Math.max(0,i)+"";if(n.split(",").join("")!==r&&(toDomNode(t.parentNode).sel(".auryc-feedback-text-remaining")[0].innerHTML=r),i<0)return t.value=t.value.substr(0,i+t.value.length),!1}function n(e){var t=toDomNode((e.srcElement||e.target).parentNode).sel(".auryc-feedback_countWrapper")[0];t.getAttribute("aria-live")||(t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"))}var r=toDomNode(e).sel("."+constants.css.FB_TEXTAREA);try{for(var a=0;a<r.length;a++){var o=toDomNode(r[a]).sel("textarea")[0];addDomEvent(o,"keydown",t),addDomEvent(o,"keyup",i),addDomEvent(o,"blur",i),addDomEvent(o,"focus",n)}}catch(e){}}},{key:"updateSelects",value:function(e){var t=toDomNode(e).sel("."+constants.css.FB_QB_CHOOSE);[].forEach.call(t,function(e){toDomNode(e).sel(constants.css.SELECT)[0]})}},{key:"handleSelects",value:function(e){var t=this,i=toDomNode(e).sel("."+constants.css.FB_QB_CHOOSE);this.updateUIFn=function(){return t.updateSelects(toDomNode(e))},[].forEach.call(i,function(e){var i,n,t=toDomNode(e),r=t.sel("select")[0],a=t.sel("div.auryc-feedback-select-button")[0];addDomEvent(r,"change",(i=a,n=r,function(e){var t=toDomNode(n).sel("option")[n.selectedIndex];i.innerHTML=t.innerHTML}))})}},{key:"updateFBUI",value:function(){this.updateUIFn&&this.updateUIFn()}},{key:"createTempStyle",value:function(e){var t,i,n,r="aurycCheckedOverride";return this.fbConfig.backgroundColor&&_.isValidColor(this.fbConfig.backgroundColor)?(t=this.fbConfig.backgroundColor,(i=document.createElement("style")).id="auryc_style",n=".auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges ."+r+"{ background-color: "+t+" !important;} .auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges label:hover { background-color: "+t+" !important;} ",e||(n+=".auryc-feedback .auryc-feedback-checkbox."+r+":before { color: "+t+";content: '\\f14a' !important; opacity: 1.0; } .auryc-feedback .auryc-feedback-radio."+r+":before { color: "+t+";content: '\\f111'; opacity: 1.0; }"),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n)),document.getElementsByTagName("head")[0].appendChild(i)):r=null,r}},{key:"handleCheckableElemsCheckUncheck",value:function(t,i,n){return function(){var e=t.querySelectorAll("label");_.each(e,function(e){(e=toDomNode(e)).querySelectorAll("input[type="+i+"]")[0].checked?e.addCssCls(n):e.removeCssCls(n)})}}},{key:"handleCheckableInputs",value:function(e,t,i){var n=e.querySelectorAll('[dataType="auryc-feedback-'+t+'"]'),r={checked:i,focus:"focus"};"radio"===t?_.each(n,function(e){new RadioGroup(e,t).init("input[type="+t+"]","label",r)}):"checkbox"===t&&_.each(n,function(e){new CheckBoxGroup(e).init("input[type="+t+"]","label",r)})}},{key:"handleNps",value:function(e,t){var i={checked:t,focus:"focus"},n=(e=toDomNode(e)).sel(".nps-rating__badges");_.each(n,function(e){new RadioGroup(e).init("input","label",i)})}},{key:"handleStars",value:function(e){var t=(e=toDomNode(e)).sel("fieldset.auryc-fb-starrating-field"),i={checked:"auryc-ratings-chosen",focus:"focus"};_.each(t,function(e){new RadioGroup(e,"inclusive").init("input","label",i)})}},{key:"disableDefault",value:function(e){e&&e.preventDefault&&e.preventDefault()}},{key:"showTopic",value:function(e,t,i){var n=i.value,r=t.sel(".auryc-feedback-fbquestiongroup-shown");[].forEach.call(r,function(e){toDomNode(e).replaceCssCls("auryc-feedback-fbquestiongroup-shown","auryc-feedback-fbquestiongroup")});try{toDomNode(document.getElementById("topk_"+n)).replaceCssCls("auryc-feedback-fbquestiongroup","auryc-feedback-fbquestiongroup-shown"),e.topic=n}catch(e){}this.updateFBUI()}},{key:"handleTopicSelector",value:function(t){var i=this,n=t.sel("."+constants.css.FB_TOPIC_SEL)[0],r=this;n&&addDomEvent(n,"change",function(e){r.showTopic(r,t,n),i.disableDefault(e)}),1===this.feedbackDef.topics.length&&(toDomNode(document.getElementById("topk_"+this.feedbackDef.topics[0].topicAnswerId)).replaceCssCls("auryc-feedback-fbquestiongroup","auryc-feedback-fbquestiongroup-shown"),this.updateSelects(t))}},{key:"resetAriaInvalid",value:function(){var e=this.htmlElem.sel('div[aria-invalid="true"]');_.each(e,function(e){e.removeAttribute("aria-invalid")})}},{key:"setupSelectionMode",value:function(e){var t=this;this.submitted=!1,addDomEvent(e.querySelectorAll(".auryc-feedback-screenshot")[0],"click",function(e){return t.takeScreenshot(),t.disableDefault(e),!1}),addDomEvent(e.querySelectorAll(".auryc-feedback-general")[0],"click",function(e){return t.showFeedback(),t.disableDefault(e),!1}),[].forEach.call(e.querySelectorAll(".auryc-feedback-title-section h1"),function(e){toDomNode(e).addCssCls(constants.css.HEADING_H1)}),addDomEvent(document.getElementById("post-fb-resp-button"),"click",function(e){return t.resetAriaInvalid(),t.submitted||t.submitFeedbackResponse(),t.disableDefault(e),!1})}},{key:"setInvalidQFocus",value:function(e){e.setAttribute("aria-invalid","true"),e.getAttribute("tabindex")||e.setAttribute("tabindex",-1),e.focus()}},{key:"takeScreenshot",value:function(){this.modalElem.htmlElem.removeCssCls("formSelection");ScreenShot.mark("Click on any part of this page you would like to give feedback about.",this.updateScreenshot.bind(this),this.modalElem),this.modalElem.enableFBFormUI(!1),this.formType="screenshot"}},{key:"canShowScreenshot",value:function(){return!0!==this.fbConfig.specificFormEnable&&window.location.hash.indexOf("screenshot"),!1}},{key:"updateScreenshot",value:function(e){var t=this.htmlElem.sel("#auryc-feedback-canvas")[0];t.innerHTML="",t.appendChild(e.canvas),document.getElementById(e.answerDomId).click(),document.getElementById("post-fb-resp-button").click()}},{key:"showFeedback",value:function(){toDomNode(this.htmlElem.sel(".auryc-fbmodal-body-selection")[0]).removeCssCls("fb-enabled"),toDomNode(this.htmlElem.sel(".auryc-fbmodal-body-fbform")[0]).replaceCssCls("auryc-fbmodal-body-fbform","auryc-fbmodal-body-fbform-enabled"),this.modalElem.getModalContainerDomNode().removeCssCls("formSelection"),this.modalElem.enableFBFormUI(!0),this.formType="feedbackform"}}]),u4b);function u4b(e){classCallCheck(this,u4b),this.starsRatings=!1,this.npsRatings="unknown",this.formType=null,this.questionGroup=null,this.fbConfig=e,this.feedbackDef=null,this.htmlElem=null,this.submitting=!1,this.isUserTabbing=!1,this.email=null}var cache={},Templater=(createClass(fac,null,[{key:"tmpl",value:function(e,t){var i=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[e]=cache[e]||fac.tmpl(document.getElementById(e).innerHTML);return t?i(t):i}},{key:"instantiate",value:function(e,t){return fac.tmpl(e,t)}}]),fac);function fac(){classCallCheck(this,fac)}function setBodyFocus(e){e||(document.body.hasAttribute("tabindex")?document.body.focus():(document.body.setAttribute("tabindex","-1"),document.body.focus(),setTimeout(function(){document.body.removeAttribute("tabindex")},2e3)))}var accessibility={setBodyFocus:setBodyFocus},FBView=(createClass(pac,[{key:"fbInviteNoFn",value:function(){this.cfg.preview||(this.handleCloseInvite(),this.trackInviteEvent("InviteDecline"))}},{key:"initSpinner",value:function(){this.spinnerNode=toDomNode('<img src="https://fb-logo.auryc.com/loader.gif" class="auryc-feedback-spinner" id="auryc-feedback-spinner" style="width:40px !important;height:40px !important;">')}},{key:"getModalDomNode",value:function(){return this.modalInnerContent}},{key:"getModalContainerDomNode",value:function(){return this.rootNode}},{key:"handleFBInteractions",value:function(i,t){var n=this;if(this.fbmodel){this.renderFB();var e=window.auryc.getFBShownHandler(this.fbmodel.fb.id);if(this.formName=this.fbmodel.fb.name,e)try{e({formName:this.formName})}catch(e){}}else i.getFeedbackData(function(e){n.fbmodel=e,i.fbConfig.launchedFromTimer&&n.init(),n.renderFB();var t=window.auryc.getFBShownHandler(e.fb.id);if(n.formName=e.fb.name,t)try{t({formName:n.formName})}catch(e){}});i.setupFBDoneHandler(function(e){n.modalInnerContent.replaceCssCls("auryc-fbmodal-body","auryc-fbmodal-body-enabled"),n.isFbSubmitted=!0,n.displayTYPage(),t&&t(e)})}},{key:"adjustSpinnerPos",value:function(){var e=getWinSize(window),t=this.getModalContainerDomNode();t.appendChild(this.spinnerNode);var i=t.offsetWidth-this.spinnerNode.offsetWidth,n={};n[constants.css.TOP]=(e.h-this.spinnerNode.offsetHeight)/2+constants.css.PX,n[constants.css.LEFT]=i/2+constants.css.PX,this.spinnerNode.css(n)}},{key:"removeSpinner",value:function(){this.spinnerNode&&this.spinnerNode.parentNode&&(this.spinnerNode.parentNode.removeChild(this.spinnerNode),this.spinnerNode=null)}},{key:"addSpinner",value:function(){this.removeSpinner(),this.initSpinner(),this.adjustSpinnerPos()}},{key:"hideMyself",value:function(e){this.rootNode.parentNode&&this.rootNode.parentNode.removeChild(this.rootNode),this.enableBodyOverflow(!0,e),accessibility.setBodyFocus(this.browser.isPhoneOrTablet())}},{key:"trackAbandoned",value:function(){AurycPubSub.publish(constants.events.FEEDBACKTRACKER,{eventType:constants.events.CUSTOM_EVENT,eventName:"Feedback Abandoned",tagName:"FeedbackAbandoned",eventProperties:{formid:this.cfg.projectId,name:"Feedback Abandoned",et:"abandoned"}})}},{key:"trackInviteEvent",value:function(e){AurycPubSub.publish(constants.events.FEEDBACKTRACKER,{eventType:constants.events.CUSTOM_EVENT,eventName:e,tagName:e,eventProperties:{formid:this.cfg.projectId,name:e,et:e}})}},{key:"trackAbandonEvents",value:function(t){var i=this;this.cfg.popupDelayEnabled||this.cfg.exitPopupEnabled||this.cfg.fbStandalone||addDomEvent(t,"mousedown",function(e){e.target===t&&(i.cfg.preview||i.isFbSubmitted||i.model.isSubmitting()||(i.trackAbandoned(i),i.fbCanceledFn&&i.fbCanceledFn({formid:i.cfg.projectId,formName:i.formName})),i.hideMyself())})}},{key:"displayTYPage",value:function(){var e=this,t=this.getModalDomNode();t.innerHTML=Templater.instantiate(this.tyTmpl,this.fbmodel);var i,n=t.querySelectorAll(".auryc-close-btn")[0],r=t.querySelectorAll('div[role="dialog"]')[0];r.setAttribute("tabindex","-1"),r.focus(),this.customizeTYStyles(),this.adjustModalPos(),this.cfg.fbStandalone?(r.blur(),n.parentNode.innerHTML="",this.cfg.redirectUrl&&(i='<span class="au_redirect_url">You are being redirect to '+this.cfg.redirectUrl+". If you are not redirect in 5 seconds, please <a href='"+this.cfg.redirectUrl+"'>click here.</a></span>",r.innerHTML=r.innerHTML+i,setTimeout(function(){location.href=e.cfg.redirectUrl},5e3))):addDomEvent(n,"click",function(){e.hideMyself()}),n&&setTimeout(function(){n.focus()},500)}},{key:"customizeTYStyles",value:function(){this.cfg.customCss&&"center"===this.cfg.customCss.align&&this.addCenterStyle(".auryc-feedback-fblogo")}},{key:"init",value:function(){var t=this,e="Feedback Form Opens",i=document.createElement("div"),n='<button class="auryc-fb-modal-closebtn" tabindex="0" aria-label="Close Feedback Modal"></button>';this.cfg.fbStandalone&&(n=""),i.innerHTML='<div class="auryc-fbmodal-wrapper" style="height:'+getMaxWinHeight()+'">\n      <div class="auryc-fbmodal-bground"></div>\n      <div class="auryc-fbmodal-container">\n        <div class="auryc-fbmodal-content" \n          style="background-color:rgba(0,0,0,0) !important; border:0 !important; border-radius:0 !important; box-shadow: none !important;"\n          role="dialog" tabindex="0" aria-modal="true" title="'+e+'" aria-label="'+e+'">\n          <div class="auryc-fbmodal-head">\n            '+n+'\n          </div>\n          <div class="auryc-fbmodal-body"></div>\n        </div>\n        </div>\n    </div>',i=i.firstChild,this.rootNode=addDomMethods(i),this.headElem=addDomMethods(i.querySelectorAll(".auryc-fbmodal-head")[0]),this.modalInnerContent=addDomMethods(i.querySelectorAll(".auryc-fbmodal-body")[0]),document.body.appendChild(i),this.enableBodyOverflow(!1,window),addDomEvent(i.querySelectorAll(".auryc-fb-modal-closebtn")[0],"click",function(){return t.handleClose()}),this.cfg.fbStandalone||addDomEvent(document,"keydown",function(e){e.which===constants.keyCodes.esc&&(t.handleClose(),e.stopPropagation(),e.preventDefault())}),this.cfg.launchedFromTimer||this.addSpinner();var r=i.querySelectorAll(".auryc-fbmodal-bground")[0];-1===r.className.indexOf("enabled")&&(this.cfg.fbStandalone||(r.className="auryc-fbmodal-bground-enabled"),r.focus()),this.trackAbandonEvents(i.querySelectorAll("."+constants.css.FBMODAL_CONTAINER)[0])}},{key:"getTemplateContent",value:function(e,t){t&&"desktop"===t.toLowerCase()&&(e=e===constants.symbols.FEEDBACKINVITE?constants.symbols.FEEDBACKINVITE_DESKTOP:constants.symbols.FEEDBACKCONTENT_DESKTOP);var i=window[e];return encoder.decodeBase64(i)}},{key:"enableBodyOverflow",value:function(e){var t=toDomNode(window.document.body);e?this.bodyOverflowStyle&&(t.css(this.bodyOverflowStyle),this.browser.isPhoneOrTablet()&&(t.scrollTop=this.bodyScrollTop,t.css({position:this.bodyStylePosition,width:this.bodyStyleWidth})),this.bodyOverflowStyle=null,this.bodyScrollTop=0):(this.bodyOverflowStyle||(this.bodyOverflowStyle={overflow:t.style.overflow},this.browser.isPhoneOrTablet()&&(this.bodyScrollTop=t.scrollTop,this.bodyStylePosition=t.style.position,this.bodyStyleWidth=t.style.width)),t.css({overflow:"hidden"}),this.browser.isPhoneOrTablet()&&setTimeout(function(){t.css({position:"fixed",width:"100vw"})},200))}},{key:"validColor",value:function(){this.cfg&&(this.cfg.fontColor&&_.isValidColor(this.cfg.fontColor)&&(this.fbmodel.formConfig.btnFontColor=this.cfg.fontColor),this.cfg.backgroundColor&&_.isValidColor(this.cfg.backgroundColor)&&(this.fbmodel.formConfig.btnBackgroundColor=this.cfg.backgroundColor))}},{key:"renderFB",value:function(){var n=this;this.isFbSubmitted=!1,this.cfg.preview||AurycPubSub.publish(constants.events.FEEDBACKTRACKER,{eventType:constants.events.CUSTOM_EVENT,eventName:"Feedback Started",tagName:"FeedbackStarted",eventProperties:{formid:this.cfg.projectId,name:"Feedback Started",et:"started"}}),this.removeSpinner(),this.headElem.replaceCssCls("auryc-fbmodal-head","auryc-fbmodal-head-enabled"),this.validColor();var e=Templater.instantiate(this.fbFormTmpl,this.fbmodel);this.modalInnerContent.innerHTML=e,this.model.render(this,this.modalInnerContent),this.customizeStyles(),"desktop"===this.cfg.deviceType.toLowerCase()&&(addDomEvent(this.rootNode,"keydown",function e(t){var i;t.keyCode===constants.keyCodes.tab&&((i=n.rootNode.querySelectorAll(".fb-desktop")[0])&&(toDomNode(i).addCssCls("user-is-tabing"),n.model.setIsTabbing(!0)),removeDomEvent(n.rootNode,"keydown",e))}),setTimeout(function(){var e=n.rootNode.querySelectorAll(".auryc-fbmodal-content")[0];e&&e.removeAttribute("title")},3e3))}},{key:"addCenterStyle",value:function(e){var t=this.rootNode.querySelectorAll(e);t&&0<t.length&&(t=toDomNode(t[0])).addCssCls("centered")}},{key:"addSpacingStyle",value:function(e){var t=this.rootNode.querySelectorAll(e);if(t&&0<t.length)for(var i=0;i<t.length;i++){toDomNode(t[i]).addCssCls("full")}}},{key:"customizeStyles",value:function(){var e=_.get(this.cfg,"customCss.spacing","full");"center"===_.get(this.cfg,"customCss.align","left")&&(this.addCenterStyle(".auryc-feedback-fblogo"),this.addCenterStyle(".fb-desktop .auryc-feedback-title-section p"),this.addCenterStyle(".fb-desktop .auryc-feedback-title-section h1"),this.addCenterStyle(".fb-desktop .auryc-feedback-title-section .required-label"),this.addCenterStyle(".fb-desktop .auryc-starrating-section .auryc-feedback-fblabel"),this.addCenterStyle(".fb-desktop .auryc-starrating-section .auryc-fb-starrating-field"),this.addCenterStyle(".fb-desktop .auryc-nps__container .auryc-feedback-fblabel"),this.addCenterStyle(".fb-desktop .auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges")),"compact"!==e&&(this.addSpacingStyle(".fb-desktop .auryc-feedback-checkbox"),this.addSpacingStyle(".fb-desktop .auryc-feedback-radio"))}},{key:"adjustModalPos",value:function(){this.browser.isPhoneOrTablet()||addDomMethods(this.rootNode.querySelectorAll(".auryc-fbmodal-content")[0]).css({marginTop:Math.max(0,(getWinSize(window).h-this.modalInnerContent.offsetHeight-50)/2)+"px"})}},{key:"enableFBFormUI",value:function(e){this.enableBodyOverflow(!e),this.rootNode.style.display=e?"":"none",e&&(this.adjustModalPos(),this.modalInnerContent.replaceCssCls("auryc-fbmodal-body","auryc-fbmodal-body-enabled"),this.model.updateFBUI(),document.querySelectorAll(".auryc-fbmodal-content")[0].focus())}},{key:"handleClose",value:function(){this.cfg.preview||this.model.isSubmitting()||this.isFbSubmitted||(this.trackAbandoned(this),this.fbCanceledFn&&this.fbCanceledFn({formid:this.cfg.projectId,formName:this.formName})),this.hideMyself()}},{key:"handleCloseInvite",value:function(){this.hideMyself(),this.fbCanceledFn&&this.fbCanceledFn({formid:this.cfg.projectId,formName:this.formName})}}]),pac);function pac(e,t,i){classCallCheck(this,pac),_initialiseProps.call(this),this.model=e,this.cfg=e.fbConfig,this.browser=getInstance(),this.bodyOverflowStyle=null,this.bodyScrollTop=0,this.spinnerNode=null,this.inviteEnabled=this.cfg.invite&&this.cfg.invite.enabled,this.isFbSubmitted=!1,this.fbCanceledFn=i,this.fbFormTmpl=this.getTemplateContent(constants.symbols.FEEDBACKCONTENT,this.cfg.deviceType),this.tyTmpl=this.getTemplateContent(constants.symbols.FBTHANKYOU),this.formName="",this.fbDoneFn=t,this.fbCanceledFn=i,this.inviteTmpl=this.getTemplateContent(constants.symbols.FEEDBACKINVITE,this.cfg.deviceType),this.inviteEnabled?this.handleFBInvite(this.cfg.invite,e):(e.fbConfig.launchedFromTimer||this.init(),this.handleFBInteractions(e,t,i))}var _initialiseProps=function(){var o=this;this.fbInviteYesFn=function(){o.cfg.preview||(o.handleCloseInvite(),o.init(),o.handleFBInteractions(o.model,o.fbDoneFn,o.fbCanceledFn),o.trackInviteEvent("InviteAccept"))},this.handleFBInvite=function(i,e){e.getFeedbackData(function(e){var t=e.logoPic;o.fbmodel=e,o.initInvitePopup(i,t)})},this.initInvitePopup=function(e,t){var i=document.createElement("div");o.fbmodel||(o.fbmodel={formConfig:{}}),o.fbmodel.formConfig.header=e.header.text,o.fbmodel.formConfig.headerAlign=e.header.alignment,o.fbmodel.formConfig.inviteBody=e.body,o.fbmodel.formConfig.yesText=e.yesText,o.fbmodel.formConfig.noText=e.noText;var n="auryc-fbmodal-bground-enabled",r='<button class="auryc-fb-modal-closebtn" tabindex="0" aria-label="Close Feedback Modal"></button>';o.cfg.fbStandalone&&(n="auryc-fbmodal-bground",r=""),i.innerHTML='<div class="auryc-fbmodal-wrapper" style="height:'+getMaxWinHeight()+'">\n        <div class="'+n+'"></div>\n        <div class="auryc-fbmodal-container">\n          <div class="auryc-fbmodal-content" \n            style="background-color:rgba(0,0,0,0) !important; border:0 !important;\n            border-radius:0 !important; box-shadow: none !important;"\n            role="dialog" tabindex="0" aria-modal="true">\n            <div class="auryc-fbmodal-head-enabled">\n              '+r+'\n            </div>\n            <div class="auryc-fbmodal-body-enabled"></div>\n          </div>\n        </div>\n    </div>',i=i.firstChild,o.rootNode=addDomMethods(i),o.validColor();var a=Templater.instantiate(o.inviteTmpl,o.fbmodel);o.modalInnerContent=i.querySelectorAll(".auryc-fbmodal-body-enabled")[0],o.modalInnerContent.innerHTML=a,o.customizeStyles(),document.body.appendChild(i),o.enableBodyOverflow(!1,window),addDomEvent(i.querySelectorAll(".auryc-fb-modal-closebtn")[0],"click",function(){return o.handleCloseInvite()}),addDomEvent(i.querySelectorAll("#invite-fb-yes-button")[0],"click",function(){return o.fbInviteYesFn()}),addDomEvent(i.querySelectorAll("#invite-fb-no-button")[0],"click",function(){return o.fbInviteNoFn()}),o.cfg.fbStandalone||addDomEvent(document,"keydown",function(e){e.which===constants.keyCodes.esc&&(o.handleCloseInvite(),e.stopPropagation(),e.preventDefault())});addDomEvent(o.rootNode,"keydown",function e(t){var i;t.keyCode===constants.keyCodes.tab&&((i=o.rootNode.querySelectorAll(".fb-desktop")[0])&&(toDomNode(i).addCssCls("user-is-tabing"),o.model.setIsTabbing(!0)),removeDomEvent(o.rootNode,"keydown",e))})}},ScreenShot$1=(createClass(qcc,[{key:"mark",value:function(){}}]),qcc);function qcc(){classCallCheck(this,qcc)}var PopupController=function e(){var o=this;classCallCheck(this,e),this.getPopup=function(e){for(var t=o.popups.length,i=0;i<t;i++){var n=o.popups[i];if(n.cfg.projectId===e)return n}return!1},this.removePopup=function(e){for(var t=o.popups.length,i=-1,n=0;n<t;n++){if(o.popups[n].cfg.projectId===e){i=n;break}}-1<i&&(o.popups=o.popups.splice(i,1))},this.setCookie=function(e,t){var i,n,r,a={path:"/",domain:getRootDomain(window.location.hostname),encode:!0,SameSite:"Strict"};e?(n=t||90,r=(i=new Date).getTime()+24*n*60*60*1e3,i.setTime(r),a.expires=i.toUTCString(),o.cookie=new Cookie(a),o.cookie.setVal(e,r)):logger.error("throttle cookie is not defined")},this.hasPopup=function(){return 0<o.popups.length},this.initialize=function(a,e){a.deviceType=a.deviceType||getInstance().features.deviceType;function t(e){var t,i;if((a.launchedFromTimer||a.fbStandalone)&&(t=a.feedbackThrottles&&a.feedbackThrottles.submitted||90,i=a.feedbackThrottles&&a.feedbackThrottles.cookie||"auryc.fbt",a.fbStandalone&&(i+=".st."+a.projectId),o.setCookie(i,t)),e&&e.formid){var n=e&&e.formid,r=window.auryc.getFBSubmitHandler(n);if(r)try{r(e)}catch(e){}}}function i(e){var t,i;if(a.launchedFromTimer&&(t=a.feedbackThrottles&&a.feedbackThrottles.abandoned||7,i=a.feedbackThrottles&&a.feedbackThrottles.cookie||"auryc.fbt",o.setCookie(i,t)),e&&e.formid){var n=e&&e.formid,r=window.auryc.getFBCancelHandler(n);if(r)try{r({formName:e.formName})}catch(e){}}}var n=o.getPopup(a.projectId);n?(n=new PopupUI(a,t,i),o.removePopup(a.projectId)):n=new PopupUI(a,t,i),o.popups.push(n),e&&a.trigger&&a.trigger.fbTab&&a.trigger.fbTab.setClicked()},this.popups=[],this.cookie=null},PopupUI=function e(t,i,n){classCallCheck(this,e),this.cfg=t,this.fbView=new FBView(new FBModel(this.cfg),i,n)},globalPopupController=new PopupController,Preview=(createClass(fdc,[{key:"showFeedback",value:function(){var e={urlOverride:this.url,preview:!0,backgroundColor:this.backgroundColor,mid:this.mid,fontColor:this.fontColor,deviceType:this.previewmode,customCss:this.customCss};globalPopupController.initialize(e)}},{key:"showFeedbackInvite",value:function(){var e={urlOverride:this.url,preview:!0,backgroundColor:this.backgroundColor,mid:this.mid,fontColor:this.fontColor,deviceType:this.previewmode,customCss:this.customCss,invite:this.inviteCfg};globalPopupController.initialize(e)}},{key:"initFBTab",value:function(){new FBTab(_extends({},this.config,{preview:!0})).render(!0)}},{key:"displayFBTab",value:function(){var e=this,t=this.config;t.delay&&0<t.delay?setTimeout(function(){return e.initFBTab()},t.delay):this.initFBTab()}}]),fdc);function fdc(){classCallCheck(this,fdc);var e,t=window.location.hash;this.previewmode=!!getHashParam(t,"previewmode")&&getHashParam(t,"previewmode").toLowerCase(),this.previewfbTabmode=getHashParam(t,"previewbadgemode")?getHashParam(t,"previewbadgemode").toLowerCase():!!getHashParam(t,"previewfbtabmode")&&getHashParam(t,"previewfbtabmode"),this.previewinvitemode=!!getHashParam(t,"previewinvitemode")&&getHashParam(t,"previewinvitemode").toLowerCase(),this.previewfbTabmode?(e=getHashParam(t,"cfg"),this.config=e?JSON.parse(e):{}):(this.previewmode||this.previewinvitemode)&&(this.mid=getHashParam(t,"mid"),this.backgroundColor=getHashParam(t,"backgroundColor"),this.fontColor=getHashParam(t,"fontColor"),this.url=getHashParam(t,"datauri"),this.customCss=JSON.parse(getHashParam(t,"customCss")||"{}"),this.inviteCfg=JSON.parse(getHashParam(t,"inviteCfg")||"{}"))}var Criteria=(createClass(rdc,[{key:"isConfigInstanceActive",value:function(e,t){var i=getInstance();return!e.disabled&&(!!this.passSampling(e)&&(!!(i.isPhoneOrTablet()&&e.targetingdevicemobile||!i.isPhoneOrTablet()&&e.targetingdevicedesktop)&&(!(i.browser&&i.browser.name&&this.isExcluded(e,i.browser.name))&&(this.passURLFilter(e,t)&&this.passExtraConditions(e)))))}},{key:"isExcluded",value:function(e,t){var i=e.exclude;if(!i)return!1;var n=i.browser;if(!n)return!1;for(var r=0;r<n.length;r++)if(t.toLowerCase()===n[r].toLowerCase())return!0;return!1}},{key:"isDelayedPopupActive",value:function(e){return!this.isFeedbackShown(e)&&this.passURLFilter(e)}},{key:"passSampling",value:function(e){var t=!1,i=e.feedbackThrottles;if(i){var n,r,a=i.sampling;if(void 0===a)return t;0===a?t=!1:(n="auryc.fbt."+(e.projectId||"1"),(r=this.sessionStorage.getByKey(n))?t="t"===r:(t=100*Math.random()<a,this.sessionStorage.setByKey(n,t?"t":"f")))}else t=!0;return t}},{key:"isFeedbackShown",value:function(e){var t=e&&e.feedbackThrottles&&e.feedbackThrottles.cookie||"auryc.fbt";return!!Cookie.Get(t)}},{key:"passURLFilter",value:function(e,t){if(t=t||window.location.href,"A"!==e.triggerpagefilter){var i="string"==typeof e.filterpages?e.filterpages.split(","):e.filterpages||[],n="string"==typeof e.filterpagesInclude?e.filterpagesInclude.split(","):e.filterpagesInclude||[];if("I"===e.triggerpagefilter&&!containsUrl(t,n))return!1;if("E"===e.triggerpagefilter&&containsUrl(t,i))return!1}return!0}},{key:"passExtraConditions",value:function(e){var i=this,t=e.extraConditions;if(!t)return!0;var n=t.referrer;if(n){var r=document.referrer;if(!(r&&n.some(function(e){return-1<r.indexOf(e)})))return!1}var a=t.url;if(a&&!this.passURLFilter(a))return!1;var o=t.variable;if(o&&o.name){var s;_.isArray(o.name)||(o.name=[o.name]);var c=o.name[0],l=o.name[1],u=_.get(window,c,[]);if(_.isArray(u)||(u=[u]),s=u.some(function(e){var t=null,t=l?_.get(e,l,""):e;return i.passSingleVarVal(t,o.value)}),!(!0===o.inverse?!s:s))return!1}return!0}},{key:"passSingleVarVal",value:function(t,e){var i=!1;if("string"!=typeof(t=t||""))try{t=JSON.stringify(t)}catch(e){i=!(t="")}if(i)return!1;var n=new RegExp(e);return null!==t.match(n)}}]),rdc);function rdc(){classCallCheck(this,rdc),this.sessionStorage=DataLayer.getInstance(constants.symbols.SESSION)}function initTemplate(){window[constants.symbols.FEEDBACKCONTENT]="iBjbGFzcz0iYXVyeWMtZmJtb2RhbC1ib2R5LXNlbGVjdGlvbiI-CiAgPGRpdiBjbGFzcz0iYXVyeWMtZmJtb2RhbC1ib2R5LXNlbGVjdGlvbl90aXRsZSI-SG93IHdvdWxkIHlvdSBsaWtlIHRvIGdpdmUgZmVlZGJhY2s_PC9kaXY-CiAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2NyZWVuc2hvdCI-CiAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19vcHRpb25fcm93Ij4KICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX2NvbHVtbiBhdXJ5Yy1mZWVkYmFja19vcHRpb25faW1hZ2UiPgogICAgICAgIDxpbWcgc3JjPSJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUNVQUFBQWdDQVlBQUFDVlU3R3dBQUFCZkVsRVFWUllSKzJYcTI2RVVCQ0d6NkFRS0ZiMVNWcUJhcXE0R0lJc21GNDA0UVc2ZlFHQzdzV1FTb0xob3BwVmlQWko2bEFJRk5NYzBtMEkzZTZXeTFsSXczRW5oSm52L1A4d1p3QXl3d1V6WkNJTDFGOWRXWlRxckpRc3kwaGZTdE8wVm8vRm51TzQremlPMTRmZ3Z1MWpBYkh2a1B2QTVsdFRiWlVPeWN2NitjNzZZWkcweThHUFp0Ly9nT3B5aXI3V2RzbXgxRlN6YjAzV3B4QVJORTI3UnNRclJEeWxJQUR3RGdEUFVSUTlBVUI5aTdRWE0vdDBYVDhweS9LRkVITCtpeW9ibnVjdnd6RDhPQW9VVlVoUmxGY0t0RnF0MERSTjhEeXZ6bTNiTnZGOUgvTThwNEpza2lTNWFDdkdwRStwcW5wVFZkV0RLSXJvdWk0SWdrQU13NmloZ2lBZ1JWRVF4M0ZxTUk3amJ1TTRmbXlxeFFSS1VaUTNXa05VRlVtUzZueE5LTHJQc294UTlXaU5KVWx5OWdOcXJBbWhidy9iV1ZPcXFxNnJxcm9iT2t1TkNqVldzRzJjVWV3YkcycVdoZDVzQ2ZRTHRDeHIrcFpBbFIvY1BNZTJieHR2MERYRENxb1p0L1Bvc2tCOS9WZE9OcnIwdGU4VFkvZEg2bENVcjNZQUFBQUFTVVZPUks1Q1lJST0iPjwvaW1nPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX2NvbHVtbiBhdXJ5Yy1mZWVkYmFjay1zZWxlY3Rpb25fX2xhYmVscyI-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0aW9uX19sYWJlbDEiPlNlbGVjdCBTZWN0aW9uPC9kaXY-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0aW9uX19sYWJlbDIiPlNlbGVjdCBhIHNlY3Rpb24gb2YgdGhpcyBwYWdlIG9uIHdoaWNoIHRvIGdpdmUgZmVlZGJhY2suPC9kaXY-CiAgICAgIDwvZGl2PgogICAgPC9kaXY-CiAgPC9kaXY-CiAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZ2VuZXJhbCI-CiAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19vcHRpb25fcm93Ij4KICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX2NvbHVtbiBhdXJ5Yy1mZWVkYmFja19vcHRpb25faW1hZ2UiPgogICAgICAgIDxpbWcgc3JjPSJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUNBQUFBQWdDQVlBQUFCemVucjBBQUFBL1VsRVFWUllSKzJYUFE2Q1FCQ0ZaeVJhY0FQMVBGcnNTa25wT2JTeXNOSnpXRkxpVU9oOVBBS0ZCc2RzUVVJSVlSYVdaR095VzdMejg4M2piVEVJbmc5Sy9kTTBYWlJsZVFhQVBUT3ZwSGh6ajRndkFMakZjWHpLc3V6ZGx5TUNhSzB2ekh5d2FkeU9RY1FyRVIyZEFKUlNacG9sSXU2SWlHeEF0TmFhbWU5R0NTSmFEd1pRU25FN3FTZ0tVYTFtam0yTnpxTE5aRVQ4TXZOc2pBSUE4QUdBZVEzV05VUXZnRW1Zd2dQMVFLTUFwbmdGVGdBMnBwTmlBa0JRd0ZtQkpFa2VWVlZ0SkxNMTc2TW9ldVo1dmpYZi9oOWd5T1Jkc2M0S0JJQmd3dUFCN3dvRUUzci9CUUhBbXdLdWpXMldHM0V4bVJMQ2VpK1lzcWxVNndmVGUwQXdVVXZKQkFBQUFBQkpSVTVFcmtKZ2dnPT0iPjwvaW1nPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX2NvbHVtbiBhdXJ5Yy1mZWVkYmFjay1zZWxlY3Rpb25fX2xhYmVscyI-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0aW9uX19sYWJlbDEiPkZlZWRiYWNrIEZvcm08L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1zZWxlY3Rpb25fX2xhYmVsMiI-RmlsbCBvdXQgb3VyIGdlbmVyYWwgZmVlZGJhY2sgZm9ybS48L2Rpdj4KICAgICAgPC9kaXY-CiAgICA8L2Rpdj4KICA8L2Rpdj4KPC9kaXY-CjwlCiAgdmFyIHBvd2VyZWRCeSA9ICdQb3dlcmVkIGJ5JzsKICB2YXIgeW91ckFuc3dlciA9ICdZb3VyIGFuc3dlcic7CiAgdmFyIGxlZnRMYWJlbCA9ICc8c3BhbiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stdGV4dC1yZW1haW5pbmciPjEsMDAwPC9zcGFuPiBDaGFyYWN0ZXJzIGxlZnQnOwogIGlmIChleHRyYUluZm8ueW91ckFuc3dlcikgewogICAgeW91ckFuc3dlciA9IGV4dHJhSW5mby55b3VyQW5zd2VyOwogICAgcG93ZXJlZEJ5ID0gZXh0cmFJbmZvLnBvd2VyZWRCeTsKICAgIGxlZnRMYWJlbCA9IGV4dHJhSW5mby5sZWZ0LnJlcGxhY2UoL1wkXHtOVU1cfS8sICc8c3BhbiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stdGV4dC1yZW1haW5pbmciPjEsMDAwPC9zcGFuPicpOwogIH0KICU-CjxkaXYgY2xhc3M9ImF1cnljLWZibW9kYWwtYm9keS1mYmZvcm0iPgogIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrIj4KICAgICAgPGRpdiBkYXRhVHlwZT0iYXVyeWMtZmJxIiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stdGl0bGUtc2VjdGlvbiI-CiAgICAgICAgICA8JSAKICAgICAgICAgIHZhciBhbHQgPSBmb3JtQ29uZmlnLmxvZ29BbHQgfHwgJ1NpdGUgTG9nbyc7CiAgICAgICAgICAlPgogICAgICAgICAgPCUgaWYgKGxvZ29QaWMpIHsgJT4KICAgICAgICAgICAgICA8aW1nIHNyYz0iPCU9bG9nb1BpYyU-IiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJsb2dvIiBhbHQ9IjwlPWFsdCU-Ii8-CiAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICA8JSBpZiAoZmVlZGJhY2tUaXRsZSkgeyAlPgogICAgICAgICAgICAgIDxoMT48JT0gZmVlZGJhY2tUaXRsZSAlPjwvaDE-CiAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICA8JSBpZiAocHJvbG9ndWVUZXh0KSB7ICU-CiAgICAgICAgICAgICAgPCUgaWYgKHByb2xvZ3VlVGV4dC5pbmRleE9mKCdoMScpID09PSAtMSkgeyAlPgogICAgICAgICAgICAgICAgICA8cD48JT0gcHJvbG9ndWVUZXh0ICU-PC9wPgogICAgICAgICAgICAgIDwlIH0gZWxzZSB7ICU-CiAgICAgICAgICAgICAgICAgIDwlPSBwcm9sb2d1ZVRleHQgJT4KICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICA8JSBpZiAoaGFzUmVxdWlyZWRRdWVzdGlvbnMpIHsgJT4KICAgICAgICAgICAgPHAgc3R5bGU9ImNvbG9yOiNkYjJkNDM7Ij4qUmVxdWlyZWQgZmllbGRzPC9wPgogICAgICAgICAgPCUgfSAlPgoKICAgICAgPC9kaXY-CiAgICAgIDwlIGZvciAodmFyIG1xaSA9IDA7IG1xaSA8IG1haW5RLmxlbmd0aDsgbXFpKyspIHsKICAgICAgICAgIHZhciBjdXJRID0gbWFpblFbbXFpXTsKICAgICAgICAgIHZhciByZXFGb250ID0gY3VyUS5yZXF1aXJlZCA_ICcqJyA6ICcnOwogICAgICAgICAgaWYgKGN1clEucXVlc3Rpb25UeXBlICE9PSAnRFJPUF9ET1dOJyB8fCBjdXJRLmFuc3dlcnMubGVuZ3RoID4gMCkgeyAlPgogICAgICA8ZGl2IGRhdGFUeXBlPSJhdXJ5Yy1mYnEiIGNsYXNzPSI8JSBpZiAoY3VyUS5xdWVzdGlvblR5cGUgPT09ICdTQ0FMRUQnKSB7ICU-YXVyeWMtc3RhcnJhdGluZy1zZWN0aW9uPCUgfSAlPiIgICAgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIgJT4gICAgICBxdWVzdGlvbmlkPSI8JT0gY3VyUS5pZCAlPiI-CiAgICAgICAgICA8JSBpZiAoY3VyUS5xdWVzdGlvblR5cGUgPT09ICdTQ0FMRUQnKSB7ICU-CiAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYnF1ZXN0aW9uIiBxdWVzdGlvbmlkPSI8JT0gY3VyUS5pZCAlPiIgIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiICU-PgogICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZibGFiZWwiIGlkPSJhdXJ5Y19sYmw8JT0gY3VyUS5pZCAlPiI-PCU9IGN1clEucXVlc3Rpb25UZXh0ICU-PHNwYW4gc3R5bGU9ImNvbG9yOiNkYjJkNDM7Ij48JT0gcmVxRm9udCAlPjwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICA8ZmllbGRzZXQgY2xhc3M9ImF1cnljLWZiLXN0YXJyYXRpbmctZmllbGQiIHF1ZXN0aW9uaWQ9IjwlPWN1clEuaWQlPiIgIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiICU-PgogICAgICAgICAgICAgIDwlIGZvciAodmFyIGF0aSA9IDA7IGF0aSA8IGN1clEuYW5zd2Vycy5sZW5ndGg7IGF0aSsrKSB7CiAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBjdXJRLmFuc3dlcnNbYXRpXTsgJT4KICAgICAgICAgICAgICA8aW5wdXQgYXJpYS1sYWJlbD0iPCU9YW5zLnZhbHVlJT4gc3RhcnMiIG5hbWU9InNyXzwlPWN1clEuaWQlPiIgaWQ9InNyXzwlPSBjdXJRLmlkICU-XzwlPWFucy5pZCU-IiB2YWx1ZT0iPCU9YW5zLmlkJT4iCiAgICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uaWQ9IjwlPWN1clEuaWQlPiIgdHlwZT0icmFkaW8iCiAgICAgICAgICAgICAgICAgICAgIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiICU-CiAgICAgICAgICAgICAgICAgICAgIGNsYXNzPSJhdXJ5Yy1mYi1zdGFycmF0aW5nLWZpZWxkLXN0YXJpY29uIgogICAgICAgICAgICAgICAgICAgICB2YWx1ZT0iPCU9YW5zLnZhbHVlJT4iLz4KICAgICAgICAgICAgICAgIDwlIGlmIChhdGkgPT09IDApIHsgJT4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgYXJpYS1oaWRkZW49InRydWUiIGZvcj0ic3JfPCU9Y3VyUS5pZCU-XzwlPWFucy5pZCU-IiB0YWJpbmRleD0iPCU9IGF0aSAlPiI-PHNwYW4gc3R5bGU9ImRpc3BsYXk6IG5vbmUiPjwlPWFucy52YWx1ZSU-PC9zcGFuPjwvbGFiZWw-CiAgICAgICAgICAgICAgICA8JSB9IGVsc2UgeyU-CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGFyaWEtaGlkZGVuPSJ0cnVlIiBmb3I9InNyXzwlPWN1clEuaWQlPl88JT1hbnMuaWQlPiI-PHNwYW4gc3R5bGU9ImRpc3BsYXk6IG5vbmUiPjwlPWFucy52YWx1ZSU-PC9zcGFuPjwvbGFiZWw-CiAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICA8L2ZpZWxkc2V0PgogICAgICAgICAgPC9kaXY-CiAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICA8JSBpZiAoY3VyUS5xdWVzdGlvblR5cGUgPT09ICdOUFMnKSB7ICU-CiAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1ucHNfX2NvbnRhaW5lciBhdXJ5Yy1mZWVkYmFjay1mYnF1ZXN0aW9uIiBxdWVzdGlvbmlkPSI8JT0gY3VyUS5pZCAlPiIgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIgJT4-CiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJsYWJlbCIgaWQ9ImF1cnljX2xibDwlPSBjdXJRLmlkICU-Ij48JT0gY3VyUS5xdWVzdGlvblRleHQgJT48c3BhbiBzdHlsZT0iY29sb3I6I2RiMmQ0MzsiPjwlPSByZXFGb250ICU-PC9zcGFuPjwvbGFiZWw-CiAgICAgICAgICAgIDxmaWVsZHNldCBjbGFzcz0ibnBzLXJhdGluZyIgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iICA8JT0gY3VyUS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiAlPj4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJucHMtcmF0aW5nX19iYWRnZXMiPgogICAgICAgICAgICAgICAgPCUgZm9yICh2YXIgYXRpID0gMDsgYXRpIDwgY3VyUS5hbnN3ZXJzLmxlbmd0aDsgYXRpKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYW5zID0gY3VyUS5hbnN3ZXJzW2F0aV07ICU-CiAgICAgICAgICAgICAgICA8aW5wdXQgYXJpYS1sYWJlbD0icmF0aW5nIDwlPWF0aSU-IiBuYW1lPSJucHNfPCU9IGN1clEuaWQgJT4iIGlkPSJucHNfPCU9IGN1clEuaWQgJT5fPCU9IGFucy5pZCAlPiIKICAgICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbmlkPSI8JT0gY3VyUS5pZCAlPiIgdHlwZT0icmFkaW8iCiAgICAgICAgICAgICAgICAgICAgICAgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIgJT4KICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT0iPCU9IGFucy5pZCAlPiIvPgogICAgICAgICAgICAgICAgPCUgaWYgKGF0aSA9PT0gMCkgeyAlPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im5wcy1yYXRpbmdfX2JhZGdlIiBmb3I9Im5wc188JT0gY3VyUS5pZCAlPl88JT0gYW5zLmlkICU-IiB0YWJpbmRleD0iPCU9IGF0aSAlPiI-CiAgICAgICAgICAgICAgICA8JSB9IGVsc2UgeyU-CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGFyaWEtaGlkZGVuPSJ0cnVlIiBjbGFzcz0ibnBzLXJhdGluZ19fYmFkZ2UiIGZvcj0ibnBzXzwlPSBjdXJRLmlkICU-XzwlPSBhbnMuaWQgJT4iPgogICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJucHMtcmF0aW5nX19oZWlnaHRfZml4Ij48L2Rpdj4KICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibnBzLXJhdGluZ19fbnVtIj48JT1hdGklPjwvZGl2PgogICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzdHJldGNoIi8-CiAgICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibnBzLXJhdGluZ19fbGFiZWxzIj4KICAgICAgICAgICAgICAgIDwlCiAgICAgICAgICAgICAgICAgIHZhciBucHNaZXJvID0gY3VyUS5hbnN3ZXJzWzBdLmxibDsKICAgICAgICAgICAgICAgICAgdmFyIG5wc1RlbiA9IGN1clEuYW5zd2Vyc1tjdXJRLmFuc3dlcnMubGVuZ3RoLTFdLmxibDsKICAgICAgICAgICAgICAgICAgaWYgKGV4dHJhSW5mby5ucHNaZXJvKSB7CiAgICAgICAgICAgICAgICAgICAgbnBzWmVybyA9IGV4dHJhSW5mby5ucHNaZXJvOwogICAgICAgICAgICAgICAgICAgIG5wc1RlbiA9IGV4dHJhSW5mby5ucHNUZW47CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAlPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibnBzX3JhdGluZ19sZWZ0X2xhYmVsIj48JT0gbnBzWmVybyAlPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibnBzX3JhdGluZ19yaWdodF9sYWJlbCI-PCU9IG5wc1RlbiAlPjwvZGl2PgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2ZpZWxkc2V0PgogICAgICAgICAgPC9kaXY-CiAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICA8JSBpZiAoY3VyUS5xdWVzdGlvblR5cGUgPT09ICdEUk9QX0RPV04nICkgeyAlPgogICAgICAgICAgICA8JSBpZiAoY3VyUS5hbnN3ZXJzLmxlbmd0aCA-IDEpIHsgJT4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYnF1ZXN0aW9uIiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMTZweCAhaW1wb3J0YW50IiBxdWVzdGlvbmlkPSI8JT0gY3VyUS5pZCAlPiIgIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiICU-PgogICAgICAgICAgICAgICAgPGxhYmVsICBzdHlsZT0icGFkZGluZy1ib3R0b206IDVweCAhaW1wb3J0YW50IiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJsYWJlbCIgaWQ9ImF1cnljX2xibDwlPSBjdXJRLmlkICU-Ij48JT0gY3VyUS5xdWVzdGlvblRleHQgJT48c3BhbiBzdHlsZT0iY29sb3I6I2RiMmQ0MzsiPjwlPSByZXFGb250ICU-PC9zcGFuPjwvbGFiZWw-CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1xdWVzdGlvbi1zZWxlY3QtY2hvb3NlIiBxdWVzdGlvbmlkPSI8JT0gY3VyUS5pZCAlPiIgIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiICU-PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXNlbGVjdC1idXR0b24iPgogICAgICAgICAgICAgICAgICAgICAgICA8JSBpZiAoY3VyUS5hbnN3ZXJzLmxlbmd0aCA-IDEpIHsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgPCU9IGV4dHJhSW5mby5jaG9vc2UgJT4KICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgPCU9IGN1clEuYW5zd2Vyc1swXS5sYWJlbCAlPgogICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ic188JT0gY3VyUS5pZCAlPiIgY2xhc3M9ImF1cnljLWZiLXF1ZXN0aW9uZ3JvdXAtc2VsZWN0b3IiIHRhYmluZGV4PSIwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKGN1clEuYW5zd2Vycy5sZW5ndGggPiAxKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24-PCU9IGV4dHJhSW5mby5jaG9vc2UgJT48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBhdGlxID0gMDsgYXRpcSA8IGN1clEuYW5zd2Vycy5sZW5ndGg7IGF0aXErKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFucyA9IGN1clEuYW5zd2Vyc1thdGlxXTsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iPCU9IGFucy5pZCAlPiI-PCU9IGFucy5sYWJlbCAlPjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q-CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICA8JSBmb3IgKHZhciB0cGkgPSAwOyB0cGkgPCB0b3BpY3MubGVuZ3RoOyB0cGkrKykgewogICAgICAgICAgICAgICAgdmFyIHRvcGsgPSB0b3BpY3NbdHBpXTsgJT4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJxdWVzdGlvbmdyb3VwIiBpZD0idG9wa188JT0gdG9way50b3BpY0Fuc3dlcklkICU-Ij4KICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIHFpID0gMDsgcWkgPCB0b3BrLnF1ZXN0aW9ucy5sZW5ndGg7IHFpKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcSA9IHRvcGsucXVlc3Rpb25zW3FpXTsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVxRm9udCA9IHEucmVxdWlyZWQgPyAnKicgOiAnJzsgJT4KICAgICAgICAgICAgICA8ZGl2IGRhdGFUeXBlPSJhdXJ5Yy1mYnEtd3JhcHBlciIgY2xhc3M9IjwlIGlmIChxLnF1ZXN0aW9uVHlwZSA9PT0gJ1NDQUxFRCcpIHslPmF1cnljLXN0YXJyYXRpbmctc2VjdGlvbjwlIH0lPiIgaWQ9ImF1cnljcV88JT0gcS5pZCAlPiI-CiAgICAgICAgICAgICAgICAgICAgPCUgaWYgKCAocS5xdWVzdGlvblR5cGUgIT09ICdDSEVDS0JPWCcpICYmIChxLnF1ZXN0aW9uVHlwZSAhPT0gJ1JBRElPX0JVVFRPTicpICkgeyAlPgogICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmxhYmVsIiBpZD0iYXVyeWNfbGJsPCU9IHEuaWQgJT4iIHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0ICFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206NXB4ICFpbXBvcnRhbnQ7IiBmb3I9ImF1cnljX29iajwlPSBxLmlkICU-IiBkYXRhLXF1ZXN0aW9udHlwZT0iXzwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgIDwlPSBxLnF1ZXN0aW9uVGV4dCAlPjxzcGFuIHN0eWxlPSJjb2xvcjojZGIyZDQzOyI-PCU9IHJlcUZvbnQgJT48L3NwYW4-PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgPCUgaWYgKHEucXVlc3Rpb25UeXBlID09PSAnQ0hFQ0tCT1gnICYmICFxLm1hdHJpeCkgeyAlPgogICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmxhYmVsIiBpZD0iYXVyeWNfbGJsPCU9IHEuaWQgJT4iIHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0ICFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206NXB4ICFpbXBvcnRhbnQ7IiBmb3I9ImF1cnljX29iajwlPSBxLmlkICU-IiBkYXRhLXF1ZXN0aW9udHlwZT0iXzwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgIDwlPSBxLnF1ZXN0aW9uVGV4dCAlPjxzcGFuIHN0eWxlPSJjb2xvcjojZGIyZDQzOyI-PCU9IHJlcUZvbnQgJT48L3NwYW4-PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGRhdGFUeXBlPSJhdXJ5Yy1mZWVkYmFjay1jaGVja2JveCIgcXVlc1R5cGU9ImF1cnljLWZicSIgcXVlc3Rpb25pZD0iPCU9IHEuaWQgJT4iIDwlPSBxLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiJT4gZGF0YS1xdWVzdGlvbi10eXBlPSI8JT0gcS5xdWVzdGlvblR5cGUgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBhbnNpID0gMDsgYW5zaSA8IHEuYW5zd2Vycy5sZW5ndGg7IGFuc2krKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5zID0gcS5hbnN3ZXJzW2Fuc2ldOyAlPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJjYl88JT0gYW5zLmlkICU-IiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stY2hlY2tib3giIHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0OyIgdGFiaW5kZXg9IjAiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgdmFsdWU9IjwlPSBhbnMudmFsdWUgJT4iIHF1ZXN0aW9uaWQ9IjwlPSBhbnMuaWQgJT4iIGlkPSJfPCU9IGFucy5pZCAlPiIvPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwlPSBhbnMubGFiZWwgJT4KICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICA8JSBpZiAocS5xdWVzdGlvblR5cGUgPT0gJ1JBRElPX0JVVFRPTicgJiYgIXEubWF0cml4KSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZibGFiZWwiIGlkPSJhdXJ5Y19sYmw8JT0gcS5pZCAlPiIgc3R5bGU9InRleHQtYWxpZ246IGxlZnQgIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTo1cHggIWltcG9ydGFudDsiIGZvcj0iYXVyeWNfb2JqPCU9IHEuaWQgJT4iIGRhdGEtcXVlc3Rpb250eXBlPSJfPCU9IHEucXVlc3Rpb25UeXBlICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPCU9IHEucXVlc3Rpb25UZXh0ICU-PHNwYW4gc3R5bGU9ImNvbG9yOiNkYjJkNDM7Ij48JT0gcmVxRm9udCAlPjwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBkYXRhVHlwZT0iYXVyeWMtZmVlZGJhY2stcmFkaW8iICBxdWVzVHlwZT0iYXVyeWMtZmJxIiBxdWVzdGlvbmlkPSI8JT0gcS5pZCAlPiIgPCU9IHEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPiBkYXRhLXF1ZXN0aW9uLXR5cGU9IjwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIGFuc2kgPSAwOyBhbnNpIDwgcS5hbnN3ZXJzLmxlbmd0aDsgYW5zaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBxLmFuc3dlcnNbYW5zaV07ICU-CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9InJiXzwlPSBhbnMuaWQgJT4iIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1yYWRpbyIgdGFiaW5kZXg9IjAiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iYXVyeWNyZF88JT0gcS5pZCAlPiIgdmFsdWU9IjwlPSBhbnMuaWQgJT4iIGxhYmVsPSI8JT0gZW5jb2RlVVJJQ29tcG9uZW50KGFucy5sYWJlbCkgJT4iIGlkPSJfPCU9IGFucy5pZCAlPiIgcXVlc3Rpb25pZD0iPCU9IHEuaWQgJT4iLz4KICAgICAgICAgICAgICAgICAgICAgICAgICA8JT0gYW5zLmxhYmVsICU-CiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw-CiAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgPCUgaWYgKHEubWF0cml4ICYmIHEuZ3JvdXAgJiYgcS5ncm91cC5sZW5ndGggPiAwKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9Im1hdHJpeCIgYm9yZGVyPTA-CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz0iZGVzY3JpcHRpb24iPgogICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCB0ZCBjb2xzcGFuPSI0Ij48JT0gcS5xdWVzdGlvbkxhYmVsICU-PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgPCUgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgcS5ncm91cC5sZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncSA9IHEuZ3JvdXBbaWR4XSwgYW5zd2VyTGVuZ3RoID0gcS5hbnN3ZXJMZW5ndGg7ICU-CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz0icXVlc3Rpb25Db2x1bW4iIHF1ZXNUeXBlPSJhdXJ5Yy1mYnEiIHF1ZXN0aW9uaWQ9IjwlPSBncS5pZCAlPiIgPCU9IGdxLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiJT4KICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXF1ZXN0aW9uLXR5cGU9IjwlPSBncS5xdWVzdGlvblR5cGUgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0icXVlc3Rpb25UZXh0Ij48JT0gZ3EucXVlc3Rpb25UZXh0ICU-PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSAib3B0aW9uU2VjdGlvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JSBpZiAoYW5zd2VyTGVuZ3RoID4gMjcpIHsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJsaW5lQnJlYWtSYWRpbyBvcHRpb25TZWN0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gZWxzZSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iaW5MaW5lUmFkaW8gb3B0aW9uU2VjdGlvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBhbnNpID0gMDsgYW5zaSA8IGdxLmFuc3dlcnMubGVuZ3RoOyBhbnNpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFucyA9IGdxLmFuc3dlcnNbYW5zaV07ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJhZGlvTGlzdCI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJhdXJ5Y3JkXzwlPSBncS5pZCAlPiIgdmFsdWU9IjwlPSBhbnMuaWQgJT4iIGlkPSJyYl88JT0gYW5zLmlkICU-IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbmlkPSI8JT0gZ3EuaWQgJT4iIC8-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTogMTJweCAhaW1wb3J0YW50OyIgZm9yPSJyYl88JT0gYW5zLmlkICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCU9IGFucy5sYWJlbCAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgPCUgaWYgKHEucXVlc3Rpb25UeXBlID09PSAnT1BFTkVORCcpIHsgJT4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYnRhcmVhIiAgcXVlc1R5cGU9ImF1cnljLWZicSIgcXVlc3Rpb25pZD0iPCU9IHEuaWQgJT4iIDwlPSBxLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiJT4gZGF0YS1xdWVzdGlvbi10eXBlPSI8JT0gcS5xdWVzdGlvblR5cGUgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9ImF1cnljX29iajwlPSBxLmlkICU-IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXF1ZXN0aW9uLXRleHRhcmVhIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0iPCU9IHlvdXJBbnN3ZXIgJT4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXVyeWNtYXhsZW5ndGg9IjEwMDAiIHRhYmluZGV4PSIwIj48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfY291bnRXcmFwcGVyIj4gPCU9IGxlZnRMYWJlbCAlPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgPCUgaWYgKHEucXVlc3Rpb25UeXBlID09PSAnQ09OVEFDVF9JTkZPJykgeyAlPgogICAgICAgICAgICAgICAgICAgIDwhLS0gVGV4dCBpbnB1dCAtLT4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay10ZXh0IGF1cnljLWZlZWRiYWNrLWVtYWlsIiAgc3R5bGU9Im1hcmdpbi1ib3R0b206IDE2cHggIWltcG9ydGFudCIgIHF1ZXNUeXBlPSJhdXJ5Yy1mYnEiIHF1ZXN0aW9uaWQ9IjwlPSBxLmlkICU-IiA8JT0gcS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiU-IGRhdGEtcXVlc3Rpb24tdHlwZT0iPCU9IHEucXVlc3Rpb25UeXBlICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzcl88JT0gcS5pZCAlPiIgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZiZW1haWwiIHRhYmluZGV4PSIwIiB0eXBlPSJlbWFpbCIgIDwlPSBxLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiICU-Lz4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmItdmFsaWRhdGlvbi1tc2ctc2VjdGlvbiI-PC9kaXY-CiAgICAgICAgICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgIDwlIGlmIChxLnF1ZXN0aW9uVHlwZSA9PT0gJ0RST1BfRE9XTicgKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZicXVlc3Rpb24tZHJvcGRvd24iIHN0eWxlPSJwYWRkaW5nLWJvdHRvbTogNXB4ICFpbXBvcnRhbnQiICBxdWVzVHlwZT0iYXVyeWMtZmJxIiBxdWVzdGlvbmlkPSI8JT0gcS5pZCAlPiIgPCU9IHEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPiBkYXRhLXF1ZXN0aW9uLXR5cGU9IjwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1xdWVzdGlvbi1zZWxlY3QtY2hvb3NlIiBxdWVzdGlvbmlkPSI8JT0gcS5pZCAlPiIgIDwlPSBxLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiICU-PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXNlbGVjdC1idXR0b24iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JT0gZXh0cmFJbmZvLmNob29zZSAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InNfPCU9IHEuaWQgJT4iIGNsYXNzPSJhdXJ5Yy1mYi1xdWVzdGlvbi1zZWxlY3RvciIgdGFiaW5kZXg9IjAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPjwlPSBleHRyYUluZm8uY2hvb3NlICU-PC9vcHRpb24-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIGF0aXEgPSAwOyBhdGlxIDwgcS5hbnN3ZXJzLmxlbmd0aDsgYXRpcSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5zID0gcS5hbnN3ZXJzW2F0aXFdOyAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI8JT0gYW5zLmlkICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlPSBhbnMubGFiZWwgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgIDwlIH0gJT4KICAgICAgPC9kaXY-CiAgICAgIDwlIH0gJT4KICAgICAgPCUgfSAlPgoKICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZm9vdGVyLXNlY3Rpb24iPgogICAgICAgIDwlIHZhciBidG5UZXh0ID0gIiI7ICU-CiAgICAgICAgICAgIDwlIGlmIChmb3JtQ29uZmlnLmJ0bkZvbnRDb2xvcikgeyAlPgogICAgICAgICAgICAgICAgPCUgYnRuVGV4dCA9ICI8c3BhbiBzdHlsZT1cImNvbG9yOiIgKyBmb3JtQ29uZmlnLmJ0bkZvbnRDb2xvciArICJcIj4iICsgZXh0cmFJbmZvLnN1Ym1pdCArICI8L3NwYW4-IjsgJT4KICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT4KICAgICAgICAgICAgICAgIDwlIGJ0blRleHQgPSBleHRyYUluZm8uc3VibWl0OyAlPgogICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgPCUgaWYgKGZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yKSB7ICU-CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJwb3N0LWZiLXJlc3AtYnV0dG9uIgogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogPCU9Zm9ybUNvbmZpZy5idG5CYWNrZ3JvdW5kQ29sb3IlPjsgYm9yZGVyOiAxcHggc29saWQgPCU9Zm9ybUNvbmZpZy5idG5CYWNrZ3JvdW5kQ29sb3IlPiIKICAgICAgICAgICAgICAgICAgICAgICAgaWQ9InBvc3QtZmItcmVzcC1idXR0b24iIHRhYmluZGV4PSIwIj4KICAgICAgICAgICAgICAgICAgICA8JT0gYnRuVGV4dCAlPgogICAgICAgICAgICAgICAgPC9idXR0b24-CiAgICAgICAgICAgIDwlIH0gZWxzZSB7ICU-CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJwb3N0LWZiLXJlc3AtYnV0dG9uIiBpZD0icG9zdC1mYi1yZXNwLWJ1dHRvbiIgdGFiaW5kZXg9IjAiPgogICAgICAgICAgICAgICAgICAgIDwlPSBidG5UZXh0ICU-CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICA8ZGl2IGlkPSJhdXJ5Yy1mZWVkYmFjay1jYW52YXMiPgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZibW9kYWwtZm9vdGVyIj4KICAgICAgICAgICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vd3d3LmF1cnljLmNvbS8iIGNsYXNzPSJQb3dlcmVkQnlBdXJ5YyIgdGl0bGU9IjwlPSBwb3dlcmVkQnkgJT4gQXVyeWMiIGFyaWEtbGFiZWw9IjwlPSBwb3dlcmVkQnkgJT4gQXVyeWMiIHRhcmdldD0iX2JsYW5rIiB0YWJpbmRleD0iMCI-CiAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPSJ0cnVlIj48JT0gcG93ZXJlZEJ5ICU-PC9zcGFuPgogICAgICAgICAgICAgICAgICA8aW1nIGFyaWEtaGlkZGVuPSJ0cnVlIiBzcmM9Imh0dHBzOi8vZmItbG9nby5hdXJ5Yy5jb20vZGFyay1sb2dvLnN2ZyIgYWx0PSJBdXJ5YyIgc3R5bGU9IndpZHRoOjYwcHggIWltcG9ydGFudDtoZWlnaHQ6MjBweCAhaW1wb3J0YW50OyI-CiAgICAgICAgICAgICAgICA8L2E-ICAgICAgICAgICAgICAKICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY-CiAgICAgIDwvZGl2PgogIDwvZGl2Pgo8L2Rpdj4KPGRpd",window[constants.symbols.FEEDBACKCONTENT_DESKTOP]="iBjbGFzcz0iYXVyeWMtZmJtb2RhbC1ib2R5LXNlbGVjdGlvbiI-CiAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mYm1vZGFsLWJvZHktc2VsZWN0aW9uX3RpdGxlIj5Ib3cgd291bGQgeW91IGxpa2UgdG8gZ2l2ZSBmZWVkYmFjaz88L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXNjcmVlbnNob3QiPgogICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19vcHRpb25fcm93Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19vcHRpb25fY29sdW1uIGF1cnljLWZlZWRiYWNrX29wdGlvbl9pbWFnZSI-CiAgICAgICAgICA8aW1nIHNyYz0iZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDVUFBQUFnQ0FZQUFBQ1ZVN0d3QUFBQmZFbEVRVlJZUisyWHEyNkVVQkNHejZBUUtGYjFTVnFCYXFxNEdJSXNtRjQwNFFXNmZRR0M3c1dRU29MaG9wcFZpUFpKNmxBSUZOTWMwbTBJM2U2V3kxbEl3M0VuaEpudi9QOHdad0F5d3dVelpDSUwxRjlkV1pUcXJKUXN5MGhmU3RPMFZvL0ZudU80K3ppTzE0Zmd2dTFqQWJIdmtQdkE1bHRUYlpVT3ljdjYrYzc2WVpHMHk4R1BadC8vZ09weWlyN1dkc214MUZTemIwM1dweEFSTkUyN1JzUXJSRHlsSUFEd0RnRFBVUlE5QVVCOWk3UVhNL3QwWFQ4cHkvS0ZFSEwraXlvYm51Y3Z3ekQ4T0FvVVZVaFJsRmNLdEZxdDBEUk44RHl2em0zYk52RjlIL004cDRKc2tpUzVhQ3ZHcEUrcHFucFRWZFdES0lyb3VpNElna0FNdzZpaGdpQWdSVkVReDNGcU1JN2pidU00Zm15cXhRUktVWlEzV2tOVUZVbVM2bnhOS0xyUHNveFE5V2lOSlVseTlnTnFyQW1oYncvYldWT3FxcTZycXJvYk9rdU5DalZXc0cyY1Vld2JHMnFXaGQ1c0NmUUx0Q3hyK3BaQWxSL2NQTWUyYnh0djBEWERDcW9adC9Qb3NrQjkvVmRPTnJyMHRlOFRZL2RINmxDVXIzWUFBQUFBU1VWT1JLNUNZSUk9Ij48L2ltZz4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19vcHRpb25fY29sdW1uIGF1cnljLWZlZWRiYWNrLXNlbGVjdGlvbl9fbGFiZWxzIj4KICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXNlbGVjdGlvbl9fbGFiZWwxIj5TZWxlY3QgU2VjdGlvbjwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0aW9uX19sYWJlbDIiPlNlbGVjdCBhIHNlY3Rpb24gb2YgdGhpcyBwYWdlIG9uIHdoaWNoIHRvIGdpdmUgZmVlZGJhY2suPC9kaXY-CiAgICAgICAgPC9kaXY-CiAgICAgIDwvZGl2PgogICAgPC9kaXY-CiAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1nZW5lcmFsIj4KICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX3JvdyI-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX2NvbHVtbiBhdXJ5Yy1mZWVkYmFja19vcHRpb25faW1hZ2UiPgogICAgICAgICAgPGltZyBzcmM9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQ0FBQUFBZ0NBWUFBQUJ6ZW5yMEFBQUEvVWxFUVZSWVIrMlhQUTZDUUJDRlp5UmFjQVAxUEZyc1NrbnBPYlN5c05KeldGTGlVT2g5UEFLRkJzZHNRVUlJWVJhV1pHT3lXN0x6ODgzamJURUluZzlLL2RNMFhaUmxlUWFBUFRPdnBIaHpqNGd2QUxqRmNYektzdXpkbHlNQ2FLMHZ6SHl3YWR5T1FjUXJFUjJkQUpSU1pwb2xJdTZJaUd4QXROYWFtZTlHQ1NKYUR3WlFTbkU3cVNnS1VhMW1qbTJOenFMTlpFVDhNdk5zakFJQThBR0FlUTNXTlVRdmdFbVl3Z1AxUUtNQXBuZ0ZUZ0EycHBOaUFrQlF3Rm1CSkVrZVZWVnRKTE0xNzZNb2V1WjV2alhmL2g5Z3lPUmRzYzRLQklCZ3d1QUI3d29FRTNyL0JRSEFtd0t1alcyV0czRXhtUkxDZWkrWXNxbFU2d2ZUZTBBd1VVdkpCQUFBQUFCSlJVNUVya0pnZ2c9PSI-PC9pbWc-CiAgICAgICAgPC9kaXY-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX2NvbHVtbiBhdXJ5Yy1mZWVkYmFjay1zZWxlY3Rpb25fX2xhYmVscyI-CiAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1zZWxlY3Rpb25fX2xhYmVsMSI-RmVlZGJhY2sgRm9ybTwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0aW9uX19sYWJlbDIiPkZpbGwgb3V0IG91ciBnZW5lcmFsIGZlZWRiYWNrIGZvcm0uPC9kaXY-CiAgICAgICAgPC9kaXY-CiAgICAgIDwvZGl2PgogICAgPC9kaXY-CiAgPC9kaXY-CiAgPCUKICAgIHZhciBwb3dlcmVkQnkgPSAnUG93ZXJlZCBieSc7CiAgICB2YXIgeW91ckFuc3dlciA9ICdZb3VyIGFuc3dlcic7CiAgICB2YXIgbGVmdExhYmVsID0gJzxzcGFuIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay10ZXh0LXJlbWFpbmluZyI-MSwwMDA8L3NwYW4-IENoYXJhY3RlcnMgbGVmdCc7CiAgICBpZiAoZXh0cmFJbmZvLnlvdXJBbnN3ZXIpIHsKICAgICAgeW91ckFuc3dlciA9IGV4dHJhSW5mby55b3VyQW5zd2VyOwogICAgICBwb3dlcmVkQnkgPSBleHRyYUluZm8ucG93ZXJlZEJ5OwogICAgICBsZWZ0TGFiZWwgPSBleHRyYUluZm8ubGVmdC5yZXBsYWNlKC9cJFx7TlVNXH0vLCAnPHNwYW4gY2xhc3M9ImF1cnljLWZlZWRiYWNrLXRleHQtcmVtYWluaW5nIj4xLDAwMDwvc3Bhbj4nKTsKICAgIH0KICAgJT4KICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mYm1vZGFsLWJvZHktZmJmb3JtIGZiLWRlc2t0b3AiPgogICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2siPgogICAgICAgIDxkaXYgZGF0YVR5cGU9ImF1cnljLWZicSIgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXRpdGxlLXNlY3Rpb24iPgogICAgICAgICAgICA8JSBpZiAobG9nb1BpYykgeyAlPgogICAgICAgICAgICAgICAgPCUKICAgICAgICAgICAgICAgICAgdmFyIGFsdCA9IGZvcm1Db25maWcubG9nb0FsdCB8fCAnU2l0ZSBMb2dvJzsKICAgICAgICAgICAgICAgICU-CiAgICAgICAgICAgICAgICA8aW1nIHNyYz0iPCU9bG9nb1BpYyU-IiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJsb2dvIiBhbHQ9IjwlPWFsdCU-Ii8-CiAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgPCUgaWYgKGZlZWRiYWNrVGl0bGUpIHsgJT4KICAgICAgICAgICAgICAgIDxoMT48JT0gZmVlZGJhY2tUaXRsZSAlPjwvaDE-CiAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgPCUgaWYgKHByb2xvZ3VlVGV4dCkgeyAlPgogICAgICAgICAgICAgICAgPCUgaWYgKHByb2xvZ3VlVGV4dC5pbmRleE9mKCdoMScpID09PSAtMSkgeyAlPgogICAgICAgICAgICAgICAgICAgIDxwPjwlPSBwcm9sb2d1ZVRleHQgJT48L3A-CiAgICAgICAgICAgICAgICA8JSB9IGVsc2UgeyAlPgogICAgICAgICAgICAgICAgICAgIDwlPSBwcm9sb2d1ZVRleHQgJT4KICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICA8JSBpZiAoaGFzUmVxdWlyZWRRdWVzdGlvbnMpIHsgJT4KICAgICAgICAgICAgICA8cCBjbGFzcz0icmVxdWlyZWQtbGFiZWwiIGFyaWEtaGlkZGVuPSJ0cnVlIj48Yj4qIDwvYj5SZXF1aXJlZCBmaWVsZHM8L3A-CiAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICA8L2Rpdj4KICAgICAgICA8JSBmb3IgKHZhciBtcWkgPSAwOyBtcWkgPCBtYWluUS5sZW5ndGg7IG1xaSsrKSB7CiAgICAgICAgICAgIHZhciBjdXJRID0gbWFpblFbbXFpXTsKICAgICAgICAgICAgdmFyIHJlcUZvbnQgPSBjdXJRLnJlcXVpcmVkID8gJyonIDogJyc7CiAgICAgICAgICAgIGlmIChjdXJRLnF1ZXN0aW9uVHlwZSAhPT0gJ0RST1BfRE9XTicgfHwgY3VyUS5hbnN3ZXJzLmxlbmd0aCA-IDApIHsgJT4KICAgICAgICA8ZGl2IGRhdGFUeXBlPSJhdXJ5Yy1mYnEiIGNsYXNzPSI8JSBpZiAoY3VyUS5xdWVzdGlvblR5cGUgPT09ICdTQ0FMRUQnKSB7ICU-YXVyeWMtc3RhcnJhdGluZy1zZWN0aW9uPCUgfSAlPiIgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPiBxdWVzdGlvbmlkPSI8JT0gY3VyUS5pZCAlPiI-CiAgICAgICAgICAgIDwlIGlmIChjdXJRLnF1ZXN0aW9uVHlwZSA9PT0gJ1NDQUxFRCcpIHsgJT4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJxdWVzdGlvbiIgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiJT4-CiAgICAgICAgICAgICAgPGZpZWxkc2V0IGNsYXNzPSJhdXJ5Yy1mYi1zdGFycmF0aW5nLWZpZWxkIiBxdWVzdGlvbmlkPSI8JT1jdXJRLmlkJT4iIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiJT4gPgogICAgICAgICAgICAgICAgPGxlZ2VuZCBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJsYWJlbCIgaWQ9ImF1cnljX2xibDwlPSBjdXJRLmlkICU-Ij48JT0gY3VyUS5xdWVzdGlvblRleHQgJT4gPHNwYW4gc3R5bGU9ImNvbG9yOiNkYjJkNDM7cG9zaXRpb246c3RhdGljOyI-PCU9IHJlcUZvbnQgJT48L3NwYW4-PC9sZWdlbmQ-CiAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBhdGkgPSAwOyBhdGkgPCBjdXJRLmFuc3dlcnMubGVuZ3RoOyBhdGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBjdXJRLmFuc3dlcnNbYXRpXTsgJT4KICAgICAgICAgICAgICAgICAgICA8JSB2YXIgdGkgPSAtMTsgaWYgKGF0aSA9PT0gMCkgeyB0aSA9IDA7IH0gJT4KICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT0iYXVyeWNfb2JqXzwlPWN1clEuaWQlPiIgaWQ9ImF1cnljX29ial88JT0gY3VyUS5pZCAlPl88JT1hbnMuaWQlPiIgdmFsdWU9IjwlPWFucy5pZCU-IgogICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uaWQ9IjwlPWN1clEuaWQlPiIgdHlwZT0icmFkaW8iCiAgICAgICAgICAgICAgICAgICAgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPgogICAgICAgICAgICAgICAgICAgIGNsYXNzPSJhdXJ5Yy1mYi1zdGFycmF0aW5nLWZpZWxkLXN0YXJpY29uIgogICAgICAgICAgICAgICAgICAgIHZhbHVlPSI8JT1hbnMudmFsdWUlPiIKICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPSI8JT1hbnMudmFsdWUlPiBzdGFycyIvPgoKICAgICAgICAgICAgICAgICAgICA8bGFiZWwgYXJpYS1sYWJlbD0iPCU9IGF0aSsxICU-IHN0YXIiIGZvcj0iYXVyeWNfb2JqXzwlPWN1clEuaWQlPl88JT1hbnMuaWQlPiI-CiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7IGxlZnQ6LTEwMDAwcHgiPjwlPWFucy52YWx1ZSU-IHN0YXI8L3NwYW4-CiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICA8L2ZpZWxkc2V0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICA8JSBpZiAoY3VyUS5xdWVzdGlvblR5cGUgPT09ICdOUFMnKSB7ICU-CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLW5wc19fY29udGFpbmVyIGF1cnljLWZlZWRiYWNrLWZicXVlc3Rpb24iIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-IiA8JT0gY3VyUS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiU-PgogICAgICAgICAgICAgIDxmaWVsZHNldCBjbGFzcz0ibnBzLXJhdGluZyIgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiJT4-CiAgICAgICAgICAgICAgICA8bGVnZW5kIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmxhYmVsIiBpZD0iYXVyeWNfbGJsPCU9IGN1clEuaWQgJT4iPjwlPSBjdXJRLnF1ZXN0aW9uVGV4dCAlPiA8c3BhbiBzdHlsZT0iY29sb3I6I2RiMmQ0Mztwb3NpdGlvbjpzdGF0aWM7Ij48JT0gcmVxRm9udCAlPjwvc3Bhbj48L2xlZ2VuZD4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5wcy1yYXRpbmdfX2JhZGdlcyI-CiAgICAgICAgICAgICAgICAgIDwlCiAgICAgICAgICAgICAgICAgICAgdmFyIG5wc1plcm8gPSBjdXJRLmFuc3dlcnNbMF0ubGJsOwogICAgICAgICAgICAgICAgICAgIHZhciBucHNUZW4gPSBjdXJRLmFuc3dlcnNbY3VyUS5hbnN3ZXJzLmxlbmd0aC0xXS5sYmw7CiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dHJhSW5mby5ucHNaZXJvKSB7CiAgICAgICAgICAgICAgICAgICAgICBucHNaZXJvID0gZXh0cmFJbmZvLm5wc1plcm87CiAgICAgICAgICAgICAgICAgICAgICBucHNUZW4gPSBleHRyYUluZm8ubnBzVGVuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICU-CiAgICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIGF0aSA9IDA7IGF0aSA8IGN1clEuYW5zd2Vycy5sZW5ndGg7IGF0aSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5zID0gY3VyUS5hbnN3ZXJzW2F0aV07ICU-CiAgICAgICAgICAgICAgICAgIDwlIHZhciB0aSA9IC0xOyBpZiAoYXRpID09PSAwKSB7IHRpID0gMDsgfSAlPgogICAgICAgICAgICAgICAgICA8JSBpZiAoYXRpID09PSAwKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IG5hbWU9Im5wc188JT0gY3VyUS5pZCAlPiIgaWQ9Im5wc188JT0gY3VyUS5pZCAlPl88JT0gYW5zLmlkICU-IgogICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-IiB0eXBlPSJyYWRpbyIgCiAgICAgICAgICAgICAgICAgICAgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPgogICAgICAgICAgICAgICAgICAgIHZhbHVlPSI8JT0gYW5zLmlkICU-Ii8-CiAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9Im5wcy1yYXRpbmdfX2JhZGdlIiBmb3I9Im5wc188JT0gY3VyUS5pZCAlPl88JT0gYW5zLmlkICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyBsZWZ0Oi0xMDAwMHB4Ij48JT0gbnBzWmVybyAlPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgPCUgfSBlbHNlIGlmIChhdGkgPT09IDEwKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IG5hbWU9Im5wc188JT0gY3VyUS5pZCAlPiIgaWQ9Im5wc188JT0gY3VyUS5pZCAlPl88JT0gYW5zLmlkICU-IgogICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-IiAgdHlwZT0icmFkaW8iIAogICAgICAgICAgICAgICAgICAgIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiJT4KICAgICAgICAgICAgICAgICAgICB2YWx1ZT0iPCU9IGFucy5pZCAlPiIvPgogICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJucHMtcmF0aW5nX19iYWRnZSIgZm9yPSJucHNfPCU9IGN1clEuaWQgJT5fPCU9IGFucy5pZCAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6LTEwMDAwcHgiPjwlPSBucHNUZW4gJT48L3NwYW4-CiAgICAgICAgICAgICAgICAgIDwlIH0gZWxzZSB7JT4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT0ibnBzXzwlPSBjdXJRLmlkICU-IiBpZD0ibnBzXzwlPSBjdXJRLmlkICU-XzwlPSBhbnMuaWQgJT4iCiAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iICB0eXBlPSJyYWRpbyIgCiAgICAgICAgICAgICAgICAgICAgPCU9IGN1clEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPgogICAgICAgICAgICAgICAgICAgIHZhbHVlPSI8JT0gYW5zLmlkICU-Ii8-CiAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJucHMtcmF0aW5nX19iYWRnZSIgZm9yPSJucHNfPCU9IGN1clEuaWQgJT5fPCU9IGFucy5pZCAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6LTEwMDAwcHgiPjwlPSBhdGkgJT48L3NwYW4-CgogICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibnBzLXJhdGluZ19faGVpZ2h0X2ZpeCI-PC9kaXY-CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibnBzLXJhdGluZ19fbnVtIj48JT1hdGklPjwvZGl2PgogICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzdHJldGNoIi8-CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5wcy1yYXRpbmdfX2xhYmVscyI-CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5wc19yYXRpbmdfbGVmdF9sYWJlbCIgYXJpYS1oaWRkZW49InRydWUiPjwlPSBucHNaZXJvICU-PC9kaXY-CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5wc19yYXRpbmdfcmlnaHRfbGFiZWwiIGFyaWEtaGlkZGVuPSJ0cnVlIj48JT0gbnBzVGVuICU-PC9kaXY-CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8L2ZpZWxkc2V0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICA8JSBpZiAoY3VyUS5xdWVzdGlvblR5cGUgPT09ICdEUk9QX0RPV04nICkgeyAlPgogICAgICAgICAgICAgIDwlIGlmIChjdXJRLmFuc3dlcnMubGVuZ3RoID4gMSkgeyAlPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJxdWVzdGlvbiIgc3R5bGU9Im1hcmdpbi1ib3R0b206IDE2cHggIWltcG9ydGFudCIgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiICU-PgogICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZibGFiZWwiIGZvcj0ic188JT0gY3VyUS5pZCAlPiIgaWQ9ImF1cnljX2xibDwlPSBjdXJRLmlkICU-Ij48JT0gY3VyUS5xdWVzdGlvblRleHQgJT4gPHNwYW4gc3R5bGU9ImNvbG9yOiNkYjJkNDM7cG9zaXRpb246c3RhdGljOyI-PCU9IHJlcUZvbnQgJT48L3NwYW4-PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stcXVlc3Rpb24tc2VsZWN0LWNob29zZSIgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiICU-PgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0LWJ1dHRvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKGN1clEuYW5zd2Vycy5sZW5ndGggPiAxKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPCU9IGV4dHJhSW5mby5jaG9vc2UgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8JSB9IGVsc2UgeyAlPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwlPSBjdXJRLmFuc3dlcnNbMF0ubGFiZWwgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgYXJpYS1sYWJlbD0iPCU9IGN1clEucXVlc3Rpb25UZXh0ICU-IiBpZD0ic188JT0gY3VyUS5pZCAlPiIgY2xhc3M9ImF1cnljLWZiLXF1ZXN0aW9uZ3JvdXAtc2VsZWN0b3IiIDwlPSBjdXJRLnJlcXVpcmVkID8gInJlcXVpcmVkIiA6ICIiICU-ID4KICAgICAgICAgICAgICAgICAgICAgICAgICA8JSBpZiAoY3VyUS5hbnN3ZXJzLmxlbmd0aCA-IDEpIHsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPjwlPSBleHRyYUluZm8uY2hvb3NlICU-PC9vcHRpb24-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIGF0aXEgPSAwOyBhdGlxIDwgY3VyUS5hbnN3ZXJzLmxlbmd0aDsgYXRpcSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBjdXJRLmFuc3dlcnNbYXRpcV07ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iPCU9IGFucy5pZCAlPiI-PCU9IGFucy5sYWJlbCAlPjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICA8JSBmb3IgKHZhciB0cGkgPSAwOyB0cGkgPCB0b3BpY3MubGVuZ3RoOyB0cGkrKykgewogICAgICAgICAgICAgICAgICB2YXIgdG9wayA9IHRvcGljc1t0cGldOyAlPgogICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZicXVlc3Rpb25ncm91cCIgaWQ9InRvcGtfPCU9IHRvcGsudG9waWNBbnN3ZXJJZCAlPiI-CiAgICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIHFpID0gMDsgcWkgPCB0b3BrLnF1ZXN0aW9ucy5sZW5ndGg7IHFpKyspIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBxID0gdG9way5xdWVzdGlvbnNbcWldOwogICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcUZvbnQgPSBxLnJlcXVpcmVkID8gJyonIDogJyc7ICU-CiAgICAgICAgICAgICAgICA8ZGl2IGRhdGFUeXBlPSJhdXJ5Yy1mYnEtd3JhcHBlciIgY2xhc3M9IjwlIGlmIChxLnF1ZXN0aW9uVHlwZSA9PT0gJ1NDQUxFRCcpIHslPmF1cnljLXN0YXJyYXRpbmctc2VjdGlvbjwlIH0lPiIgaWQ9ImF1cnljcV88JT0gcS5pZCAlPiI-CiAgICAgICAgICAgICAgICAgICAgICA8JSBpZiAoIChxLnF1ZXN0aW9uVHlwZSAhPT0gJ0NIRUNLQk9YJykgJiYgKHEucXVlc3Rpb25UeXBlICE9PSAnUkFESU9fQlVUVE9OJykgKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJsYWJlbCIgaWQ9ImF1cnljX2xibDwlPSBxLmlkICU-IiBzdHlsZT0idGV4dC1hbGlnbjogbGVmdCAhaW1wb3J0YW50O3BhZGRpbmctYm90dG9tOjVweCAhaW1wb3J0YW50OyIgZm9yPSJhdXJ5Y19vYmpfPCU9IHEuaWQgJT4iIGRhdGEtcXVlc3Rpb250eXBlPSJfPCU9IHEucXVlc3Rpb25UeXBlICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8JT0gcS5xdWVzdGlvblRleHQgJT4gPHNwYW4gc3R5bGU9ImNvbG9yOiNkYjJkNDM7cG9zaXRpb246c3RhdGljOyI-PCU9IHJlcUZvbnQgJT48L3NwYW4-PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4gICAgICAKCiAgICAgICAgICAgICAgICAgICAgICA8JSBpZiAocS5xdWVzdGlvblR5cGUgPT09ICdDSEVDS0JPWCcgJiYgIXEubWF0cml4KSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHJvbGU9ImFwcGxpY2F0aW9uIiBkYXRhVHlwZT0iYXVyeWMtZmVlZGJhY2stY2hlY2tib3giIHF1ZXNUeXBlPSJhdXJ5Yy1mYnEiIHF1ZXN0aW9uaWQ9IjwlPSBxLmlkICU-IiA8JT0gcS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiU-IGRhdGEtcXVlc3Rpb24tdHlwZT0iPCU9IHEucXVlc3Rpb25UeXBlICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZmllbGRzZXQgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxsZWdlbmQgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZibGFiZWwiIGlkPSJhdXJ5Y19sYmw8JT0gcS5pZCAlPiIgc3R5bGU9InRleHQtYWxpZ246IGxlZnQgIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTo1cHggIWltcG9ydGFudDsiIGZvcj0iYXVyeWNfb2JqXzwlPSBxLmlkICU-IiBkYXRhLXF1ZXN0aW9udHlwZT0iXzwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JT0gcS5xdWVzdGlvblRleHQgJT4gPHNwYW4gc3R5bGU9ImNvbG9yOiNkYjJkNDM7cG9zaXRpb246c3RhdGljOyI-PCU9IHJlcUZvbnQgJT48L3NwYW4-PC9sZWdlbmQ-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgZm9yICh2YXIgYW5zaSA9IDA7IGFuc2kgPCBxLmFuc3dlcnMubGVuZ3RoOyBhbnNpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5zID0gcS5hbnN3ZXJzW2Fuc2ldOyAlPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgdmFsdWU9IjwlPSBhbnMudmFsdWUgJT4iIHF1ZXN0aW9uaWQ9IjwlPSBhbnMuaWQgJT4iIGlkPSJjYl88JT0gYW5zLmlkICU-Ii8-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iY2JfPCU9IGFucy5pZCAlPiIgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWNoZWNrYm94IiBzdHlsZT0idGV4dC1hbGlnbjogbGVmdDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPCU9IGFucy5sYWJlbCAlPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw-CiAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPiAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ-ICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKHEucXVlc3Rpb25UeXBlID09ICdSQURJT19CVVRUT04nICYmICFxLm1hdHJpeCkgeyAlPgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBkYXRhVHlwZT0iYXVyeWMtZmVlZGJhY2stcmFkaW8iIHF1ZXNUeXBlPSJhdXJ5Yy1mYnEiIHF1ZXN0aW9uaWQ9IjwlPSBxLmlkICU-IiA8JT0gcS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiU-IGRhdGEtcXVlc3Rpb24tdHlwZT0iPCU9IHEucXVlc3Rpb25UeXBlICU-Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZmllbGRzZXQgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGVnZW5kIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmxhYmVsIiBpZD0iYXVyeWNfbGJsPCU9IHEuaWQgJT4iIHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0ICFpbXBvcnRhbnQ7cGFkZGluZy1ib3R0b206NXB4ICFpbXBvcnRhbnQ7IiBmb3I9ImF1cnljX29ial88JT0gcS5pZCAlPiIgZGF0YS1xdWVzdGlvbnR5cGU9Il88JT0gcS5xdWVzdGlvblR5cGUgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlPSBxLnF1ZXN0aW9uVGV4dCAlPiA8c3BhbiBzdHlsZT0iY29sb3I6I2RiMmQ0Mztwb3NpdGlvbjpzdGF0aWM7Ij48JT0gcmVxRm9udCAlPjwvc3Bhbj48L2xlZ2VuZD4KICAgICAgICAgICAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBhbnNpID0gMDsgYW5zaSA8IHEuYW5zd2Vycy5sZW5ndGg7IGFuc2krKykgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBxLmFuc3dlcnNbYW5zaV07ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJhdXJ5Y3JkXzwlPSBxLmlkICU-IiB2YWx1ZT0iPCU9IGFucy5pZCAlPiIgaWQ9InJiXzwlPSBhbnMuaWQgJT4iIHF1ZXN0aW9uaWQ9IjwlPSBxLmlkICU-Ii8-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0icmJfPCU9IGFucy5pZCAlPiIgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXJhZGlvIiA-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlPSBhbnMubGFiZWwgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ-CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChxLm1hdHJpeCAmJiBxLmdyb3VwICYmIHEuZ3JvdXAubGVuZ3RoID4gMCkgeyAlPgogICAgICAgICAgICAgICAgICAgICAgPGRpdiByb2xlPSJhcHBsaWNhdGlvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im92ZXJGbG93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgYm9yZGVyPTA-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPSJkZXNjcmlwdGlvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iNSIgaWQ9Im1haW5MYWJlbCI-PCU9IHEucXVlc3Rpb25MYWJlbCAlPjwvdGQ-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIDwlIGZvciAodmFyIGFuc2kgPSAwOyBhbnNpIDwgcS5ncm91cFswXS5hbnN3ZXJzLmxlbmd0aDsgYW5zaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFucyA9IHEuZ3JvdXBbMF0uYW5zd2Vyc1thbnNpXTsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4gLS0-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9ImRlc2NyaXB0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgZm9yICh2YXIgYW5zaSA9IDA7IGFuc2kgPCBxLmdyb3VwWzBdLmFuc3dlcnMubGVuZ3RoOyBhbnNpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5zID0gcS5ncm91cFswXS5hbnN3ZXJzW2Fuc2ldOyAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJyYWRpb09wdGlvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCU9IGFucy5sYWJlbCAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IHEuZ3JvdXAubGVuZ3RoOyBpZHgrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3EgPSBxLmdyb3VwW2lkeF07ICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9InF1ZXN0aW9uQ29sdW1uIiBxdWVzVHlwZT0iYXVyeWMtZmJxIiBxdWVzdGlvbmlkPSI8JT0gZ3EuaWQgJT4iIDwlPSBncS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiU-IGRhdGEtcXVlc3Rpb24tdHlwZT0iPCU9IGdxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0icXVlc3Rpb25UZXh0Ij48JT0gZ3EucXVlc3Rpb25UZXh0ICU-PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgZm9yICh2YXIgYW5zaSA9IDA7IGFuc2kgPCBncS5hbnN3ZXJzLmxlbmd0aDsgYW5zaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBncS5hbnN3ZXJzW2Fuc2ldOyAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InJhZGlvT3B0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImF1cnljcmRfPCU9IGdxLmlkICU-IiB2YWx1ZT0iPCU9IGFucy5pZCAlPiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSJyYl88JT0gYW5zLmlkICU-IiBxdWVzdGlvbmlkPSI8JT0gZ3EuaWQgJT4iIC8-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPiAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU-ICAKICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChxLnF1ZXN0aW9uVHlwZSA9PT0gJ09QRU5FTkQnKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYnRhcmVhIiBxdWVzVHlwZT0iYXVyeWMtZmJxIiBxdWVzdGlvbmlkPSI8JT0gcS5pZCAlPiIgPCU9IHEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPiBkYXRhLXF1ZXN0aW9uLXR5cGU9IjwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJhdXJ5Y19vYmpfPCU9IHEuaWQgJT4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWxsZWRieT0iYXVyeWNfbGJsPCU9IHEuaWQgJT4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1cnljbWF4bGVuZ3RoPSIxMDAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz0iYXVyeWMtZmVlZGJhY2stcXVlc3Rpb24tdGV4dGFyZWEiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSI8JT0geW91ckFuc3dlciAlPiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvdGV4dGFyZWE-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImF1cnljLWZlZWRiYWNrX2NvdW50V3JhcHBlciIgYXJpYS1saXZlPSJwb2xpdGUiIGFyaWEtYXRvbWljPSJ0cnVlIj4gPCU9IGxlZnRMYWJlbCAlPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKHEucXVlc3Rpb25UeXBlID09PSAnQ09OVEFDVF9JTkZPJykgeyAlPgogICAgICAgICAgICAgICAgICAgICAgPCEtLSBUZXh0IGlucHV0IC0tPgogICAgICAgICAgICAgICAgICAgICAgPGRpdiAgIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAxNnB4ICFpbXBvcnRhbnQiIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay10ZXh0IGF1cnljLWZlZWRiYWNrLWVtYWlsIiBxdWVzVHlwZT0iYXVyeWMtZmJxIiBxdWVzdGlvbmlkPSI8JT0gcS5pZCAlPiIgPCU9IHEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPiBkYXRhLXF1ZXN0aW9uLXR5cGU9IjwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHBsYWNlaG9sZGVyPSJFbWFpbCIgYXV0b2NvbXBsZXRlPSJvZmYiIGlkPSJhdXJ5Y19vYmpfPCU9IHEuaWQgJT4iIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmVtYWlsIiB0eXBlPSJlbWFpbCIgPCU9IHEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIgJT4vPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9Il88JT0gcS5pZCAlPl9lcnJvciIgY2xhc3M9ImF1cnljLWZiLXZhbGlkYXRpb24tbXNnLXNlY3Rpb24iIHJvbGU9ImFsZXJ0Ij48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgPCUgaWYgKHEucXVlc3Rpb25UeXBlID09PSAnRFJPUF9ET1dOJyApIHsgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYnF1ZXN0aW9uLWRyb3Bkb3duIiBxdWVzVHlwZT0iYXVyeWMtZmJxIiBzdHlsZT0icGFkZGluZy1ib3R0b206IDVweCAhaW1wb3J0YW50IiBxdWVzdGlvbmlkPSI8JT0gcS5pZCAlPiIgPCU9IHEucmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIlPiBkYXRhLXF1ZXN0aW9uLXR5cGU9IjwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXF1ZXN0aW9uLXNlbGVjdC1jaG9vc2UiIHF1ZXN0aW9uaWQ9IjwlPSBxLmlkICU-IiA8JT0gcS5yZXF1aXJlZCA_ICJyZXF1aXJlZCIgOiAiIiU-PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stc2VsZWN0LWJ1dHRvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCU9IGV4dHJhSW5mby5jaG9vc2UgJT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYXVyeWNfb2JqXzwlPSBxLmlkICU-IiBjbGFzcz0iYXVyeWMtZmItcXVlc3Rpb24tc2VsZWN0b3IiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24-PCU9IGV4dHJhSW5mby5jaG9vc2UgJT48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBhdGlxID0gMDsgYXRpcSA8IHEuYW5zd2Vycy5sZW5ndGg7IGF0aXErKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5zID0gcS5hbnN3ZXJzW2F0aXFdOyAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjwlPSBhbnMuaWQgJT4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8JT0gYW5zLmxhYmVsICU-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q-CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgPCUgfSAlPgogICAgICAgIDwvZGl2PgogICAgICAgIDwlIH0gJT4KICAgICAgICA8JSB9ICU-CgogICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZvb3Rlci1zZWN0aW9uIj4KICAgICAgICAgIDwlIHZhciBidG5UZXh0ID0gIiI7ICU-CiAgICAgICAgICAgICAgPCUgaWYgKGZvcm1Db25maWcuYnRuRm9udENvbG9yKSB7ICU-CiAgICAgICAgICAgICAgICAgIDwlIGJ0blRleHQgPSAiPHNwYW4gc3R5bGU9XCJjb2xvcjoiICsgZm9ybUNvbmZpZy5idG5Gb250Q29sb3IgKyAiXCI-IiArIGV4dHJhSW5mby5zdWJtaXQgKyAiPC9zcGFuPiI7ICU-CiAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT4KICAgICAgICAgICAgICAgICAgPCUgYnRuVGV4dCA9IGV4dHJhSW5mby5zdWJtaXQ7ICU-CiAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgPCUgaWYgKGZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yKSB7ICU-CiAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InBvc3QtZmItcmVzcC1idXR0b24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IDwlPWZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yJT47IGJvcmRlcjogMXB4IHNvbGlkIDwlPWZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yJT4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9InBvc3QtZmItcmVzcC1idXR0b24iPgogICAgICAgICAgICAgICAgICAgICAgPCU9IGJ0blRleHQgJT4KICAgICAgICAgICAgICAgICAgPC9idXR0b24-CiAgICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT4KICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0icG9zdC1mYi1yZXNwLWJ1dHRvbiIgaWQ9InBvc3QtZmItcmVzcC1idXR0b24iID4KICAgICAgICAgICAgICAgICAgICAgIDwlPSBidG5UZXh0ICU-CiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICA8ZGl2IGlkPSJhdXJ5Yy1mZWVkYmFjay1jYW52YXMiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmJtb2RhbC1mb290ZXIiPgogICAgICAgICAgICAgICAgICA8YSBocmVmPSJodHRwczovL3d3dy5hdXJ5Yy5jb20vIiBjbGFzcz0iUG93ZXJlZEJ5QXVyeWMiIHRpdGxlPSI8JT0gcG93ZXJlZEJ5ICU-IEF1cnljIiBhcmlhLWxhYmVsPSI8JT0gcG93ZXJlZEJ5ICU-IEF1cnljIiB0YXJnZXQ9Il9ibGFuayIgdGFiaW5kZXg9IjAiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPSJ0cnVlIj48JT0gcG93ZXJlZEJ5ICU-PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxpbWcgYXJpYS1oaWRkZW49InRydWUiIHNyYz0iaHR0cHM6Ly9mYi1sb2dvLmF1cnljLmNvbS9kYXJrLWxvZ28uc3ZnIiBhbHQ9IkF1cnljIiBzdHlsZT0id2lkdGg6NjBweCAhaW1wb3J0YW50O2hlaWdodDoyMHB4ICFpbXBvcnRhbnQ7Ij4KICAgICAgICAgICAgICAgICAgPC9hPiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2Pgo=PGRpd",window[constants.symbols.FEEDBACKINVITE]="iBjbGFzcz0iYXVyeWMtZmJtb2RhbC1ib2R5LWZiZm9ybS1lbmFibGVkIj4KICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjayI-CiAgICA8ZGl2IGRhdGFUeXBlPSJhdXJ5Yy1mYnEiIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay10aXRsZS1zZWN0aW9uIiB0YWJpbmRleD0iMCI-CiAgICAgIDwlIGlmIChsb2dvUGljKSB7ICU-CiAgICAgICAgPCUKICAgICAgICAgIHZhciBhbHQgPSBmb3JtQ29uZmlnLmxvZ29BbHQgfHwgJ1NpdGUgTG9nbyc7CiAgICAgICAgJT4KICAgICAgICA8aW1nIHNyYz0iPCU9bG9nb1BpYyU-IiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJsb2dvIiBhbHQ9IjwlPWFsdCU-Ii8-CiAgICA8JSB9ICU-CiAgICAgIDxoMSBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJmb3JtLWhlYWR0YWcgYXVyeWMtZmVlZGJhY2stZmJmb3JtLWhlYWR0YWctaDEiIHN0eWxlPSJ0ZXh0LWFsaWduOjwlPWZvcm1Db25maWcuaGVhZGVyQWxpZ24lPiFpbXBvcnRhbnQ7Ij48JT0gZm9ybUNvbmZpZy5oZWFkZXIgJT48L2gxPgogICAgICA8cCBjbGFzcz0iYXVyeWMtZmItaW52aXRlLWJvZHkiPjwlPSBmb3JtQ29uZmlnLmludml0ZUJvZHkgJT48L3A-CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZvb3Rlci1zZWN0aW9uIj4KICAgICAgPCUgdmFyIHllc1RleHQgPSAiIjsgdmFyIG5vVGV4dCA9ICIiOyU-CiAgICAgIDwlIG5vVGV4dCA9IGZvcm1Db25maWcubm9UZXh0OyAlPgogICAgICA8JSBpZiAoZm9ybUNvbmZpZy5idG5Gb250Q29sb3IpIHsgJT4KICAgICAgPCUgeWVzVGV4dCA9ICI8c3BhbiBzdHlsZT1cImNvbG9yOiIgKyBmb3JtQ29uZmlnLmJ0bkZvbnRDb2xvciArICJcIj4iICsgZm9ybUNvbmZpZy55ZXNUZXh0ICsgIjwvc3Bhbj4iOyAlPgogICAgICA8JSB9IGVsc2UgeyAlPgogICAgICA8JSB5ZXNUZXh0ID0gZm9ybUNvbmZpZy55ZXNUZXh0OyAlPgogICAgICA8JSB9ICU-CiAgICAgIDwlIGlmIChmb3JtQ29uZmlnLmJ0bkJhY2tncm91bmRDb2xvcikgeyAlPgogICAgICA8YnV0dG9uIGNsYXNzPSJwb3N0LWZiLXJlc3AtYnV0dG9uIgogICAgICAgIHN0eWxlPSJiYWNrZ3JvdW5kOiA8JT1mb3JtQ29uZmlnLmJ0bkJhY2tncm91bmRDb2xvciU-OyBib3JkZXI6IDFweCBzb2xpZCA8JT1mb3JtQ29uZmlnLmJ0bkJhY2tncm91bmRDb2xvciU-IgogICAgICAgIGlkPSJpbnZpdGUtZmIteWVzLWJ1dHRvbiIgdGFiaW5kZXg9IjAiPgogICAgICAgIDwlPSB5ZXNUZXh0ICU-CiAgICAgIDwvYnV0dG9uPgogICAgICA8JSB9IGVsc2UgeyAlPgogICAgICA8YnV0dG9uIGNsYXNzPSJwb3N0LWZiLXJlc3AtYnV0dG9uIiBpZD0iaW52aXRlLWZiLXllcy1idXR0b24iIHRhYmluZGV4PSIwIj4KICAgICAgICA8JT0geWVzVGV4dCAlPgogICAgICA8L2J1dHRvbj4KICAgICAgPCUgfSAlPgogICAgICA8YnV0dG9uIGNsYXNzPSJwb3N0LWZiLXJlc3AtYnV0dG9uIiBpZD0iaW52aXRlLWZiLW5vLWJ1dHRvbiIgdGFiaW5kZXg9IjAiPgogICAgICAgIDwlPSBub1RleHQgJT4KICAgICAgPC9idXR0b24-CiAgICAgIDwlCiAgICAgICAgdmFyIHBvd2VyZWRCeSA9ICdQb3dlcmVkIGJ5JzsKICAgICAgICBpZiAoZXh0cmFJbmZvLnBvd2VyZWRCeSkgewogICAgICAgICAgcG93ZXJlZEJ5ID0gZXh0cmFJbmZvLnBvd2VyZWRCeTsKICAgICAgICB9CiAgICAgICU-CiAgICAgIDxkaXYgaWQ9ImF1cnljLWZlZWRiYWNrLWNhbnZhcyI-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmJtb2RhbC1mb290ZXIiPgogICAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly93d3cuYXVyeWMuY29tLyIgY2xhc3M9IlBvd2VyZWRCeUF1cnljIiB0aXRsZT0iPCU9IHBvd2VyZWRCeSAlPiBBdXJ5YyIgYXJpYS1sYWJlbD0iPCU9IHBvd2VyZWRCeSAlPiBBdXJ5YyIgdGFyZ2V0PSJfYmxhbmsiIHRhYmluZGV4PSIwIj4KICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49InRydWUiPjwlPSBwb3dlcmVkQnkgJT48L3NwYW4-CiAgICAgICAgICAgIDxpbWcgYXJpYS1oaWRkZW49InRydWUiIHNyYz0iaHR0cHM6Ly9mYi1sb2dvLmF1cnljLmNvbS9kYXJrLWxvZ28uc3ZnIiBhbHQ9IkF1cnljIiBzdHlsZT0id2lkdGg6NjBweCAhaW1wb3J0YW50O2hlaWdodDoyMHB4ICFpbXBvcnRhbnQ7Ij4KICAgICAgICAgIDwvYT4gICAgICAgICAgICAgIAogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2Pgo8L2Rpdj4=PGRpd",window[constants.symbols.FEEDBACKINVITE_DESKTOP]="iBjbGFzcz0iYXVyeWMtZmJtb2RhbC1ib2R5LWZiZm9ybS1lbmFibGVkIGZiLWRlc2t0b3AiPgogIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrIj4KICAgIDxkaXYgZGF0YVR5cGU9ImF1cnljLWZicSIgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXRpdGxlLXNlY3Rpb24iIHRhYmluZGV4PSIwIj4KICAgICAgPCUgaWYgKGxvZ29QaWMpIHsgJT4KICAgICAgICA8JQogICAgICAgICAgdmFyIGFsdCA9IGZvcm1Db25maWcubG9nb0FsdCB8fCAnU2l0ZSBMb2dvJzsKICAgICAgICAlPgogICAgICAgIDxpbWcgc3JjPSI8JT1sb2dvUGljJT4iIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmxvZ28iIGFsdD0iPCU9YWx0JT4iLz4KICAgIDwlIH0gJT4KICAgICAgPGgxIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmZvcm0taGVhZHRhZyBhdXJ5Yy1mZWVkYmFjay1mYmZvcm0taGVhZHRhZy1oMSIgc3R5bGU9InRleHQtYWxpZ246PCU9Zm9ybUNvbmZpZy5oZWFkZXJBbGlnbiU-IWltcG9ydGFudDsiPjwlPSBmb3JtQ29uZmlnLmhlYWRlciAlPjwvaDE-CiAgICAgIDxwIGNsYXNzPSJhdXJ5Yy1mYi1pbnZpdGUtYm9keSI-PCU9IGZvcm1Db25maWcuaW52aXRlQm9keSAlPjwvcD4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZm9vdGVyLXNlY3Rpb24iPgogICAgICA8JSB2YXIgeWVzVGV4dCA9ICIiOyB2YXIgbm9UZXh0ID0gIiI7JT4KICAgICAgPCUgbm9UZXh0ID0gZm9ybUNvbmZpZy5ub1RleHQ7ICU-CiAgICAgIDwlIGlmIChmb3JtQ29uZmlnLmJ0bkZvbnRDb2xvcikgeyAlPgogICAgICA8JSB5ZXNUZXh0ID0gIjxzcGFuIHN0eWxlPVwiY29sb3I6IiArIGZvcm1Db25maWcuYnRuRm9udENvbG9yICsgIlwiPiIgKyBmb3JtQ29uZmlnLnllc1RleHQgKyAiPC9zcGFuPiI7ICU-CiAgICAgIDwlIH0gZWxzZSB7ICU-CiAgICAgIDwlIHllc1RleHQgPSBmb3JtQ29uZmlnLnllc1RleHQ7ICU-CiAgICAgIDwlIH0gJT4KICAgICAgPCUgaWYgKGZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yKSB7ICU-CiAgICAgIDxidXR0b24gY2xhc3M9InBvc3QtZmItcmVzcC1idXR0b24iCiAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IDwlPWZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yJT47IGJvcmRlcjogMXB4IHNvbGlkIDwlPWZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yJT4iCiAgICAgICAgaWQ9Imludml0ZS1mYi15ZXMtYnV0dG9uIiB0YWJpbmRleD0iMCI-CiAgICAgICAgPCU9IHllc1RleHQgJT4KICAgICAgPC9idXR0b24-CiAgICAgIDwlIH0gZWxzZSB7ICU-CiAgICAgIDxidXR0b24gY2xhc3M9InBvc3QtZmItcmVzcC1idXR0b24iIGlkPSJpbnZpdGUtZmIteWVzLWJ1dHRvbiIgdGFiaW5kZXg9IjAiPgogICAgICAgIDwlPSB5ZXNUZXh0ICU-CiAgICAgIDwvYnV0dG9uPgogICAgICA8JSB9ICU-CiAgICAgIDxidXR0b24gY2xhc3M9InBvc3QtZmItcmVzcC1idXR0b24iIGlkPSJpbnZpdGUtZmItbm8tYnV0dG9uIiB0YWJpbmRleD0iMCI-CiAgICAgICAgPCU9IG5vVGV4dCAlPgogICAgICA8L2J1dHRvbj4KICAgICAgPCUKICAgICAgICB2YXIgcG93ZXJlZEJ5ID0gJ1Bvd2VyZWQgYnknOwogICAgICAgIGlmIChleHRyYUluZm8ucG93ZXJlZEJ5KSB7CiAgICAgICAgICBwb3dlcmVkQnkgPSBleHRyYUluZm8ucG93ZXJlZEJ5OwogICAgICAgIH0KICAgICAgJT4KICAgICAgPGRpdiBpZD0iYXVyeWMtZmVlZGJhY2stY2FudmFzIj4KICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mYm1vZGFsLWZvb3RlciI-CiAgICAgICAgICA8YSBocmVmPSJodHRwczovL3d3dy5hdXJ5Yy5jb20vIiBjbGFzcz0iUG93ZXJlZEJ5QXVyeWMiIHRpdGxlPSI8JT0gcG93ZXJlZEJ5ICU-IEF1cnljIiBhcmlhLWxhYmVsPSI8JT0gcG93ZXJlZEJ5ICU-IEF1cnljIiB0YXJnZXQ9Il9ibGFuayIgdGFiaW5kZXg9IjAiPgogICAgICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj0idHJ1ZSI-PCU9IHBvd2VyZWRCeSAlPjwvc3Bhbj4KICAgICAgICAgICAgPGltZyBhcmlhLWhpZGRlbj0idHJ1ZSIgc3JjPSJodHRwczovL2ZiLWxvZ28uYXVyeWMuY29tL2RhcmstbG9nby5zdmciIGFsdD0iQXVyeWMiIHN0eWxlPSJ3aWR0aDo2MHB4ICFpbXBvcnRhbnQ7aGVpZ2h0OjIwcHggIWltcG9ydGFudDsiPgogICAgICAgICAgPC9hPiAgICAgICAgICAgICAgCiAgICAgICAgPC9kaXY-CiAgICAgIDwvZGl2PgogICAgPC9kaXY-CiAgPC9kaXY-CjwvZGl2Pgo=PGRpd",window[constants.symbols.FBTHANKYOU]="iByb2xlPSJkaWFsb2ciCiAgICBhcmlhLW1vZGFsPSJ0cnVlIiB0aXRsZT0iPCU9IG1ldGEuZXBpbG9ndWV0ZXh0ICU-IiBhcmlhLWxhYmVsPSJUaGFuayBZb3UgRm9yIFN1Ym1pdHRpbmcgdGhlIEZlZWRiYWNrIgpjbGFzcz0iYXVyeWMtZmVlZGJhY2sgYXVyeWMtdGhhbmt5b3UtY29udGFpbmVyIj4KICAgIDxkaXYgZGF0YVR5cGU9ImF1cnljLWZicSIgY2xhc3M9ImF1cnljLWZlZWRiYWNrLXRpdGxlLXNlY3Rpb24iPgogICAgICAgIDwlIGlmIChtZXRhLmxvZ28xZ3JhcGhpYykgeyAlPgogICAgICAgIDxpbWcgc3JjPSI8JT0gbWV0YS5sb2dvMWdyYXBoaWMgJT4iIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1mYmxvZ28iIGFsdD0iU2l0ZSBMb2dvIi8-CiAgICAgICAgPCUgfSAlPgogICAgPC9kaXY-CiAgICA8ZGl2IGRhdGFUeXBlPSJhdXJ5Yy1mYnEiIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay10aXRsZS1zZWN0aW9uIj4KICAgICAgICA8JSBpZiAobWV0YS5lcGlsb2d1ZXRleHQgJiYgbWV0YS5lcGlsb2d1ZXRleHQubGVuZ3RoID4gMSkgeyU-CiAgICAgICAgICAgIDwlIGlmIChtZXRhLmVwaWxvZ3VldGV4dC5pbmRleE9mKCdoMScpID09PSAtMSkgeyU-CiAgICAgICAgICAgICAgICA8aDEgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWZiZm9ybS1oZWFkdGFnIGF1cnljLWZlZWRiYWNrLWZiZm9ybS1oZWFkdGFnLWgxIj48JT0gbWV0YS5lcGlsb2d1ZXRleHQgJT48L2gxPgogICAgICAgICAgICA8JSB9IGVsc2UgeyAlPgogICAgICAgICAgICAgICAgPCU9IG1ldGEuZXBpbG9ndWV0ZXh0ICU-CiAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICA8JSB9IGVsc2UgeyU-CiAgICAgICAgICAgIDxoMSBjbGFzcz0iYXVyeWMtZmVlZGJhY2stZmJmb3JtLWhlYWR0YWcgYXVyeWMtZmVlZGJhY2stZmJmb3JtLWhlYWR0YWctaDEiPllvdXIgRmVlZGJhY2sgSGFzIEJlZW4gU3VibWl0dGVkPC9oMT4KICAgICAgICA8JSB9ICU-CiAgICA8L2Rpdj4KICAgIDwlIHZhciBidG5UZXh0ID0gIiI7ICU-CiAgICA8JSBpZiAoZm9ybUNvbmZpZy5idG5Gb250Q29sb3IpIHsgJT4KICAgICAgICA8JSBidG5UZXh0ID0gIjxzcGFuIHN0eWxlPVwiY29sb3I6IiArIGZvcm1Db25maWcuYnRuRm9udENvbG9yICsgIlwiPiIgKyBleHRyYUluZm8ub2sgKyAiPC9zcGFuPiI7ICU-CiAgICA8JSB9IGVsc2UgeyAlPgogICAgICAgIDwlIGJ0blRleHQgPSBleHRyYUluZm8ub2s7ICU-CiAgICA8JSB9ICU-CiAgICA8JSBpZiAoZm9ybUNvbmZpZy5idG5CYWNrZ3JvdW5kQ29sb3IpIHsgJT4KICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXIiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhdXJ5Yy1jbG9zZS1idG4iCiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9IjAiIGF1dG9mb2N1cz0iYXV0b2ZvY3VzIgogICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9IkV4aXQgRmVlZGJhY2sgRm9ybSIKICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogPCU9Zm9ybUNvbmZpZy5idG5CYWNrZ3JvdW5kQ29sb3IlPjsgYm9yZGVyOiAxcHggc29saWQgPCU9Zm9ybUNvbmZpZy5idG5CYWNrZ3JvdW5kQ29sb3IlPiI-CiAgICAgICAgICAgICAgICA8JT0gYnRuVGV4dCAlPgogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8ZGl2PgogICAgPCUgfSBlbHNlIHsgJT4KICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXIiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhdXJ5Yy1jbG9zZS1idG4iCiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9IjAiIGF1dG9mb2N1cz0iYXV0b2ZvY3VzIgogICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9IkV4aXQgRmVlZGJhY2sgRm9ybSIKICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDojMjNDNmY1OyBib3JkZXI6IDFweCBzb2xpZCAjMjNDNmY1Ij4KICAgICAgICAgICAgICAgIDwlPSBidG5UZXh0ICU-CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICA8ZGl2PgogICAgPCUgfSAlPgoKPC9kaXY-Cg==PGRpd"}var FbModule=(createClass(rec,[{key:"setupFeedback",value:function(e){var t=this;this.setupProjects(e),navigationEvent.addListener(function(){t.setupProjects(e)})}},{key:"setupProjects",value:function(n){var r,a=this;globalSessionTracker.isCanceled()||(r=function(e){return function(){return globalPopupController.initialize(e,!0)}},this.feedbackCfg.instances.forEach(function(e){if(a.feedbackCfg.fbStandalone){var t=e.feedbackThrottles&&e.feedbackThrottles.cookie||"auryc.fbt";return(t+=".st."+e.projectId,Cookie.Get(t))?void a.showMessage(!0):void r(e)()}var i;config.checkFeedbackScheduled(e)?n.isConfigInstanceActive(e,window.location.href)?e.trigger?e.trigger.handleNavigation(!0):(i=new Trigger(e,n),(e.trigger=i).fbTabClicked.addListener(r(e))):e.trigger&&e.trigger.handleNavigation(!1):logger.warn("fb: badge is disabled, not in Scheduled")}))}},{key:"showMessage",value:function(e){e?(document.querySelectorAll("div[class=submited]").forEach(function(e){e.style.display="flex"}),document.querySelectorAll("div[class=deactivated]").forEach(function(e){e.style.display="none"})):(document.querySelectorAll("div[class=submited]").forEach(function(e){e.style.display="none"}),document.querySelectorAll("div[class=deactivated]").forEach(function(e){e.style.display="flex"}))}},{key:"readyFn",value:function(){var e=this,t=window.location.hash,i=!!getHashParam(t,"previewmode"),n=!!getHashParam(t,"previewbadgemode")||!!getHashParam(t,"previewfbtabmode"),r=!!getHashParam(t,"previewinvitemode"),a=new Criteria;if(i||n||r){if(i)return void(new Preview).showFeedback();if(n)return void(new Preview).displayFBTab();if(r)return void(new Preview).showFeedbackInvite()}else feedbackAPI._makePublic(feedbackAPI,this.feedbackCfg,globalPopupController),feedbackAPI.feedbackEnabled.addListener(function(){return e.setupFeedback(a)}),this.setupFeedback(a)}},{key:"removeFBStyle",value:function(){document.querySelectorAll("style[id=auryc_style]").forEach(function(e){e.parentNode.removeChild(e)})}},{key:"init",value:function(){var t,e,i;config.isProductEnabled("feedback")&&config.isFeedbackEnabled()?config.isVisualEditorMode()?logger.warn("fb: product disabled"):(t=browser$1.getFbParams(),browser$1.getPath(),initTemplate(),e=config.getProductConfig("feedback"),t&&t.fbId&&(e.instances=e.instances.filter(function(e){return e.showBadge=!1,e.popupDelayEnabled=!1,e.fbStandalone=!0,e.projectId===parseInt(t.fbId)}),0===e.instances.length?this.showMessage():e.instances[0].disabled&&(e.instances=[],this.showMessage()),e.fbStandalone=!0,t.email&&window.aurycBehaviorAPI.identify(t.email)),this.feedbackCfg=e,this.readyFn()):(logger.log("fb: product disabled"),this.removeFBStyle(),i={isFBProductEnabled:function(){return!1}},feedbackAPI._makePublic(i))}},{key:"pause",value:function(){this.feedbackCfg&&this.feedbackCfg.instances&&this.feedbackCfg.instances.forEach(function(e){var t=e.trigger;t&&(t.disable(),t.delayFBTabTimer&&clearTimeout(t.delayFBTabTimer),t.delayedPopupTimer&&clearTimeout(t.delayedPopupTimer)),e.trigger=null})}},{key:"resume",value:function(){var t=!1;this.feedbackCfg&&this.feedbackCfg.instances&&this.feedbackCfg.instances.forEach(function(e){e.trigger||(t=!0)}),t&&this.init()}}],[{key:"getInstance",value:function(){return rec.instance||(rec.instance=new rec),rec.instance}}]),rec);function rec(){classCallCheck(this,rec)}var ControllerApi=(createClass(hfc,[{key:"pause",value:function(){try{this.rcController=RcController.getInstance(window),this.rcController.pause(),FbModule.getInstance().pause()}catch(e){}}},{key:"resume",value:function(){try{this.rcController=RcController.getInstance(window),this.rcController.resume(),FbModule.getInstance().resume()}catch(e){}}}],[{key:"getInstance",value:function(){return hfc.instance||(hfc.instance=new hfc),hfc.instance}}]),hfc);function hfc(){classCallCheck(this,hfc)}var attempts$1=20;function checkAndSet(){if(logger.log("check and set called"),window.aurycBehaviorAPI&&window.aurycFeedbackAPI&&window.aurycRecordAPI){logger.log("expose public API"),window.auryc=new AurycPublicApi(window.aurycBehaviorAPI,window.aurycFeedbackAPI,window.aurycRecordAPI,new LinkidAPI,ControllerApi.getInstance()),window.auryc.__aurycInit__=!0;var e=window.aurycReadyCb;if(e&&0<e.length)for(var t=e.length,i=0;i<t;i++)try{e[i]()}catch(e){console.error("API error: "+e.message,e.stack?e.stack:"stacktrace unavailable")}afterInit()}else 0<attempts$1&&(setTimeout(checkAndSet,250),attempts$1--)}function init$1(){logger.log("api domready"),config.isProductEnabled("behavior")?checkAndSet():logger.log("product disabled. Don't expose API")}function afterInit(){var e,t=config.getCurrentIdentity();t&&0<t.length&&((e={})[constants.symbols.IDENTITY_IN_SESSION]=t,window.auryc.addSessionProperties(e))}var api={init:init$1};function isPlatformSupported(e,t,i){var n,r,a,o;isInitialized()?i&&i():(n=config.getConfig("browser_cutoff","base"),r=config.getConfig("platform_cutoff","base"),(a=n[e.browser.name])&&e.browser.version<a||(o=r[e.os.name])&&e.os.version<o?i&&i():t&&location$1.initGeoIP(initGeoCb(t)))}function initGeoCb(e){return function(){location$1.initGeoInfo(e)}}function isInitialized(){return!(!window.auryc||!window.auryc.__aurycInit__)}function isSupported(e,t){var i=getInstance();i.isAvail?isPlatformSupported(i,e,t):i.brAvailEvent.addListener(function(){isPlatformSupported(i,e,t)})}function checkExclusions(){var e=config.getExcludedUrls(),t=config.getIncludedUrls(),i=!0,n=!0;return t&&0<t.length&&(i=config.matchUrl(t,!0)),e&&0<e.length&&(n=config.matchUrl(e,!1)),i&&n}function init$2(e,t){logger.log("*** init called",!0),config.init(),isSupported(e,t)}var utils={init:init$2},IdentifyAPI=(createClass(Kfc,[{key:"_makePublic",value:function(e){_.isDefined(e)&&(window.auryc||(window.aurycBehaviorAPI={}),window.aurycBehaviorAPI=e)}},{key:"_loadEventGroups",value:function(e){var t,i=this.sessStg.getByKey(this._getDefinedEventsStorKey());i?e(i):(t=this._getUbaApi()+"/eventgroup/?projectId="+config.getSiteid(),this._postRequest({uri:t,type:"EVENTGROUP",callback:e}))}},{key:"_getUbaApi",value:function(){return"https://"+config.getConfig("uba_api_uri","base")}},{key:"_getTokenUri",value:function(){return"https://"+config.getConfig("token_uri","base")}},{key:"_getDefinedEventsStorKey",value:function(){return"DE_"+config.getSiteid()}},{key:"_tokenCallBack",value:function(e,t,i){var n;t&&(n={"Content-Type":"application/json","X-Authorized-Identity":config.getSiteid(),"X-Authorized-Token":t},this._sendRequest(i,n,"GET",e))}},{key:"_postRequest",value:function(t,i){var e,n=config.getConfig("siteToken","base");n?this._tokenCallBack(i,n,t):(e={uri:this._getTokenUri()+"/"+config.getSiteid()+"/token",type:"TOKEN",callback:function(e){return this._tokenCallBack(i,e,t)}},this._sendRequest(e,null,"GET",i))}},{key:"_validateArrayType",value:function(e){if(!e||!_.isArray(e)||0===e.length)return!1;var t=_typeof(e[0]).toLowerCase();if("string"!==t&&"number"!==t&&"boolean"!==t)return!1;for(var i=0;i<e.length;i++)if(null===e[i]||_typeof(e[i])!==t||1024<t.length)return!1;return!0}},{key:"_validateKey",value:function(e){return!!e&&"undefined"!==e&&e.length<=1024}},{key:"_transformProps",value:function(e){var t,i={};for(t in e)if(_.isArray(e[t])){e[t].length>constants.storage.MAX_PROPERTIES&&(e[t]=e[t].slice(0,constants.storage.MAX_PROPERTIES)),i[t]=[];for(var n=0;n<e[t].length;n++){var r=e[t][n];null!=r&&("string"===(void 0===r?"undefined":_typeof(r)).toLowerCase()?i[t].push(r.toLowerCase().substr(0,1024)):"boolean"!=typeof r&&"number"!=typeof r||i[t].push(r))}0<i[t].length?i[t]=JSON.stringify(i[t]):delete i[t]}else null!==e[t]&&("string"==typeof e[t]?i[t]=e[t].substr(0,1024):"number"!=typeof e[t]&&"boolean"!=typeof e[t]||(i[t]=e[t]));return i}},{key:"_sendRequest",value:function(i,e,t,n){try{var r=window.XMLHttpRequest?new window.XMLHttpRequest:window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):null;r.open(t,i.uri,!0);var a,o=this;for(a in r.onreadystatechange=function(){var e,t;4===this.readyState&&200===this.status&&("TOKEN"===i.type?r.responseText&&1<r.responseText.length&&(e={siteToken:JSON.parse(r.responseText).siteToken},o.sessStg.setSessionByKey(constants.symbols.APITOKEN+"_"+config.getSiteid(),JSON.stringify(e),constants.storage.SCOPE.SESSION.BROWSER),i.callback&&"function"==typeof i.callback&&i.callback.call(o,r.responseText)):"EVENTGROUP"===i.type&&r.responseText&&1<r.responseText.length&&(t=(t=JSON.parse(r.responseText)).data.map(function(e,t){return{id:e.id,eventName:e.name,eventType:e.eventType,snapshotProperties:e.snapshotProperties,jsCriteria:e.jsCriteria}}),o.sessStg.setTabByKey(o._getDefinedEventsStorKey(),t),logger.log(o._getDefinedEventsStorKey(),t),i.callback&&"function"==typeof i.callback&&i.callback.call(o,t))),"USERIDENTIFY"===i.type&&(4===this.readyState&&200===this.status?r.responseText&&1<r.responseText.length&&i.callback&&"function"==typeof i.callback&&i.callback.call(o,r.responseText):4===this.readyState&&226===this.status&&i.callback&&"function"==typeof i.callback&&i.callback.call(o,226))},e)r.setRequestHeader(a,e[a]);n?r.send(JSON.stringify(n)):r.send()}catch(e){logger.log(e)}}},{key:"_isBehaviorTrackingEnabled",value:function(){return!0}},{key:"getSessionMetadata",value:function(){return globalSessionTracker.getSessionMetadata()}},{key:"endSession",value:function(){return globalSessionTracker.endSession(!0)}},{key:"clearUserCookie",value:function(e){var t=!0;e&&!this.persStg.getByKey(constants.events.IDENTITYVALUE)&&(logger.log("called clear user cookie but identity is null. skip"),t=!1),t&&(logger.log("clear user cookie"),globalSessionTracker.removeUser(),globalSessionTracker.renewSession())}}]),Kfc);function Kfc(e,t,i){var l=this;classCallCheck(this,Kfc),this.identify=function(e){var t;_.isDefined(e)&&(e+=""),e&&0<e.length&&e.length<256&&"nan"!==e&&"n/a"!==e&&"undefined"!==e&&"null"!==e&&"nil"!==e&&(l.persStg&&l.persStg.resetUserProp(),l.persStg&&l.persStg.setByKey(constants.events.IDENTITYVALUE,e),window.localStorage&&window.localStorage.setItem(constants.storage.IDENTITY_KEY,e),AurycPubSub.publish(constants.events.USERIDENTIFY,{identity:e}),(t={})[constants.symbols.IDENTITY_IN_SESSION]=e,t[constants.symbols.IDENTITY_INIT]=e,l.addSessionProperties(t))},this.addSessionProperties=function(e){l.errorMsg&&l.errorMsg.badProp;_.isObject(e)&&!_.isArray(e)&&(e=l._transformProps(e))&&!_.isEmptyObject(e)&&AurycPubSub.publish(constants.events.USERIDENTIFY,{sessionProperties:e})},this.addInternalSessionProperties=function(e){l.errorMsg&&l.errorMsg.badProp;_.isObject(e)&&!_.isArray(e)&&(e=l._transformProps(e))&&!_.isEmptyObject(e)&&AurycPubSub.publish(constants.events.USERIDENTIFY,{internalSessionProperties:e})},this.addUserProperties=function(e){l.errorMsg&&l.errorMsg.badProp;var t=l.persStg.getByKey(constants.events.USERID);if(_.isObject(e)&&!_.isArray(e)&&t){e=l._transformProps(e);var i=null,n={};try{i=(n=JSON.parse(l.persStg.getUserProp(constants.events.USERPROP)))[t]}catch(e){}if(n[t]=e,i&&JSON.stringify(e)===JSON.stringify(i))return void logger.log("user properties already set and identical to the new one. skip");logger.log("user properties not identical to the new one. call API");var r=l.persStg.getStorageSize(),a=JSON.stringify(n),o=JSON.stringify(e);if(r+a.length<5120)l.persStg.setUserProp(constants.events.USERPROP,a);else if(o.length<1024){for(var s=Object.keys(n),c=0;c<s.length;c++)s[c]!==t&&delete n[s[c]];a=JSON.stringify(n),l.persStg.setUserProp(constants.events.USERPROP,a)}AurycPubSub.publish(constants.events.USERIDENTIFY,{userProperties:e})}},this.track=function(e,t){var i=!0;_.isObject(t)&&!_.isArray(t)||(t={}),e&&_.isString(e)&&!(1024<e.length)||(i=!1,console.error(e));i&&(t=l._transformProps(t),AurycPubSub.publish(constants.events.TRACKCUSTOMEVENT,{eventType:constants.events.CUSTOM_EVENT,eventName:e,eventProperties:t||{},currentTime:_.now()}))},this.product=e||"auryc",this.sessStg=t,this.persStg=i,this.errorMsg={badProp:"The property key or values are invalid",dupName:"The name has already been used. Please choose a different name",badIdentity:"The identity value is invalid"}}function setup(){trackAdobeTT()}function getAdobeTTVar(){var e=config.getConfig("ABTest","behavior");if(e)return e.adobeTT}function getAdobeCNames(){var e=[],t=[],i=window.ttMETA;if(i&&_.isArray(i))for(var n=0;n<i.length;n++){var r=i[n];r.campaign&&""!==r.campaign&&(e.push(r.campaign),r.experience&&""!==r.experience&&t.push(r.campaign+"="+r.experience))}return{cNames:e,ceNames:t}}function instrument(e){var t=getAdobeCNames(),i={};e.campaign_var&&0<t.cNames.length&&(i[e.campaign_var]=t.cNames),e.campaign_exp_var&&0<t.ceNames.length&&(i[e.campaign_exp_var]=t.ceNames),_.isEmptyObject(i)||window.aurycBehaviorAPI.addUserProperties(i)}function trackAdobeTT(){var e=getAdobeTTVar();e&&!0===e.enabled&&(window.aurycBehaviorAPI&&window.aurycBehaviorAPI.addUserProperties?instrument(e):window.aurycReadyCb.push(function(){instrument(e)}))}var abtests={setup:setup,getAdobeTTVar:getAdobeTTVar,getAdobeCNames:getAdobeCNames,instrument:instrument,trackAdobeTT:trackAdobeTT};function setup$1(){var e=config.getConfig("sessionProperties","behavior");if(e&&_.isArray(e)){for(var t={},i=0;i<e.length;i++){var n,r=e[i];r.source&&"cookie"===r.source&&r.key&&r.prop&&(null!==(n=Cookie.Get(r.key))&&(r.type&&("number"===r.type.toLowerCase()?n=+n:"boolean"===r.type.toLowerCase()&&(n=!!n)),t[r.prop]=n))}addSessionProps(t)}}function addSessionProps(e){_.isEmptyObject(e)||(window.aurycBehaviorAPI&&window.aurycBehaviorAPI.addSessionProperties?window.aurycBehaviorAPI.addSessionProperties(e):window.aurycReadyCb.push(function(){window.aurycBehaviorAPI.addSessionProperties(e)}))}var sessionPropsAutoCapture={setup:setup$1,addSessionProps:addSessionProps};function setup$2(){var e=config.getConfig("integrations","behavior");_.isDefined(e)&&!0===e.rulai&&initRulai()}var attempts$2=5;function _trackRulaiSession(e){e?(_safeAddSessionProp({rulaiSessionId:[e]}),_safeAddUserProp({rulaiSessionIdForUser:[e]})):0<attempts$2--&&setTimeout(function(){_trackRulaiSession(e)},1e3)}function initRulai(){window.addEventListener("message",function(e){if(e.origin&&-1<e.origin.indexOf("console.rul.ai")&&e.data)try{var t=JSON.parse(e.data);"emitRulaiSession"===t.type?(t.sessionId?_safeTrackEvent("Rulai Chat Started",{sessionid:t.sessionid}):_safeTrackEvent("Rulai Chat Started"),_trackRulaiSession(t.sessionId)):"liveAgentConnected"===t.type&&_safeTrackEvent("Rulai Agent Connected")}catch(e){}},!1)}function _safeTrackEvent(e,t){window.auryc&&window.auryc.track?t?window.auryc.track(e,t):window.auryc.track(e):window.aurycReadyCb.push(function(){t?window.auryc.track(e,t):window.auryc.track(e)})}function _safeAddSessionProp(e){window.auryc&&window.auryc.addSessionProperties?window.auryc.addSessionProperties(e):window.aurycReadyCb.push(function(){window.auryc.addSessionProperties(e)})}function _safeAddUserProp(e){window.auryc&&window.auryc.addUserProperties?window.auryc.addUserProperties(e):window.aurycReadyCb.push(function(){window.auryc.addUserProperties(e)})}var extIntegration={setup:setup$2},UrlChangeTracker=(createClass(Lhc,[{key:"init",value:function(){history.pushState&&window.addEventListener&&(this.path=this.getPath(),this.updateTrackerData=this.updateTrackerData.bind(this),this.originalPushState=history.pushState,history.pushState=function(e,t){e&&this.isObject(e)&&t&&(e.title=t),this.originalPushState.apply(history,arguments),this.updateTrackerData()}.bind(this),this.originalReplaceState=history.replaceState,history.replaceState=function(e,t){e&&this.isObject(e)&&t&&(e.title=t),this.originalReplaceState.apply(history,arguments),this.updateTrackerData()}.bind(this),window.addEventListener("popstate",this.updateTrackerData))}},{key:"updateTrackerData",value:function(n){n=!1!==n,setTimeout(function(){var e,t=this.path,i=this.getPath();checkExclusions()?(globalSessionTracker.isCanceled()&&window.auryc.resume(),t!=i&&this.shouldTrackUrlChange.call(this,i,t)&&(this.path=i,e=this.isObject(history.state)&&history.state&&history.state.title||document.title,n&&(globalSessionTracker.incPV(),globalSessionTracker.setSpaSendPV(!0),this.handler({path:this.path,title:e,url:this.path})()))):window.auryc.pause()}.bind(this),0)}},{key:"shouldTrackUrlChange",value:function(e,t){return e&&t&&!0!==window._auryc_is_inner_frame_detected_}},{key:"remove",value:function(){window.removeEventListener("popstate",this.updateTrackerData),history.replaceState=this.originalReplaceState,history.pushState=this.originalPushState,this.path=null,this.updateTrackerData=null,this.originalReplaceState=null,this.originalPushState=null}},{key:"getPath",value:function(){return location.href}},{key:"isObject",value:function(e){return"object"==(void 0===e?"undefined":_typeof(e))}}]),Lhc);function Lhc(e){classCallCheck(this,Lhc),this.handler=e}var EventProcessorFactory=(createClass(cic,[{key:"getProcessor",value:function(e){return this.eventProcessors[e]}},{key:"setupEventProcessors",value:function(){this.eventProcessors[constants.events.CLICKTRACKER]=this.getClickEventProcessor(),this.eventProcessors[constants.events.PAGEVIEWTRACKER]=this.getPageViewProcessor(),this.eventProcessors[constants.events.FEEDBACKTRACKER]=this.getFeedbackEventProcessor(),this.eventProcessors[constants.events.USERIDENTIFY]=this.getIdentifyUserProcessor(),this.eventProcessors[constants.events.PINGTRIGGER]=this.getPingEventProcessor()}},{key:"getClickEventProcessor",value:function(){return function(e,t,i,n,r){var a;e=Object.assign(e,r),AurycPubSub.findTopic(constants.events.CLICKTRIGGER)?AurycPubSub.publish(constants.events.CLICKTRIGGER,e):a=setInterval(function(){AurycPubSub.publish(constants.events.CLICKTRIGGER,e)&&clearInterval(a)},100)}}},{key:"getPageViewProcessor",value:function(){var s=this;return function(e,t,i,n,r){var a,o=s.eventGenerator.getEvent(e,t,n,r);o&&(AurycPubSub.findTopic(constants.events.PAGEVIEWTRIGGER)?AurycPubSub.publish(constants.events.PAGEVIEWTRIGGER,o):a=setInterval(function(){AurycPubSub.publish(constants.events.PAGEVIEWTRIGGER,o)&&clearInterval(a)},100))}}},{key:"getIdentifyUserProcessor",value:function(){var o=this.eventWriter;return function(e,t,i,n){var r,a;globalSessionTracker.getSessionMetadata().isOver||(r=EventType.IdentifyUserT(),a=globalSessionTracker.getSessionMetadata().userId,n.userProperties?(r=EventType.UserProfileT(),o.append(r,{userId:a,payload:n.userProperties})):n.sessionProperties?(r=EventType.SessionPropT(),o.append(r,{payload:n.sessionProperties})):n.internalSessionProperties?(r=EventType.InternalSessionPropT(),o.append(r,{payload:n.internalSessionProperties})):n.sessionMerge?(r=EventType.MergeSessionT(),o.append(r,{u:n.sessionMerge})):o.append(r,_.extend({userId:a},n)))}}},{key:"getPingEventProcessor",value:function(){var t=this.eventWriter;return function(e){t.ping()}}},{key:"getFeedbackEventProcessor",value:function(){var s=this,c=this.eventWriter;return function(e,t,i,n){var r=n.eventName;"Feedback Submitted"===r&&s.eventWriter.updateToCoBrowsing();var a=EventType.CustomEventT(),o={name:n.eventProperties.name,formId:n.eventProperties.formid,p:n.eventProperties.formid,et:n.eventProperties.et};n.eventProperties.respid&&(o.respid=n.eventProperties.respid),c.append(a,{k:r,v:JSON.stringify(o),source:locationInfo()})}}}]),cic);function cic(e){classCallCheck(this,cic),this.storKey=config.getSiteid()+"_rec",this.browser=getInstance(),this.stg=e,this.eventWriter=EventWriter.getInstance(this.stg,this.storKey),this.eventWriter.setReady(),this.eventProcessors={},this.eventGenerator=EventGenerator.getInstance(),this.setupEventProcessors()}var EventManager=(createClass(Uic,[{key:"getHandler",value:function(i,n,e,r){return function(t){e&&e.forEach(function(e){e(t,i,n,r)})}}},{key:"addEventProcessor",value:function(e,t){this.eventProcessorMap[e]||(this.eventProcessorMap[e]=[]),this.eventProcessorMap[e].push(t)}},{key:"setupEventHandler",value:function(t,i){var n=this;AurycPubSub.addListener(t,function(e){n.getHandler(t,i,n.eventProcessorMap[t],e).call(n,t,i,n.eventProcessorMap[t],e)})}},{key:"setupPageviewHandler",value:function(e,t){this.addEventProcessor(t,this.eventProcessorFactory.getProcessor(t)),this.setupEventHandler(t,e)}},{key:"setupURLChangeHandler",value:function(t,i){var n=this;new UrlChangeTracker(function(e){return function(){n.getHandler(i,t,n.eventProcessorMap[i],e).call(n,i,t,n.eventProcessorMap[i],e)}}).init()}},{key:"setupFeedbackHandler",value:function(e,t){this.addEventProcessor(t,this.eventProcessorFactory.getProcessor(t)),this.setupEventHandler(t,e)}},{key:"setupCustomerHandler",value:function(e,t){this.addEventProcessor(t,this.eventProcessorFactory.getProcessor(t)),this.setupEventHandler(t,e)}}],[{key:"setup",value:function(e){return this.instance||(this.instance=new Uic(e)),this.instance}}]),Uic);function Uic(e){classCallCheck(this,Uic),this.stg=e,this.eventProcessorMap={},this.eventProcessorFactory=new EventProcessorFactory(e),this.setupPageviewHandler(e,constants.events.PAGEVIEWTRACKER),this.setupFeedbackHandler(e,constants.events.FEEDBACKTRACKER),config.isSPAEnabled()&&this.setupURLChangeHandler(e,constants.events.PAGEVIEWTRACKER),this.setupCustomerHandler(e,constants.events.PINGTRIGGER),this.setupCustomerHandler(e,constants.events.USERIDENTIFY)}function init$3(e){if(config.isVisualEditorMode())return logger.warn("at: product disabled"),window.auryc=new LinkidAPI,void config.addShimAPIs();var t=DataLayer.getInstance(constants.symbols.SESSION);setupIdentifyAPI(t,DataLayer.getInstance(constants.symbols.PERMANENT))&&(setupEventManager(t,e),abtests.setup(),extIntegration.setup(),sessionPropsAutoCapture.setup())}function setupIdentifyAPI(e,t){var i=new IdentifyAPI("",e,t);if(!config.isProductEnabled("behavior")||isFeedbackPreview()||config.isVisualEditorMode()){var n={_isBehaviorTrackingEnabled:function(){return!1}};return i._makePublic(n),logger.warn("ubt: product disabled"),!1}return logger.log("ubt: product enabled"),logger.log("ubt: domReady"),config.isSnapshotEnabled()&&i._loadEventGroups(function(e){AurycSP.setEventGroups(e)}),i._makePublic(i),!0}function isFeedbackPreview(){var e=window.location.hash,t=!!getHashParam(e,"previewmode"),i=!!getHashParam(e,"previewbadgemode")||!!getHashParam(e,"previewfbtabmode");return t||i}function setupEventManager(e,t){EventManager.setup(e,document),globalSessionTracker.initSessionOrPV(t);var i=setInterval(function(){AurycPubSub.publish(constants.events.UBTINIT)&&clearInterval(i)},200)}var behavior={init:init$3},RecordAPI=(createClass(Ujc,[{key:"_isReplayProductEnabled",value:function(){return this.enabled}},{key:"getReplayUrl",value:function(e,t){try{var i,n,r=globalSessionTracker.getSessionMetadata().siteId,a=globalSessionTracker.getSessionMetadata().sessionId;e&&"function"==typeof e&&(i="utm_source=integration"+(t?"&utm_medium="+t.substr(0,256):""),n=config.getConfig("replay_url")+r+":"+a+"&"+i,logger.log("playback url:"+n),e(n))}catch(e){logger.warn("Exception in get replay url: ",e)}}},{key:"replayUrl",value:function(){try{var e=globalSessionTracker.getSessionMetadata().siteId,t=globalSessionTracker.getSessionMetadata().sessionId;return config.getConfig("replay_url")+e+":"+t}catch(e){return"Not available"}}},{key:"getReplayUrlGA",value:function(e){this.getReplayUrl(e,"ga")}},{key:"getReplayUrlNR",value:function(e){this.getReplayUrl(e,"nr")}},{key:"getReplayUrlAdobe",value:function(e){this.getReplayUrl(e,"adobe")}},{key:"getReplayUrlIntercom",value:function(e){this.getReplayUrl(e,"intercom")}}]),Ujc);function Ujc(e,t){classCallCheck(this,Ujc),this.win=e,this.enabled=t}function init$4(e){if(!config.isProductEnabled("record"))return logger.warn("record product disabled"),void(window.aurycRecordAPI=new RecordAPI(window,!1));logger.log("record product enabled");var t=RcController.getInstance(window);config.isVisualEditorMode()?window.aurycRecordAPI=new RecordAPI(window,!1):(t.init(!0,e),window.aurycRecordAPI=new RecordAPI(window,!0))}var record$1={init:init$4},sessionKeys={AurycHashKey:"_aurychash",AurycTimeZone:"_aurycTimeZone",TimeTraveling:"timeTraveling",AurycMode:"_aurycMode"};function getHashParam$2(e,t){var i=e.match(new RegExp(t+"=([^&]*)"));return i?i[1]:null}function loadScript(e,t){var i=document.createElement("script");i.type="text/javascript",i.charset="UTF-8",i.src=e,t&&(i.onload=t);var n=document.getElementsByTagName("script");0<n.length?n[0].parentNode.insertBefore(i,n[0]):document.head.appendChild(i)}function loadCss(e,t){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.charset="UTF-8",i.href=e,t&&(i.onload=t),document.head.appendChild(i)}function loadEventEditor(e){var t;window.aurycLoadEditor||(loadCss((t=config.getConfig("editor_uri","base"))+"/editor.css"),loadScript(t+"/editor.js",function(){window.aurycLoadEditor(e)}),getLinkIdHandler().process())}function initEventEditor(e){var t;Boolean.toString().indexOf("[native code]")<0&&(t=document.createElement("iframe"),document.documentElement.appendChild(t),window.Boolean=t.contentWindow.Boolean,document.documentElement.removeChild(t)),loadEventEditor({exitEditorMode:exitEditorMode,siteId:config.getConfig("siteid"),siteToken:config.getConfig("siteToken"),storage:e,timeZone:e.getByKey("_aurycTimeZone"),utils:{eventElements:{normalize:normalize,attrCode:attrCode}}})}function isMatchingSite(e,t){if(e&&t){var i=config.getConfig("siteid"),n=config.getConfig("siteToken");if(e===i&&t===n)return 1}}function init$5(e){try{var t,i={};if((e=e||window.location.hash)&&"editor"===getHashParam$2(e,"mode")){var n=window.location.href,r=n.indexOf("mode=editor"),a=n.charAt(r-1);"#"!==a&&"&"!==a||r--,"#"===a&&"?"===n.charAt(r-2)&&r--;var o,s,c,l=window.history.length;history.replaceState("",document.title,n.substring(0,r));var u=getHashParam$2(e,"t"),g=encoder.decodeBase64(u||"");if(!g)return void console.log("siteId or siteToken does not exist");if(s=getHashParam$2(g,"siteId"),c=getHashParam$2(g,"siteToken"),o=getHashParam$2(g,"timeZone"),!isMatchingSite(s,c))return void console.log("siteId or siteToken does not match");o&&(i[sessionKeys.AurycTimeZone]=o);var d=getHashParam$2(e,"mode");i[sessionKeys.AurycHashKey]=d,i[sessionKeys.TimeTraveling]=l,i[sessionKeys.AurycMode]="edit",i[constants.linkid.editorHash]=u,initEventEditor(t=globalSessionTracker.setSessionValues(i))}else"editor"===(t=globalSessionTracker.getSession(sessionKeys)).getByKey(sessionKeys.AurycHashKey)&&initEventEditor(t)}catch(e){console.log(e)}}function exitEditorMode(){globalSessionTracker.setSessionValues(defineProperty$2({},sessionKeys.AurycHashKey,""))}function launchEditor(e){init$5(e)}window.launchAurycEventMarker=launchEditor;var visualeditor={init:init$5},t$1,n,e=function(){return"".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)},i$1=function(t){return{name:t,value:1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,delta:0,entries:[],id:e(),isFinal:!1}},a$1=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver(function(e){return e.getEntries().map(t)});return i.observe({type:e,buffered:!0}),i}}catch(e){}},r=!1,o=!1,s=function(e){r=!e.persisted},u=function(){addEventListener("pagehide",s),addEventListener("beforeunload",function(){})},c=function(i){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];o||(u(),o=!0),addEventListener("visibilitychange",function(e){var t=e.timeStamp;"hidden"===document.visibilityState&&i({timeStamp:t,isUnloading:r})},{capture:!0,once:e})},l=function(e,t,i,n){var r;return function(){i&&t.isFinal&&i.disconnect(),0<=t.value&&(n||t.isFinal||"hidden"===document.visibilityState)&&(t.delta=t.value-(r||0),(t.delta||t.isFinal||void 0===r)&&(e(t),r=t.value))}},p=function(e){function i(e){e.hadRecentInput||(r.value+=e.value,r.entries.push(e),n())}var n,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=i$1("CLS",0),a=a$1("layout-shift",i);a&&(n=l(e,r,a,t),c(function(e){var t=e.isUnloading;a.takeRecords().map(i),t&&(r.isFinal=!0),n()}))},d=function(){return void 0===t$1&&(t$1="hidden"===document.visibilityState?0:1/0,c(function(e){var t=e.timeStamp;return t$1=t},!0)),{get timeStamp(){return t$1}}},v=function(e){var t,i=i$1("FCP"),n=d(),r=a$1("paint",function(e){"first-contentful-paint"===e.name&&e.startTime<n.timeStamp&&(i.value=e.startTime,i.isFinal=!0,i.entries.push(e),t())});r&&(t=l(e,i,r))},f=function(e){function t(e){e.startTime<n.timeStamp&&(i.value=e.processingStart-e.startTime,i.entries.push(e),i.isFinal=!0,a())}var i=i$1("FID"),n=d(),r=a$1("first-input",t),a=l(e,i,r);r?c(function(){r.takeRecords().map(t),r.disconnect()},!0):window.perfMetrics&&window.perfMetrics.onFirstInputDelay&&window.perfMetrics.onFirstInputDelay(function(e,t){t.timeStamp<n.timeStamp&&(i.value=e,i.isFinal=!0,i.entries=[{entryType:"first-input",name:t.type,target:t.target,cancelable:t.cancelable,startTime:t.timeStamp,processingStart:t.timeStamp+e}],a())})},m=function(){return n=n||new Promise(function(t){return["scroll","keydown","pointerdown"].map(function(e){addEventListener(e,t,{once:!0,passive:!0,capture:!0})})})},g=function(e){function t(e){var t=e.startTime;t<o.timeStamp?(a.value=t,a.entries.push(e)):a.isFinal=!0,i()}var i,n,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=i$1("LCP"),o=d(),s=a$1("largest-contentful-paint",t);s&&(i=l(e,a,s,r),n=function(){a.isFinal||(s.takeRecords().map(t),a.isFinal=!0,i())},m().then(n),c(n,!0))},h=function(t){var i=i$1("TTFB"),e=function(){try{var e=performance.getEntriesByType("navigation")[0]||function(){var e,t=performance.timing,i={entryType:"navigation",startTime:0};for(e in t)"navigationStart"!==e&&"toJSON"!==e&&(i[e]=Math.max(t[e]-t.navigationStart,0));return i}();i.value=i.delta=e.responseStart,i.entries=[e],i.isFinal=!0,t(i)}catch(e){}};"complete"===document.readyState?setTimeout(e,0):addEventListener("pageshow",e)},isInitAuRecord=!1;function initProducts(){!0!==window._auryc_is_inner_frame_&&urls.isCrossFrame()?(window._auryc_is_inner_frame_detected_=!0,window.addEventListener("message",function(e){var t=e.data;if(t.source&&t.content&&"_ar_"===t.source){var i=t.content,n=i.isOver,r=i.sessionId,a=i.viewId,o=i.cmd;if(n)return void(globalSessionTracker&&globalSessionTracker.endIframeSession(!0));if(o&&("pause"===o.command?window.auryc.pause():"resume"===o.command&&window.auryc.resume()),r&&a)if(config.enableProduct(!0),i.parentWin=e.source,isInitAuRecord)try{var s=ReplayProcessor.getInstance();s.setProcXPath(i.fpath),globalSessionTracker.syncPVInFrame(i.pv),globalSessionTracker.setSpaSendPV(i.spaSendPV),s.sendFramePage()}catch(e){}else initModules(i)}})):(initModules(),config.isWebVitalsEnabled()&&trackCoreWebVitals(),window.addEventListener("message",function(e){var t=e.data;t.command&&t.source&&"_ar_"===t.source&&"extendSession"===t.command&&globalSessionTracker&&globalSessionTracker.resetTimer()}))}function initModules(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];isInitAuRecord||(t||EventType.init(),behavior.init(e,t),checkExclusions()&&(record$1.init(e,t),config.basicMode()||t||(FbModule.getInstance().init(),visualeditor.init(),api.init())),globalOverride(),isInitAuRecord=!0)}function fail(){logger.error("Auryc SDK is not initizlied")}function polyFillIE(){function e(e){if(null==this)throw TypeError();var t=String(this),i=t.length,n=e?Number(e):0;if(n!=n&&(n=0),!(n<0||i<=n)){var r,a=t.charCodeAt(n);return 55296<=a&&a<=56319&&n+1<i&&56320<=(r=t.charCodeAt(n+1))&&r<=57343?1024*(a-55296)+r-56320+65536:a}}var t;"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])}return i},writable:!0,configurable:!0}),String.prototype.codePointAt||((t=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}())?t(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e)}function polyfill$1(){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var i=0;i<this.length;i++)e.call(t,this[i],i,this)}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),n=i.length>>>0,r=arguments[1],a=0;a<n;a++)if(t=i[a],e.call(r,t,a,i))return t},writable:!0,configurable:!0}),Array.prototype.some||Object.defineProperty(Array.prototype,"some",{value:function(e,t){if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;for(var i=Object(this),n=i.length>>>0,r=0;r<n;r++)if(r in i&&e.call(t,i[r],r,i))return!0;return!1},writable:!0,configurable:!0}),polyFillIE()}function globalOverride(){var o;!0===config.getConfig("crossdomain","behavior")&&(window.open=(o=window.open,function(e,t,i){var n,r=window.auryc&&window.auryc.getAurycLinkId(),a=config.getArLinkid();return e.indexOf(a)<0&&r&&(n=(e.indexOf("?")+1?"&":"?")+a+"="+r,e=e.indexOf("#")+1?e.replace("#",n+"#"):e+n),o.call?o.call(window,e,t,i):o(e,t,i)}))}var webvitals={},wvtimeoutid=null;function trackCoreWebVitals(){function e(e){var t=e.name,i=e.value;t&&"cls"===t.toLowerCase()&&(i*=1e3),webvitals[t]=i,wvtimeoutid&&window.clearTimeout(wvtimeoutid),wvtimeoutid=setTimeout(function(){webvitals._auryc_intl_=!0,window.auryc.track("WebVitals",webvitals),webvitals={}},3e3)}p(e),v(e),f(e),g(e),h(e)}polyfill$1(),utils.init(initProducts,fail)}();
