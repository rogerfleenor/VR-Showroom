!function(e,t){e.BIRF||(e.BIRF={config:{autostart:!1}})}(window),function(e,t){if(!e.BIRF||!e.BIRF.inited){BIRF=e.BIRF||{},BIRF.extend=function(){for(var e={},n=["Boolean","Number","String","Function","Array","Date","RegExp","Object"],i=n.length,r=0;r<i;r++)e["[object "+n[r]+"]"]=n[r].toLowerCase();function o(e){return"function"===s(e)}function a(e){return"array"===s(e)}function s(t){return null===t?String(t):e[toString.call(t)]||"object"}function u(e){if(!e||"object"!==s(e)||e.nodeType||function(e){return null!==e&&e==e.window}(e))return!1;try{if(e.constructor&&!hasOwn.call(e,"constructor")&&!hasOwn.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var n;for(n in e);return n===t||hasOwn.call(e,n)}return function(){var e,n,i,r,s,l,c=arguments[0]||{},g=1,f=arguments.length,d=!1;for("boolean"==typeof c&&(d=c,c=arguments[g]||{},g++),"object"==typeof c||o(c)||(c={}),g===f&&(c=this,g--);g<f;g++)if(null!=(s=arguments[g]))for(r in s)e=c[r],c!==(i=s[r])&&(d&&i&&(u(i)||(n=a(i)))?(n?(n=!1,l=e&&a(e)?e:[]):l=e&&u(e)?e:{},c[r]=BIRF.extend(d,l,i)):i!==t&&(c[r]=i));return c}}(),BIRF.namespace=function(){var t,n,i,r=arguments,o=r.length,a=null;for(t=0;t<o;t++)for(i=r[t].split("."),a=e,n=0;n<i.length;n+=1)a[i[n]]=a[i[n]]||{},a=a[i[n]];return a},BIRF.namespace("BIRF.data"),BIRF.namespace("BIRF.config"),BIRF.extend(BIRF.config,{disableDebug:!/birfDisableDebug=false/.test(e.location.href)&&(BIRF.config.disableDebug===t||BIRF.config.disableDebug),disableClickDelay:BIRF.config.disableClickDelay!==t&&BIRF.config.disableClickDelay,useLocalStorage:BIRF.config.useLocalStorage!==t&&BIRF.config.useLocalStorage,clickDelayMilliseconds:BIRF.config.clickDelayMilliseconds!==t?BIRF.config.clickDelayMilliseconds:500,unloadPurgeTimeout:BIRF.config.unloadPurgeTimeout!==t?BIRF.config.unloadPurgeTimeout:500,chunkSize:BIRF.config.chunkSize!==t?BIRF.config.chunkSize:3e3,useAjax:BIRF.config.useAjax===t||BIRF.config.useAjax,disableAudit:BIRF.config.disableAudit!==t&&BIRF.config.disableAudit}),BIRF.namespace("BIRF.location"),BIRF.extend(BIRF.location,{assign:function(t,n){var i=BIRF.extend({delay:BIRF.config.clickDelayMilliseconds,isPopUp:!1,target:"_blank",properties:""},n);e.setTimeout((function(){i.isPopUp?e.open(t,i.target,i.properties):e.location.assign(t)}),i.delay)}});var n,i,r,o,a={me:function(e){return"ATC.BI.CORE".concat(e?"."+e:"")}},s=BIRF.config.autostart===t||BIRF.config.autostart,u={version:"c.2.1.14",util:{RandomID:function(){function e(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n}return{getClientID:function(){return(new Date).getTime().toString().substr(2,13)+e(Math.floor(1e7*Math.random()),7)},getServerID:function(){return e(Math.floor(1e7*Math.random()),7)+e(Math.floor(1e7*Math.random()),7)+(""+(new Date).getTime()).substring(9)}}}(),isCrossDomain:function(){var t=BIRF.config.logDomain;return!!t&&this.URL(t).hostname.toLowerCase()!==e.location.hostname.toLowerCase()},isIE:function(){return!(!e.attachEvent||e.opera)},eventTarget:function(t){var n,i=t||e.event;return i.target?n=i.target:i.srcElement&&(n=i.srcElement),n},findElement:function(e,t){return this.matchElementByTagName(this.eventTarget(e),t)},findClosestWithAttribute:function(e,t){return this.matchParentByAttribute(this.eventTarget(e),t)},getElementsByNameWithAttribute:function(e,t){for(var n=[],i=document.getElementsByTagName(e),r=0;r<i.length;r++)i[r].getAttribute(t)&&n.push(i[r]);return n},matchParentByAttribute:function(e,n){return e.tagName!==t&&(this.isNotEmpty(e.getAttribute(n))?e:"html"!=e.tagName.toLowerCase()&&this.matchParentByAttribute(e.parentNode,n))},matchElementByTagName:function(e,n){return e.tagName!==t&&(e.tagName.toLowerCase()==n?e:"html"!=e.tagName.toLowerCase()&&this.matchElementByTagName(e.parentNode,n))},getTag:function(e,t){var n="";if("function"==typeof t.getElementsByTagName&&(n=null===t?document.getElementsByTagName(this.getTagName(e)):t.getElementsByTagName(this.getTagName(e))),null!==n&&n.length>0)return n[0];var i=document.getElementsByTagName("birf:"+e);return null!==i&&i.length>0?i[0]:null},getTags:function(e,t){var n,i="";return void 0!==t&&"function"==typeof t.getElementsByTagName&&(i=null===t?document.getElementsByTagName(this.getTagName(e)):t.getElementsByTagName(this.getTagName(e))),null!==i&&i.length>0?i:null!==(n=document.getElementsByTagName("birf:"+e))&&n.length>0?n:this.isIE()&&0===n.length&&"object"==typeof t&&t.tagName.match(/pageload/i)?n=function(e,t){for(var n=t&&void 0!==t.children?t:document,i=[],r=n.children.length;r-- >0;){var o=n.children[r];o.tagName&&o.tagName===e&&i.push(n.children[r])}return i}(e,t):i},getTagName:function(e){return this.isIE()?e:this.ns+":"+e},stringContent:function(e){return void 0===document.body.innerText?e.textContent:e.innerText},parseBIRFAttributes:function(e,t){for(var n=e.attributes,i=n.length,r=0;r<i;r++)n[r].specified&&(t[n[r].name]=n[r].textContent||n[r].value)},parseBIRFChildTags:function(e,t,n,i){var r=n||"name",o=i||"value";if(this.isNotEmpty(e))for(var a=e.length,s=0;s<a;s++){var u=e[s].getAttribute(o);"null"==u&&(u=""),t[e[s].getAttribute(r)]=u}},cookie:function(){var t=new Date;t.setTime(t.getTime()+864e8);var n=t.toGMTString(),i=/^\s*|\s*$/g,r=void 0!==e.Storage;function o(e,t,n){(n=void 0===n||n)?document.cookie=e+"="+t+"; path=/":s(e,t,!1)}function a(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}function s(e,t,i,r,o,a){if(e){var s=e+"=",l=t+";",c="path="+(r||"/")+";",g="";"string"==typeof i?g="expires="+i+";":!1===i&&(g="expires="+n+";");var f=o?"domain="+o+";":"",d=a?"secure="+a+";":"";return document.cookie=s+l+g+c+f+d,u(e)}}function u(e){if(!e)return null;for(var t=new RegExp("^\\s*("+e+")s*=","i"),n=document.cookie.split(";"),r=0,o=n.length;r<o;r++){var a=n[r];if(t.test(a))return a.replace(i,"")}return null}function l(e,t){if(r&&BIRF.config.useLocalStorage)try{localStorage.setItem(e,t)}catch(n){o(e,t),o("BIRF_useLocalStorage","false"),g(),r=!1,BIRF.util.debug.log("_createStorage",n)}else o(e,t)}function c(e){return r&&BIRF.config.useLocalStorage?localStorage.getItem(e):a(e)}function g(){if(r&&BIRF.config.useLocalStorage)try{localStorage.setItem("ATC_PID",""),localStorage.setItem("ATC_SID","")}catch(e){r=!1,BIRF.util.debug.log("_clearStorage",e)}}return{PID:{set:function(e){l("ATC_PID",e)},get:function(){return c("ATC_PID")}},SID:{set:function(e){l("ATC_SID",e)},get:function(){return c("ATC_SID")}},set:o,get:a,remove:function(e){return function(e){e&&u(e)&&s(e,"","Thu, 01-Jan-1970 00:00:03 GMT")}(e)},reset:function(){r&&BIRF.config.useLocalStorage&&(a("BIRF_useLocalStorage")||(g(),o("BIRF_useLocalStorage","true"),BIRF.util.debug.log("LocalStorage Cookie set")))}}}(),crc32:{get:function(e){return e?function(e){var t,n;t=n=0,t^=-1;for(var i=0,r=e.length;i<r;i++)n=255&(t^e.charCodeAt(i)),t=t>>>8^"0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*n,8);return-1^t}(e):e}},Queue:function(e,t){e=e||[];var n,i=t,r=!isNaN(t)&&t>0;return n="object"==typeof e&e.length>0?r&&e.length>i?e.slice(1,i+1):e:[],{Max:i,push:function(e){n.length>this.Max&&n.shift(),n.push(e)},pop:function(){return n.pop()},getArray:function(){return n}}},ObjectContainer:function(e){var t=e||{},n=r("$public"),i=r("$protected");function r(e){for(var n={},i=e||"public,protected,object",r=i.split(",").length,o=0;o<r;o++)for(var a in t)n[a]=t[a][i];return n}return{object:r("object"),$public:n,$protected:i,filter:r}},FilterHook:function(e){var t={};return new this.PseudoObject({register:function(e,n){return function(e,n){"function"==typeof n&&(t[e]=n)}(e,n)},unregister:function(e){return function(e){delete t[e]}(e)}},{filter:function(e,n){return function(e,n){var i,r=e;for(var o in t)try{void 0!==(i=t[o](r,n))&&(r=i)}catch(e){}return r}(e,n)},filterById:function(e,n,i){return function(e,n,i){var r,o=n;if(t[e])try{void 0!==(r=t[e](o,i))&&(o=r)}catch(e){}return o}(e,n,i)},isRegistered:function(e){return function(e){return void 0!==t[e]}(e)},showRegistered:function(){for(var e in t)n.util.debug.log("filterHooks",e)}})},EventHook:function(e,t){var i,r=[],o=t;function a(e,t){var n;try{!0===(n=e.filter(t))?e.fn(t):"object"==typeof n&&!0===n[0]&&e.fn(t,n[1],n[2])}catch(e){}}return new this.PseudoObject({register:function(e,t,n){var s,u,l,c,g;if(null===e&&(e=BIRF.util.GUID.get()),(c=i=i||{})[e]={fn:t,filter:"function"==typeof n?n:function(e){return!0}},o)for(g=c[e],s=r.length,u=0;u<s;u++)(l=r[u]).filter(e)&&a(g,l.data);return e},unregister:function(e){i&&i[e]&&(i[e]=null,delete i[e])}},{notify:function(e,t,n){var s,u,l;for(s in l=function(){return!0},t&&"object"==typeof t&&void 0!==t.length?l=function(e){for(var t=e,n={},i=t.length,r=0;r<i;r++)n[t[r]]=!0;return function(e){return n[e]}}(t):t&&(l=function(e){for(var t=e,n={},i=t.length,r=0;r<i;r++)n[t[r]]=!0;return function(e){return n[e]}}(t.split(","))),o&&!n&&r.push({data:e,filter:l}),i)void 0!==(u=i[s])&&l(s)&&a(u,e)},isRegistered:function(e){return void 0!==i[e]},showRegistered:function(){for(var e in i)n.util.debug.log("eventHooks",e)}})},Sequencer:function(e,t){var n,i,r;return i="number"!=typeof e||isNaN(e)?0:e,r="number"!=typeof t||isNaN(t)?parseInt(65535,10):t,n=i-1,{getNext:function(){return n=(n=++n<i?i:n)>r?i:n}}},PseudoObject:function(e,t,n){if(this.object={},n)if("object"==typeof n&&n.length)for(var i=n.length,r=0;r<i;r++)n[r].call(this.object,e,t);else n.call(this.object,e,t);this.$public=e||{},this.$protected=t||{}},c14nEventName:function(e,t){return navigator.appVersion.match(/Konqueror|Safari|KHTML/)||e.attachEvent?"keypress"==t&&(t="keydown"):"keydown"==t&&(t="keypress"),t},domUnobserve:function(e,t,n){return t=this.c14nEventName(e,t),e.removeEventListener?(e.removeEventListener(t,n),navigator.appVersion.match(/Safari/)&&"click"==t&&e.removeEventListener("contextmenu",n),!0):!!e.detachEvent&&(navigator.appVersion.match(/Safari/)&&"click"==t&&e.detachEvent("oncontextmenu",n),e.detachEvent("on"+t,n),!0)},domObserve:function(e,t,n){if(t=this.c14nEventName(e,t),e.addEventListener)return e.addEventListener(t,n,!1),navigator.appVersion.match(/Safari/)&&"click"==t&&e.addEventListener("contextmenu",n,!1),!0;e.attachEvent?(e.attachEvent("on"+t,n),navigator.appVersion.match(/Safari/)&&"click"==t&&e.attachEvent("oncontextmenu",n)):e["on"+t]=n},leadingWhitespace:(o=document.createElement("div"),o.setAttribute("className","t"),o.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",3===o.firstChild.nodeType),isAnchorDelayable:function(e){return this.leadingWhitespace&&function(e){var t=e.getAttribute("href");return void 0!==t&&""!==t&&(-1==t.indexOf("#")||t.indexOf("#")>0)&&-1==t.indexOf("javascript:")}(e)&&function(e){var t=e.getAttribute("target");return!t||""===t||"_self"===t}(e)&&!function(e){var t=["openPopWin"],n=t.length,i=e.getAttribute("onclick"),r="";if(!i||void 0===i)return!1;r=i.toString();for(var o=0;o<=n;o++)if(-1!=r.indexOf(t[o]))return!0;return!1}(e)&&function(e){var t=e.getAttribute(n.birfTagNS.get(e)+"clickdelay")||!0;return/^true$/i.test(t)}(e)},URLSearchObject:function(e,t,n){var i,r;return r=n&&"function"==typeof n?n:function(e,t,n){return e+", "+n},function(e){var n,o;if(i&&(i=null),i={},"string"==typeof e){var a;n=e.split("&"),a=t?function(e){return e}:function(e){return e.toLowerCase()};for(var s=0,u=n.length;s<u;s++)if(2===(o=n[s].split("=")).length){var l=a(o[0]);i[l]=void 0===i[l]?o[1]:r(i[l],l,o[1])}}}(e),{keys:i,toString:function(e,t,n){return function(e,t,n,i){if(!e)return"";var r=e.keys||{},o="",a="";if(t)for(var s in i=i||{},n=n||{},r){var u=r[s];""===u||void 0!==n[u]&&void 0===i[s]||(o+=a+s+"="+r[s],a="&")}else for(var s in r)o+=a+s+"="+r[s],a="&";return o}(this,e,t,n)}}},URL:function(e){var t,n,i,r,o,a,s,u=/^\s*(\w*)\:*\/*([^\/?#:]*)\:?(\d*)([^\?]*)\??([^#]*)#?(.*)/,l=e.toString()||"";function c(e){for(var t=[["#",e.hash&&e.hash.replace?pourl.search.replace(/^#/,""):e.hash,"",""],["?",e.search&&e.search.replace?e.search.replace(/^\?/,""):e.search,"",""],["",e.pathname,"",""],[":",e.port,"",""],["",e.hostname,"",""],["",e.protocol,"//",""]],n="",i=t.length;i-- >0;){var r=t[i];n+=r[1]?r[0]+r[1]+r[2]:r[3]}return n}function g(e,g){if(e){if(!(e=e.toString())||0===e.indexOf("/")){var f=document.location;e=f.protocol+"//"+f.hostname+(f.port?":"+f.port:"")+e}}else e=c(g);if(e&&"string"==typeof e&&e.match){var d=(l=i=e).match(u);a=d[1]?d[1]+":":"",n=d[2]||"",o=d[3]||"",r=d[4]||"",s=d[5]||"",t=d[6]||""}else t=n=r=o=a=s=null;"object"==typeof g&&(g.href=i,g.protocol=a,g.hostname=n,g.port=o,g.pathname=r,g.search=s,g.hash=t)}return l?(g(l),i=l):t=n=i=r=o=a=s="",{hash:t,hostname:n,href:i,parse:function(e){return g(e,this),this},pathname:r,port:o,protocol:a,search:s,toString:function(){return c(this)}}},debug:(r=function(){function t(t){return e.console&&e.console[t]}return{feature:{log:t("log"),time:t("time"),timeEnd:t("timeEnd"),disabled:function(){return BIRF.config.disableDebug}}}}(),{log:function(e,t){r.feature.log&&!r.feature.disabled()&&(t?console.log("BIRF | "+e+" | ",t):console.log("BIRF | "+e))},timeStart:function(e){r.feature.time&&!r.feature.disabled()&&console.time(e||"BIRF")},timeEnd:function(e){r.feature.timeEnd&&!r.feature.disabled()&&console.timeEnd(e||"BIRF")}}),GUID:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(0,4)}return{get:function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}}(),Threads:function(){var e=[];function t(e){var t=250,n=null,i={CREATED:"created",STOPPING:"stopping",STOPPED:"stopped",STARTING:"starting",STARTED:"started",IDLE:"idle",RUNNING:"running"},r=[],o=new BIRF.util.Queue([],32),a={id:null,count:0,created:null,started:null,stopped:null,last:null,status:i.CREATED,lastError:null},s=new function(e,t){var n=e||{},r=t;return{created:function(){var e=BIRF.util.GUID.get();n.id=e,n.created=r(),n.status=i.CREATED},calling:function(){n.count++,n.last=r(),n.status=i.RUNNING},running:function(){n.status=i.RUNNING},stopping:function(){n.stopped=t(),n.status=i.STOPPING},stoppingWithPurge:function(){n.count++,n.last=t(),n.status=i.STOPPING},stopped:function(){n.status=i.STOPPED},starting:function(){n.status=i.STARTING},started:function(){n.started=t(),n.status=i.STARTED},idle:function(){n.status=i.IDLE}}}(a,(function(){return(new Date).getTime()}));s.created();var u=e;u="function"==typeof u?u:function(){};var l=BIRF.util.ObjectContainer({onThreadStart:BIRF.util.EventHook("onThreadStart"),onThreadStop:BIRF.util.EventHook("onThreadStop"),onThreadError:BIRF.util.EventHook("onThreadError")}),c=!0;function g(){n||(n=setInterval(h,t))}function f(e,t,n){try{e.call(t,n)}catch(e){t.lastError=e,l.$protected.onThreadError.notify({status:t,message:n,error:e})}}function d(){return r=r||[]}function p(){clearInterval(n),n=null}function h(){var e,t;if(c){for(t=(e=d()).length,s.calling();t-- >0;)f(u,a,e.shift());d().length<=0&&(p(),s.idle())}}return{start:function(){s.starting(),l.$protected.onThreadStart.notify(a),c=!0,g(),s.started()},send:function(e){return c&&(d().push(e),o.push(e),g(),s.running()),a},stop:function(e){if(c=!1,p(),!0===e)for(s.stoppingWithPurge();d().length>0;)f(u,a,d().shift());s.stopping(),l.$protected.onThreadStop.notify(a),s.stopped()},getThreadStatus:function(){return a},getHistory:function(){return o.getArray()},Events:l.$public}}return{freeze:function(e){e=e&&e>0&&"number"==typeof e?e:100;for(var t=new Date,n=t.getTime()+e,i=0;++i<1e6;)if((t=new Date).getTime()>n)return},create:function(n){var i=new t(n),r=i.getThreadStatus().id;return e.push(r),i},getThreadCount:function(){return e.length}}}(),objectToQueryString:function(e,t){var n=[],i="";for(var r in e)r.match("cmp")&&(i=r);for(var r in""===i||this.isEmpty(e[i])||("t_url"==i?n.push([i,e[i]].join("=")):n.push([i,encodeURIComponent(e[i])].join("=")),delete e[i]),e)this.isEmpty(e[r])||(!t||/^ct(?:_\d+)?/i.test(r)||/^vid(?:_\d+)?/i.test(r)||/^cert(?:_\d+)?/i.test(r)||/^cert_logo(?:_\d+)?/i.test(r)||/^cert_txt(?:_\d+)?/i.test(r)||"false"!==e[r]&&!1!==e[r]&&"n"!=e[r])&&("t_url"==r?n.push([r,e[r]].join("=")):n.push([r,encodeURIComponent(e[r])].join("=")));return n.join("&")},isEmpty:function(e){return null===e||null===typeof e||void 0===e||/^\s*$/.test(e)},isNotEmpty:function(e){return!this.isEmpty(e)},isEmptyObj:function(e){if("object"==typeof e)for(var t in e)return!1;return!0},deepCopy:function(e){for(var n={},i=["Boolean","Number","String","Function","Array","Date","RegExp","Object"],r=i.length,o=0;o<r;o++)n["[object "+i[o]+"]"]=i[o].toLowerCase();function a(e){return"array"===s(e)}function s(e){return null===e?String(e):n[toString.call(e)]||"object"}function u(e){if(!e||"object"!==s(e)||e.nodeType||function(e){return null!==e&&e==e.window}(e))return!1;try{if(e.constructor&&!hasOwn.call(e,"constructor")&&!hasOwn.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var n;for(n in e);return n===t||hasOwn.call(e,n)}return function e(){var n,i,r,o,l,c,g=arguments[0]||{},f=1,d=arguments.length,p=!1;for("boolean"==typeof g&&(p=g,g=arguments[1]||{},f=2),"object"!=typeof g&&"function"!==s(g)&&(g={}),d===f&&(g=this,--f);f<d;f++)if(null!==(n=arguments[f]))for(i in n)r=g[i],g!==(o=n[i])&&(p&&o&&(u(o)||(l=a(o)))?(l?(l=!1,c=r&&a(r)?r:[]):c=r&&u(r)?r:{},g[i]=e(p,c,o)):o!==t&&(g[i]=o));return g}(!0,{},e)},JSON:function(){function e(e){return"string"==typeof e&&"{"===e.substring(0,1)&&"}"===e.substring(e.length-1,e.length)}return{toQueryString:function(e,t){var n,i,r=[],o=0;if(!e)return"";for(var a in t="function"==typeof t?t:function(e,t,n){var i={};return i[e]=t,i},e)if(o=0,"object"==typeof(i=e[a])&&i.length){for(var s=0,u=i.length;s<u;s++)if(n=t(a,i[s],r))for(var l in n)o++,r.push("&",l,"_",o.toString(),"=",n[l])}else if(n=t(a,i,r))for(var l in n)r.push("&",l,"=",n[l]);return r.join("")},normalized:function(){},parse:function(t){var i,r={};if(e(t))try{i=t.replace(/\s/g,"").replace(/\'/g,'"'),r=JSON.parse(i)}catch(e){n.util.debug.log("JSON is undifined or invalid JSON string | "+t,e),r=function(e){for(var t,n,i={},r=0,o=(t=(t=(t=e.substring(1,e.length-1)).replace(/(\'|\"|\s+)/gi,"")).split(",")).length;r<o;r++)i[(n=t[r].split(":"))[0]]=n[1];return i}(t)}return r},isJSONString:function(t){return e(t)}}}()}};u.Static=function(){this.Properties={}},u.Static.instance=new u.Static,l.prototype=u,(n=BIRF.extend(BIRF,new l)).init(),function(t){function n(){var t,n,i,r=function(e,t,n){var i="";try{(i=t.getAttribute(e))||n&&n!==t&&(i=n.getAttribute(e))}catch(e){}return i||""},o=this.target,a=this.element,s=BIRF.birfTagNS.get(a),u=/^\s*|\s*$/g;BIRF.dataIslandJSON.get("BIRF.data.page.BIRF.lnx")&&BIRF.dataIslandJSON.get("BIRF.data.page.BIRF.lnx");var l=r(s+"cmp",a,o);"gs_vdp_v"==l&&null!==document.getElementById("specialsPopup")?(i=document.getElementById("specialsPopup").nextElementSibling?document.getElementById("specialsPopup").nextElementSibling:document.getElementById("specialsPopup").nextSibling,n=encodeURIComponent(e.location.protocol+"//"+e.location.host+i.innerHTML.split(",")[4].split(":")[1].replace(/( |)\'/g,""))):n=encodeURIComponent(r("href",a,o.parentNode));for(var c,g=["&cmp=",l,"&par=",r(s+"par",a,o),"&co_txt_url=",a.textContent?a.textContent:a.innerText?a.innerText:"","&t_url=",n,"&et=click","&",r(s+"extra",a,o),"&imagealt=",r("alt",a,o),"&imagesrc=",encodeURIComponent(r("src",a,o))],f=g.length;f-- >0;)null==(c=g[f])&&(c=""),g[f]=c.replace(u,"");t=g.join("").replace(/&{2,}/g,"&").replace(/\r|\n|\s{2,}/g," "),this.logString=BIRF._coreFilters.$protected.ElementClickFilter.filter(t,{element:this.element,target:this.target})}t.Types={AdLogger:function(e,t){var n=t,i={logString:"",element:e,fire:function(e){try{i.build().log()}catch(e){}return i},build:function(){return i.logString=n,i},log:function(){return BIRF.log(i.logString,"event"),i}};return i},ElementClickLoggers:{default:function(e,t){BIRF.birfTagNS.get(e);var i=!!t&&2===t.button;i|=function(e){try{if(void 0===e)return!1;if(/A/i.test(e.tagName)||/OPTION/i.test(e.tagName))return!1}catch(e){}return!0}(e),this.pauseOnClick=i,this.target=BIRF.util.eventTarget(t),this.element=e,this.logString="",this.build=function(e){return n.call(this),this},this.log=function(){for(var e,t={},n=this.logString.split("&"),i=n.length;i-- >0;){var r=n[i].split("="),o="",a=r[0];r.length>1&&(o=r[1]),t[a]=o}e=BIRF.util.objectToQueryString(t,!0),this.pauseOnClick?BIRF.log(e,"nopauseevent"):BIRF.log(e,"event")}}}}}(n.Events),n._coreFilters.$public.eventTypes.register(a.me("novsExchange"),(function(e,t){switch(t.tagType){case t.logTypes.EVENT:/&novs=(?:1|y|t|on)/gi.test(e)?e+="&log=0":e+="&log=1"}return e})),n._coreFilters.$public.overrideLogParam.register(a.me("logExchange"),(function(e,t){if(/(log=|log_+\d+\=)/gi.test(t)){var n,i,r=/\b(log\=|log_\d+\=)([^&]*)/gi;(i=t.match(r)||[])&&i.length>0&&(n=i[0].split("=")[1]),t=t.replace(/\&+\b(log\=|log_\d+\=)([^&]*)/gi,""),/^\d+$/.test(n)&&e&&(e=e.replace(r,"Log="+n))}return{baseParams:e,logString:t}})),n._coreFilters.$public.overridePgParam.register(a.me("pgExchange"),(function(e,t){if(/(pg=|pg_+\d+\=)/gi.test(t)){var n,i,r=/\b(pg\=|pg_\d+\=)([^&]*)/gi;(i=t.match(r)||[])&&i.length>0&&(n=i[0].split("=")[1]),t=t.replace(/\b(pg\=|pg_\d+\=)([^&]*&?)/gi,""),n&&e&&(e=e.replace(r,"pg="+n))}return{baseParams:e,logString:t}})),n._coreFilters.$public.addImpUnderscore.register(a.me("Add_#Filter"),(function(e){var t,n,i,r,o,a,s,u=/=/gi,l=function(e,t){return t>s?"_"+a+"=":e};for(t=0,n=(i=e.match(/(?:cmp_(\d+))=.*?(?=$|&cmp)/gi)).length;t<n;t++)try{o=(r=i[t]).match(/cmp_(\d+)/i),a=o[1],s=o[0].length+1,i[t]=r.replace(u,l)}catch(e){}return n?i.join("&"):e})),n.util.debug.log("Internal filters registered"),n.util.domObserve(document,"click",(function(e){n.eventHooks.$protected.onClick.notify(e)})),n.util.domObserve(document,"mouseup",(function(e){n.eventHooks.$protected.onMouseUp.notify(e)})),n.util.domObserve(e,"beforeunload",(function(){n.eventHooks.$protected.onPageBeforeUnload.notify({})})),n.util.domObserve(e,"unload",(function(){n.eventHooks.$protected.onPageUnload.notify({})})),n.util.domObserve(e,"load",(function(){n.eventHooks.$protected.onPageLoad.notify({})})),s&&n.System.Callback(d,a.me()),i=setInterval((function(){document.body&&(clearInterval(i),n.eventHooks.$protected.onPageReady.notify({}))}),1)}function l(){var i,r,o,u,l,b;this.inited=!1,this.ns="birf",this.attributeNS="data-"+this.ns+"-",this.legacy=this.ns+":",this.birfTagNS=(i={legacy:this.legacy,chassis:this.attributeNS},{get:function(e){var t=i,n=t.legacy;try{var r=e.getAttribute(n+"log");(!r||r.length<=0)&&(n=t.chassis)}catch(e){}return n}}),this.impressionQueue=[],this.Elements={},this.Events={},this.init=function(){var e,t,i,r,o,s,u,l,d,b;this.BI$Logger=new c({chunkSize:BIRF.config.chunkSize,purgeTimeout:BIRF.config.unloadPurgeTimeout}),this.BI$Logger.Events.onQueueMessage.register(a.me("onQueueMessage"),m),this.BI$Logger.Events.onLogMessage.register(a.me("onLogMessage"),h),this.eventHooks.$public.onMessage.register(a.me("onMessage"),p),this.eventHooks.$public.onPageLoad.register(a.me("processQueuedImpressions"),B),this.eventHooks.$public.onMouseUp.register(a.me("onMouseUp"),f,g),this.eventHooks.$public.onClick.register(a.me("onClick"),v),this.System=(e={ModuleLoadedSuccess:"ModuleLoadedSuccess",ModuleLoadedFailure:"ModuleLoadedFailure",RequestDirect:"RequestDirect",ResponseDirect:"ResponseDirect",Callback:"Callback"},t={SystemMessage:"SystemMessage",ModuleMessage:"ModuleMessage"},i={System:"System",Broadcast:"Broadcast"},{Messaging:r=function(){function n(){this.messageScope=null,this.messageType=null,this.messagePayload=null,this.from=null,this.to=null,this.toString=function(){return["messageScope=",this.messageScope,", messageType=",this.messageType,", messagePayload=",this.messagePayload,", from=",this.from,", to=",this.to].join("")}}function r(e,t,i,r,o){n.call(this,e,t,i,r,o),this.messageScope=e,this.messageType=t,this.messagePayload=i,this.from=r,this.to=o}return r.prototype=new n,{Types:{Message:r},MessagesType:e,MessageScope:t,EndPoints:i}}(),Callback:function(i,o){var a=t.ModuleMessage,s=e.Callback,u=i,l=new r.Types.Message(a,s,u,o,o);n.Command.send(l)},sendMessage:function(e,t,i,o,a){var s=new r.Types.Message(e,t,i,o,a);n.Command.send(s)}}),this.Command=(s=(o=this).eventHooks.$protected.onMessage.notify,u=s&&"function"==typeof s?s:function(){},l=o.util.Threads.create((function(e){try{e.to&&e.to!==o.System.Messaging.EndPoints.Broadcast&&e.to,u(e)}catch(e){}})),d=l.getThreadStatus().id,(b={})[d]=l,l.Events.onThreadError.register(o.System.Messaging.EndPoints.System,(function(e){})),l.Events.onThreadStart.register(o.System.Messaging.EndPoints.System,(function(e){})),l.start(),{send:function(e){try{b[d].send(e)}catch(e){}},stop:function(e){l.stop(e)},getStatus:l.getThreadStatus})},this.getBaseParams=function(){return this.extendBaseParams({Log:0,pg_inst:this.Static.instance.Properties.pg_inst,pg:this.Static.instance.Properties.pg,ver:this.Static.instance.Properties.version,site:this.Static.instance.Properties.site,pid:this.Static.instance.PID.get(),rid:this.Static.instance.RID.get(),srch_id:this.Static.instance.SID.get()})},this.setBaseParams=function(){this.BI$Logger.setBaseParams(this.getBaseParams())},this.extendBaseParams=function(e){return this.filterHooks.$protected.onCacheBaseParams.filter(e)},this.eventHooks=(r=this).util.ObjectContainer({onMessage:r.util.EventHook("onMessage",!0),onPageBeforeUnload:r.util.EventHook("onPageBeforeUnload",!0),onPageUnload:r.util.EventHook("onPageUnload",!0),onPageDataReady:r.util.EventHook("onPageDataReady",!0),onPageLoad:r.util.EventHook("onPageLoad",!0),onMouseUp:r.util.EventHook("onMouseUp",!0),onClick:r.util.EventHook("onClick",!0),onLog:r.util.EventHook("onLog",!0),onPageReady:r.util.EventHook("onPageReady",!0),onLoggerStart:r.util.EventHook("onLoggerStart",!0)}),this.filterHooks=function(e){return e.util.ObjectContainer({onPageLog:e.util.FilterHook("onPageLog"),onEventLog:e.util.FilterHook("onEventLog"),onImpressionLog:e.util.FilterHook("onImpressionLog"),onAuditLog:e.util.FilterHook("onAuditLog"),onAdvertisementLog:e.util.FilterHook("onAdvertisementLog"),onSubpageLog:e.util.FilterHook("onSubpageLog"),onLog:e.util.FilterHook("onLog"),onCacheBaseParams:e.util.FilterHook("onCacheBaseParams")})}(this),this._coreFilters=function(e){return e.util.ObjectContainer({overrideLogParam:e.util.FilterHook("overrideLogParam"),overridePgParam:e.util.FilterHook("overridePgParam"),eventTypes:e.util.FilterHook("eventTypes"),addImpUnderscore:e.util.FilterHook("addImpUnderscore"),dataIsland:e.util.FilterHook("dataIsland"),ElementClickFilter:e.util.FilterHook("ElementClickFilter")})}(this),this.shared=function(){},this.api=function(e){var t=BIRF.extend(BIRF.extend({},e.filterHooks.$public),e._coreFilters.$public);return{Events:e.eventHooks.$public,Filters:t}}(this),this.Static.instance.PID=(o=this.util.RandomID.getClientID,u=null,l="function"==typeof o?o:function(){return"000000000000000000"},{get:function(){return u||(u=l())},getNoCache:function(){return l()},clearPIDCache:function(){u=null}}),this.Static.instance.RID=function(t){e.name||(e.name=t.util.RandomID.getClientID());var n={_rid:{value:null,hasValue:!1,fn:function(){return function(){var r=i("_ref"),o="-1";if(r&&n._ref.value!=n._cur.value){var a=t.util.cookie.PID.get();a=a?a.split("&"):[];var s=!1;if(a.length>0)for(var u=a.length;u-- >0;){var l=a[u];if((l=l.split("|"))&&l.length>0&&l[0]==r){s=!0,o=l[1];break}}if(!s){var c=[new t.util.URL(document.referrer),new t.util.URL(document.location.href)];if(c[0].hostname===c[1].hostname)if(e.opener)try{o=c[0].href===e.opener.document.location.href?e.opener.BIRF.Static.instance.PID.get():"-3"}catch(e){}else o="-2"}}return o}()}},_pid:{value:null,hasValue:!1,fn:null},_ref:{value:null,hasValue:!1,fn:function(){return""!==document.referrer?t.util.crc32.get(e.name+document.referrer.replace(/#.+$/,"")):null}},_cur:{value:null,hasValue:!1,fn:function(){return t.util.crc32.get(e.name+document.location.href.replace(/#.+$/,""))}}};function i(e){var t=n[e];if(t&&t.hasValue)return t.value;if(t&&t.fn&&"function"==typeof t.fn){var i=t.fn();return void 0!==i&&(t.value=i,t.hasValue=!0),i}}return{get:function(){return i("_rid")},update:function(){return function(){var e,r,o,a=i("_cur"),s=t.util.cookie.PID.get();if((s=s?s.split("&"):[])&&s.length>0)for(r=s.length;r-- >0;)if((o=(o=s[r]).split("|"))&&o.length>0&&o[0]==a){e=o[1];break}n._ref.value=a,n._rid.value=e||t.Static.instance.PID.get(),n._cur.hasValue=!1}()},setForPage:function(e){return function(e){var n,r=[],o=i("_cur"),a=t.util.cookie.PID.get();if(a=a?a.split("&"):[])for(var s=0,u=a.length;s<u;s++){var l=a[s];(l=l.split("|"))&&l.length>0&&(l[0]==o?(l[1]=e,n=l.join("|")):r.push(l.join("|")))}var c=t.util.Queue(r,20);n?c.push(n):c.push(o+"|"+e),t.util.cookie.PID.set(c.getArray().join("&"))}(e)}}}(this),this.Static.instance.SID=function(t){e.name||(e.name=t.util.RandomID.getClientID());var n={_sid:{value:null,hasValue:!1,fn:function(){return function(){var n=i("_ref"),r="-1";if(n){var o=t.util.cookie.SID.get();o=o?o.split("&"):[];var a=!1;if(o.length>0)for(var s=o.length;s-- >0;){var u=o[s];if((u=u.split("|"))&&u.length>0&&u[0]==n){a=!0,r=u[1];break}}if(!a){var l=[new t.util.URL(document.referrer),new t.util.URL(document.location.href)];if(l[0].hostname===l[1].hostname)if(e.opener)try{l[0].href===e.opener.document.location.href?(r=e.opener.BIRF.Static.instance.SID.get(),a=!0):r="-3"}catch(e){}else r="-2";if(!a&&document.referrer)try{var c=o[o.length-1];c=c.split("|"),r=c[1]}catch(e){}}}return r}()}},_pid:{value:null,hasValue:!1,fn:null},_ref:{value:null,hasValue:!1,fn:function(){return""!==document.referrer?t.util.crc32.get(e.name+document.referrer.replace(/#.+$/,"")):null}},_cur:{value:null,hasValue:!1,fn:function(){return t.util.crc32.get(e.name+document.location.href.replace(/#.+$/,""))}}};function i(e){var t=n[e];if(t&&t.hasValue)return t.value;if(t&&t.fn&&"function"==typeof t.fn){var i=t.fn();return void 0!==i&&(t.value=i,t.hasValue=!0),i}}function r(){n._ref.hasValue=!1,n._cur.hasValue=!1}function o(e){var n,r=[],o=i("_cur"),a=t.util.cookie.SID.get();if(a=a?a.split("&"):[])for(var s=0,u=a.length;s<u;s++){var l=a[s];(l=l.split("|"))&&l.length>0&&(l[0]==o?(l[1]=e,n=l.join("|")):r.push(l.join("|")))}var c=t.util.Queue(r,20);n?(c.push(n),t.util.debug.log("SID from referrer",n)):(c.push(o+"|"+e),t.util.debug.log("SID",[o,e])),t.util.cookie.SID.set(c.getArray().join("&"))}return{get:function(){return i("_sid")},update:function(e){!function(e){n._sid.value=e,o(e),r()}(e)},clearSIDCache:function(){r()},setForPage:function(e){return o(e)}}}(this),this.log=function(e,t){var i=a.me();if(t=t?t.toLowerCase():"",(e=e?function(e){var t,n=[];if("object"==typeof e){for(var i in e)n.push("&",i,"=",e[i]);return e.pg&&r(e.pg),n.join("")}if("string"==typeof e)return(t=e.match(/\b(pg\=|pg_\d+\=)([^&]*)/gi)||[])&&t.length>0&&r(t[0].split("=")[1]),/^\&/.test(e)?e:"&"+e;return""}(e):"")||t)switch(t){case"page":n.BI$Logger.Logger.logPage(e,i);break;case"subpage":n.BI$Logger.Logger.logSPage(e,i);break;case"event":n.BI$Logger.Logger.logEvent(e,!1,i);break;case"search":n.BI$Logger.Logger.logSearch(e,i);break;case"audit":n.BI$Logger.Logger.logAudit(e,i);break;case"impression":n.Elements.Impressions.send(e);break;case"nopauseevent":n.BI$Logger.Logger.logEvent(e,!0,i);break;default:n.BI$Logger.Logger.log(e,i)}function r(e){var i;e&&"subpage"===t&&((i=n.BI$Logger.getDynamicBaseParams()).pg=e,i="?"+n.util.objectToQueryString(i,!0),n.BI$Logger.subPageHistory.set(e,i))}},this.setAdParams=function(e,t,n){this.logAdParams({adParams:n,fltID:t,adID:e})},this.logAdParams=function(e){},this.start=function(){s||(this.System.Callback(d,a.me()),s=!0)},this.runPageload=function(e){e&&"object"==typeof e&&(BIRF.data={},BIRF.extend(BIRF.data,e)),this.rerunPageload()},this.rerunPageload=function(){this.shared.enablePageTag=!0,this.Static.instance.RID.update(),this.Static.instance.PID.clearPIDCache(),this.Static.instance.SID.clearSIDCache(),this.dataIslandJSON.clearHistory(),d()},this.logAnchorClick=function(e){var t=this.util.findElement(e,"a"),n=e&&e.button&&2===e.button?"nopauseevent":"event",i={et:"click"};if("function"==typeof t.getAttribute?(i.t_url=t.getAttribute("href"),this.util.isNotEmpty(t.getAttribute("title"))&&(i.linktitle=t.getAttribute("title"))):(i.t_url="",i.linktitle=""),"#alphaVehicleInfoTab"!==i.t_url&&"#alphaDealerInfoTab"!==i.t_url&&("#alphaVehicleInfoTab"!==t.hash&&"#alphaDealerInfoTab"!==t.hash||""!==i.t_url)){this.util.isNotEmpty(this.util.stringContent(t))&&(i.co_txt_url=this.util.stringContent(t).replace(/[\r\n\s+]+/g," ")),this.processLinkImageElements(t,i);var r=this.util.getTag("click",t);this.util.isNotEmpty(r)&&this.util.parseBIRFAttributes(r,i),this.log(this.util.objectToQueryString(i),n)}},this.processLinkImageElements=function(e,t){var n="";if("function"==typeof e.getElementsByTagName&&(n=e.getElementsByTagName("img")),this.util.isNotEmpty(n)){for(var i=[],r=[],o=[],a=0;a<n.length;a++)i.push(n[a].getAttribute("src")),r.push(n[a].getAttribute("title")),o.push(n[a].getAttribute("alt"));t.imagesrc=i,t.imagetitle=r,t.imagealt=o}},this.processAudit=function(){this.util.cookie.get("BIRF_Audit")||BIRF.config.disableAudit||(this.log("","Audit"),this.util.cookie.set("BIRF_Audit","true",!1),n.util.debug.log("Audit cookie set!"))},this.processPageloadImpressions=function(){this.processJSONImpressions()},this.processJSONImpressions=function(e){BIRF.config.disableImpression||(BIRF.Elements.Impressions.sendAll(),this.util.debug.log("Impressions flushed to log queue"))},this.emptyImpressionQueue=function(e){BIRF.config.disableImpression||BIRF.Elements.Impressions.send(e)},this.buildImpression=function(e,t,n){BIRF.config.disableImpression||(t?BIRF.Elements.Impressions.send:BIRF.Elements.Impressions.push)(e,n)},this.Elements.Impressions=function(e){var t={default:[]},i=function(e,t,n){var i={};if(t&&!/^false$/i.test(t)&&(!/^n$/i.test(t)||/^ct(?:_\d+)?/i.test(e)||/^lstg_typ(?:_\d+)?/i.test(e)||/^vid(?:_\d+)?/i.test(e)||/^cert_txt(?:_\d+)?/i.test(e)||/^cert_logo(?:_\d+)?/i.test(e))){if(!/cmp_\d+/i.test(e))return i[e]=t,i;n.unshift("&",e,"=",t)}},r=function(t){return e.util.JSON.toQueryString(t,i)},o=function(e,t){return e["cmp_"+(t=isNaN(t)||"number"!=typeof t||t<=0?1:t).toString()]=e.cmp,delete e.cmp,e},s=function(e){return e||"default"},u=function(e){var i,u,l,c,g="";if("string"==typeof e&&/cmp=/gi.test(e))e=n.util.URLSearchObject(e).keys,c=o(e,1),g=r(c);else if("string"!=typeof e&&e)"object"==typeof e&&(c=o(e,1),g=r(c));else{for(psGroup=s(e),u=(l=t[psGroup]||[]).length,i=0;i<u;i++)c=o(l[i],i+1),g+=r(c);delete t[psGroup]}g&&n.BI$Logger.Logger.logImpression(g,a.me())};return{toQueryString:function(e){var n,i,a,u,l,c,g,f=[];if(e=s(e),(l=t[e])&&l.length)for(a=0,u=l.length;a<u;a++)if((c=l[a])&&c.length)for(n=0,i=c.length;n<i;n++)g=o(c[n],n+1),f.push(r(g));else g=o(c,1),f.push(r(g));return f.join("")},push:function(e,i){"string"==typeof e&&/cmp=/gi.test(e)&&(e=n.util.URLSearchObject(e).keys),i=s(i),t[i]=t[i]||[],t[i].push(e)},send:u,sendAll:function(){for(var e in t)u(e)}}}(this),this.dataIslandJSON=(b={},{clearHistory:function(){b={}},get:function(n){var i,r;if("string"==typeof n){if(void 0!==b[n])return b[n];if(void 0!==(n=n.split("."))[0]){if(void 0!==b[n.join(".")])return b[n.join(".")];for(var o=0,a=n.length;o<a;o++)if(r?r=i=r[n[o]]:i=r=e[n[o]],void 0===i)return void(b[n.join(".")]=t);return b[n.join(".")]=i,i}}}})}function c(t){var i=t||{},r=!1,o=null,s="",u=[],l=[],c=[],g={PAGE:1,ADVERTISEMENT:2,IMPRESSION:3,EVENT:4,SPAGE:5,AUDIT:6,SEARCH:7,NONE:null};i.chunkSize=void 0===i.chunkSize?2025:i.chunkSize,i.useAJAX=void 0===i.useAJAX||i.useAJAX,i.baseURL=void 0===i.baseURL?"":i.baseURL,i.headers=void 0===i.headers?{}:i.headers,i.timeout=void 0===i.timeout?250:i.timeout,i.purgeTimeout=void 0===i.purgeTimeout?500:i.purgeTimeout,o=new n.util.Sequencer(1,parseInt(65535,10));var f,d=n.util.ObjectContainer({onLogMessage:n.util.EventHook("onLogMessage"),onQueueMessage:n.util.EventHook("onQueueMessage")}),p=n.filterHooks,h=(f={},{set:function(e,t){f[e]=t||""},get:function(e){return f[e]||null}}),m=function(e,t,n){var i,r=[];if(n=void 0===n?"&":n,t=t||1700,e.length<=t)return r=[e];var o,a=t,s=0;do{o=(i=e.slice(s,a)).lastIndexOf(n),i.length>0&&o<1?i=(o=e.indexOf(n,s+1))<1?e.slice(s):e.slice(s,o):i.length===t&&(i=i.slice(0,o)),a=(s+=i.length+1)+t,r.push(i)}while(i.length>0);return r.slice(0,r.length-1)};function v(e,t,n,i,r,o,a){B(e,t,n,i,r,o,a,!0)}function B(e,t,n,i,r,o,a,s){(s=!!s)?l.push([t,n,i,r,o,a,e]):u.push([t,n,i,r,o,a,e]),d.$protected.onQueueMessage.notify({type:t,isPriority:null,async:a})}function b(e,t){for(;e.length;){var n=e.shift();t.apply(this,n)}}function I(){r&&(b(l,F),b(u,F))}function E(e,t,n){this.pauseMs=void 0===t||"number"!=typeof t?50:t,this.timeout=void 0===n||"number"!=typeof n?250:n,this.Request=e}function D(e,t,n,r){r=isNaN(r)?1:r,this.url=e,this.headers=n||{},this.async=t,this.pauseMs=i.useAJAX?50:250,this.attemptCount=0,this.maxAttempts=r}function F(e,t,a,l,c,f,v){n.util.debug.timeStart();var B,b,I,E,F,y,S=[],A=t=t||"",C=0;if(f=null==f||f,a=void 0===a||null===f?"&":a,r){if(t=p.$protected.onLog.filter(t),!e)return new D(t,f,l,c).get(),n.util.debug.timeEnd(),void d.$protected.onLogMessage.notify({logString:t,toString:function(){return t},type:null,async:f,msg:v});switch(I=o.getNext(),S.push(BIRF.config.logDomain),e){case g.PAGE:S.push("/no_cache/bi_page"),t=p.$protected.onPageLog.filter(t);break;case g.ADVERTISEMENT:S.push("/no_cache/bi_advr"),t=p.$protected.onAdvertisementLog.filter(t);break;case g.IMPRESSION:S.push("/no_cache/bi_imp"),t=p.$protected.onImpressionLog.filter(t),t=n._coreFilters.$protected.addImpUnderscore.filter(t);break;case g.EVENT:S.push("/no_cache/bi_event"),t=p.$protected.onEventLog.filter(t);break;case g.SEARCH:S.push("/no_cache/bi_event"),t=p.$protected.onEventLog.filter(t);var R=n.dataIslandJSON.get("BIRF.data.page.BIRF");/^true$/i.test(R.searchEvent)||(n.Static.instance.SID.update(n.Static.instance.PID.getNoCache()),n.setBaseParams());break;case g.SPAGE:S.push("/no_cache/bi_page"),t=p.$protected.onSubpageLog.filter(t);break;case g.AUDIT:S.push("/no_cache/bi_audit"),t=p.$protected.onAuditLog.filter(t);break;default:return}(E=t.match(/\b(pg\=|pg_\d+\=)([^&]*)/gi)||[])&&E.length>0&&(F=E[0].split("=")[1])&&(y=h.get(F)),y||(y=s),t=n._coreFilters.$protected.eventTypes.filter(t,{logTypes:g,tagType:e});var k=n._coreFilters.$protected.overrideLogParam.filter(y,t);y=k.baseParams,t=k.logString;var P=n._coreFilters.$protected.overridePgParam.filter(y,t);y=P.baseParams,t=P.logString,S.push(y),(C=(b=S.join("")).length)+100>=i.chunkSize&&(C=0);var T=i.chunkSize-C;t&&""!==(t=t.replace(/^[\?|&]/,""))&&S.push("&",t);for(var L=(B=m(t,T-25,a)).length,N=0;N<L;N++){var _=[b];_.push("&row=",I,"&seq=",N+1,"&tot=",L,"&tsp=1"),B[N]&&_.push("&",B[N]),new D(_.join(""),f,l,c).get()}e===g.IMPRESSION&&(S=[BIRF.config.logDomain,"/no_cache/bi_imp",y],A&&""!==(A=A.replace(/^[\?|&]/,""))&&S.push("&",A)),n.util.debug.timeEnd(),d.$protected.onLogMessage.notify({logString:S.join(""),type:e,async:f,msg:v})}else u.push([e,t,a])}return E.prototype.purge=function(){var e=new Date,t=0,i=this.Request,r=this.pauseMs,o=this.timeout;if("object"==typeof i&&void 0!==i.readyState)for(;i.readyState<2&&t<o;)n.util.Threads.freeze(r),t=new Date-e},D.prototype.get=function(){n.util.debug.log("BIRF request to: ",this.url);var t,r,o,a,s,u,l=this;if(!(++this.attemptCount>this.maxAttempts))if(i.useAJAX){if(!(t=function(){var t;return e.XMLHttpRequest?t=new XMLHttpRequest:e.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHttp")),t}()))return;try{for(var g in t.open("GET",this.url,!0),o=this.headers)o.hasOwnProperty(g)&&"string"==typeof g&&"string"==typeof o[g]&&t.setRequestHeader(g,decodeURIComponent(o[g])||"");this.async&&(t.onreadystatechange=function(){4===t.readyState&&(t.status<200||t.status>299)&&304!==t.status&&l.get()}),t.send(null),setTimeout("",1),this.async||(ndx=c.push(new E(t,this.pauseMs,i.timeout)),t.onreadystatechange=function(){t.readyState>2&&delete c[ndx-1]})}catch(e){}}else(r=document.createElement("img")).style.display="none",r.setAttribute("src",this.url),a=r,document.readyState&&"complete"!==document.readyState&&n.util.isIE()?n.util.domObserve(document,"readystatechange",(s=a,u=!0,function(e){"complete"==document.readyState&&u&&(document.body.appendChild(s),u=!1)})):document.body.appendChild(a),n.util.domObserve(r,"abort",(function(e){l.get()})),n.util.domObserve(r,"error",(function(e){l.get()})),this.async||n.util.Threads.freeze(this.pauseMs)},n.eventHooks.$public.onPageBeforeUnload.register(a.me("purgeRequests"),(function(){var e,t;t=new Date;for(var n=0,r=c.length;n<r;n++)try{if((e=c[n])&&e.purge&&e.purge(),new Date-t>i.purgeTimeout)break}catch(e){}})),{Events:d.$public,Filters:p.$public,Logger:{logPage:function(e,t){v({from:t},g.PAGE,e,null,null,3,!0)},logSearch:function(e,t){v({from:t},g.SEARCH,e,"&",null,1,!0)},logSPage:function(e,t){v({from:t},g.SPAGE,e,null,null,3,!0)},logEvent:function(e,t,n){B({from:n},g.EVENT,e,"&",null,1,!0===t),I()},logAudit:function(e,t){B({from:t},g.AUDIT,e,null,null,1,!0)},logImpression:function(e,t){B({from:t},g.IMPRESSION,e,"&cmp",null,3,!0)},log:function(e,t,n){B({from:n},g.NONE,e,null,t,1,!0),I()},logSync:function(e,t,n){B({from:n},g.NONE,e,null,t,1,!1),I()}},subPageHistory:h,getDynamicBaseParams:function(){var e=n.getBaseParams();return e.pg_inst=n.util.RandomID.getServerID(),e.pid=n.util.RandomID.getClientID(),e.rid=n.Static.instance.PID.get(),e},setBaseParams:function(e){var t=[];for(var i in e)n.util.isEmpty(e[i])||t.push("&",i,"=",e[i]);t[0]="?",s=t.join("")},options:i,processQueues:I,start:function(){r=!0,I()},stop:function(){r=!1}}}function g(e){var t,i,r=function(e){return BIRF.birfTagNS.get(e)},o=[0,null,null];return(t=(i=n.util.eventTarget(e)).getAttribute(r(i)+"log"))&&0!==t.length?(o[0]=!0,o[1]=i,o[2]=t,n.util.debug.log("mouseUpFilter - log target",i)):(i=n.util.findClosestWithAttribute(e,BIRF.attributeNS+"log"))?(t=i.getAttribute(r(i)+"log"))&&0!==t.length&&(o[0]=!0,o[1]=i,o[2]=t,n.util.debug.log("mouseUpFilter - log closest parent to target",i)):(i=n.util.findElement(e,"a"),!BIRF.config.disableGenericEvents&&i&&(o[0]=!0,o[1]=i,o[2]="link",n.util.debug.log("mouseUpFilter - log generic link",i))),o}function f(e,t,i){var r=function(e){return BIRF.birfTagNS.get(e)};!function(){var n,r;if("string"==typeof i&&0!==i.length)for(r=(n=i.split(",")).length;r-- >0;)a(e,t,n[r])}();function o(e){var t=e.getAttribute(r(e)+"ref"),i=e;if(t)for(var o=t.split("/"),a=0,s=o.length-1;a<s&&e;a++){var u=o[a].toString();switch(u){case".":case"":break;case"^":i=i.parentNode.firstChild;break;case"$":i=i.parentNode.lastChild;break;case"<":i=i.previousSibling;break;case">":i=i.nextSibling;break;case"..":i=i.parentNode;break;default:i=n.util.matchElementByTagName(i,u)}}return i}function a(e,t,i){var a,s,u,l,c,g,f,d,p,h,m;if(n.util.debug.log("mouseUp",{event:e,target:t,log:i,button:e.which}),t)switch(a=r(t),i.toLowerCase().replace(/\s/g,"")){case"component":h=new n.util.URLSearchObject,f="",p="",u="default";do{if((l=(c=t).getAttribute(a+"logtype"))&&(u=l),(g=c.getAttribute(a+"cmp"))&&(f=g),(d=c.getAttribute(a+"par"))&&(p=d),sExtra=c.getAttribute(a+"extra"),sExtra)for(var v in m=n.util.JSON.isJSONString(sExtra)?n.util.JSON.parse(sExtra):n.util.URLSearchObject(sExtra).keys)h.keys[v]=m[v];t=o(c)}while(t!==c);oTmpEl=c.cloneNode(!0),oTmpEl.setAttribute(a+"extra",h.toString()),oTmpEl.setAttribute(a+"cmp",f),oTmpEl.setAttribute(a+"par",p),"function"==typeof(s=BIRF.Events.Types.ElementClickLoggers[u])&&new s(oTmpEl,e,void 0).build().log();break;case"link":BIRF.logAnchorClick(e)}}}function d(){var e,t,i,r="";if(n.dataIslandJSON.get("BIRF.data.page.BIRF.pg")){var o=n.dataIslandJSON.get("BIRF.data.page.BIRF"),s=(t=o.logDomain)?((i=n.util.URL(t)).protocol=location.protocol,i.toString()):"";if(BIRF.extend(BIRF.config,{version:n.Static.instance.Properties.version=n.version,logDomain:n.Static.instance.Properties.logDomain=s,disableImpression:n.Static.instance.Properties.disableImpression=!!o.disableImpressions&&/^true$/i.test(o.disableImpressions),disablePageTag:n.Static.instance.Properties.disablePageTag=!!o.disablePageTag&&/^true$/i.test(o.disablePageTag),disableGenericEvents:n.Static.instance.Properties.disableGenericEvents=!!o.disableGenericEvents&&/^true$/i.test(o.disableGenericEvents),disableAudit:n.Static.instance.Properties.disableAudit=!!o.disableAudit&&/^true$/i.test(o.disableAudit),pg_inst:n.Static.instance.Properties.pg_inst=o.pg_inst||n.util.RandomID.getServerID(),pg:n.Static.instance.Properties.pg=o.pg||"",site:n.Static.instance.Properties.site=n.dataIslandJSON.get("BIRF.data.page.site.site")||""}),""===n.Static.instance.Properties.logDomain)return void n.util.debug.log("BIRF.logDomain missing or invalid!");r=function(){var e,t,i={},r=(t={pg:!1,pg_inst:!1,ref_url:!1,disablePageTag:!1,disableImpressions:!1,disableGenericEvents:!1},{include:function(e){return void 0===t[e]||t[e]}}),o=n.dataIslandJSON.get("BIRF.data.page.BIRF");for(var a in o)r.include(a)&&"object"!=typeof o[a]&&(i[a]=o[a]);return void 0!==o.lnx&&n.util.isNotEmpty(o.lnx)&&(i.lnx=o.lnx),i.ref_url=o.ref_url||document.referrer,i=n._coreFilters.$protected.dataIsland.filter(i),e=n.util.objectToQueryString(i,!0),n.util.debug.log("Data-island extracted"),e}(),e=""===(e=n.Static.instance.Properties.logDomain)?location.protocol.replace(/\:/g,"")+"://"+location.host:e,n.util.cookie.reset(),n.Static.instance.RID.setForPage(n.Static.instance.PID.get()),n.Static.instance.SID.setForPage(n.Static.instance.SID.get()),/^true$/i.test(o.searchEvent)&&n.Static.instance.SID.update(n.Static.instance.PID.getNoCache()),n.setBaseParams(),n.inited=!0,n.util.debug.log("PID, RID, SID, and base params persisted"),n.BI$Logger.options.useAJAX=!!n.config.useAjax&&!n.util.isCrossDomain(),n.BI$Logger.options.baseURL=function(e){if(!e)return"";var t=n.util.URL(e);return t.protocol=location.protocol,t.toString()}(e),n.eventHooks.$protected.onPageDataReady.notify({}),n.Static.instance.Properties.disablePageTag&&!n.shared.enablePageTag||(n.BI$Logger.Logger.logPage(r,a.me()),n.util.debug.log("bi_page tag processed")),n.shared.enablePageTag=!1,n.processAudit(),n.util.debug.log("Starting BI$Logger"),n.BI$Logger.start(),n.eventHooks.$protected.onLoggerStart.notify({})}else n.System.Callback(d,a.me())}function p(e){if(e.to===a.me()&&e.messageScope===n.System.Messaging.MessageScope.ModuleMessage)switch(e.messageType){case n.System.Messaging.MessagesType.RequestDirect:break;case n.System.Messaging.MessagesType.Callback:("function"==typeof e.messagePayload?e.messagePayload:function(){})()}}function h(e){n.eventHooks.$protected.onLog.notify(e)}function m(e){n.System.Callback(n.BI$Logger.processQueues,a.me())}function v(e){if(!e.ctrlKey&&1==e.which&&!n.config.disableClickDelay){var t=n.util.findElement(e,"a");t&&t.getAttribute(n.birfTagNS.get(t)+"cmp")&&n.util.isAnchorDelayable(t)&&(e.preventDefault(),BIRF.location.assign(t.href))}}function B(){n.processPageloadImpressions()}}(window),window,BIRF.namespace("BIRF.config.filterListeners.elementClickFilter"),BIRF.extend(BIRF.config.filterListeners.elementClickFilter,{init:function(){BIRF.api.Filters.ElementClickFilter.register("RemoveOnFilter",(function(e,t){var n=BIRF.util.URLSearchObject(e);return delete n.keys.on,n.toString()}))}}).init();